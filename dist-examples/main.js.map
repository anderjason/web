{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@anderjason/observable/dist/index.js","webpack:///./node_modules/skytree/dist/index.js","webpack:///./node_modules/@anderjason/util/dist/index.js","webpack:///./node_modules/@anderjason/geometry/dist/index.js","webpack:///./node_modules/skytree/dist/Actor/index.js","webpack:///./src/index.ts","webpack:///./node_modules/@anderjason/time/dist/index.js","webpack:///./node_modules/@anderjason/observable/dist/TypedEvent/index.js","webpack:///./node_modules/@anderjason/color/dist/Color/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Point2/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Vector2/index.js","webpack:///./node_modules/@anderjason/web/dist/index.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/numberWithHardLimit.js","webpack:///./node_modules/@anderjason/util/dist/PromiseUtil/_internal/asyncSequenceGivenArrayAndCallback.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithNoCase.js","webpack:///./node_modules/@anderjason/color/dist/index.js","webpack:///./src/Corners/index.ts","webpack:///./src/ManagedElement/index.ts","webpack:///./node_modules/@anderjason/web/dist/Corners/index.js","webpack:///./node_modules/@anderjason/web/dist/ManagedElement/index.js","webpack:///./node_modules/@anderjason/web/dist/ElementStyle/index.js","webpack:///./node_modules/@anderjason/web/dist/NetworkUtil/_internal/blobGivenUrl.js","webpack:///./node_modules/@anderjason/web/dist/NetworkUtil/_internal/dataUrlGivenBlob.js","webpack:///./src/NetworkUtil/_internal/blobGivenUrl.ts","webpack:///./src/NetworkUtil/_internal/dataUrlGivenBlob.ts","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/index.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/objectWithDeepMerge.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithCamelCase.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithSpaceCase.js","webpack:///./node_modules/@anderjason/observable/dist/Receipt/index.js","webpack:///./node_modules/skytree/dist/ConditionalActivator/index.js","webpack:///./node_modules/skytree/dist/Timer/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Rotation/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Size2/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Line2/optionalLineIntersectionGivenPoints.js","webpack:///./node_modules/@anderjason/geometry/dist/Segment2/index.js","webpack:///./src/DynamicStyleElement/index.ts","webpack:///./src/ElementMountWatcher/index.ts","webpack:///./src/ElementStyle/index.ts","webpack:///./node_modules/stylis/dist/stylis.mjs","webpack:///./src/KeyboardWatcher/index.ts","webpack:///./src/LocationUtil/_internal/objectGivenQueryString.ts","webpack:///./src/LocationUtil/_internal/objectOfCurrentQueryString.ts","webpack:///./src/LocationUtil/_internal/queryStringGivenObject.ts","webpack:///./node_modules/@anderjason/web/dist/DynamicStyleElement/index.js","webpack:///./node_modules/@anderjason/web/dist/KeyboardWatcher/index.js","webpack:///./node_modules/@anderjason/web/dist/LocationUtil/_internal/objectGivenQueryString.js","webpack:///./node_modules/@anderjason/web/dist/LocationUtil/_internal/objectOfCurrentQueryString.js","webpack:///./node_modules/@anderjason/web/dist/LocationUtil/_internal/queryStringGivenObject.js","webpack:///./node_modules/@anderjason/web/dist/UndoContext/index.js","webpack:///./node_modules/fontfaceobserver/fontfaceobserver.standalone.js","webpack:///./node_modules/@anderjason/web/dist/Transform/_internal/Matrix/index.js","webpack:///./node_modules/@anderjason/web/dist/Transform/_internal/Vector/index.js","webpack:///./src/UndoContext/index.ts","webpack:///./src/Transform/_internal/Matrix/index.ts","webpack:///./src/Transform/_internal/Vector/index.ts","webpack:///./examples/src/index.ts","webpack:///./node_modules/@anderjason/observable/dist/Observable/index.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayIsEmptyOrNull.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithEqualSizeGroups.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithLeftShift.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithOrderFromValue.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithoutDuplicateValues.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithoutValue.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithPageSubset.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithReversedOrder.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithRightShift.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/arrayWithValue.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/numberArrayGivenRange.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/optionalIndexOfFirstMatchGivenArray.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/optionalLastValueGivenArray.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/optionalNthValueGivenArray.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/optionalRandomValueGivenArray.js","webpack:///./node_modules/@anderjason/util/dist/ArrayUtil/_internal/valueGivenArray.js","webpack:///./node_modules/@anderjason/util/dist/MapUtil/index.js","webpack:///./node_modules/@anderjason/util/dist/MapUtil/_internal/unionGivenMaps.js","webpack:///./node_modules/@anderjason/util/dist/MapUtil/_internal/differenceGivenMaps.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/index.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/floatGivenFloatLike.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/integerGivenIntegerLike.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/numberLikeIsIntegerLike.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/numberWithCycle.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/numberWithDecimalPlaceLimit.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/numberWithEasing.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/numberWithRangeMap.js","webpack:///./node_modules/@anderjason/util/dist/NumberUtil/_internal/randomNumberGivenRange.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/index.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/objectIsDeepEqual.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/objectIsEmpty.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/objectIsShallowEqual.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/objectWithoutBlankValues.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/objectWithValueAtPath.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/unionGivenObjects.js","webpack:///./node_modules/@anderjason/util/dist/ObjectUtil/_internal/optionalValueAtPathGivenObject.js","webpack:///./node_modules/@anderjason/util/dist/Percent/index.js","webpack:///./node_modules/@anderjason/util/dist/PromiseUtil/index.js","webpack:///./node_modules/@anderjason/util/dist/PromiseUtil/_internal/asyncDelayOfForever.js","webpack:///./node_modules/@anderjason/util/dist/PromiseUtil/_internal/asyncSequenceGivenCountAndCallback.js","webpack:///./node_modules/@anderjason/util/dist/PromiseUtil/_internal/asyncValueGivenArrayAndFilter.js","webpack:///./node_modules/@anderjason/util/dist/PromiseUtil/_internal/asyncValuesGivenArrayAndConverter.js","webpack:///./node_modules/@anderjason/util/dist/SetUtil/index.js","webpack:///./node_modules/@anderjason/util/dist/SetUtil/_internal/setIsEqual.js","webpack:///./node_modules/@anderjason/util/dist/SetUtil/_internal/intersectionGivenSets.js","webpack:///./node_modules/@anderjason/util/dist/SetUtil/_internal/setWithItem.js","webpack:///./node_modules/@anderjason/util/dist/SetUtil/_internal/setWithoutItem.js","webpack:///./node_modules/@anderjason/util/dist/SetUtil/_internal/differenceGivenSets.js","webpack:///./node_modules/@anderjason/util/dist/SetUtil/_internal/unionGivenSets.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/index.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringOfRandomCharacters.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringIsEmpty.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithCase.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithInitialCapital.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithKebabCase.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithOnlyInitialCapital.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithPascalCase.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithSnakeCase.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithEachMatchReplaced.js","webpack:///./node_modules/@anderjason/util/dist/StringUtil/_internal/stringWithReplacedTokens.js","webpack:///./node_modules/@anderjason/util/dist/ValuePath/index.js","webpack:///./node_modules/@anderjason/observable/dist/ObservableArray/index.js","webpack:///./node_modules/@anderjason/observable/dist/ObservableDict/index.js","webpack:///./node_modules/@anderjason/observable/dist/ObservableSet/index.js","webpack:///./node_modules/@anderjason/observable/dist/ReadOnlyObservable/index.js","webpack:///./node_modules/@anderjason/observable/dist/ReadOnlyObservableArray/index.js","webpack:///./node_modules/@anderjason/observable/dist/ReadOnlyObservableDict/index.js","webpack:///./node_modules/@anderjason/observable/dist/ReadOnlyObservableSet/index.js","webpack:///./examples/src/IntersectionWatcherDemo/index.ts","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/hsbGivenRgbFloat.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/hslGivenRgbFloat.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/labGivenHcl.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/labGivenXyz.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/hclGivenLab.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/rgbFloatGivenHsl.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/rgbFloatGivenXyz.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/hsbStringGivenHsb.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/hslStringGivenHsl.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/rgbStringGivenRgbFloat.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/xyzGivenLab.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/xyzGivenRgbFloat.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/rgbFloatGivenHex.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/hexGivenRgb.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/highContrastColorGivenColor.js","webpack:///./node_modules/@anderjason/color/dist/Color/_internal/distanceGivenColors.js","webpack:///./node_modules/@anderjason/color/dist/ColorGradient/index.js","webpack:///./node_modules/@anderjason/color/dist/ColorGradient/_internal/hclInterpolatedColorOfColors.js","webpack:///./node_modules/@anderjason/color/dist/ColorGradient/_internal/hclInterpolatedColorOfTwoColors.js","webpack:///./node_modules/@anderjason/color/dist/ColorGradient/_internal/rgbInterpolatedColorOfColors.js","webpack:///./node_modules/@anderjason/color/dist/ColorGradient/_internal/rgbInterpolatedColorOfTwoColors.js","webpack:///./node_modules/@anderjason/color/dist/ColorGradient/_internal/hclStepsOfColorGradient.js","webpack:///./node_modules/@anderjason/color/dist/ColorGradient/_internal/rgbStepsOfColorGradient.js","webpack:///./node_modules/@anderjason/color/dist/Palette/index.js","webpack:///./node_modules/@anderjason/color/dist/Palette/_internal/colorsGivenCanvasImageSource.js","webpack:///./src/CanvasUtil/index.ts","webpack:///./src/CanvasUtil/_internal/blobGivenCanvas.ts","webpack:///./src/CanvasUtil/_internal/canvasGivenBlob.ts","webpack:///./src/CheckboxBinding/index.ts","webpack:///./node_modules/skytree/dist/ArrayActivator/index.js","webpack:///./node_modules/skytree/dist/ConvertBinding/index.js","webpack:///./node_modules/skytree/dist/SourceTargetBinding/index.js","webpack:///./node_modules/skytree/dist/DelayActivator/index.js","webpack:///./node_modules/skytree/dist/ExclusiveActivator/index.js","webpack:///./node_modules/skytree/dist/MultiBinding/index.js","webpack:///./node_modules/skytree/dist/PathBinding/index.js","webpack:///./node_modules/skytree/dist/SequentialWorker/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Box2/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Line2/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Polygon2/index.js","webpack:///./node_modules/@anderjason/geometry/dist/Polygon2/_internal/svgPathStringGivenPolygon.js","webpack:///./node_modules/@anderjason/geometry/dist/Segment2/_internal/segmentWithClippingBox.js","webpack:///./src/Corners/_internal/cornersGivenContainedPoints.ts","webpack:///./src/Corners/_internal/GrahamScan.ts","webpack:///./src/Corners/_internal/cornersWithAlignment.ts","webpack:///./src/Corners/_internal/totalDistanceGivenPointArrays.ts","webpack:///./src/ElementSizeWatcher/index.ts","webpack:///./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/ElementStyle/_internal/componentStyleToPreparedDomAction.ts","webpack:///./src/ElementStyle/_internal/defineCssClass.ts","webpack:///./src/EveryFrame/index.ts","webpack:///./src/FocusWatcher/index.ts","webpack:///./src/IntersectionWatcher/index.ts","webpack:///./src/KeyboardShortcut/index.ts","webpack:///./src/LocationUtil/index.ts","webpack:///./src/LocationUtil/_internal/currentHostIsLocal.ts","webpack:///./src/LocationUtil/_internal/updateCurrentQueryString.ts","webpack:///./src/ManagedCanvas/index.ts","webpack:///./node_modules/@anderjason/web/dist/CanvasUtil/index.js","webpack:///./node_modules/@anderjason/web/dist/CanvasUtil/_internal/blobGivenCanvas.js","webpack:///./node_modules/@anderjason/web/dist/CanvasUtil/_internal/canvasGivenBlob.js","webpack:///./node_modules/@anderjason/web/dist/CheckboxBinding/index.js","webpack:///./node_modules/@anderjason/web/dist/Corners/_internal/cornersGivenContainedPoints.js","webpack:///./node_modules/@anderjason/web/dist/Corners/_internal/GrahamScan.js","webpack:///./node_modules/@anderjason/web/dist/Corners/_internal/cornersWithAlignment.js","webpack:///./node_modules/@anderjason/web/dist/Corners/_internal/totalDistanceGivenPointArrays.js","webpack:///./node_modules/@anderjason/web/dist/ElementBoundsWatcher/index.js","webpack:///./node_modules/@anderjason/web/dist/ElementStyle/_internal/componentStyleToPreparedDomAction.js","webpack:///./node_modules/@anderjason/web/dist/ElementStyle/_internal/defineCssClass.js","webpack:///./node_modules/@anderjason/web/dist/EveryFrame/index.js","webpack:///./node_modules/@anderjason/web/dist/FocusWatcher/index.js","webpack:///./node_modules/@anderjason/web/dist/IntersectionWatcher/index.js","webpack:///./node_modules/@anderjason/web/dist/KeyboardShortcut/index.js","webpack:///./node_modules/@anderjason/web/dist/LocationUtil/index.js","webpack:///./node_modules/@anderjason/web/dist/LocationUtil/_internal/currentHostIsLocal.js","webpack:///./node_modules/@anderjason/web/dist/LocationUtil/_internal/updateCurrentQueryString.js","webpack:///./node_modules/@anderjason/web/dist/NetworkUtil/index.js","webpack:///./node_modules/@anderjason/web/dist/NetworkUtil/_internal/dataUrlGivenUrl.js","webpack:///./node_modules/@anderjason/web/dist/NetworkUtil/_internal/imageBitmapGivenUrl.js","webpack:///./node_modules/@anderjason/web/dist/NetworkUtil/_internal/scriptGivenUrl.js","webpack:///./node_modules/@anderjason/web/dist/ObservableState/index.js","webpack:///./node_modules/@anderjason/web/dist/ObservableState/_internal/ObservableStateBinding/index.js","webpack:///./node_modules/@anderjason/web/dist/Pointer/index.js","webpack:///./node_modules/@anderjason/web/dist/Pointer/PendingClick.js","webpack:///./node_modules/@anderjason/time/dist/Debounce/index.js","webpack:///./node_modules/@anderjason/time/dist/Duration/index.js","webpack:///./node_modules/@anderjason/time/dist/Instant/index.js","webpack:///./node_modules/@anderjason/time/dist/Throttle/index.js","webpack:///./node_modules/@anderjason/web/dist/Pointer/TouchVisualizer.js","webpack:///./node_modules/@anderjason/web/dist/Preload/index.js","webpack:///./node_modules/@anderjason/web/dist/NetworkUtil/_internal/videoMetadataGivenUrl.js","webpack:///./node_modules/@anderjason/web/dist/ScreenSize/index.js","webpack:///./node_modules/@anderjason/web/dist/ScrollArea/index.js","webpack:///./node_modules/@anderjason/web/dist/ScrollWatcher/index.js","webpack:///./node_modules/@anderjason/web/dist/SequentialChoice/index.js","webpack:///./node_modules/@anderjason/web/dist/StepDelayBinding/index.js","webpack:///./node_modules/@anderjason/web/dist/TextInputBinding/index.js","webpack:///./node_modules/@anderjason/web/dist/Transform/index.js","webpack:///./node_modules/@anderjason/web/dist/Transform/_internal/matrixTransformGivenCorners.js","webpack:///./src/NetworkUtil/index.ts","webpack:///./src/NetworkUtil/_internal/dataUrlGivenUrl.ts","webpack:///./src/NetworkUtil/_internal/imageBitmapGivenUrl.ts","webpack:///./src/NetworkUtil/_internal/scriptGivenUrl.ts","webpack:///./src/ObservableState/index.ts","webpack:///./src/ObservableState/_internal/ObservableStateBinding/index.ts","webpack:///./src/Pointer/index.ts","webpack:///./src/Pointer/PendingClick.ts","webpack:///./src/Preload/index.ts","webpack:///./src/NetworkUtil/_internal/videoMetadataGivenUrl.ts","webpack:///./src/ScreenSize/index.ts","webpack:///./src/ScrollArea/index.ts","webpack:///./src/ScrollWatcher/index.ts","webpack:///./src/SequentialChoice/index.ts","webpack:///./src/StepDelayBinding/index.ts","webpack:///./src/TextInputBinding/index.ts","webpack:///./src/Transform/index.ts","webpack:///./src/Transform/_internal/matrixTransformGivenCorners.ts","webpack:///./examples/src/IntersectionWatcherDemo/ActiveBox.ts","webpack:///./examples/src/ScrollAreaDemo/index.ts","webpack:///./node_modules/@anderjason/example-tools/dist/index.js","webpack:///./node_modules/@anderjason/example-tools/dist/ExamplesHome/index.js","webpack:///./node_modules/@anderjason/example-tools/dist/ExamplesHome/_internal/ExamplesSection/index.js","webpack:///./node_modules/@anderjason/example-tools/dist/ExamplesHome/_internal/ExamplesSidebar/index.js","webpack:///./examples/src/UndoDemo/index.ts","webpack:///./examples/src/KeyboardWatcherDemo/index.ts","webpack:///./examples/src/ElementSizeWatcherDemo/index.ts","webpack:///./examples/src/TransitionDemo/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TypedEvent","Receipt","ReadOnlyObservableSet","ReadOnlyObservableDict","ReadOnlyObservableArray","ReadOnlyObservable","ObservableSet","ObservableDict","ObservableArray","Observable","Observable_1","ObservableArray_1","ObservableDict_1","ObservableSet_1","ReadOnlyObservable_1","ReadOnlyObservableArray_1","ReadOnlyObservableDict_1","ReadOnlyObservableSet_1","Receipt_1","TypedEvent_1","Timer","SequentialWorker","PathBinding","MultiBinding","ExclusiveActivator","DelayActivator","SourceTargetBinding","ConvertBinding","ConditionalActivator","ArrayActivator","Actor","Actor_1","ArrayActivator_1","ConditionalActivator_1","ConvertBinding_1","SourceTargetBinding_1","DelayActivator_1","ExclusiveActivator_1","MultiBinding_1","PathBinding_1","SequentialWorker_1","Timer_1","ValuePath","StringUtil","SetUtil","PromiseUtil","Percent","ObjectUtil","NumberUtil","MapUtil","ArrayUtil","ArrayUtil_1","MapUtil_1","NumberUtil_1","ObjectUtil_1","Percent_1","PromiseUtil_1","SetUtil_1","StringUtil_1","ValuePath_1","Vector2","Size2","Rotation","Polygon2","Point2","Segment2","Line2","Box2","Box2_1","Line2_1","Point2_1","Polygon2_1","Rotation_1","Segment2_1","Size2_1","Vector2_1","util_1","observable_1","props","this","_receipts","ofEmpty","receipts","givenObservableSet","_parentObject","parentObject","givenObservable","_childObjects","childObjects","givenObservableArray","_isActive","givenValue","isActive","_props","actorId","stringOfRandomCharacters","_thisReceipt","deactivate","_activeSet","addValue","setValue","toValues","forEach","child","activate","onActivate","removeValue","toArray","receipt","cancel","clear","undefined","childObject","removeActor","toIndexOfValue","err","console","error","activeSet","CanvasUtil","CheckboxBinding","Corners","DynamicStyleElement","ElementMountWatcher","ElementSizeWatcher","ElementStyle","EveryFrame","FocusWatcher","IntersectionWatcher","KeyboardShortcut","KeyboardWatcher","LocationUtil","ManagedCanvas","ManagedElement","NetworkUtil","ObservableState","Pointer","Preload","ScreenSize","ScrollArea","ScrollWatcher","SequentialChoice","StepDelayBinding","TextInputBinding","Transform","UndoContext","Throttle","Instant","Duration","Debounce","Debounce_1","Duration_1","Instant_1","Throttle_1","lastValue","_subscriptions","_lastValue","subscription","includeLast","push","unsubscribe","newValue","previousValue","asyncSequenceGivenArrayAndCallback","async","handler","arrayWithoutValue","length","Color","hsbGivenRgbFloat_1","hslGivenRgbFloat_1","labGivenHcl_1","labGivenXyz_1","hclGivenLab_1","rgbFloatGivenHsl_1","rgbFloatGivenXyz_1","hsbStringGivenHsb_1","hslStringGivenHsl_1","rgbStringGivenRgbFloat_1","xyzGivenLab_1","xyzGivenRgbFloat_1","rgbFloatGivenHex_1","hexGivenRgb_1","highContrastColorGivenColor_1","distanceGivenColors_1","labColor","alpha","_labColor","_alpha","a","b","isEqual","hslColor","givenFraction","givenRgbFloat","rgbFloatGivenHsl","hexColor","rgbFloatGivenHex","hclColor","labGivenHcl","rgbColor","labGivenXyz","xyzGivenRgbFloat","g","intColor","alphaString","Math","round","numberWithHardLimit","toString","padStart","hex","givenHexString","otherColor","obj","JSON","stringify","absoluteLightness","relativeLightness","withLightness","absoluteHue","hslGivenRgbFloat","toRgbFloatColor","h","relativeHue","toNumber","withHue","absoluteSaturation","hclGivenLab","relativeSaturation","withSaturation","absoluteAlpha","distanceGivenColors","toRgbString","_hexString","hexGivenRgb","rgbFloatGivenXyz","xyzGivenLab","rgbStringGivenRgbFloat","hslStringGivenHsl","toHslColor","hsbGivenRgbFloat","hsbStringGivenHsb","toHsbColor","highContrastColorGivenColor","parseInt","toHexString","slice","x","y","_x","_y","_zero","other","toVector","toMagnitude","givenXY","vector","center","rotation","cos","radians","sin","point","startPoint","endPoint","input","sqrt","dot","toDotProduct","magnitude","givenRadians","acos","atan2","PI","withDividedScalar","direction","rad","ox","oy","weight","x1","withMultipliedScalar","y1","withAddedVector","ElementBoundsWatcher","CanvasUtil_1","CheckboxBinding_1","Corners_1","DynamicStyleElement_1","ElementBoundsWatcher_1","ElementStyle_1","EveryFrame_1","FocusWatcher_1","IntersectionWatcher_1","KeyboardShortcut_1","KeyboardWatcher_1","LocationUtil_1","ManagedElement_1","NetworkUtil_1","ObservableState_1","Pointer_1","Preload_1","ScreenSize_1","ScrollArea_1","ScrollWatcher_1","SequentialChoice_1","StepDelayBinding_1","TextInputBinding_1","Transform_1","UndoContext_1","min","max","array","fn","index","stringWithNoCase","hasSpace","hasSeparator","hasCamel","separatorSplitter","camelSplitter","Error","test","toLowerCase","replace","next","unseparate","previous","uppers","split","join","uncamelize","Palette","ColorGradient","Color_1","ColorGradient_1","Palette_1","leftTop","rightTop","rightBottom","leftBottom","box","toLeftTop","toRightTop","toRightBottom","toLeftBottom","points","cornersGivenContainedPoints","fuzzy","otherSize","toSize","thisSize","differenceX","abs","width","differenceY","height","_size","toDistance","givenWidthHeight","transform","toTransformedPoint","alignToCorners","cornersWithAlignment","definition","super","element","document","createElement","tagName","innerHTML","_transitionIn","transitionIn","_transitionOut","transitionOut","classNames","classes","Array","isArray","givenValues","parentElement","isObservable","isStrictEqual","style","classesChangedReceipt","className","cancelOnDeactivate","didChange","subscribe","removeChild","appendChild","watchDomVisibility","didChangeSteps","changes","change","type","classList","add","remove","listener","options","addEventListener","removeEventListener","elementMountWatcher","addActor","isElementMounted","isMounted","requestAnimationFrame","catch","warn","geometry_1","cornersGivenContainedPoints_1","cornersWithAlignment_1","skytree_1","cleanup","then","componentStyleToPreparedDomAction_1","css","_modifiers","modifiers","randomString","_className","allClassNames","has","componentStyleToPreparedDomAction","keys","modifierKeys","toClassNames","result","modifierKey","stringWithCase","toCombinedClassName","classNamesByModifierName","Map","toModifierKeys","modifierName","set","givenDefinition","constantClassNames","Set","blobGivenUrl","url","response","fetch","blob","dataUrlGivenBlob","Promise","resolve","reject","fileReader","FileReader","onloadend","onerror","readAsDataURL","init","arrayIsEmptyOrNull_1","arrayWithEqualSizeGroups_1","arrayWithLeftShift_1","arrayWithOrderFromValue_1","arrayWithoutDuplicateValues_1","arrayWithoutValue_1","arrayWithPageSubset_1","arrayWithReversedOrder_1","arrayWithRightShift_1","arrayWithValue_1","numberArrayGivenRange_1","optionalIndexOfFirstMatchGivenArray_1","optionalLastValueGivenArray_1","optionalNthValueGivenArray_1","optionalRandomValueGivenArray_1","valueGivenArray_1","arrayIsEmptyOrNull","arrayWithEqualSizeGroups","arrayWithLeftShift","arrayWithOrderFromValue","arrayWithoutDuplicateValues","arrayWithPageSubset","arrayWithReversedOrder","arrayWithRightShift","arrayWithValue","numberArrayGivenRange","optionalIndexOfFirstMatchGivenArray","optionalLastValueGivenArray","optionalNthValueGivenArray","optionalRandomValueGivenArray","valueGivenArray","defaultIsMergeableObject","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","objectWithDeepMerge","for","cloneUnlessOtherwiseSpecified","isMergeableObject","clone","val","defaultArrayMerge","target","source","concat","map","arrayMerge","sourceIsArray","destination","mergeObject","stringWithCamelCase","stringWithSpaceCase_1","stringWithSpaceCase","matches","letter","toUpperCase","stringWithNoCase_1","match","trim","cancelFunction","_all","_cancelFunction","delete","arguments","_output","output","newActor","actor","isRepeating","_timeout","setInterval","duration","toMilliseconds","clearInterval","setTimeout","clearTimeout","degrees","_width","_height","_half","availableSize","scaleMode","isZero","scaleX","scaleY","scale","toScale","size","optionalLineIntersectionGivenPoints","__1","startA","endA","startB","endB","denominator","numerator1","numerator2","onLine1","onLine2","optionalLineIntersectionGivenPoints_1","segmentWithClippingBox_1","half","_start","_end","x2","y2","infinite","pnt","linePnt","lineDir","givenPoints","withNormalizedMagnitude","withSubtractedVector","toPoint","line","len","startVector","givenPoint","toIntermediatePoint","percent","toOptionalIntersectionGivenSegment","distance","fromPoint","segmentWithClippingBox","_innerHTML","_classNamesByModifierName","_constantClassNames","managed","managedElement","_managedElement","from","activeClassNames","updateClassNames","addManagedEventListener","setModifier","_isElementMounted","_isWatching","MutationObserver","mutationsList","observer","watcher","watcherByElement","values","offsetParent","observe","body","childList","subtree","watchAllOnce","v","e","u","f","w","$","k","String","fromCharCode","z","exec","j","indexOf","charCodeAt","C","A","M","O","S","q","B","D","E","F","G","H","root","parent","children","column","return","I","J","K","L","N","P","Q","R","T","U","Y","V","X","W","_","Z","ee","re","ce","ne","ae","te","se","ue","ie","fe","oe","le","_keys","onKeyDown","repeat","onKeyUp","_instance","window","controlKey","altKey","shiftKey","queryString","stringIsEmpty","text","part","splitPart","decodeURIComponent","objectGivenQueryString","location","search","pairs","encodeURIComponent","removeModifier","addModifier","objectOfCurrentQueryString","objectGivenQueryString_1","queryStringGivenObject","initialValue","limit","_currentStep","currentStep","_undoStack","_redoStack","_canUndo","canUndo","_canRedo","canRedo","_limit","addStep","step","objectIsDeepEqual","pop","attachEvent","setAttribute","createTextNode","cssText","offsetWidth","scrollLeft","scrollWidth","parentNode","family","stretch","fonts","font","load","Date","getTime","navigator","vendor","userAgent","race","readyState","detachEvent","dir","hidden","Matrix","Vector_1","elements","rows","rowsCopy","row","col","cols","isSquare","toDeterminant","rightTriangular","withRightTriangular","givenRows","withClone","multiplier","rowIndex","colIndex","result2d","matrix","sum","nj","columnIndex","Vector","thisClone","isSingular","withAugumentedMatrix","ofIdentity","np","divisor","newElement","inverseElements","Matrix_1","thisAsMatrix","givenRow","withMultipliedMatrix","toColumnVector","_currentIndex","currentIndex","_steps","steps","pushStep","removeAllWhere","count","removeValueAtIndex","setCurrentIndex","replaceValueAtIndex","clearBehavior","current","sync","toOptionalValueGivenIndex","definitions","title","TransitionDemo","ElementSizeWatcherDemo","IntersectionWatcherDemo","ScrollAreaDemo","UndoDemo","KeyboardWatcherDemo","ExamplesHome","filter","_isObservable","discardFilter","oldValue","_value","discard","emit","groupSize","shift","getSortableValue","sort","valueA","valueB","seen","item","excludeValue","startIndex","pageSize","start","end","reverse","unshift","allowDuplicates","firstNumber","lastNumber","isMatch","floor","random","unionGivenMaps_1","differenceGivenMaps_1","unionGivenMaps","differenceGivenMaps","iterables","iterable","defaultIsValueEqual","thisValue","otherValue","thisMap","otherMap","isValueEqual","addedItems","changedItems","removedItems","allKeys","floatGivenFloatLike_1","integerGivenIntegerLike_1","numberLikeIsIntegerLike_1","numberWithCycle_1","numberWithDecimalPlaceLimit_1","numberWithEasing_1","numberWithHardLimit_1","numberWithRangeMap_1","randomNumberGivenRange_1","floatGivenFloatLike","integerGivenIntegerLike","numberWithDecimalPlaceLimit","numberWithEasing","numberWithRangeMap","numberWithCycle","randomNumberGivenRange","numberLikeIsIntegerLike","parseFloat","isNaN","Number","isInteger","time","cycleLength","digitsAfterDecimalPoint","toFixed","pow","c1","c2","c4","c5","bounceOut","n1","d1","inputLow","inputHigh","outputLow","outputHigh","objectIsDeepEqual_1","objectIsEmpty_1","objectIsShallowEqual_1","objectWithDeepMerge_1","objectWithoutBlankValues_1","objectWithValueAtPath_1","unionGivenObjects_1","optionalValueAtPathGivenObject_1","objectIsEmpty","objectIsShallowEqual","objectWithoutBlankValues","objectWithValueAtPath","unionGivenObjects","optionalValueAtPathGivenObject","ka","kb","isUndefinedOrNull","isArguments","isBuffer","objEquiv","copy","valuePath","parts","toParts","assign","pointer","objects","reduce","prev","includes","numerator","_full","fractionDigits","isFull","asyncDelayOfForever_1","asyncSequenceGivenArrayAndCallback_1","asyncSequenceGivenCountAndCallback_1","asyncValueGivenArrayAndFilter_1","asyncValuesGivenArrayAndConverter_1","asyncDelayOfForever","asyncSequenceGivenCountAndCallback","asyncValueGivenArrayAndFilter","asyncValuesGivenArrayAndConverter","Function","times","idx","elementResult","setIsEqual_1","intersectionGivenSets_1","setWithItem_1","setWithoutItem_1","differenceGivenSets_1","unionGivenSets_1","setIsEqual","intersectionGivenSets","differenceGivenSets","unionGivenSets","setWithItem","setWithoutItem","firstSet","secondSet","allMatch","sets","smallestSet","otherSets","every","otherSet","setItem","thisSet","otherSetCopy","stringOfRandomCharacters_1","stringIsEmpty_1","stringWithCase_1","stringWithEachMatchReplaced_1","stringWithReplacedTokens_1","stringWithEachMatchReplaced","stringWithReplacedTokens","chars","charactersLength","charAt","str","stringWithCamelCase_1","stringWithInitialCapital_1","stringWithKebabCase_1","stringWithOnlyInitialCapital_1","stringWithPascalCase_1","stringWithSnakeCase_1","stringCase","stringWithInitialCapital","stringWithOnlyInitialCapital","stringWithKebabCase","stringWithPascalCase","stringWithSnakeCase","camel","regex","replaceText","variables","unmatchedTokenBehavior","RegExp","pathParts","_pathParts","some","path","thisString","otherString","startsWith","isAncestorOf","descendant","isDescendantOf","pathString","_isObservableArray","_array","updates","oldIndex","splice","newIndex","_internalMove","minIndex","maxIndex","offset","adds","removes","moves","matchingAdd","find","removedCount","update","fromIndex","dictGivenObject","dict","_isObservableDict","_map","inputKeys","_isObservableSet","_set","newSet","diff","toSet","observable","_observable","observableArray","_observableArray","hasValue","observableDict","_observableDict","hasKey","toOptionalValueGivenKey","toKeys","observableSet","_observableSet","isVisible","wrapper","scrollPositionColor","el","ActiveBox","rgbFloatColor","delta","delR","delG","delB","delMax","DEG2RAD","xyzColor","RAD2DEG","NaN","getRgbComponent","v1","v2","vH","var1","var2","hsbColor","hexRegex","substr","hexR","hexG","hexB","toHclColor","ofZero","colorA","colorB","labA","toLabColor","labB","hclInterpolatedColorOfColors_1","rgbInterpolatedColorOfColors_1","hclStepsOfColorGradient_1","rgbStepsOfColorGradient_1","hclInterpolatedColorOfColors","rgbInterpolatedColorOfColors","stepCount","hclStepsOfColorGradient","rgbStepsOfColorGradient","hclInterpolatedColorOfTwoColors_1","colors","decimalRatioPerStep","lowerBoundIdx","upperBoundIdx","ceil","lowerColor","upperColor","partRatio","hclInterpolatedColorOfTwoColors","color1","color2","hcl1","hcl2","h1","l1","h2","l2","deltaH","givenHclFloat","rgbInterpolatedColorOfTwoColors_1","rgbInterpolatedColorOfTwoColors","rgb1","rgb2","r1","g1","b1","r2","g2","b2","colorGradient","totalSteps","toHclInterpolatedColor","toRgbInterpolatedColor","colorsGivenCanvasImageSource_1","_colors","imageSource","maxColors","colorsGivenCanvasImageSource","otherPalette","color","targetColor","distances","toDistanceGivenColor","toOptionalColorGivenIndex","toNearestIndexGivenColor","inputColor","findIndex","internalCanvas","ctx","getContext","drawImage","frequencyByHexString","samplePixel","getImageData","data","givenRgb255","sampleCount","results","frequency","clusters","needsCluster","removeHexColors","cluster","itemColor","inCluster","firstColor","blobGivenCanvas","canvasGivenBlob","canvas","toBlob","maxSize","img","Image","imageSmoothingEnabled","imageSmoothingQuality","clearRect","src","allowAll","inputElement","nodeName","_previousValue","checked","shouldPreventChange","_previousInput","isObservableArray","_observableInput","newInput","previousObject","newObject","latestChangeId","thisChangeId","convertedValue","_source","_target","setSource","setTarget","_sourceValueReceipt","removeCancelOnDeactivate","updateTarget","newSource","newTarget","shouldActivate","activateAfter","deactivateAfter","_lastObject","didInvalidate","_willInvalidateLater","_invalidatedSetByGroup","groups","group","inputs","invalidatedSet","onChange","isAnyGroupInvalidated","invalidateNow","bindingGroup","bindingGroupsByInput","bindings","binding","refresh","inputReceipt","refreshAllHavingInput","_jobs","_callbackByJob","_isBusy","startNextJob","callback","cancelledCallback","priority","state","job","nextJob","runJob","_center","domRect","givenTopLeftSize","left","top","pointA","pointB","minX","minY","maxX","maxY","givenCenterSize","topLeft","allX","allY","givenOppositeCorners","toLeft","toRight","toTop","toBottom","boundingBox","anchor","toScaledSize","centerX","centerY","toHalf","newSize","withAddedSize","_vector","_point","lineSegment","intercept","svgPathStringGivenPolygon_1","withRotation","givenDegrees","expanded","rotationDirection","isClockwise","deg90","thisPoint","prevPoint","nextPoint","vectorA","vectorB","vectorC","vectorD","pointC","pointD","lineSegmentA","lineSegmentB","intersection","cornerRadius","svgPathStringGivenPolygon","bottomRight","polygon","radius","pathCoords","c2Index","c3Index","c3","thisRadius","c1c2Distance","c2c3Distance","minDistance","threshold","c1c2DistanceRatio","c1c2CurvePoint","c2c3DistanceRatio","c2c3CurvePoint","mask","tab1","tab2","cross","Clip","x_min","x_max","y_min","y_max","pt","xA","xB","codeA","code","codeB","newXA","newXB","segment","clipRegion","clipLeftTop","clipRightBottom","clipLine","getArea","rectangle","deltaXAB","deltaYAB","deltaXBC","deltaYBC","getIndex","convexHull","corner","temp","getSmallestTheta","thetaI","getDeltaAngleNextPoint","thetaJ","thetaK","thetaL","rectanglesWithArea","rectangles","GrahamScan","getConvexHull","Caliper","currentAngle","rect","getIntersection","smallestTheta","rotateBy","getAllBoundingRectangles","area","rwa","lastArea","isSignificantlyDifferent","minimum","pointIndex","p1","p2","deltaX","deltaY","angle","getSlope","getAngleNextPoint","that","isVertical","isHorizontal","getConstant","tan","SIGMA","getTurn","sorted","getSortedPointSet","areAllCollinear","stack","head","middle","tail","lowest","getLowestPoint","thetaA","thetaB","crossProduct","alignment","candidateArrayA","toPoints","candidateArrayB","candidateArrayC","candidateArrayD","candidateArrayE","candidateArrayF","candidateArrayG","candidateArrayH","targetArray","arraysWithDistance","candidateArray","totalDistance","totalDistanceGivenPointArrays","bestCandidateArray","arrayWithDistance","difference","LocalResizeObserver","ResizeObserver","InternalElementSizeWatcher","bounds","contentRect","initialBounds","getBoundingClientRect","disconnect","_element","_activeWatcher","MapShim","arr","entry","class_1","__entries__","configurable","entries","_i","_a","isBrowser","global$1","global","self","requestAnimationFrame$1","now","transitionKeys","mutationObserverSupported","ResizeObserverController","connected_","mutationEventsAdded_","mutationsObserver_","observers_","onTransitionEnd_","delay","leadingCall","trailingCall","lastCallTime","resolvePending","proxy","timeoutCallback","timeStamp","throttle","addObserver","connect_","removeObserver","observers","disconnect_","updateObservers_","activeObservers","gatherActive","hasActive","broadcastActive","attributes","characterData","_b","propertyName","getInstance","instance_","defineConfigurable","writable","getWindowOf","ownerDocument","defaultView","emptyRect","createRectInit","toFloat","getBordersSize","styles","positions","position","getHTMLElementContentRect","clientWidth","clientHeight","getComputedStyle","paddings","positions_1","getPaddings","horizPad","right","vertPad","bottom","boxSizing","documentElement","isDocumentElement","vertScrollbar","horizScrollbar","isSVGGraphicsElement","SVGGraphicsElement","SVGElement","getBBox","getContentRect","bbox","getSVGContentRect","ResizeObservation","broadcastWidth","broadcastHeight","contentRect_","broadcastRect","ResizeObserverEntry","rectInit","Constr","DOMRectReadOnly","ResizeObserverSPI","controller","callbackCtx","activeObservations_","observations_","TypeError","callback_","controller_","callbackCtx_","Element","observations","unobserve","clearActive","_this","observation","WeakMap","method","apply","elementStyle","defineCssClass","toOptionalModifiers","modifierCss","modifierClassNames","styleElement","modifiedClassName","styleContent","serialize","compile","frameNumber","nextFrame","onFocus","onBlur","activeElement","InternalIntersectionWatcher","minimumVisiblePercent","IntersectionObserver","isElementVisible","isIntersecting","scrollElement","rootMargin","_isElementVisible","_isPressed","isPressed","keyCombination","joinedCombination","shortcuts","shortcutsByKeyCombination","onPress","givenKeyCombination","keyCombinations","combination","getShortcutsArray","instance","activeKeyCombination","currentHostIsLocal","updateCurrentQueryString","hostname","allValues","newQueryString","history","replaceState","pathname","_context","_canvas","devicePixelRatio","blobGivenCanvas_1","canvasGivenBlob_1","isChecked","GrahamScan_1","totalDistanceGivenPointArrays_1","InternalElementBoundsWatcher","givenDomRect","defineCssClass_1","stylis_1","currentHostIsLocal_1","objectOfCurrentQueryString_1","queryStringGivenObject_1","updateCurrentQueryString_1","dataUrlGivenUrl_1","blobGivenUrl_1","imageBitmapGivenUrl_1","scriptGivenUrl_1","dataUrlGivenBlob_1","dataUrlGivenUrl","imageBitmapGivenUrl","scriptGivenUrl","onload","crossOrigin","script","ObservableStateBinding_1","_state","_pathBindings","_undoContext","initialState","undoStep","innerHandle","ObservableStateBinding","observableState","inputValue","isUpdating","vccValue","outputValueGivenPartialState","partialStateGivenOutputValue","PendingClick_1","TouchVisualizer_1","didClick","didSingleClick","didDoubleClick","didStart","didEnd","_hoveredElement","hoveredElement","_referenceCountByTarget","_keyboardTouchActive","startTouch","_screenSpaceKeyboardTouchPoint","endTouch","onPointerDown","button","screenPoint","clientX","clientY","namedTouchPoint","isPrimary","isHandled","_pendingClick","pressButton","preventDefault","stopPropagation","onPointerMove","moveTouch","movePointer","onPointerUp","releaseButton","onPointerEnter","buttons","reset","_screenSpacePoint1","_screenSpacePoint2","updateTouchPosition","notifyPointsChanged","TouchVisualizer","touchSupport","PendingClick","onClick","onSingleClick","onDoubleClick","referenceCount","newCount","optionalTargetElementGivenScreenPoint","event","elementsFromPoint","first","second","time_1","pointIsNearPoint","_evaluateLongPressLater","givenSeconds","evaluateLongPress","newPoint","_targetPoint","invoke","notifyClick","notifyDoubleClick","notifySingleClick","args","_lastArgs","invokeNow","milliseconds","_milliseconds","seconds","givenMilliseconds","minutes","hours","givenMinutes","days","givenHours","toEpochMilliseconds","toSeconds","toMinutes","toHours","ms","givenDays","toDays","epochMilliseconds","_epochMilliseconds","_isBlocked","WrapperStyle","toManagedElement","id","point1","PointStyle","backgroundColor","point2","FontFaceObserver","videoMetadataGivenUrl_1","didLoadVideo","didLoadImage","didLoadFont","_isReady","isReady","_videoMetadataByUrl","_imageDataUrlByUrl","_loadedFontSet","_loadingVideoSet","_loadingFontSet","_loadingImageSet","_requestedFontSet","_sequentialWorker","addWork","loadImage","fontStyle","loadGoogleFont","loadVideo","imageUrl","addImage","addVideo","toPreloadedImageUrl","handle","loadedTextStyle","toVideoMetadataGivenUrl","dataUrl","checkReady","metadata","videoMetadataGivenUrl","link","href","rel","fontFamily","video","contentSize","videoWidth","videoHeight","_availableSize","_scrollbarSize","scrollbarSize","isPollingEnabled","_measureScrollbarLater","measureScrollbar","recalculateSize","measureScrollbarOuter","visibility","overflow","measureScrollbarInner","scrollbarWidth","scrollbarHeight","offsetHeight","outerWidth","innerWidth","innerHeight","outerHeight","styleGivenHexColor","stylesByHexColor","hexColorIdle","withAlpha","_wrapper","observableColor","onDirectionChanged","overflowX","overflowY","InternalScrollWatcher","onScroll","scrollTop","_position","_nextOption","nextOption","_previousOption","previousOption","_currentIdx","currentOption","previousIdx","selectNextOption","selectPreviousOption","stepsBehind","_displayText","displayText","_isEmpty","isEmpty","_rawInputValue","rawInputText","_inputElement","_previousDisplayText","_caretPosition","selectionStart","overrideText","valueGivenDisplayText","overrideDisplayText","previousDisplayText","onOverride","displayTextGivenValue","setCaretPosition","setSelectionRange","matrix3dOfIdentity","matrixTransformGivenCorners_1","vectorWithAppliedVectors","matrix3dGivenNumbers","constructor","matrix3d","number","corners","matrixTransformGivenCorners","source1","source2","destination1","destination2","rotate","vSource1","vSource2","vDest1","vDest2","alen","rotateScaleA","rotateScaleB","rs0","translation","toTranslation","toRotation","toDegrees","atan","skewX","toSkewX","skewY","toSkewY","toCssTranslation","toCssRotation","toCssScale","toCssSkew","inVertex","outVertex","otherA","otherB","toVectors","thisA","thisB","resultA","resultB","resultC","toTranslateVector","resultVector","newMatrix","identity","fromPts","toPts","inverseE","withInverse","transformMatrix","toOptionalValueGivenRowAndColumn","currentValue","includeCredentials","credentials","intersectionWatcher","outer","OuterStyle","scrollArea","ExamplesHome_1","color_1","web_1","ExamplesSection_1","ExamplesSidebar_1","mainArea","sidebarArea","SidebarAreaStyle","sidebarScroll","contentArea","ContentAreaStyle","contentScroll","ExamplesSidebar","ExamplesSection","demoActor","description","DescriptionStyle","CodeStyle","titleElement","demoArea","DemoAreaStyle","TitleStyle","LinkStyle","indicator","IndicatorStyle","buttonsArea","ButtonAreaStyle","sidebar","SidebarStyle","undoButton","ButtonStyle","redoButton","clearAndKeepButton","clearAllButton","undoContext","div","fontWeight","clearSteps","undo","redo","display","isDisabled","label","LabelStyle","BoundsStyle","toggleModifier","boundsWatcher","isSmall","wrapperParent","circle","CircleStyle","toDelay"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 56);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedEvent = exports.Receipt = exports.ReadOnlyObservableSet = exports.ReadOnlyObservableDict = exports.ReadOnlyObservableArray = exports.ReadOnlyObservable = exports.ObservableSet = exports.ObservableDict = exports.ObservableArray = exports.Observable = void 0;\nconst Observable_1 = require(\"./Observable\");\nObject.defineProperty(exports, \"Observable\", { enumerable: true, get: function () { return Observable_1.Observable; } });\nconst ObservableArray_1 = require(\"./ObservableArray\");\nObject.defineProperty(exports, \"ObservableArray\", { enumerable: true, get: function () { return ObservableArray_1.ObservableArray; } });\nconst ObservableDict_1 = require(\"./ObservableDict\");\nObject.defineProperty(exports, \"ObservableDict\", { enumerable: true, get: function () { return ObservableDict_1.ObservableDict; } });\nconst ObservableSet_1 = require(\"./ObservableSet\");\nObject.defineProperty(exports, \"ObservableSet\", { enumerable: true, get: function () { return ObservableSet_1.ObservableSet; } });\nconst ReadOnlyObservable_1 = require(\"./ReadOnlyObservable\");\nObject.defineProperty(exports, \"ReadOnlyObservable\", { enumerable: true, get: function () { return ReadOnlyObservable_1.ReadOnlyObservable; } });\nconst ReadOnlyObservableArray_1 = require(\"./ReadOnlyObservableArray\");\nObject.defineProperty(exports, \"ReadOnlyObservableArray\", { enumerable: true, get: function () { return ReadOnlyObservableArray_1.ReadOnlyObservableArray; } });\nconst ReadOnlyObservableDict_1 = require(\"./ReadOnlyObservableDict\");\nObject.defineProperty(exports, \"ReadOnlyObservableDict\", { enumerable: true, get: function () { return ReadOnlyObservableDict_1.ReadOnlyObservableDict; } });\nconst ReadOnlyObservableSet_1 = require(\"./ReadOnlyObservableSet\");\nObject.defineProperty(exports, \"ReadOnlyObservableSet\", { enumerable: true, get: function () { return ReadOnlyObservableSet_1.ReadOnlyObservableSet; } });\nconst Receipt_1 = require(\"./Receipt\");\nObject.defineProperty(exports, \"Receipt\", { enumerable: true, get: function () { return Receipt_1.Receipt; } });\nconst TypedEvent_1 = require(\"./TypedEvent\");\nObject.defineProperty(exports, \"TypedEvent\", { enumerable: true, get: function () { return TypedEvent_1.TypedEvent; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Timer = exports.SequentialWorker = exports.PathBinding = exports.MultiBinding = exports.ExclusiveActivator = exports.DelayActivator = exports.SourceTargetBinding = exports.ConvertBinding = exports.ConditionalActivator = exports.ArrayActivator = exports.Actor = void 0;\nconst Actor_1 = require(\"./Actor\");\nObject.defineProperty(exports, \"Actor\", { enumerable: true, get: function () { return Actor_1.Actor; } });\nconst ArrayActivator_1 = require(\"./ArrayActivator\");\nObject.defineProperty(exports, \"ArrayActivator\", { enumerable: true, get: function () { return ArrayActivator_1.ArrayActivator; } });\nconst ConditionalActivator_1 = require(\"./ConditionalActivator\");\nObject.defineProperty(exports, \"ConditionalActivator\", { enumerable: true, get: function () { return ConditionalActivator_1.ConditionalActivator; } });\nconst ConvertBinding_1 = require(\"./ConvertBinding\");\nObject.defineProperty(exports, \"ConvertBinding\", { enumerable: true, get: function () { return ConvertBinding_1.ConvertBinding; } });\nconst SourceTargetBinding_1 = require(\"./SourceTargetBinding\");\nObject.defineProperty(exports, \"SourceTargetBinding\", { enumerable: true, get: function () { return SourceTargetBinding_1.SourceTargetBinding; } });\nconst DelayActivator_1 = require(\"./DelayActivator\");\nObject.defineProperty(exports, \"DelayActivator\", { enumerable: true, get: function () { return DelayActivator_1.DelayActivator; } });\nconst ExclusiveActivator_1 = require(\"./ExclusiveActivator\");\nObject.defineProperty(exports, \"ExclusiveActivator\", { enumerable: true, get: function () { return ExclusiveActivator_1.ExclusiveActivator; } });\nconst MultiBinding_1 = require(\"./MultiBinding\");\nObject.defineProperty(exports, \"MultiBinding\", { enumerable: true, get: function () { return MultiBinding_1.MultiBinding; } });\nconst PathBinding_1 = require(\"./PathBinding\");\nObject.defineProperty(exports, \"PathBinding\", { enumerable: true, get: function () { return PathBinding_1.PathBinding; } });\nconst SequentialWorker_1 = require(\"./SequentialWorker\");\nObject.defineProperty(exports, \"SequentialWorker\", { enumerable: true, get: function () { return SequentialWorker_1.SequentialWorker; } });\nconst Timer_1 = require(\"./Timer\");\nObject.defineProperty(exports, \"Timer\", { enumerable: true, get: function () { return Timer_1.Timer; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValuePath = exports.StringUtil = exports.SetUtil = exports.PromiseUtil = exports.Percent = exports.ObjectUtil = exports.NumberUtil = exports.MapUtil = exports.ArrayUtil = void 0;\nconst ArrayUtil_1 = require(\"./ArrayUtil\");\nObject.defineProperty(exports, \"ArrayUtil\", { enumerable: true, get: function () { return ArrayUtil_1.ArrayUtil; } });\nconst MapUtil_1 = require(\"./MapUtil\");\nObject.defineProperty(exports, \"MapUtil\", { enumerable: true, get: function () { return MapUtil_1.MapUtil; } });\nconst NumberUtil_1 = require(\"./NumberUtil\");\nObject.defineProperty(exports, \"NumberUtil\", { enumerable: true, get: function () { return NumberUtil_1.NumberUtil; } });\nconst ObjectUtil_1 = require(\"./ObjectUtil\");\nObject.defineProperty(exports, \"ObjectUtil\", { enumerable: true, get: function () { return ObjectUtil_1.ObjectUtil; } });\nconst Percent_1 = require(\"./Percent\");\nObject.defineProperty(exports, \"Percent\", { enumerable: true, get: function () { return Percent_1.Percent; } });\nconst PromiseUtil_1 = require(\"./PromiseUtil\");\nObject.defineProperty(exports, \"PromiseUtil\", { enumerable: true, get: function () { return PromiseUtil_1.PromiseUtil; } });\nconst SetUtil_1 = require(\"./SetUtil\");\nObject.defineProperty(exports, \"SetUtil\", { enumerable: true, get: function () { return SetUtil_1.SetUtil; } });\nconst StringUtil_1 = require(\"./StringUtil\");\nObject.defineProperty(exports, \"StringUtil\", { enumerable: true, get: function () { return StringUtil_1.StringUtil; } });\nconst ValuePath_1 = require(\"./ValuePath\");\nObject.defineProperty(exports, \"ValuePath\", { enumerable: true, get: function () { return ValuePath_1.ValuePath; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector2 = exports.Size2 = exports.Rotation = exports.Polygon2 = exports.Point2 = exports.Segment2 = exports.Line2 = exports.Box2 = void 0;\nconst Box2_1 = require(\"./Box2\");\nObject.defineProperty(exports, \"Box2\", { enumerable: true, get: function () { return Box2_1.Box2; } });\nconst Line2_1 = require(\"./Line2\");\nObject.defineProperty(exports, \"Line2\", { enumerable: true, get: function () { return Line2_1.Line2; } });\nconst Point2_1 = require(\"./Point2\");\nObject.defineProperty(exports, \"Point2\", { enumerable: true, get: function () { return Point2_1.Point2; } });\nconst Polygon2_1 = require(\"./Polygon2\");\nObject.defineProperty(exports, \"Polygon2\", { enumerable: true, get: function () { return Polygon2_1.Polygon2; } });\nconst Rotation_1 = require(\"./Rotation\");\nObject.defineProperty(exports, \"Rotation\", { enumerable: true, get: function () { return Rotation_1.Rotation; } });\nconst Segment2_1 = require(\"./Segment2\");\nObject.defineProperty(exports, \"Segment2\", { enumerable: true, get: function () { return Segment2_1.Segment2; } });\nconst Size2_1 = require(\"./Size2\");\nObject.defineProperty(exports, \"Size2\", { enumerable: true, get: function () { return Size2_1.Size2; } });\nconst Vector2_1 = require(\"./Vector2\");\nObject.defineProperty(exports, \"Vector2\", { enumerable: true, get: function () { return Vector2_1.Vector2; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Actor = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst observable_1 = require(\"@anderjason/observable\");\nclass Actor {\n    constructor(props) {\n        this._receipts = observable_1.ObservableSet.ofEmpty();\n        this.receipts = observable_1.ReadOnlyObservableSet.givenObservableSet(this._receipts);\n        this._parentObject = observable_1.Observable.ofEmpty();\n        this.parentObject = observable_1.ReadOnlyObservable.givenObservable(this._parentObject);\n        this._childObjects = observable_1.ObservableArray.ofEmpty();\n        this.childObjects = observable_1.ReadOnlyObservableArray.givenObservableArray(this._childObjects);\n        this._isActive = observable_1.Observable.givenValue(false);\n        this.isActive = observable_1.ReadOnlyObservable.givenObservable(this._isActive);\n        this._props = props;\n        this.actorId = util_1.StringUtil.stringOfRandomCharacters(8);\n    }\n    get props() {\n        return this._props;\n    }\n    get managedObjectId() {\n        return this.actorId; // for backwards compatibility in v9\n    }\n    activate() {\n        if (this.isActive.value === false) {\n            this._thisReceipt = new observable_1.Receipt(() => {\n                this.deactivate();\n            });\n            Actor._activeSet.addValue(this);\n            this._isActive.setValue(true);\n            this._childObjects.toValues().forEach((child) => {\n                child.activate();\n            });\n            this.onActivate();\n        }\n        return this._thisReceipt;\n    }\n    deactivate() {\n        if (this._thisReceipt == null) {\n            return;\n        }\n        Actor._activeSet.removeValue(this);\n        this._isActive.setValue(false);\n        this._receipts.toArray().forEach((receipt) => {\n            receipt.cancel();\n        });\n        this._receipts.clear();\n        this._childObjects.toValues().forEach((child) => {\n            child.deactivate();\n        });\n        this._childObjects.clear();\n        const receipt = this._thisReceipt;\n        this._thisReceipt = undefined;\n        if (receipt != null) {\n            receipt.cancel();\n        }\n    }\n    addActor(childObject) {\n        if (childObject == null) {\n            return undefined;\n        }\n        if (childObject.parentObject.value != null) {\n            childObject.parentObject.value.removeActor(childObject);\n        }\n        this._childObjects.addValue(childObject);\n        childObject._parentObject.setValue(this);\n        if (this.isActive.value === true) {\n            childObject.activate();\n        }\n        return childObject;\n    }\n    cancelOnDeactivate(receipt) {\n        if (receipt == null) {\n            return undefined;\n        }\n        this._receipts.addValue(receipt);\n        return receipt;\n    }\n    removeCancelOnDeactivate(receipt) {\n        if (receipt == null) {\n            return;\n        }\n        this._receipts.removeValue(receipt);\n    }\n    removeActor(child) {\n        if (child == null) {\n            return;\n        }\n        if (this._childObjects.toIndexOfValue(child) === -1) {\n            return;\n        }\n        try {\n            child.deactivate();\n        }\n        catch (err) {\n            console.error(err);\n        }\n        this._childObjects.removeValue(child);\n        child._parentObject.setValue(undefined);\n    }\n    onActivate() { }\n}\nexports.Actor = Actor;\nActor._activeSet = observable_1.ObservableSet.ofEmpty();\nActor.activeSet = observable_1.ReadOnlyObservableSet.givenObservableSet(Actor._activeSet);\n//# sourceMappingURL=index.js.map","import { CanvasUtil } from \"./CanvasUtil\";\nimport { CheckboxBinding } from \"./CheckboxBinding\";\nimport { Corners } from \"./Corners\";\nimport { DynamicStyleElement } from \"./DynamicStyleElement\";\nimport { ElementMountWatcher } from \"./ElementMountWatcher\";\nimport { ElementSizeWatcher } from \"./ElementSizeWatcher\";\nimport { ElementStyle } from \"./ElementStyle\";\nimport { EveryFrame } from \"./EveryFrame\";\nimport { FocusWatcher } from \"./FocusWatcher\";\nimport { IntersectionWatcher } from \"./IntersectionWatcher\";\nimport { KeyboardShortcut } from \"./KeyboardShortcut\";\nimport { KeyboardWatcher } from \"./KeyboardWatcher\";\nimport { LocationUtil } from \"./LocationUtil\";\nimport { ManagedCanvas } from \"./ManagedCanvas\";\nimport { ManagedElement } from \"./ManagedElement\";\nimport { NetworkUtil } from \"./NetworkUtil\";\nimport { ObservableState } from \"./ObservableState\";\nimport { Pointer } from \"./Pointer\";\nimport { Preload } from \"./Preload\";\nimport { ScreenSize } from \"./ScreenSize\";\nimport { ScrollArea } from \"./ScrollArea\";\nimport { ScrollWatcher } from \"./ScrollWatcher\";\nimport { SequentialChoice } from \"./SequentialChoice\";\nimport { StepDelayBinding } from \"./StepDelayBinding\";\nimport { TextInputBinding } from \"./TextInputBinding\";\nimport { Transform } from \"./Transform\";\nimport { UndoContext } from \"./UndoContext\";\n\nexport {\n  CanvasUtil,\n  CheckboxBinding,\n  Corners,\n  DynamicStyleElement,\n  ElementMountWatcher,\n  ElementSizeWatcher,\n  ElementStyle,\n  EveryFrame,\n  FocusWatcher,\n  IntersectionWatcher,\n  KeyboardShortcut,\n  KeyboardWatcher,\n  LocationUtil,\n  ManagedCanvas,\n  ManagedElement,\n  NetworkUtil,\n  ObservableState,\n  Pointer,\n  Preload,\n  ScreenSize,\n  ScrollArea,\n  ScrollWatcher,\n  SequentialChoice,\n  StepDelayBinding,\n  TextInputBinding,\n  Transform,\n  UndoContext,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Throttle = exports.Instant = exports.Duration = exports.Debounce = void 0;\nconst Debounce_1 = require(\"./Debounce\");\nObject.defineProperty(exports, \"Debounce\", { enumerable: true, get: function () { return Debounce_1.Debounce; } });\nconst Duration_1 = require(\"./Duration\");\nObject.defineProperty(exports, \"Duration\", { enumerable: true, get: function () { return Duration_1.Duration; } });\nconst Instant_1 = require(\"./Instant\");\nObject.defineProperty(exports, \"Instant\", { enumerable: true, get: function () { return Instant_1.Instant; } });\nconst Throttle_1 = require(\"./Throttle\");\nObject.defineProperty(exports, \"Throttle\", { enumerable: true, get: function () { return Throttle_1.Throttle; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedEvent = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst Receipt_1 = require(\"../Receipt\");\nclass TypedEvent {\n    constructor(lastValue) {\n        this._subscriptions = undefined;\n        this._lastValue = lastValue;\n    }\n    subscribe(subscription, includeLast = false) {\n        if (this._subscriptions == null) {\n            this._subscriptions = [];\n        }\n        this._subscriptions.push(subscription);\n        if (includeLast) {\n            subscription(this._lastValue);\n        }\n        return new Receipt_1.Receipt(() => this.unsubscribe(subscription));\n    }\n    async emit(newValue) {\n        const previousValue = this._lastValue;\n        this._lastValue = newValue;\n        if (this._subscriptions != null) {\n            await util_1.PromiseUtil.asyncSequenceGivenArrayAndCallback(this._subscriptions, async (handler) => {\n                await handler(newValue, previousValue);\n            });\n        }\n    }\n    unsubscribe(handler) {\n        if (this._subscriptions == null) {\n            return;\n        }\n        this._subscriptions = util_1.ArrayUtil.arrayWithoutValue(this._subscriptions, handler);\n        if (this._subscriptions.length === 0) {\n            this._subscriptions = undefined;\n        }\n    }\n}\nexports.TypedEvent = TypedEvent;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Color = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst hsbGivenRgbFloat_1 = require(\"./_internal/hsbGivenRgbFloat\");\nconst hslGivenRgbFloat_1 = require(\"./_internal/hslGivenRgbFloat\");\nconst labGivenHcl_1 = require(\"./_internal/labGivenHcl\");\nconst labGivenXyz_1 = require(\"./_internal/labGivenXyz\");\nconst hclGivenLab_1 = require(\"./_internal/hclGivenLab\");\nconst rgbFloatGivenHsl_1 = require(\"./_internal/rgbFloatGivenHsl\");\nconst rgbFloatGivenXyz_1 = require(\"./_internal/rgbFloatGivenXyz\");\nconst hsbStringGivenHsb_1 = require(\"./_internal/hsbStringGivenHsb\");\nconst hslStringGivenHsl_1 = require(\"./_internal/hslStringGivenHsl\");\nconst rgbStringGivenRgbFloat_1 = require(\"./_internal/rgbStringGivenRgbFloat\");\nconst xyzGivenLab_1 = require(\"./_internal/xyzGivenLab\");\nconst xyzGivenRgbFloat_1 = require(\"./_internal/xyzGivenRgbFloat\");\nconst rgbFloatGivenHex_1 = require(\"./_internal/rgbFloatGivenHex\");\nconst hexGivenRgb_1 = require(\"./_internal/hexGivenRgb\");\nconst highContrastColorGivenColor_1 = require(\"./_internal/highContrastColorGivenColor\");\nconst distanceGivenColors_1 = require(\"./_internal/distanceGivenColors\");\nclass Color {\n    constructor(labColor, alpha) {\n        this._labColor = labColor;\n        this._alpha = alpha;\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    static givenHslFloat(hslColor, alpha = util_1.Percent.givenFraction(1, 1)) {\n        return Color.givenRgbFloat(rgbFloatGivenHsl_1.rgbFloatGivenHsl(hslColor), alpha);\n    }\n    static givenHexString(hexColor) {\n        return Color.givenRgbFloat(rgbFloatGivenHex_1.rgbFloatGivenHex(hexColor));\n    }\n    static givenHclFloat(hclColor, alpha = util_1.Percent.givenFraction(1, 1)) {\n        return new Color(labGivenHcl_1.labGivenHcl(hclColor), alpha);\n    }\n    static givenRgbFloat(rgbColor, alpha = util_1.Percent.givenFraction(1, 1)) {\n        const labColor = labGivenXyz_1.labGivenXyz(xyzGivenRgbFloat_1.xyzGivenRgbFloat(rgbColor));\n        return new Color(labColor, alpha);\n    }\n    static givenRgb255(r, g, b, a) {\n        return Color.givenRgbFloat({\n            r: util_1.Percent.givenFraction(r, 255),\n            g: util_1.Percent.givenFraction(g, 255),\n            b: util_1.Percent.givenFraction(b, 255),\n        }, a);\n    }\n    static givenColorNumber(intColor, alpha = 1) {\n        let alphaString;\n        if (alpha === 1) {\n            alphaString = \"\";\n        }\n        else {\n            alphaString = Math.round(util_1.NumberUtil.numberWithHardLimit(alpha, 0, 1) * 255)\n                .toString(16)\n                .padStart(2, \"0\");\n        }\n        const hex = `#${intColor.toString(16).padStart(6, \"0\")}${alphaString}`;\n        return Color.givenHexString(hex);\n    }\n    isEqual(otherColor) {\n        if (otherColor == null) {\n            return false;\n        }\n        return (this._labColor.a === otherColor._labColor.a &&\n            this._labColor.b === otherColor._labColor.b &&\n            this._labColor.l === otherColor._labColor.l);\n    }\n    toPortableString() {\n        const obj = {\n            l: this._labColor.l,\n            a: this._labColor.a,\n            b: this._labColor.b,\n        };\n        return JSON.stringify(obj);\n    }\n    withLightness(absoluteLightness) {\n        const { a, b } = this._labColor;\n        return new Color({\n            l: absoluteLightness * 100,\n            a,\n            b,\n        }, this._alpha);\n    }\n    withRelativeLightness(relativeLightness) {\n        const { l } = this._labColor;\n        return this.withLightness(l / 100 + relativeLightness);\n    }\n    withHue(absoluteHue) {\n        const { s, l } = hslGivenRgbFloat_1.hslGivenRgbFloat(this.toRgbFloatColor());\n        return new Color(labGivenXyz_1.labGivenXyz(xyzGivenRgbFloat_1.xyzGivenRgbFloat(rgbFloatGivenHsl_1.rgbFloatGivenHsl({\n            h: absoluteHue,\n            s,\n            l,\n        }))), this._alpha);\n    }\n    withRelativeHue(relativeHue) {\n        const { h } = hslGivenRgbFloat_1.hslGivenRgbFloat(this.toRgbFloatColor());\n        let absoluteHue = h.toNumber(1) + relativeHue.toNumber(1);\n        if (absoluteHue > 1) {\n            absoluteHue -= 1;\n        }\n        if (absoluteHue < 0) {\n            absoluteHue += 1;\n        }\n        return this.withHue(util_1.Percent.givenFraction(absoluteHue, 1));\n    }\n    withSaturation(absoluteSaturation) {\n        let { l, h } = hclGivenLab_1.hclGivenLab(this._labColor);\n        return new Color(labGivenHcl_1.labGivenHcl({ h, c: absoluteSaturation, l }), this._alpha);\n    }\n    withRelativeSaturation(relativeSaturation) {\n        const hcl = hclGivenLab_1.hclGivenLab(this._labColor);\n        let c = hcl.c.toNumber(1);\n        c = util_1.NumberUtil.numberWithHardLimit(c + relativeSaturation.toNumber(1), 0, 1);\n        return this.withSaturation(util_1.Percent.givenFraction(c, 1));\n    }\n    withAlpha(absoluteAlpha) {\n        return new Color(this._labColor, absoluteAlpha);\n    }\n    toDistanceGivenColor(otherColor) {\n        return distanceGivenColors_1.distanceGivenColors(this, otherColor);\n    }\n    toString() {\n        return this.toRgbString();\n    }\n    toHexString() {\n        if (this._hexString == null) {\n            this._hexString = hexGivenRgb_1.hexGivenRgb(this.toRgbFloatColor(), this._alpha);\n        }\n        return this._hexString;\n    }\n    toLabColor() {\n        return {\n            l: this._labColor.l,\n            a: this._labColor.a,\n            b: this._labColor.b,\n        };\n    }\n    toRgbFloatColor() {\n        return rgbFloatGivenXyz_1.rgbFloatGivenXyz(xyzGivenLab_1.xyzGivenLab(this._labColor));\n    }\n    toRgbString() {\n        return rgbStringGivenRgbFloat_1.rgbStringGivenRgbFloat(this.toRgbFloatColor(), this._alpha);\n    }\n    toHslColor() {\n        return hslGivenRgbFloat_1.hslGivenRgbFloat(this.toRgbFloatColor());\n    }\n    toHslString() {\n        return hslStringGivenHsl_1.hslStringGivenHsl(this.toHslColor());\n    }\n    toHsbColor() {\n        return hsbGivenRgbFloat_1.hsbGivenRgbFloat(this.toRgbFloatColor());\n    }\n    toHsbString() {\n        return hsbStringGivenHsb_1.hsbStringGivenHsb(this.toHsbColor());\n    }\n    toHclColor() {\n        return hclGivenLab_1.hclGivenLab(this._labColor);\n    }\n    toHighContrastColor() {\n        return highContrastColorGivenColor_1.highContrastColorGivenColor(this);\n    }\n    toColorNumber() {\n        return parseInt(this.toHexString().slice(1, 7), 16);\n    }\n}\nexports.Color = Color;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Point2 = void 0;\nconst Vector2_1 = require(\"../Vector2\");\nclass Point2 {\n    constructor(x, y) {\n        this._x = x;\n        this._y = y;\n    }\n    static givenXY(x, y) {\n        return new Point2(x, y);\n    }\n    static ofZero() {\n        return this._zero;\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get x() {\n        return this._x;\n    }\n    get y() {\n        return this._y;\n    }\n    get isZero() {\n        return this._x === 0 && this._y === 0;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Point2)) {\n            return false;\n        }\n        return other._x == this._x && other._y == this._y;\n    }\n    toDistance(other) {\n        return this.toVector(other).toMagnitude();\n    }\n    toVector(other) {\n        return Vector2_1.Vector2.givenXY(other.x - this.x, other.y - this.y);\n    }\n    withAddedVector(vector) {\n        return new Point2(this.x + vector.x, this.y + vector.y);\n    }\n    withSubtractedVector(vector) {\n        return new Point2(this.x - vector.x, this.y - vector.y);\n    }\n    withRotationAroundPoint(center, rotation) {\n        return Point2.givenXY(Math.cos(rotation.radians) * (this.x - center.x) -\n            Math.sin(rotation.radians) * (this.y - center.y) +\n            center.x, Math.sin(rotation.radians) * (this.x - center.x) +\n            Math.cos(rotation.radians) * (this.y - center.y) +\n            center.y);\n    }\n}\nexports.Point2 = Point2;\nPoint2._zero = new Point2(0, 0);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector2 = void 0;\nconst Point2_1 = require(\"../Point2\");\nconst Rotation_1 = require(\"../Rotation\");\nclass Vector2 {\n    constructor(x, y) {\n        this.isEqual = (other) => {\n            if (other == null) {\n                return false;\n            }\n            if (!(other instanceof Vector2)) {\n                return false;\n            }\n            return this._x === other._x && this._y === other._y;\n        };\n        this._x = x;\n        this._y = y;\n    }\n    static givenXY(x, y) {\n        return new Vector2(x, y);\n    }\n    static givenPoint(point) {\n        return new Vector2(point.x, point.y);\n    }\n    static givenPoints(startPoint, endPoint) {\n        return startPoint.toVector(endPoint);\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get x() {\n        return this._x;\n    }\n    get y() {\n        return this._y;\n    }\n    get isZero() {\n        return this._x === 0 && this._y === 0;\n    }\n    withMultipliedScalar(input) {\n        return new Vector2(this._x * input, this._y * input);\n    }\n    withDividedScalar(input) {\n        return new Vector2(this._x / input, this._y / input);\n    }\n    withAddedVector(other) {\n        return new Vector2(this._x + other._x, this._y + other._y);\n    }\n    withSubtractedVector(other) {\n        return new Vector2(this._x - other._x, this._y - other._y);\n    }\n    withMultipliedVector(other) {\n        return new Vector2(this._x * other._x, this._y * other._y);\n    }\n    withDividedVector(other) {\n        return new Vector2(this._x / other._x, this._y / other._y);\n    }\n    toPoint() {\n        return Point2_1.Point2.givenXY(this.x, this.y);\n    }\n    toDotProduct(other) {\n        return this._x * other._x + this._y * other._y;\n    }\n    toMagnitude() {\n        return Math.sqrt(this._x * this._x + this._y * this._y);\n    }\n    toAngle(other) {\n        // this always returns a rotation between 0 and PI because\n        // two vectors cannot point more away from each other than directly\n        // away from each other, which can always be achieved by a rotation\n        // of PI radians (180 degrees)\n        const dot = this.toDotProduct(other);\n        const magnitude = this.toMagnitude() * other.toMagnitude();\n        return Rotation_1.Rotation.givenRadians(Math.acos(dot / magnitude));\n    }\n    toSignedAngle(other) {\n        let radians = Math.atan2(other.y, other.x) - Math.atan2(this.y, this.x);\n        if (radians > Math.PI) {\n            radians -= Math.PI * 2;\n        }\n        else if (radians < -Math.PI) {\n            radians += Math.PI * 2;\n        }\n        return Rotation_1.Rotation.givenRadians(radians);\n    }\n    withNormalizedMagnitude() {\n        return this.withDividedScalar(this.toMagnitude());\n    }\n    withReversedDirection() {\n        return new Vector2(-this._x, -this._y);\n    }\n    withRotation(rotation, direction) {\n        let rad = rotation.radians;\n        if (direction === \"clockwise\") {\n            rad *= -1;\n        }\n        const cos = Math.cos(rad);\n        const sin = Math.sin(rad);\n        const ox = this.x;\n        const oy = this.y;\n        return new Vector2(ox * cos - oy * sin, ox * sin + oy * cos);\n    }\n    withPerpendicularDirection(rotation) {\n        if (rotation === \"clockwise\") {\n            return new Vector2(this.y, -this.x);\n        }\n        else {\n            return new Vector2(-this.y, this.x);\n        }\n    }\n    withWeightedAverage(other, weight) {\n        const t = weight.toNumber(1);\n        const x1 = this.withMultipliedScalar(1 - t);\n        const y1 = other.withMultipliedScalar(t);\n        return x1.withAddedVector(y1);\n    }\n}\nexports.Vector2 = Vector2;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UndoContext = exports.Transform = exports.TextInputBinding = exports.StepDelayBinding = exports.SequentialChoice = exports.ScrollWatcher = exports.ScrollArea = exports.ScreenSize = exports.Preload = exports.Pointer = exports.ObservableState = exports.NetworkUtil = exports.ManagedElement = exports.LocationUtil = exports.KeyboardWatcher = exports.KeyboardShortcut = exports.IntersectionWatcher = exports.FocusWatcher = exports.EveryFrame = exports.ElementStyle = exports.ElementBoundsWatcher = exports.DynamicStyleElement = exports.Corners = exports.CheckboxBinding = exports.CanvasUtil = void 0;\nconst CanvasUtil_1 = require(\"./CanvasUtil\");\nObject.defineProperty(exports, \"CanvasUtil\", { enumerable: true, get: function () { return CanvasUtil_1.CanvasUtil; } });\nconst CheckboxBinding_1 = require(\"./CheckboxBinding\");\nObject.defineProperty(exports, \"CheckboxBinding\", { enumerable: true, get: function () { return CheckboxBinding_1.CheckboxBinding; } });\nconst Corners_1 = require(\"./Corners\");\nObject.defineProperty(exports, \"Corners\", { enumerable: true, get: function () { return Corners_1.Corners; } });\nconst DynamicStyleElement_1 = require(\"./DynamicStyleElement\");\nObject.defineProperty(exports, \"DynamicStyleElement\", { enumerable: true, get: function () { return DynamicStyleElement_1.DynamicStyleElement; } });\nconst ElementBoundsWatcher_1 = require(\"./ElementBoundsWatcher\");\nObject.defineProperty(exports, \"ElementBoundsWatcher\", { enumerable: true, get: function () { return ElementBoundsWatcher_1.ElementBoundsWatcher; } });\nconst ElementStyle_1 = require(\"./ElementStyle\");\nObject.defineProperty(exports, \"ElementStyle\", { enumerable: true, get: function () { return ElementStyle_1.ElementStyle; } });\nconst EveryFrame_1 = require(\"./EveryFrame\");\nObject.defineProperty(exports, \"EveryFrame\", { enumerable: true, get: function () { return EveryFrame_1.EveryFrame; } });\nconst FocusWatcher_1 = require(\"./FocusWatcher\");\nObject.defineProperty(exports, \"FocusWatcher\", { enumerable: true, get: function () { return FocusWatcher_1.FocusWatcher; } });\nconst IntersectionWatcher_1 = require(\"./IntersectionWatcher\");\nObject.defineProperty(exports, \"IntersectionWatcher\", { enumerable: true, get: function () { return IntersectionWatcher_1.IntersectionWatcher; } });\nconst KeyboardShortcut_1 = require(\"./KeyboardShortcut\");\nObject.defineProperty(exports, \"KeyboardShortcut\", { enumerable: true, get: function () { return KeyboardShortcut_1.KeyboardShortcut; } });\nconst KeyboardWatcher_1 = require(\"./KeyboardWatcher\");\nObject.defineProperty(exports, \"KeyboardWatcher\", { enumerable: true, get: function () { return KeyboardWatcher_1.KeyboardWatcher; } });\nconst LocationUtil_1 = require(\"./LocationUtil\");\nObject.defineProperty(exports, \"LocationUtil\", { enumerable: true, get: function () { return LocationUtil_1.LocationUtil; } });\nconst ManagedElement_1 = require(\"./ManagedElement\");\nObject.defineProperty(exports, \"ManagedElement\", { enumerable: true, get: function () { return ManagedElement_1.ManagedElement; } });\nconst NetworkUtil_1 = require(\"./NetworkUtil\");\nObject.defineProperty(exports, \"NetworkUtil\", { enumerable: true, get: function () { return NetworkUtil_1.NetworkUtil; } });\nconst ObservableState_1 = require(\"./ObservableState\");\nObject.defineProperty(exports, \"ObservableState\", { enumerable: true, get: function () { return ObservableState_1.ObservableState; } });\nconst Pointer_1 = require(\"./Pointer\");\nObject.defineProperty(exports, \"Pointer\", { enumerable: true, get: function () { return Pointer_1.Pointer; } });\nconst Preload_1 = require(\"./Preload\");\nObject.defineProperty(exports, \"Preload\", { enumerable: true, get: function () { return Preload_1.Preload; } });\nconst ScreenSize_1 = require(\"./ScreenSize\");\nObject.defineProperty(exports, \"ScreenSize\", { enumerable: true, get: function () { return ScreenSize_1.ScreenSize; } });\nconst ScrollArea_1 = require(\"./ScrollArea\");\nObject.defineProperty(exports, \"ScrollArea\", { enumerable: true, get: function () { return ScrollArea_1.ScrollArea; } });\nconst ScrollWatcher_1 = require(\"./ScrollWatcher\");\nObject.defineProperty(exports, \"ScrollWatcher\", { enumerable: true, get: function () { return ScrollWatcher_1.ScrollWatcher; } });\nconst SequentialChoice_1 = require(\"./SequentialChoice\");\nObject.defineProperty(exports, \"SequentialChoice\", { enumerable: true, get: function () { return SequentialChoice_1.SequentialChoice; } });\nconst StepDelayBinding_1 = require(\"./StepDelayBinding\");\nObject.defineProperty(exports, \"StepDelayBinding\", { enumerable: true, get: function () { return StepDelayBinding_1.StepDelayBinding; } });\nconst TextInputBinding_1 = require(\"./TextInputBinding\");\nObject.defineProperty(exports, \"TextInputBinding\", { enumerable: true, get: function () { return TextInputBinding_1.TextInputBinding; } });\nconst Transform_1 = require(\"./Transform\");\nObject.defineProperty(exports, \"Transform\", { enumerable: true, get: function () { return Transform_1.Transform; } });\nconst UndoContext_1 = require(\"./UndoContext\");\nObject.defineProperty(exports, \"UndoContext\", { enumerable: true, get: function () { return UndoContext_1.UndoContext; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numberWithHardLimit = void 0;\nfunction numberWithHardLimit(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nexports.numberWithHardLimit = numberWithHardLimit;\n//# sourceMappingURL=numberWithHardLimit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asyncSequenceGivenArrayAndCallback = void 0;\nasync function asyncSequenceGivenArrayAndCallback(array, fn) {\n    if (array == null) {\n        return;\n    }\n    const length = array.length;\n    for (let index = 0; index < length; index++) {\n        await fn(array[index], index, array);\n    }\n}\nexports.asyncSequenceGivenArrayAndCallback = asyncSequenceGivenArrayAndCallback;\n//# sourceMappingURL=asyncSequenceGivenArrayAndCallback.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithNoCase = void 0;\nconst hasSpace = /\\s/;\nconst hasSeparator = /(_|-|\\.|:)/;\nconst hasCamel = /([a-z][A-Z]|[A-Z][a-z])/;\nconst separatorSplitter = /[\\W_]+(.|$)/g;\nconst camelSplitter = /(.)([A-Z]+)/g;\nfunction unseparate(input) {\n    return input.replace(separatorSplitter, (m, next) => {\n        return next ? \" \" + next : \"\";\n    });\n}\nfunction uncamelize(input) {\n    return input.replace(camelSplitter, function (m, previous, uppers) {\n        return previous + \" \" + uppers.toLowerCase().split(\"\").join(\" \");\n    });\n}\nfunction stringWithNoCase(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    if (hasSpace.test(input)) {\n        return input.toLowerCase();\n    }\n    if (hasSeparator.test(input)) {\n        return (unseparate(input) || input).toLowerCase();\n    }\n    if (hasCamel.test(input)) {\n        return uncamelize(input).toLowerCase();\n    }\n    return input.toLowerCase();\n}\nexports.stringWithNoCase = stringWithNoCase;\n//# sourceMappingURL=stringWithNoCase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Palette = exports.ColorGradient = exports.Color = void 0;\nconst Color_1 = require(\"./Color\");\nObject.defineProperty(exports, \"Color\", { enumerable: true, get: function () { return Color_1.Color; } });\nconst ColorGradient_1 = require(\"./ColorGradient\");\nObject.defineProperty(exports, \"ColorGradient\", { enumerable: true, get: function () { return ColorGradient_1.ColorGradient; } });\nconst Palette_1 = require(\"./Palette\");\nObject.defineProperty(exports, \"Palette\", { enumerable: true, get: function () { return Palette_1.Palette; } });\n//# sourceMappingURL=index.js.map","import { Box2, Point2, Size2 } from \"@anderjason/geometry\";\nimport { Transform } from \"../Transform\";\nimport { cornersGivenContainedPoints } from \"./_internal/cornersGivenContainedPoints\";\nimport { cornersWithAlignment } from \"./_internal/cornersWithAlignment\";\n\nexport class Corners {\n  static givenBox(box: Box2): Corners {\n    return new Corners(\n      box.toLeftTop(),\n      box.toRightTop(),\n      box.toRightBottom(),\n      box.toLeftBottom()\n    );\n  }\n\n  static givenContainedPoints(points: Point2[]): Corners {\n    return cornersGivenContainedPoints(points);\n  }\n\n  static givenPoints(points: Point2[]): Corners {\n    if (points == null) {\n      throw new Error(\"Points is required\");\n    }\n\n    if (points.length !== 4) {\n      throw new Error(\"Array must have 4 points\");\n    }\n\n    return new Corners(points[0], points[1], points[2], points[3]);\n  }\n\n  static isEqual(a: Corners, b: Corners): boolean {\n    if (a == null && b == null) {\n      return true;\n    }\n\n    if (a == null || b == null) {\n      return false;\n    }\n\n    return a.isEqual(b);\n  }\n\n  readonly leftTop: Point2;\n  readonly rightTop: Point2;\n  readonly rightBottom: Point2;\n  readonly leftBottom: Point2;\n\n  private _size: Size2;\n\n  private constructor(\n    leftTop: Point2,\n    rightTop: Point2,\n    rightBottom: Point2,\n    leftBottom: Point2\n  ) {\n    this.leftTop = leftTop;\n    this.rightTop = rightTop;\n    this.rightBottom = rightBottom;\n    this.leftBottom = leftBottom;\n  }\n\n  isEqual(other: Corners): boolean {\n    if (other == null) {\n      return false;\n    }\n\n    if (!(other instanceof Corners)) {\n      return false;\n    }\n\n    return (\n      this.leftTop.isEqual(other.leftTop) &&\n      this.rightTop.isEqual(other.rightTop) &&\n      this.rightBottom.isEqual(other.rightBottom) &&\n      this.leftBottom.isEqual(other.leftBottom)\n    );\n  }\n\n  isSizeEqual(other: Corners, fuzzy: number = 10): boolean {\n    if (other == null) {\n      throw new Error(\"other is required\");\n    }\n\n    const otherSize = other.toSize();\n    const thisSize = this.toSize();\n\n    const differenceX = Math.abs(otherSize.width - thisSize.width);\n    const differenceY = Math.abs(otherSize.height - thisSize.height);\n\n    return differenceX < fuzzy && differenceY < fuzzy;\n  }\n\n  toSize(): Size2 {\n    if (this._size == null) {\n      const topWidth = this.leftTop.toDistance(this.rightTop);\n      const bottomWidth = this.leftBottom.toDistance(this.rightBottom);\n      const leftHeight = this.leftTop.toDistance(this.leftBottom);\n      const rightHeight = this.rightTop.toDistance(this.rightBottom);\n      const width = (topWidth + bottomWidth) / 2;\n      const height = (leftHeight + rightHeight) / 2;\n\n      this._size = Size2.givenWidthHeight(width, height);\n    }\n\n    return this._size;\n  }\n\n  toPoints(): Point2[] {\n    return [this.leftTop, this.rightTop, this.rightBottom, this.leftBottom];\n  }\n\n  withTransform(transform: Transform): Corners {\n    if (transform == null) {\n      throw new Error(\"transform is required\");\n    }\n\n    return new Corners(\n      transform.toTransformedPoint(this.leftTop),\n      transform.toTransformedPoint(this.rightTop),\n      transform.toTransformedPoint(this.rightBottom),\n      transform.toTransformedPoint(this.leftBottom)\n    );\n  }\n\n  withAlignment(alignToCorners: Corners): Corners {\n    return cornersWithAlignment(this, alignToCorners);\n  }\n}\n","import { Observable, ObservableSet, Receipt } from \"@anderjason/observable\";\nimport { Actor } from \"skytree\";\nimport { ElementMountWatcher } from \"../ElementMountWatcher\";\n\nexport interface ManagedElementDefinition<\n  K extends keyof HTMLElementTagNameMap\n> {\n  tagName: K;\n\n  parentElement?: HTMLElement | Observable<HTMLElement>;\n  classNames?: string[] | ObservableSet<string>;\n  transitionIn?: (element: ManagedElement<HTMLElementTagNameMap[K]>) => void;\n  transitionOut?: (\n    element: ManagedElement<HTMLElementTagNameMap[K]>\n  ) => Promise<void>;\n  innerHTML?: string;\n}\n\nexport class ManagedElement<T extends HTMLElement> extends Actor {\n  readonly element: T;\n  readonly parentElement: Observable<HTMLElement>;\n  readonly classes: ObservableSet<string>;\n\n  static givenDefinition<K extends keyof HTMLElementTagNameMap>(\n    definition: ManagedElementDefinition<K>\n  ): ManagedElement<HTMLElementTagNameMap[K]> {\n    return new ManagedElement(definition);\n  }\n\n  private _transitionIn?: (element: ManagedElement<T>) => void;\n  private _transitionOut?: (element: ManagedElement<T>) => Promise<void>;\n\n  private constructor(definition: ManagedElementDefinition<any>) {\n    super({});\n\n    this.element = document.createElement(definition.tagName);\n\n    if (this.props.innerHTML != null) {\n      this.element.innerHTML = this.props.innerHTML;\n    }\n\n    this._transitionIn = definition.transitionIn;\n    this._transitionOut = definition.transitionOut;\n\n    if (definition.classNames == null) {\n      this.classes = ObservableSet.ofEmpty();\n    } else if (Array.isArray(definition.classNames)) {\n      this.classes = ObservableSet.givenValues(definition.classNames);\n    } else {\n      this.classes = definition.classNames;\n    }\n\n    if (definition.parentElement == null) {\n      this.parentElement = Observable.ofEmpty();\n    } else if (Observable.isObservable(definition.parentElement)) {\n      this.parentElement = definition.parentElement;\n    } else {\n      this.parentElement = Observable.givenValue(\n        definition.parentElement,\n        Observable.isStrictEqual\n      );\n    }\n  }\n\n  get style(): CSSStyleDeclaration {\n    return this.element.style;\n  }\n\n  onActivate() {\n    this.element.className = this.classes.toArray().join(\" \");\n\n    this.cancelOnDeactivate(\n      this.parentElement.didChange.subscribe(async (parentElement) => {\n        if (this.element.parentElement === parentElement) {\n          return;\n        }\n\n        if (this.element.parentElement != null) {\n          if (this._transitionOut != null) {\n            await this._transitionOut(this);\n          }\n\n          this.element.parentElement.removeChild(this.element);\n        }\n\n        if (parentElement != null) {\n          parentElement.appendChild(this.element);\n        }\n      }, true)\n    );\n\n    if (this._transitionIn != null || this._transitionOut != null) {\n      this.watchDomVisibility();\n    }\n\n    let classesChangedReceipt: Receipt;\n\n    this.cancelOnDeactivate(\n      new Receipt(async () => {\n        if (this._transitionOut != null) {\n          try {\n            await this._transitionOut(this);\n          } catch (err) {\n            console.error(err);\n          }\n        }\n\n        if (this.element.parentElement != null) {\n          this.element.parentElement.removeChild(this.element);\n        }\n\n        classesChangedReceipt.cancel();\n      })\n    );\n\n    classesChangedReceipt = this.classes.didChangeSteps.subscribe((changes) => {\n      if (changes == null) {\n        return;\n      }\n\n      changes.forEach((change) => {\n        switch (change.type) {\n          case \"add\":\n            this.element.classList.add(change.value);\n            break;\n          case \"remove\":\n            this.element.classList.remove(change.value);\n            break;\n        }\n      });\n    });\n  }\n\n  addManagedEventListener<K extends keyof HTMLElementEventMap>(\n    type: K,\n    listener: (this: HTMLElement, ev: HTMLElementEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions\n  ): Receipt {\n    this.element.addEventListener(type, listener, options);\n\n    return this.cancelOnDeactivate(\n      new Receipt(() => {\n        this.element.removeEventListener(type, listener, options);\n      })\n    );\n  }\n\n  private watchDomVisibility() {\n    const elementMountWatcher = this.addActor(\n      new ElementMountWatcher({\n        element: this.element,\n      })\n    );\n\n    this.cancelOnDeactivate(\n      elementMountWatcher.isElementMounted.didChange.subscribe((isMounted) => {\n        requestAnimationFrame(() => {\n          if (!this.isActive.value) {\n            return;\n          }\n\n          try {\n            if (isMounted) {\n              if (this._transitionIn != null) {\n                this._transitionIn(this);\n              }\n            } else {\n              // it's too late at this point for any transition out to\n              // be visible, because the element has already been removed\n              // from the DOM, but it's still important to run the function\n              // because the element may need to transition in again later\n              // so it needs a chance to update its state\n              if (this._transitionOut != null) {\n                this._transitionOut(this).catch((err) => {\n                  console.warn(err);\n                });\n              }\n            }\n          } catch (err) {\n            console.warn(err);\n          }\n        });\n      }, true)\n    );\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Corners = void 0;\nconst geometry_1 = require(\"@anderjason/geometry\");\nconst cornersGivenContainedPoints_1 = require(\"./_internal/cornersGivenContainedPoints\");\nconst cornersWithAlignment_1 = require(\"./_internal/cornersWithAlignment\");\nclass Corners {\n    constructor(leftTop, rightTop, rightBottom, leftBottom) {\n        this.leftTop = leftTop;\n        this.rightTop = rightTop;\n        this.rightBottom = rightBottom;\n        this.leftBottom = leftBottom;\n    }\n    static givenBox(box) {\n        return new Corners(box.toLeftTop(), box.toRightTop(), box.toRightBottom(), box.toLeftBottom());\n    }\n    static givenContainedPoints(points) {\n        return cornersGivenContainedPoints_1.cornersGivenContainedPoints(points);\n    }\n    static givenPoints(points) {\n        if (points == null) {\n            throw new Error(\"Points is required\");\n        }\n        if (points.length !== 4) {\n            throw new Error(\"Array must have 4 points\");\n        }\n        return new Corners(points[0], points[1], points[2], points[3]);\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Corners)) {\n            return false;\n        }\n        return (this.leftTop.isEqual(other.leftTop) &&\n            this.rightTop.isEqual(other.rightTop) &&\n            this.rightBottom.isEqual(other.rightBottom) &&\n            this.leftBottom.isEqual(other.leftBottom));\n    }\n    isSizeEqual(other, fuzzy = 10) {\n        if (other == null) {\n            throw new Error(\"other is required\");\n        }\n        const otherSize = other.toSize();\n        const thisSize = this.toSize();\n        const differenceX = Math.abs(otherSize.width - thisSize.width);\n        const differenceY = Math.abs(otherSize.height - thisSize.height);\n        return differenceX < fuzzy && differenceY < fuzzy;\n    }\n    toSize() {\n        if (this._size == null) {\n            const topWidth = this.leftTop.toDistance(this.rightTop);\n            const bottomWidth = this.leftBottom.toDistance(this.rightBottom);\n            const leftHeight = this.leftTop.toDistance(this.leftBottom);\n            const rightHeight = this.rightTop.toDistance(this.rightBottom);\n            const width = (topWidth + bottomWidth) / 2;\n            const height = (leftHeight + rightHeight) / 2;\n            this._size = geometry_1.Size2.givenWidthHeight(width, height);\n        }\n        return this._size;\n    }\n    toPoints() {\n        return [this.leftTop, this.rightTop, this.rightBottom, this.leftBottom];\n    }\n    withTransform(transform) {\n        if (transform == null) {\n            throw new Error(\"transform is required\");\n        }\n        return new Corners(transform.toTransformedPoint(this.leftTop), transform.toTransformedPoint(this.rightTop), transform.toTransformedPoint(this.rightBottom), transform.toTransformedPoint(this.leftBottom));\n    }\n    withAlignment(alignToCorners) {\n        return cornersWithAlignment_1.cornersWithAlignment(this, alignToCorners);\n    }\n}\nexports.Corners = Corners;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ManagedElement = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nclass ManagedElement extends skytree_1.Actor {\n    constructor(definition) {\n        super({});\n        this.element = document.createElement(definition.tagName);\n        if (this.props.innerHTML != null) {\n            this.element.innerHTML = this.props.innerHTML;\n        }\n        this._transitionIn = definition.transitionIn;\n        this._transitionOut = definition.transitionOut;\n        if (definition.classNames == null) {\n            this.classes = observable_1.ObservableSet.ofEmpty();\n        }\n        else if (Array.isArray(definition.classNames)) {\n            this.classes = observable_1.ObservableSet.givenValues(definition.classNames);\n        }\n        else {\n            this.classes = definition.classNames;\n        }\n        if (definition.parentElement == null) {\n            this.parentElement = observable_1.Observable.ofEmpty();\n        }\n        else if (observable_1.Observable.isObservable(definition.parentElement)) {\n            this.parentElement = definition.parentElement;\n        }\n        else {\n            this.parentElement = observable_1.Observable.givenValue(definition.parentElement, observable_1.Observable.isStrictEqual);\n        }\n    }\n    static givenDefinition(definition) {\n        return new ManagedElement(definition);\n    }\n    get style() {\n        return this.element.style;\n    }\n    onActivate() {\n        this.cancelOnDeactivate(this.parentElement.didChange.subscribe((parentElement) => {\n            if (this.element.parentElement === parentElement) {\n                return;\n            }\n            if (this.element.parentElement != null) {\n                this.element.parentElement.removeChild(this.element);\n            }\n            if (parentElement != null) {\n                parentElement.appendChild(this.element);\n            }\n        }, true));\n        if (this._transitionIn != null) {\n            requestAnimationFrame(() => {\n                if (this.isActive.value == true) {\n                    this._transitionIn();\n                }\n            });\n        }\n        let classesChangedReceipt;\n        const cleanup = () => {\n            if (this.element.parentElement != null) {\n                this.element.parentElement.removeChild(this.element);\n            }\n            classesChangedReceipt.cancel();\n        };\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            if (this._transitionOut == null) {\n                cleanup();\n            }\n            else {\n                this._transitionOut()\n                    .then(cleanup)\n                    .catch((err) => {\n                    console.error(err);\n                    cleanup();\n                });\n            }\n        }));\n        classesChangedReceipt = this.classes.didChangeSteps.subscribe((changes) => {\n            if (changes == null) {\n                return;\n            }\n            changes.forEach((change) => {\n                switch (change.type) {\n                    case \"add\":\n                        this.element.classList.add(change.value);\n                        break;\n                    case \"remove\":\n                        this.element.classList.remove(change.value);\n                        break;\n                }\n            });\n        });\n    }\n    addManagedEventListener(type, listener, options) {\n        this.element.addEventListener(type, listener, options);\n        return this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            this.element.removeEventListener(type, listener, options);\n        }));\n    }\n}\nexports.ManagedElement = ManagedElement;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ElementStyle = void 0;\nconst componentStyleToPreparedDomAction_1 = require(\"./_internal/componentStyleToPreparedDomAction\");\nconst DynamicStyleElement_1 = require(\"../DynamicStyleElement\");\nconst util_1 = require(\"@anderjason/util\");\nclass ElementStyle {\n    constructor(definition) {\n        this.css = definition.css;\n        this._modifiers = definition.modifiers;\n        const randomString = util_1.StringUtil.stringOfRandomCharacters(6);\n        this._className =\n            definition.className != null\n                ? definition.className\n                : `es-${randomString}`;\n        if (ElementStyle.allClassNames.has(this._className)) {\n            throw new Error(`A style with class name '${this._className}' has already been created`);\n        }\n        ElementStyle.allClassNames.add(this._className);\n        componentStyleToPreparedDomAction_1.componentStyleToPreparedDomAction(this);\n    }\n    static givenDefinition(definition) {\n        return new ElementStyle(definition);\n    }\n    toOptionalModifiers() {\n        return this._modifiers;\n    }\n    toModifierKeys() {\n        return Object.keys(this._modifiers || {});\n    }\n    toCombinedClassName(modifierKeys) {\n        return this.toClassNames(modifierKeys).join(\" \");\n    }\n    toClassNames(modifierKeys) {\n        const result = [this._className];\n        if (modifierKeys != null) {\n            if (Array.isArray(modifierKeys)) {\n                modifierKeys.forEach((modifierKey) => {\n                    result.push(`${this._className}__${util_1.StringUtil.stringWithCase(modifierKey, \"kebab-case\")}`);\n                });\n            }\n            else {\n                result.push(`${this._className}__${util_1.StringUtil.stringWithCase(modifierKeys, \"kebab-case\")}`);\n            }\n        }\n        return result;\n    }\n    toDomElement(tagName) {\n        const element = document.createElement(tagName);\n        element.className = this.toCombinedClassName();\n        return element;\n    }\n    toManagedElement(definition) {\n        const classNamesByModifierName = new Map();\n        this.toModifierKeys().forEach((modifierName) => {\n            const classNames = this.toClassNames(modifierName);\n            classNamesByModifierName.set(modifierName, classNames);\n        });\n        return DynamicStyleElement_1.DynamicStyleElement.givenDefinition({\n            tagName: definition.tagName,\n            parentElement: definition.parentElement,\n            transitionIn: definition.transitionIn,\n            transitionOut: definition.transitionOut,\n            innerHTML: definition.innerHTML,\n            classNamesByModifierName,\n            constantClassNames: this.toClassNames(),\n        });\n    }\n}\nexports.ElementStyle = ElementStyle;\nElementStyle.allClassNames = new Set();\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blobGivenUrl = void 0;\nasync function blobGivenUrl(url) {\n    const response = await fetch(url);\n    const blob = await response.blob();\n    return blob;\n}\nexports.blobGivenUrl = blobGivenUrl;\n//# sourceMappingURL=blobGivenUrl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dataUrlGivenBlob = void 0;\nasync function dataUrlGivenBlob(blob) {\n    return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.onloadend = () => {\n            resolve(fileReader.result);\n        };\n        fileReader.onerror = () => {\n            reject(fileReader.error);\n        };\n        fileReader.readAsDataURL(blob);\n    });\n}\nexports.dataUrlGivenBlob = dataUrlGivenBlob;\n//# sourceMappingURL=dataUrlGivenBlob.js.map","export async function blobGivenUrl(\n  url: string,\n  init?: RequestInit\n): Promise<Blob> {\n  const response = await fetch(url, init);\n  const blob = await response.blob();\n\n  return blob;\n}\n","export async function dataUrlGivenBlob(blob: Blob | File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n\n    fileReader.onloadend = () => {\n      resolve(fileReader.result as string);\n    };\n\n    fileReader.onerror = () => {\n      reject(fileReader.error);\n    };\n\n    fileReader.readAsDataURL(blob);\n  });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ArrayUtil = void 0;\nconst arrayIsEmptyOrNull_1 = require(\"./_internal/arrayIsEmptyOrNull\");\nconst arrayWithEqualSizeGroups_1 = require(\"./_internal/arrayWithEqualSizeGroups\");\nconst arrayWithLeftShift_1 = require(\"./_internal/arrayWithLeftShift\");\nconst arrayWithOrderFromValue_1 = require(\"./_internal/arrayWithOrderFromValue\");\nconst arrayWithoutDuplicateValues_1 = require(\"./_internal/arrayWithoutDuplicateValues\");\nconst arrayWithoutValue_1 = require(\"./_internal/arrayWithoutValue\");\nconst arrayWithPageSubset_1 = require(\"./_internal/arrayWithPageSubset\");\nconst arrayWithReversedOrder_1 = require(\"./_internal/arrayWithReversedOrder\");\nconst arrayWithRightShift_1 = require(\"./_internal/arrayWithRightShift\");\nconst arrayWithValue_1 = require(\"./_internal/arrayWithValue\");\nconst numberArrayGivenRange_1 = require(\"./_internal/numberArrayGivenRange\");\nconst optionalIndexOfFirstMatchGivenArray_1 = require(\"./_internal/optionalIndexOfFirstMatchGivenArray\");\nconst optionalLastValueGivenArray_1 = require(\"./_internal/optionalLastValueGivenArray\");\nconst optionalNthValueGivenArray_1 = require(\"./_internal/optionalNthValueGivenArray\");\nconst optionalRandomValueGivenArray_1 = require(\"./_internal/optionalRandomValueGivenArray\");\nconst valueGivenArray_1 = require(\"./_internal/valueGivenArray\");\nclass ArrayUtil {\n}\nexports.ArrayUtil = ArrayUtil;\nArrayUtil.arrayIsEmptyOrNull = arrayIsEmptyOrNull_1.arrayIsEmptyOrNull;\nArrayUtil.arrayWithEqualSizeGroups = arrayWithEqualSizeGroups_1.arrayWithEqualSizeGroups;\nArrayUtil.arrayWithLeftShift = arrayWithLeftShift_1.arrayWithLeftShift;\nArrayUtil.arrayWithOrderFromValue = arrayWithOrderFromValue_1.arrayWithOrderFromValue;\nArrayUtil.arrayWithoutDuplicateValues = arrayWithoutDuplicateValues_1.arrayWithoutDuplicateValues;\nArrayUtil.arrayWithoutValue = arrayWithoutValue_1.arrayWithoutValue;\nArrayUtil.arrayWithPageSubset = arrayWithPageSubset_1.arrayWithPageSubset;\nArrayUtil.arrayWithReversedOrder = arrayWithReversedOrder_1.arrayWithReversedOrder;\nArrayUtil.arrayWithRightShift = arrayWithRightShift_1.arrayWithRightShift;\nArrayUtil.arrayWithValue = arrayWithValue_1.arrayWithValue;\nArrayUtil.numberArrayGivenRange = numberArrayGivenRange_1.numberArrayGivenRange;\nArrayUtil.optionalIndexOfFirstMatchGivenArray = optionalIndexOfFirstMatchGivenArray_1.optionalIndexOfFirstMatchGivenArray;\nArrayUtil.optionalLastValueGivenArray = optionalLastValueGivenArray_1.optionalLastValueGivenArray;\nArrayUtil.optionalNthValueGivenArray = optionalNthValueGivenArray_1.optionalNthValueGivenArray;\nArrayUtil.optionalRandomValueGivenArray = optionalRandomValueGivenArray_1.optionalRandomValueGivenArray;\nArrayUtil.valueGivenArray = valueGivenArray_1.valueGivenArray;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectWithDeepMerge = void 0;\nfunction defaultIsMergeableObject(value) {\n    return isNonNullObject(value) && !isSpecial(value);\n}\nfunction isNonNullObject(value) {\n    return !!value && typeof value === \"object\";\n}\nfunction isSpecial(value) {\n    const stringValue = Object.prototype.toString.call(value);\n    return (stringValue === \"[object RegExp]\" ||\n        stringValue === \"[object Date]\" ||\n        isReactElement(value));\n}\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nconst canUseSymbol = typeof Symbol === \"function\" && Symbol.for;\nconst REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for(\"react.element\") : 0xeac7;\nfunction isReactElement(value) {\n    return value.$$typeof === REACT_ELEMENT_TYPE;\n}\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {};\n}\nfunction cloneUnlessOtherwiseSpecified(value, options = {}) {\n    const isMergeableObject = options.isMergeableObject || defaultIsMergeableObject;\n    return options.clone !== false && isMergeableObject(value)\n        ? objectWithDeepMerge(emptyTarget(value), value, options)\n        : value;\n}\nfunction defaultArrayMerge(target, source, options = {}) {\n    return target.concat(source).map((element) => {\n        return cloneUnlessOtherwiseSpecified(element, options);\n    });\n}\nfunction mergeObject(target, source, options = {}) {\n    const destination = {};\n    const isMergeableObject = options.isMergeableObject || defaultIsMergeableObject;\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach((key) => {\n            destination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n        });\n    }\n    Object.keys(source).forEach((key) => {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n        }\n        else {\n            destination[key] = objectWithDeepMerge(target[key], source[key], options);\n        }\n    });\n    return destination;\n}\nfunction objectWithDeepMerge(target, source, options = {}) {\n    options.arrayMerge = options.arrayMerge || defaultArrayMerge;\n    options.isMergeableObject =\n        options.isMergeableObject || defaultIsMergeableObject;\n    const sourceIsArray = Array.isArray(source);\n    const targetIsArray = Array.isArray(target);\n    const sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n    if (!sourceAndTargetTypesMatch) {\n        return cloneUnlessOtherwiseSpecified(source, options);\n    }\n    else if (sourceIsArray) {\n        return options.arrayMerge(target, source, options);\n    }\n    else {\n        return mergeObject(target, source, options);\n    }\n}\nexports.objectWithDeepMerge = objectWithDeepMerge;\n//# sourceMappingURL=objectWithDeepMerge.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithCamelCase = void 0;\nconst stringWithSpaceCase_1 = require(\"./stringWithSpaceCase\");\nfunction stringWithCamelCase(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    return stringWithSpaceCase_1.stringWithSpaceCase(input).replace(/\\s(\\w)/g, (matches, letter) => {\n        return letter.toUpperCase();\n    });\n}\nexports.stringWithCamelCase = stringWithCamelCase;\n//# sourceMappingURL=stringWithCamelCase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithSpaceCase = void 0;\nconst stringWithNoCase_1 = require(\"./stringWithNoCase\");\nfunction stringWithSpaceCase(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    return stringWithNoCase_1.stringWithNoCase(input)\n        .replace(/[\\W_]+(.|$)/g, (matches, match) => {\n        return match ? \" \" + match : \"\";\n    })\n        .trim();\n}\nexports.stringWithSpaceCase = stringWithSpaceCase;\n//# sourceMappingURL=stringWithSpaceCase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Receipt = void 0;\nclass Receipt {\n    constructor(cancelFunction) {\n        Receipt._all.add(this);\n        this._cancelFunction = cancelFunction;\n    }\n    get isCancelled() {\n        return this._cancelFunction == null;\n    }\n    cancel() {\n        if (this._cancelFunction == null) {\n            return;\n        }\n        Receipt._all.delete(this);\n        const fn = this._cancelFunction;\n        this._cancelFunction = undefined;\n        fn();\n    }\n}\nexports.Receipt = Receipt;\nReceipt._all = new Set();\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConditionalActivator = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst Actor_1 = require(\"../Actor\");\nclass ConditionalActivator extends Actor_1.Actor {\n    constructor() {\n        super(...arguments);\n        this._output = observable_1.Observable.ofEmpty();\n        this.output = observable_1.ReadOnlyObservable.givenObservable(this._output);\n    }\n    onActivate() {\n        const isActive = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.cancelOnDeactivate(this.props.input.didChange.subscribe((input) => {\n            isActive.setValue(this.props.fn(input));\n        }, true));\n        this.cancelOnDeactivate(isActive.didChange.subscribe((value) => {\n            if (this._output.value != null) {\n                this.removeActor(this._output.value);\n                this._output.setValue(undefined);\n            }\n            if (value == true) {\n                let newActor;\n                if (typeof this.props.actor === \"function\") {\n                    newActor = this.props.actor();\n                }\n                else {\n                    newActor = this.props.actor;\n                }\n                this._output.setValue(this.addActor(newActor));\n            }\n        }, true));\n    }\n}\nexports.ConditionalActivator = ConditionalActivator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Timer = void 0;\nconst Actor_1 = require(\"../Actor\");\nconst observable_1 = require(\"@anderjason/observable\");\nclass Timer extends Actor_1.Actor {\n    onActivate() {\n        if (this.props.isRepeating == true) {\n            this._timeout = setInterval(() => {\n                try {\n                    this.props.fn();\n                }\n                catch (err) {\n                    console.warn(err);\n                }\n            }, this.props.duration.toMilliseconds());\n            this.cancelOnDeactivate(new observable_1.Receipt(() => {\n                if (this._timeout != null) {\n                    clearInterval(this._timeout);\n                    this._timeout = undefined;\n                }\n            }));\n        }\n        else {\n            this._timeout = setTimeout(() => {\n                try {\n                    this.props.fn();\n                }\n                catch (err) {\n                    console.warn(err);\n                }\n            }, this.props.duration.toMilliseconds());\n            this.cancelOnDeactivate(new observable_1.Receipt(() => {\n                if (this._timeout != null) {\n                    clearTimeout(this._timeout);\n                    this._timeout = undefined;\n                }\n            }));\n        }\n    }\n}\nexports.Timer = Timer;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Rotation = void 0;\nclass Rotation {\n    constructor(radians) {\n        this.radians = radians;\n    }\n    static ofZero() {\n        return this._zero;\n    }\n    static givenRadians(radians) {\n        return new Rotation(radians);\n    }\n    static givenDegrees(degrees) {\n        return new Rotation(degrees * (Math.PI / 180));\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get isZero() {\n        return this.radians === 0;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Rotation)) {\n            return false;\n        }\n        return other.radians === this.radians;\n    }\n    toDegrees() {\n        return (180 * this.radians) / Math.PI;\n    }\n}\nexports.Rotation = Rotation;\nRotation._zero = new Rotation(0);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Size2 = void 0;\nclass Size2 {\n    constructor(width, height) {\n        this._width = width;\n        this._height = height;\n    }\n    static givenWidthHeight(width, height) {\n        return new Size2(width, height);\n    }\n    static ofZero() {\n        return new Size2(0, 0);\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get isZero() {\n        return this._width === 0 || this._height === 0;\n    }\n    toHalf() {\n        if (this._half == null) {\n            this._half = Size2.givenWidthHeight(this._width / 2, this._height / 2);\n        }\n        return this._half;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Size2)) {\n            return false;\n        }\n        return other._width == this._width && other._height == this._height;\n    }\n    toScale(availableSize, scaleMode) {\n        if (availableSize == null) {\n            throw new Error(\"availableSize is required\");\n        }\n        if (availableSize.isZero || this.isZero) {\n            return 0;\n        }\n        const scaleX = availableSize.width / this._width;\n        const scaleY = availableSize.height / this._height;\n        const scale = Math.min(scaleX, scaleY);\n        if (scale < 1 && scaleMode === \"expand\") {\n            // would shrink, but only expanding is allowed\n            return 1;\n        }\n        if (scale > 1 && scaleMode === \"shrink\") {\n            // would expand, but only shrinking is allowed\n            return 1;\n        }\n        return scale;\n    }\n    toScaledSize(availableSize, scaleMode) {\n        const scale = this.toScale(availableSize, scaleMode);\n        return {\n            size: Size2.givenWidthHeight(this._width * scale, this._height * scale),\n            scale,\n        };\n    }\n    withAddedSize(other) {\n        return Size2.givenWidthHeight(this._width + other.width, this._height + other.height);\n    }\n    withSubtractedSize(other) {\n        return Size2.givenWidthHeight(this._width - other.width, this._height - other.height);\n    }\n}\nexports.Size2 = Size2;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optionalLineIntersectionGivenPoints = void 0;\nconst __1 = require(\"..\");\nfunction optionalLineIntersectionGivenPoints(startA, endA, startB, endB, mode) {\n    // based on https://stackoverflow.com/questions/13937782/calculating-the-point-of-intersection-of-two-lines\n    // if the lines intersect, the result contains the x and y of the intersection\n    // (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\n    let denominator;\n    let a;\n    let b;\n    let numerator1;\n    let numerator2;\n    let x;\n    let y;\n    let onLine1;\n    let onLine2;\n    denominator =\n        (endB.y - startB.y) * (endA.x - startA.x) -\n            (endB.x - startB.x) * (endA.y - startA.y);\n    if (denominator == 0) {\n        return undefined;\n    }\n    a = startA.y - startB.y;\n    b = startA.x - startB.x;\n    numerator1 = (endB.x - startB.x) * a - (endB.y - startB.y) * b;\n    numerator2 = (endA.x - startA.x) * a - (endA.y - startA.y) * b;\n    a = numerator1 / denominator;\n    b = numerator2 / denominator;\n    // if we cast these lines infinitely in both directions, they intersect here:\n    x = startA.x + a * (endA.x - startA.x);\n    y = startA.y + a * (endA.y - startA.y);\n    // if line1 is a segment and line2 is infinite, they intersect if:\n    if (a > 0 && a < 1) {\n        onLine1 = true;\n    }\n    // if line2 is a segment and line1 is infinite, they intersect if:\n    if (b > 0 && b < 1) {\n        onLine2 = true;\n    }\n    if (mode === \"touch\" && (onLine1 === false || onLine2 === false)) {\n        return undefined;\n    }\n    if (mode === \"extendOther\" && onLine1 === false) {\n        return undefined;\n    }\n    if (mode === \"extendThis\" && onLine2 === false) {\n        return undefined;\n    }\n    return __1.Point2.givenXY(x, y);\n}\nexports.optionalLineIntersectionGivenPoints = optionalLineIntersectionGivenPoints;\n//# sourceMappingURL=optionalLineIntersectionGivenPoints.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Segment2 = void 0;\nconst Point2_1 = require(\"../Point2\");\nconst Vector2_1 = require(\"../Vector2\");\nconst util_1 = require(\"@anderjason/util\");\nconst optionalLineIntersectionGivenPoints_1 = require(\"../Line2/optionalLineIntersectionGivenPoints\");\nconst segmentWithClippingBox_1 = require(\"./_internal/segmentWithClippingBox\");\nconst half = util_1.Percent.givenFraction(1, 2);\nclass Segment2 {\n    constructor(a, b) {\n        this._start = a;\n        this._end = b;\n    }\n    static givenXYPair(x1, y1, x2, y2) {\n        return new Segment2(Point2_1.Point2.givenXY(x1, y1), Point2_1.Point2.givenXY(x2, y2));\n    }\n    static givenPoints(startPoint, endPoint) {\n        return new Segment2(startPoint, endPoint);\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get startPoint() {\n        return this._start;\n    }\n    get endPoint() {\n        return this._end;\n    }\n    get startX() {\n        return this._start.x;\n    }\n    get endX() {\n        return this._end.x;\n    }\n    get startY() {\n        return this._start.y;\n    }\n    get endY() {\n        return this._end.y;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Segment2)) {\n            return false;\n        }\n        return other._start.isEqual(this._start) && other._end.isEqual(this._end);\n    }\n    toLength() {\n        return this._start.toDistance(this._end);\n    }\n    toNearestPoint(point, infinite) {\n        const pnt = Vector2_1.Vector2.givenXY(point.x, point.y);\n        if (infinite) {\n            const linePnt = Vector2_1.Vector2.givenXY(this._start.x, this._start.y);\n            const lineDir = Vector2_1.Vector2.givenPoints(this._start, this._end).withNormalizedMagnitude();\n            const v = pnt.withSubtractedVector(linePnt);\n            const d = v.toDotProduct(lineDir);\n            return linePnt.withAddedVector(lineDir.withMultipliedScalar(d)).toPoint();\n        }\n        else {\n            let line = Vector2_1.Vector2.givenPoints(this._start, this._end);\n            const len = line.toMagnitude();\n            line = line.withNormalizedMagnitude();\n            const startVector = Vector2_1.Vector2.givenPoint(this._start);\n            const v = pnt.withSubtractedVector(startVector);\n            let d = v.toDotProduct(line);\n            d = util_1.NumberUtil.numberWithHardLimit(d, 0, len);\n            return startVector\n                .withAddedVector(line.withMultipliedScalar(d))\n                .toPoint();\n        }\n    }\n    toMidpoint() {\n        return this.toIntermediatePoint(half);\n    }\n    toIntermediatePoint(percent) {\n        const t = percent.toNumber(1);\n        const x = this.startPoint.x + (this.endPoint.x - this.startPoint.x) * t;\n        const y = this.startPoint.y + (this.endPoint.y - this.startPoint.y) * t;\n        return Point2_1.Point2.givenXY(x, y);\n    }\n    toOptionalIntersectionGivenLine(other) {\n        return other.toOptionalIntersectionGivenSegment(this);\n    }\n    toOptionalIntersectionGivenSegment(other) {\n        const startA = this.startPoint;\n        const endA = this.endPoint;\n        const startB = other.startPoint;\n        const endB = other.endPoint;\n        return optionalLineIntersectionGivenPoints_1.optionalLineIntersectionGivenPoints(startA, endA, startB, endB, \"touch\");\n    }\n    toPointGivenDistance(distance, fromPoint) {\n        switch (fromPoint) {\n            case \"start\":\n                if (distance === 0) {\n                    return this.startPoint;\n                }\n                return this.startPoint.withAddedVector(Vector2_1.Vector2.givenPoints(this.startPoint, this.endPoint)\n                    .withNormalizedMagnitude()\n                    .withMultipliedScalar(distance));\n            case \"end\":\n                if (distance === 0) {\n                    return this.endPoint;\n                }\n                return this.endPoint.withAddedVector(Vector2_1.Vector2.givenPoints(this.endPoint, this.startPoint)\n                    .withNormalizedMagnitude()\n                    .withMultipliedScalar(distance));\n            default:\n                throw new Error(\"Unsupported fromPoint\");\n        }\n    }\n    withAddedVector(vector) {\n        return new Segment2(this._start.withAddedVector(vector), this._end.withAddedVector(vector));\n    }\n    withSubtractedVector(vector) {\n        return new Segment2(this._start.withSubtractedVector(vector), this._end.withSubtractedVector(vector));\n    }\n    withClippingBox(box) {\n        return segmentWithClippingBox_1.segmentWithClippingBox(this, box);\n    }\n}\nexports.Segment2 = Segment2;\n//# sourceMappingURL=index.js.map","import { Actor } from \"skytree\";\nimport { Observable, Receipt } from \"@anderjason/observable\";\nimport { ManagedElement } from \"../ManagedElement\";\n\nexport interface DynamicStyleElementDefinition<\n  K extends keyof HTMLElementTagNameMap\n> {\n  tagName: K;\n\n  parentElement?: HTMLElement | Observable<HTMLElement>;\n  classNamesByModifierName?: Map<string, string[]>;\n  constantClassNames?: string[];\n\n  transitionIn?: (\n    element: DynamicStyleElement<HTMLElementTagNameMap[K]>\n  ) => void;\n\n  transitionOut?: (\n    element: DynamicStyleElement<HTMLElementTagNameMap[K]>\n  ) => Promise<void>;\n\n  innerHTML?: string;\n}\n\nexport class DynamicStyleElement<T extends HTMLElement> extends Actor {\n  readonly parentElement: Observable<HTMLElement>;\n  readonly tagName: keyof HTMLElementTagNameMap;\n\n  static givenDefinition<K extends keyof HTMLElementTagNameMap>(\n    definition: DynamicStyleElementDefinition<K>\n  ): DynamicStyleElement<HTMLElementTagNameMap[K]> {\n    return new DynamicStyleElement(definition);\n  }\n\n  private _classNamesByModifierName: Map<string, string[]>;\n  private _managedElement: ManagedElement<T>;\n  private _modifiers = new Set<string>();\n  private _constantClassNames: string[];\n  private _transitionIn?: (element: DynamicStyleElement<T>) => void;\n  private _transitionOut?: (element: DynamicStyleElement<T>) => Promise<void>;\n  private _innerHTML?: string;\n\n  private constructor(definition: DynamicStyleElementDefinition<any>) {\n    super({});\n\n    if (definition.parentElement == null) {\n      this.parentElement = Observable.ofEmpty();\n    } else if (Observable.isObservable(definition.parentElement)) {\n      this.parentElement = definition.parentElement;\n    } else {\n      this.parentElement = Observable.givenValue(definition.parentElement);\n    }\n\n    this.tagName = definition.tagName;\n    this._innerHTML = definition.innerHTML;\n    this._transitionIn = definition.transitionIn;\n    this._transitionOut = definition.transitionOut;\n    this._classNamesByModifierName =\n      definition.classNamesByModifierName || new Map();\n    this._constantClassNames = definition.constantClassNames || [];\n  }\n\n  get element(): T | undefined {\n    const managed = this.managedElement;\n    if (managed == null) {\n      return undefined;\n    }\n\n    return managed.element;\n  }\n\n  get style(): CSSStyleDeclaration {\n    return this.element.style;\n  }\n\n  get managedElement(): ManagedElement<T> | undefined {\n    return this._managedElement;\n  }\n\n  onActivate() {\n    this._managedElement = this.addActor(\n      ManagedElement.givenDefinition({\n        tagName: this.tagName,\n        parentElement: this.parentElement,\n        classNames: Array.from(this.activeClassNames()),\n        innerHTML: this._innerHTML,\n        transitionIn: () => {\n          if (this._transitionIn != null) {\n            this._transitionIn(this);\n          }\n        },\n        transitionOut: async () => {\n          if (this._transitionOut != null) {\n            await this._transitionOut(this);\n          }\n        },\n      }) as ManagedElement<any>\n    );\n\n    this.updateClassNames();\n  }\n\n  addManagedEventListener<K extends keyof HTMLElementEventMap>(\n    type: K,\n    listener: (this: HTMLElement, ev: HTMLElementEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions\n  ): Receipt {\n    return this.managedElement.addManagedEventListener(type, listener, options);\n  }\n\n  toggleModifier(modifierName: string): void {\n    this.setModifier(modifierName, !this._modifiers.has(modifierName));\n  }\n\n  setModifier(modifierName: string, isActive: boolean): void {\n    if (isActive) {\n      if (this._modifiers.has(modifierName)) {\n        return;\n      }\n\n      this._modifiers.add(modifierName);\n\n      const classNames = this._classNamesByModifierName.get(modifierName);\n      if (classNames != null) {\n        classNames.forEach((name) => {\n          this.managedElement.classes.addValue(name);\n        });\n      }\n    } else {\n      if (!this._modifiers.has(modifierName)) {\n        return;\n      }\n\n      this._modifiers.delete(modifierName);\n      this.updateClassNames();\n    }\n  }\n\n  toModifiers(): string[] {\n    return Array.from(this._modifiers);\n  }\n\n  private activeClassNames(): Set<string> {\n    const result = new Set<string>();\n\n    this._modifiers.forEach((modifierName) => {\n      const classNames = this._classNamesByModifierName.get(modifierName);\n      if (classNames != null) {\n        classNames.forEach((name) => {\n          result.add(name);\n        });\n      }\n    });\n\n    this._constantClassNames.forEach((className) => {\n      result.add(className);\n    });\n\n    return result;\n  }\n\n  private updateClassNames(): void {\n    const activeClassNames = this.activeClassNames();\n\n    this._managedElement.classes.toArray().forEach((className) => {\n      if (!activeClassNames.has(className)) {\n        this._managedElement.classes.removeValue(className);\n      }\n    });\n\n    activeClassNames.forEach((className) => {\n      this._managedElement.classes.addValue(className);\n    });\n  }\n}\n","import {\n  Observable,\n  ReadOnlyObservable,\n  Receipt,\n} from \"@anderjason/observable\";\nimport { Actor } from \"skytree\";\n\nexport interface ElementMountWatcherProps {\n  element: HTMLElement;\n}\n\nexport class ElementMountWatcher extends Actor<ElementMountWatcherProps> {\n  private static watcherByElement = new Map<HTMLElement, ElementMountWatcher>();\n  private static _isWatching = false;\n\n  private static watchAllOnce(): void {\n    if (ElementMountWatcher._isWatching == true) {\n      return;\n    }\n\n    ElementMountWatcher._isWatching = true;\n\n    const mutationObserver = new MutationObserver((mutationsList, observer) => {\n      for (let watcher of this.watcherByElement.values()) {\n        const isMounted = watcher.props.element.offsetParent != null;\n        watcher._isElementMounted.setValue(isMounted);\n      }\n    });\n\n    mutationObserver.observe(document.body, {\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  private _isElementMounted = Observable.ofEmpty<boolean>(\n    Observable.isStrictEqual\n  );\n  readonly isElementMounted = ReadOnlyObservable.givenObservable(\n    this._isElementMounted\n  );\n\n  onActivate() {\n    ElementMountWatcher.watcherByElement.set(this.props.element, this);\n    ElementMountWatcher.watchAllOnce();\n\n    this._isElementMounted.setValue(this.props.element.offsetParent != null);\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        ElementMountWatcher.watcherByElement.delete(this.props.element);\n      })\n    );\n  }\n}\n","import { componentStyleToPreparedDomAction } from \"./_internal/componentStyleToPreparedDomAction\";\nimport { DynamicStyleElement } from \"../DynamicStyleElement\";\nimport { StringUtil } from \"@anderjason/util\";\nimport { Observable, Dict } from \"@anderjason/observable\";\n\ninterface ElementStyleDefinition {\n  css: string;\n\n  className?: string;\n  modifiers?: Dict<string>;\n}\n\ninterface StyleToElementDefinition<K extends keyof HTMLElementTagNameMap> {\n  tagName: K;\n  parentElement?: HTMLElement | Observable<HTMLElement>;\n\n  transitionIn?: (\n    element: DynamicStyleElement<HTMLElementTagNameMap[K]>\n  ) => void;\n\n  transitionOut?: (\n    element: DynamicStyleElement<HTMLElementTagNameMap[K]>\n  ) => Promise<void>;\n\n  innerHTML?: string;\n}\n\nexport class ElementStyle {\n  private static allClassNames = new Set<string>();\n\n  static givenDefinition(definition: ElementStyleDefinition): ElementStyle {\n    return new ElementStyle(definition);\n  }\n\n  readonly css: string;\n\n  private _className: string;\n  private _modifiers: Dict<string> | undefined;\n\n  private constructor(definition: ElementStyleDefinition) {\n    this.css = definition.css;\n    this._modifiers = definition.modifiers;\n\n    const randomString = StringUtil.stringOfRandomCharacters(6);\n\n    this._className =\n      definition.className != null\n        ? definition.className\n        : `es-${randomString}`;\n\n    if (ElementStyle.allClassNames.has(this._className)) {\n      throw new Error(\n        `A style with class name '${this._className}' has already been created`\n      );\n    }\n\n    ElementStyle.allClassNames.add(this._className);\n    componentStyleToPreparedDomAction(this);\n  }\n\n  toOptionalModifiers(): Dict<string> | undefined {\n    return this._modifiers;\n  }\n\n  toModifierKeys(): string[] {\n    return Object.keys(this._modifiers || {});\n  }\n\n  toCombinedClassName(modifierKeys?: string | string[]): string {\n    return this.toClassNames(modifierKeys).join(\" \");\n  }\n\n  toClassNames(modifierKeys?: string | string[]): string[] {\n    const result = [this._className];\n\n    if (modifierKeys != null) {\n      if (Array.isArray(modifierKeys)) {\n        modifierKeys.forEach((modifierKey) => {\n          result.push(\n            `${this._className}__${StringUtil.stringWithCase(\n              modifierKey,\n              \"kebab-case\"\n            )}`\n          );\n        });\n      } else {\n        result.push(\n          `${this._className}__${StringUtil.stringWithCase(\n            modifierKeys,\n            \"kebab-case\"\n          )}`\n        );\n      }\n    }\n\n    return result;\n  }\n\n  toDomElement<K extends keyof HTMLElementTagNameMap>(\n    tagName: K\n  ): HTMLElementTagNameMap[K] {\n    const element = document.createElement(tagName);\n    element.className = this.toCombinedClassName();\n    return element;\n  }\n\n  toManagedElement<K extends keyof HTMLElementTagNameMap>(\n    definition: StyleToElementDefinition<K>\n  ): DynamicStyleElement<HTMLElementTagNameMap[K]> {\n    const classNamesByModifierName = new Map<string, string[]>();\n\n    this.toModifierKeys().forEach((modifierName) => {\n      const classNames = this.toClassNames(modifierName);\n\n      classNamesByModifierName.set(modifierName, classNames);\n    });\n\n    return DynamicStyleElement.givenDefinition({\n      tagName: definition.tagName,\n      parentElement: definition.parentElement,\n      transitionIn: definition.transitionIn,\n      transitionOut: definition.transitionOut,\n      innerHTML: definition.innerHTML,\n      classNamesByModifierName,\n      constantClassNames: this.toClassNames(),\n    });\n  }\n}\n","var e=\"-ms-\";var r=\"-moz-\";var a=\"-webkit-\";var c=\"comm\";var n=\"rule\";var t=\"decl\";var s=\"@page\";var u=\"@media\";var i=\"@import\";var f=\"@charset\";var o=\"@viewport\";var l=\"@supports\";var v=\"@document\";var h=\"@namespace\";var p=\"@keyframes\";var w=\"@font-face\";var b=\"@counter-style\";var $=\"@font-feature-values\";var k=Math.abs;var d=String.fromCharCode;function m(e,r){return(((r<<2^z(e,0))<<2^z(e,1))<<2^z(e,2))<<2^z(e,3)}function g(e){return e.trim()}function x(e,r){return(e=r.exec(e))?e[0]:e}function y(e,r,a){return e.replace(r,a)}function j(e,r){return e.indexOf(r)}function z(e,r){return e.charCodeAt(r)|0}function C(e,r,a){return e.slice(r,a)}function A(e){return e.length}function M(e){return e.length}function O(e,r){return r.push(e),e}function S(e,r){return e.map(r).join(\"\")}var q=1;var B=1;var D=0;var E=0;var F=0;var G=\"\";function H(e,r,a,c,n,t,s){return{value:e,root:r,parent:a,type:c,props:n,children:t,line:q,column:B,length:s,return:\"\"}}function I(e,r,a){return H(e,r.root,r.parent,a,r.props,r.children,0)}function J(){return F}function K(){F=E<D?z(G,E++):0;if(B++,F===10)B=1,q++;return F}function L(){return z(G,E)}function N(){return E}function P(e,r){return C(G,e,r)}function Q(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return q=B=1,D=A(G=e),E=0,[]}function T(e){return G=\"\",e}function U(e){return g(P(E-1,Y(e===91?e+2:e===40?e+1:e)))}function V(e){return T(X(R(e)))}function W(e){while(F=L())if(F<33)K();else break;return Q(e)>2||Q(F)>3?\"\":\" \"}function X(e){while(K())switch(Q(F)){case 0:O(_(E-1),e);break;case 2:O(U(F),e);break;default:O(d(F),e)}return e}function Y(e){while(K())switch(F){case e:return E;case 34:case 39:return Y(e===34||e===39?e:F);case 40:if(e===41)Y(e);break;case 92:K();break}return E}function Z(e,r){while(K())if(e+F===47+10)break;else if(e+F===42+42&&L()===47)break;return\"/*\"+P(r,E-1)+\"*\"+d(e===47?e:K())}function _(e){while(!Q(L()))K();return P(e,E)}function ee(e){return T(re(\"\",null,null,null,[\"\"],e=R(e),0,[0],e))}function re(e,r,a,c,n,t,s,u,i){var f=0;var o=0;var l=s;var v=0;var h=0;var p=0;var w=1;var b=1;var $=1;var k=0;var m=\"\";var g=n;var x=t;var j=c;var z=m;while(b)switch(p=k,k=K()){case 34:case 39:case 91:case 40:z+=U(k);break;case 9:case 10:case 13:case 32:z+=W(p);break;case 47:switch(L()){case 42:case 47:O(ce(Z(K(),N()),r,a),i);break;default:z+=\"/\"}break;case 123*w:u[f++]=A(z)*$;case 125*w:case 59:case 0:switch(k){case 0:case 125:b=0;case 59+o:if(h>0)O(h>32?ne(z+\";\",c,a,l-1):ne(y(z,\" \",\"\")+\";\",c,a,l-2),i);break;case 59:z+=\";\";default:O(j=ae(z,r,a,f,o,n,u,m,g=[],x=[],l),t);if(k===123)if(o===0)re(z,r,j,j,g,t,l,u,x);else switch(v){case 100:case 109:case 115:re(e,j,j,c&&O(ae(e,j,j,0,0,n,u,m,n,g=[],l),x),n,x,l,u,c?g:x);break;default:re(z,j,j,j,[\"\"],x,l,u,x)}}f=o=h=0,w=$=1,m=z=\"\",l=s;break;case 58:l=1+A(z),h=p;default:switch(z+=d(k),k*w){case 38:$=o>0?1:(z+=\"\\f\",-1);break;case 44:u[f++]=(A(z)-1)*$,$=1;break;case 64:if(L()===45)z+=U(K());v=L(),o=A(m=z+=_(N())),k++;break;case 45:if(p===45&&A(z)==2)w=0}}return t}function ae(e,r,a,c,t,s,u,i,f,o,l){var v=t-1;var h=t===0?s:[\"\"];var p=M(h);for(var w=0,b=0,$=0;w<c;++w)for(var d=0,m=C(e,v+1,v=k(b=u[w])),x=e;d<p;++d)if(x=g(b>0?h[d]+\" \"+m:y(m,/&\\f/g,h[d])))f[$++]=x;return H(e,r,a,t===0?n:i,f,o,l)}function ce(e,r,a){return H(e,r,a,c,d(J()),C(e,2,-2),0)}function ne(e,r,a,c){return H(e,r,a,t,C(e,0,c),C(e,c+1,-1),c)}function te(c,n){switch(m(c,n)){case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return a+c+c;case 5349:case 4246:case 4810:case 6968:case 2756:return a+c+r+c+e+c+c;case 6828:case 4268:return a+c+e+c+c;case 6165:return a+c+e+\"flex-\"+c+c;case 5187:return a+c+y(c,/(\\w+).+(:[^]+)/,a+\"box-$1$2\"+e+\"flex-$1$2\")+c;case 5443:return a+c+e+\"flex-item-\"+y(c,/flex-|-self/,\"\")+c;case 4675:return a+c+e+\"flex-line-pack\"+y(c,/align-content|flex-|-self/,\"\")+c;case 5548:return a+c+e+y(c,\"shrink\",\"negative\")+c;case 5292:return a+c+e+y(c,\"basis\",\"preferred-size\")+c;case 6060:return a+\"box-\"+y(c,\"-grow\",\"\")+a+c+e+y(c,\"grow\",\"positive\")+c;case 4554:return a+y(c,/([^-])(transform)/g,\"$1\"+a+\"$2\")+c;case 6187:return y(y(y(c,/(zoom-|grab)/,a+\"$1\"),/(image-set)/,a+\"$1\"),c,\"\")+c;case 5495:case 3959:return y(c,/(image-set\\([^]*)/,a+\"$1\"+\"$`$1\");case 4968:return y(y(c,/(.+:)(flex-)?(.*)/,a+\"box-pack:$3\"+e+\"flex-pack:$3\"),/s.+-b[^;]+/,\"justify\")+a+c+c;case 4095:case 3583:case 4068:case 2532:return y(c,/(.+)-inline(.+)/,a+\"$1$2\")+c;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(A(c)-1-n>6)switch(z(c,n+1)){case 109:return y(c,/(.+:)(.+)-([^]+)/,\"$1\"+a+\"$2-$3\"+\"$1\"+r+\"$2-$3\")+c;case 102:return y(c,/(.+:)(.+)-([^]+)/,\"$1\"+a+\"$2-$3\"+\"$1\"+r+\"$3\")+c;case 115:return te(y(c,\"stretch\",\"fill-available\"),n)+c}break;case 4949:if(z(c,n+1)!==115)break;case 6444:switch(z(c,A(c)-3-(~j(c,\"!important\")&&10))){case 107:case 111:return y(c,c,a+c)+c;case 101:return y(c,/(.+:)([^;!]+)(;|!.+)?/,\"$1\"+a+(z(c,14)===45?\"inline-\":\"\")+\"box$3\"+\"$1\"+a+\"$2$3\"+\"$1\"+e+\"$2box$3\")+c}break;case 5936:switch(z(c,n+11)){case 114:return a+c+e+y(c,/[svh]\\w+-[tblr]{2}/,\"tb\")+c;case 108:return a+c+e+y(c,/[svh]\\w+-[tblr]{2}/,\"tb-rl\")+c;case 45:return a+c+e+y(c,/[svh]\\w+-[tblr]{2}/,\"lr\")+c}return a+c+e+c+c}return c}function se(e,r){var a=\"\";var c=M(e);for(var n=0;n<c;n++)a+=r(e[n],n,e,r)||\"\";return a}function ue(e,r,a,s){switch(e.type){case i:case t:return e.return=e.return||e.value;case c:return\"\";case n:e.value=e.props.join(\",\")}return A(a=se(e.children,s))?e.return=e.value+\"{\"+a+\"}\":\"\"}function ie(e){var r=M(e);return function(a,c,n,t){var s=\"\";for(var u=0;u<r;u++)s+=e[u](a,c,n,t)||\"\";return s}}function fe(e){return function(r){if(!r.root)if(r=r.return)e(r)}}function oe(c,s,u,i){if(!c.return)switch(c.type){case t:c.return=te(c.value,c.length);break;case p:return se([I(y(c.value,\"@\",\"@\"+a),c,\"\")],i);case n:if(c.length)return S(c.props,(function(n){switch(x(n,/(::plac\\w+|:read-\\w+)/)){case\":read-only\":case\":read-write\":return se([I(y(n,/:(read-\\w+)/,\":\"+r+\"$1\"),c,\"\")],i);case\"::placeholder\":return se([I(y(n,/:(plac\\w+)/,\":\"+a+\"input-$1\"),c,\"\"),I(y(n,/:(plac\\w+)/,\":\"+r+\"$1\"),c,\"\"),I(y(n,/:(plac\\w+)/,e+\"input-$1\"),c,\"\")],i)}return\"\"}))}}function le(e){switch(e.type){case n:e.props=e.props.map((function(r){return S(V(r),(function(r,a,c){switch(z(r,0)){case 12:return C(r,1,A(r));case 0:case 40:case 43:case 62:case 126:return r;case 58:if(c[a+1]===\"global\")c[a+1]=\"\",c[a+2]=\"\\f\"+C(c[a+2],a=1,-1);case 32:return a===1?\"\":r;default:switch(a){case 0:e=r;return M(c)>1?\"\":r;case a=M(c)-1:case 2:return a===2?r+e+e:r+e;default:return r}}}))}))}}export{f as CHARSET,c as COMMENT,b as COUNTER_STYLE,t as DECLARATION,v as DOCUMENT,w as FONT_FACE,$ as FONT_FEATURE_VALUES,i as IMPORT,p as KEYFRAMES,u as MEDIA,r as MOZ,e as MS,h as NAMESPACE,s as PAGE,n as RULESET,l as SUPPORTS,o as VIEWPORT,a as WEBKIT,k as abs,R as alloc,O as append,N as caret,J as char,F as character,G as characters,z as charat,B as column,S as combine,ce as comment,Z as commenter,ee as compile,I as copy,T as dealloc,ne as declaration,U as delimit,Y as delimiter,d as from,m as hash,_ as identifier,j as indexof,D as length,q as line,x as match,ie as middleware,le as namespace,K as next,H as node,re as parse,L as peek,E as position,te as prefix,oe as prefixer,y as replace,ae as ruleset,fe as rulesheet,se as serialize,M as sizeof,P as slice,ue as stringify,A as strlen,C as substr,Q as token,V as tokenize,X as tokenizer,g as trim,W as whitespace};\n//# sourceMappingURL=stylis.mjs.map\n","import { Actor } from \"skytree\";\nimport {\n  ObservableSet,\n  ReadOnlyObservableSet,\n  Receipt,\n} from \"@anderjason/observable\";\n\nexport class KeyboardWatcher extends Actor<void> {\n  private static _instance: KeyboardWatcher;\n\n  static controlKey = \"Control\";\n  static altKey = \"Alt\";\n  static shiftKey = \"Shift\";\n\n  static get instance(): KeyboardWatcher {\n    if (KeyboardWatcher._instance == null) {\n      KeyboardWatcher._instance = new KeyboardWatcher();\n      KeyboardWatcher._instance.activate();\n    }\n\n    return this._instance;\n  }\n\n  private _keys = ObservableSet.ofEmpty<string>();\n  readonly keys = ReadOnlyObservableSet.givenObservableSet(this._keys);\n\n  private constructor() {\n    super();\n  }\n\n  onActivate() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n    window.addEventListener(\"keyup\", this.onKeyUp);\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        window.removeEventListener(\"keydown\", this.onKeyDown);\n        window.removeEventListener(\"keyup\", this.onKeyUp);\n      })\n    );\n  }\n\n  private onKeyDown = (e: KeyboardEvent) => {\n    if (e.repeat == true) {\n      return;\n    }\n\n    let key = e.key;\n\n    if (key.length === 1) {\n      key = key.toLowerCase();\n    }\n\n    this._keys.addValue(key);\n  };\n\n  private onKeyUp = (e: KeyboardEvent) => {\n    let key = e.key;\n\n    if (key.length === 1) {\n      key = key.toLowerCase();\n    }\n\n    this._keys.removeValue(key);\n  };\n}\n","import { StringUtil } from \"@anderjason/util\";\n\nexport function objectGivenQueryString(queryString: string): any {\n  const result: any = {};\n\n  if (StringUtil.stringIsEmpty(queryString)) {\n    return result;\n  }\n\n  const text = queryString.trim().replace(/^[?#&]/, \"\");\n  if (text.length == 0) {\n    return result;\n  }\n\n  const parts = text.split(\"&\");\n  parts.forEach((part) => {\n    const partText = part.replace(/\\+/g, \" \");\n    const splitPart = partText.split(\"=\");\n\n    const key = decodeURIComponent(splitPart[0]);\n    let val = decodeURIComponent(splitPart[1]);\n\n    result[key] = val;\n  });\n\n  return result;\n}\n","import { objectGivenQueryString } from \"./objectGivenQueryString\";\n\nexport function objectOfCurrentQueryString(): any {\n  return objectGivenQueryString(window.location.search);\n}\n","export function queryStringGivenObject(input: any): string {\n  if (input == null) {\n    return \"\";\n  }\n\n  const pairs: any[] = [];\n\n  Object.keys(input).forEach((key) => {\n    let value = input[key];\n\n    if (value != null) {\n      value = encodeURIComponent(value);\n      pairs.push(`${key}=${value}`);\n    }\n  });\n\n  if (pairs.length === 0) {\n    return \"\";\n  }\n\n  return `?${pairs.join(\"&\")}`;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DynamicStyleElement = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst ManagedElement_1 = require(\"../ManagedElement\");\nclass DynamicStyleElement extends skytree_1.Actor {\n    constructor(definition) {\n        super({});\n        this._modifiers = new Set();\n        if (definition.parentElement == null) {\n            this.parentElement = observable_1.Observable.ofEmpty();\n        }\n        else if (observable_1.Observable.isObservable(definition.parentElement)) {\n            this.parentElement = definition.parentElement;\n        }\n        else {\n            this.parentElement = observable_1.Observable.givenValue(definition.parentElement);\n        }\n        this.tagName = definition.tagName;\n        this._innerHTML = definition.innerHTML;\n        this._transitionIn = definition.transitionIn;\n        this._transitionOut = definition.transitionOut;\n        this._classNamesByModifierName =\n            definition.classNamesByModifierName || new Map();\n        this._constantClassNames = definition.constantClassNames || [];\n    }\n    static givenDefinition(definition) {\n        return new DynamicStyleElement(definition);\n    }\n    get element() {\n        const managed = this.managedElement;\n        if (managed == null) {\n            return undefined;\n        }\n        return managed.element;\n    }\n    get style() {\n        return this.element.style;\n    }\n    get managedElement() {\n        return this._managedElement;\n    }\n    onActivate() {\n        this._managedElement = this.addActor(ManagedElement_1.ManagedElement.givenDefinition({\n            tagName: this.tagName,\n            parentElement: this.parentElement,\n            innerHTML: this._innerHTML,\n            transitionIn: this._transitionIn,\n            transitionOut: this._transitionOut,\n        }));\n        this.updateClassNames();\n    }\n    addManagedEventListener(type, listener, options) {\n        return this.managedElement.addManagedEventListener(type, listener, options);\n    }\n    addModifier(modifierName) {\n        if (this._modifiers.has(modifierName)) {\n            return;\n        }\n        this._modifiers.add(modifierName);\n        const classNames = this._classNamesByModifierName.get(modifierName);\n        if (classNames != null) {\n            classNames.forEach((name) => {\n                this.managedElement.classes.addValue(name);\n            });\n        }\n    }\n    removeModifier(modifierName) {\n        if (!this._modifiers.has(modifierName)) {\n            return;\n        }\n        this._modifiers.delete(modifierName);\n        this.updateClassNames();\n    }\n    toggleModifier(modifierName) {\n        if (this._modifiers.has(modifierName)) {\n            this.removeModifier(modifierName);\n        }\n        else {\n            this.addModifier(modifierName);\n        }\n    }\n    setModifier(modifierName, isActive) {\n        if (isActive) {\n            this.addModifier(modifierName);\n        }\n        else {\n            this.removeModifier(modifierName);\n        }\n    }\n    toModifiers() {\n        return Array.from(this._modifiers);\n    }\n    activeClassNames() {\n        const result = new Set();\n        this._modifiers.forEach((modifierName) => {\n            const classNames = this._classNamesByModifierName.get(modifierName);\n            if (classNames != null) {\n                classNames.forEach((name) => {\n                    result.add(name);\n                });\n            }\n        });\n        this._constantClassNames.forEach((className) => {\n            result.add(className);\n        });\n        return result;\n    }\n    updateClassNames() {\n        const activeClassNames = this.activeClassNames();\n        this._managedElement.classes.toArray().forEach((className) => {\n            if (!activeClassNames.has(className)) {\n                this._managedElement.classes.removeValue(className);\n            }\n        });\n        activeClassNames.forEach((className) => {\n            this._managedElement.classes.addValue(className);\n        });\n    }\n}\nexports.DynamicStyleElement = DynamicStyleElement;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeyboardWatcher = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nclass KeyboardWatcher extends skytree_1.Actor {\n    constructor() {\n        super();\n        this._keys = observable_1.ObservableSet.ofEmpty();\n        this.keys = observable_1.ReadOnlyObservableSet.givenObservableSet(this._keys);\n        this.onKeyDown = (e) => {\n            if (e.repeat == true) {\n                return;\n            }\n            let key = e.key;\n            if (key.length === 1) {\n                key = key.toLowerCase();\n            }\n            this._keys.addValue(key);\n        };\n        this.onKeyUp = (e) => {\n            let key = e.key;\n            if (key.length === 1) {\n                key = key.toLowerCase();\n            }\n            this._keys.removeValue(key);\n        };\n    }\n    static get instance() {\n        if (KeyboardWatcher._instance == null) {\n            KeyboardWatcher._instance = new KeyboardWatcher();\n            KeyboardWatcher._instance.activate();\n        }\n        return this._instance;\n    }\n    onActivate() {\n        window.addEventListener(\"keydown\", this.onKeyDown);\n        window.addEventListener(\"keyup\", this.onKeyUp);\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            window.removeEventListener(\"keydown\", this.onKeyDown);\n            window.removeEventListener(\"keyup\", this.onKeyUp);\n        }));\n    }\n}\nexports.KeyboardWatcher = KeyboardWatcher;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectGivenQueryString = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction objectGivenQueryString(queryString) {\n    const result = {};\n    if (util_1.StringUtil.stringIsEmpty(queryString)) {\n        return result;\n    }\n    const text = queryString.trim().replace(/^[?#&]/, \"\");\n    if (text.length == 0) {\n        return result;\n    }\n    const parts = text.split(\"&\");\n    parts.forEach((part) => {\n        const partText = part.replace(/\\+/g, \" \");\n        const splitPart = partText.split(\"=\");\n        const key = decodeURIComponent(splitPart[0]);\n        let val = decodeURIComponent(splitPart[1]);\n        result[key] = val;\n    });\n    return result;\n}\nexports.objectGivenQueryString = objectGivenQueryString;\n//# sourceMappingURL=objectGivenQueryString.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectOfCurrentQueryString = void 0;\nconst objectGivenQueryString_1 = require(\"./objectGivenQueryString\");\nfunction objectOfCurrentQueryString() {\n    return objectGivenQueryString_1.objectGivenQueryString(window.location.search);\n}\nexports.objectOfCurrentQueryString = objectOfCurrentQueryString;\n//# sourceMappingURL=objectOfCurrentQueryString.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.queryStringGivenObject = void 0;\nfunction queryStringGivenObject(input) {\n    if (input == null) {\n        return \"\";\n    }\n    const pairs = [];\n    Object.keys(input).forEach((key) => {\n        let value = input[key];\n        if (value != null) {\n            value = encodeURIComponent(value);\n            pairs.push(`${key}=${value}`);\n        }\n    });\n    if (pairs.length === 0) {\n        return \"\";\n    }\n    return `?${pairs.join(\"&\")}`;\n}\nexports.queryStringGivenObject = queryStringGivenObject;\n//# sourceMappingURL=queryStringGivenObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UndoContext = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst util_1 = require(\"@anderjason/util\");\nclass UndoContext {\n    constructor(initialValue, limit) {\n        this._currentStep = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.currentStep = observable_1.ReadOnlyObservable.givenObservable(this._currentStep);\n        this._undoStack = [];\n        this._redoStack = [];\n        this._canUndo = observable_1.Observable.givenValue(false, observable_1.Observable.isStrictEqual);\n        this.canUndo = observable_1.ReadOnlyObservable.givenObservable(this._canUndo);\n        this._canRedo = observable_1.Observable.givenValue(false, observable_1.Observable.isStrictEqual);\n        this.canRedo = observable_1.ReadOnlyObservable.givenObservable(this._canRedo);\n        this._limit = limit;\n        this.addStep(initialValue);\n    }\n    addStep(step) {\n        if (util_1.ObjectUtil.objectIsDeepEqual(step, this._currentStep.value)) {\n            return; // no effect\n        }\n        if (this._undoStack.length > this._limit - 1) {\n            this._undoStack = this._undoStack.slice(this._undoStack.length - this._limit + 1);\n        }\n        this._redoStack = [];\n        this._undoStack = [...this._undoStack, step];\n        this._canUndo.setValue(this._undoStack.length > 1);\n        this._canRedo.setValue(this._redoStack.length > 0);\n        this._currentStep.setValue(step);\n    }\n    undo() {\n        if (this._undoStack.length === 0) {\n            return false;\n        }\n        const step = this._undoStack.pop();\n        this._redoStack.push(step);\n        this._currentStep.setValue(util_1.ArrayUtil.optionalLastValueGivenArray(this._undoStack));\n        this._canUndo.setValue(this._undoStack.length > 1);\n        this._canRedo.setValue(this._redoStack.length > 0);\n        return true;\n    }\n    redo() {\n        if (this._redoStack.length === 0) {\n            return false;\n        }\n        const step = this._redoStack.pop();\n        this._undoStack.push(step);\n        this._currentStep.setValue(step);\n        this._canUndo.setValue(this._undoStack.length > 1);\n        this._canRedo.setValue(this._redoStack.length > 0);\n    }\n    clearSteps() {\n        this._undoStack = [this._currentStep.value];\n        this._redoStack = [];\n        this._canUndo.setValue(this._undoStack.length > 1);\n        this._canRedo.setValue(this._redoStack.length > 0);\n    }\n}\nexports.UndoContext = UndoContext;\n//# sourceMappingURL=index.js.map","/* Font Face Observer v2.1.0 - © Bram Stein. License: BSD-3-Clause */(function(){function l(a,b){document.addEventListener?a.addEventListener(\"scroll\",b,!1):a.attachEvent(\"scroll\",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener(\"DOMContentLoaded\",function c(){document.removeEventListener(\"DOMContentLoaded\",c);a()}):document.attachEvent(\"onreadystatechange\",function k(){if(\"interactive\"==document.readyState||\"complete\"==document.readyState)document.detachEvent(\"onreadystatechange\",k),a()})};function t(a){this.a=document.createElement(\"div\");this.a.setAttribute(\"aria-hidden\",\"true\");this.a.appendChild(document.createTextNode(a));this.b=document.createElement(\"span\");this.c=document.createElement(\"span\");this.h=document.createElement(\"span\");this.f=document.createElement(\"span\");this.g=-1;this.b.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.c.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";\nthis.f.style.cssText=\"max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;\";this.h.style.cssText=\"display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;\";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}\nfunction u(a,b){a.a.style.cssText=\"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:\"+b+\";\"}function z(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+\"px\";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function A(a,b){function c(){var a=k;z(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);z(a)};function B(a,b){var c=b||{};this.family=a;this.style=c.style||\"normal\";this.weight=c.weight||\"normal\";this.stretch=c.stretch||\"normal\"}var C=null,D=null,E=null,F=null;function G(){if(null===D)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))(?:\\.([0-9]+))/.exec(window.navigator.userAgent);D=!!a&&603>parseInt(a[1],10)}else D=!1;return D}function J(){null===F&&(F=!!document.fonts);return F}\nfunction K(){if(null===E){var a=document.createElement(\"div\");try{a.style.font=\"condensed 100px sans-serif\"}catch(b){}E=\"\"!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:\"\",\"100px\",b].join(\" \")}\nB.prototype.load=function(a,b){var c=this,k=a||\"BESbswy\",r=0,n=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=n?b(Error(\"\"+n+\"ms timeout exceeded\")):document.fonts.load(L(c,'\"'+c.family+'\"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},b)}e()}),N=new Promise(function(a,c){r=setTimeout(function(){c(Error(\"\"+n+\"ms timeout exceeded\"))},n)});Promise.race([N,M]).then(function(){clearTimeout(r);a(c)},\nb)}else m(function(){function v(){var b;if(b=-1!=f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===C&&(b=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent),C=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=C&&(f==w&&g==w&&h==w||f==x&&g==x&&h==x||f==y&&g==y&&h==y)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(r),a(c))}function I(){if((new Date).getTime()-H>=n)d.parentNode&&d.parentNode.removeChild(d),b(Error(\"\"+\nn+\"ms timeout exceeded\"));else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,g=p.a.offsetWidth,h=q.a.offsetWidth,v();r=setTimeout(I,50)}}var e=new t(k),p=new t(k),q=new t(k),f=-1,g=-1,h=-1,w=-1,x=-1,y=-1,d=document.createElement(\"div\");d.dir=\"ltr\";u(e,L(c,\"sans-serif\"));u(p,L(c,\"serif\"));u(q,L(c,\"monospace\"));d.appendChild(e.a);d.appendChild(p.a);d.appendChild(q.a);document.body.appendChild(d);w=e.a.offsetWidth;x=p.a.offsetWidth;y=q.a.offsetWidth;I();A(e,function(a){f=a;v()});u(e,\nL(c,'\"'+c.family+'\",sans-serif'));A(p,function(a){g=a;v()});u(p,L(c,'\"'+c.family+'\",serif'));A(q,function(a){h=a;v()});u(q,L(c,'\"'+c.family+'\",monospace'))})})};\"object\"===typeof module?module.exports=B:(window.FontFaceObserver=B,window.FontFaceObserver.prototype.load=B.prototype.load);}());\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Matrix = void 0;\nconst Vector_1 = require(\"../Vector\");\nclass Matrix {\n    constructor(elements) {\n        this.rows = elements;\n    }\n    static ofIdentity(size) {\n        const rows = [];\n        for (let i = 0; i < size; i++) {\n            rows[i] = [];\n            for (let j = 0; j < size; j++) {\n                rows[i][j] = i === j ? 1 : 0;\n            }\n        }\n        return new Matrix(rows);\n    }\n    static givenRows(rows) {\n        const rowsCopy = [];\n        // deep copy\n        for (let row = 0; row < rows.length; row++) {\n            rowsCopy[row] = [];\n            for (let col = 0; col < rows[row].length; col++) {\n                rowsCopy[row][col] = rows[row][col];\n            }\n        }\n        return new Matrix(rowsCopy);\n    }\n    static givenRow(row) {\n        const rows = [];\n        for (let i = 0; i < row.length; i++) {\n            rows.push([row[i]]);\n        }\n        return new Matrix(rows);\n    }\n    isSquare() {\n        const cols = this.rows.length === 0 ? 0 : this.rows[0].length;\n        return this.rows.length === cols;\n    }\n    isSingular() {\n        return this.isSquare() && this.toDeterminant() === 0;\n    }\n    toDeterminant() {\n        if (this.rows.length === 0) {\n            return 1;\n        }\n        if (!this.isSquare()) {\n            return null;\n        }\n        const rightTriangular = this.withRightTriangular();\n        let result = rightTriangular.rows[0][0];\n        for (let i = 1; i < rightTriangular.rows.length; i++) {\n            result = result * rightTriangular.rows[i][i];\n        }\n        return result;\n    }\n    withClone() {\n        return Matrix.givenRows(this.rows);\n    }\n    withRightTriangular() {\n        if (this.rows.length === 0) {\n            return new Matrix([]);\n        }\n        let clone = this.withClone();\n        let row;\n        for (let i = 0; i < this.rows.length; i++) {\n            if (clone.rows[i][i] === 0) {\n                for (let j = i + 1; j < this.rows.length; j++) {\n                    if (clone.rows[j][i] !== 0) {\n                        row = [];\n                        for (let p = 0; p < this.rows[0].length; p++) {\n                            row.push(clone.rows[i][p] + clone.rows[j][p]);\n                        }\n                        clone.rows[i] = row;\n                        break;\n                    }\n                }\n            }\n            if (clone.rows[i][i] !== 0) {\n                for (let j = i + 1; j < this.rows.length; j++) {\n                    var multiplier = clone.rows[j][i] / clone.rows[i][i];\n                    row = [];\n                    for (let p = 0; p < this.rows[0].length; p++) {\n                        row.push(p <= i ? 0 : clone.rows[j][p] - clone.rows[i][p] * multiplier);\n                    }\n                    clone.rows[j] = row;\n                }\n            }\n        }\n        return clone;\n    }\n    toOptionalValueGivenRowAndColumn(rowIndex, colIndex) {\n        if (rowIndex < 0 ||\n            rowIndex >= this.rows.length ||\n            colIndex < 0 ||\n            colIndex >= this.rows[0].length) {\n            return undefined;\n        }\n        return this.rows[rowIndex][colIndex];\n    }\n    withMap(fn) {\n        if (this.rows.length === 0) {\n            return new Matrix([]);\n        }\n        let result2d = [];\n        for (let row = 0; row < this.rows.length; row++) {\n            result2d[row] = [];\n            for (let col = 0; col < this.rows[0].length; col++) {\n                result2d[row][col] = fn(this.rows[row][col], row, col);\n            }\n        }\n        return Matrix.givenRows(result2d);\n    }\n    withMultipliedMatrix(matrix) {\n        if (this.rows.length === 0) {\n            throw new Error(\"Cannot multiply because there are no rows in this matrix\");\n        }\n        if (this.rows[0].length !== matrix.rows.length) {\n            throw new Error(\"Cannot multiply the specified matrices\");\n        }\n        const M = matrix.rows;\n        let i = this.rows.length;\n        let nj = M[0].length;\n        let j;\n        let cols = this.rows[0].length;\n        let c;\n        let elements = [];\n        let sum;\n        while (i--) {\n            j = nj;\n            elements[i] = [];\n            while (j--) {\n                c = cols;\n                sum = 0;\n                while (c--) {\n                    sum += this.rows[i][c] * M[c][j];\n                }\n                elements[i][j] = sum;\n            }\n        }\n        return Matrix.givenRows(elements);\n    }\n    toColumnVector(columnIndex) {\n        if (this.rows.length === 0) {\n            return null;\n        }\n        if (columnIndex >= this.rows[0].length) {\n            return null;\n        }\n        let col = [];\n        for (let i = 0; i < this.rows.length; i++) {\n            col.push(this.rows[i][columnIndex]);\n        }\n        return new Vector_1.Vector(col);\n    }\n    withAugumentedMatrix(other) {\n        if (this.rows.length === 0) {\n            return this.withClone();\n        }\n        if (this.rows.length !== other.rows.length) {\n            return null;\n        }\n        const thisClone = this.withClone();\n        const cols = thisClone.rows[0].length;\n        for (let i = 0; i < this.rows.length; i++) {\n            for (let j = 0; j < other.rows[0].length; j++) {\n                thisClone.rows[i][cols + j] = other.rows[i][j];\n            }\n        }\n        return thisClone;\n    }\n    withInverse() {\n        if (this.rows.length === 0) {\n            return null;\n        }\n        if (!this.isSquare() || this.isSingular()) {\n            return null;\n        }\n        const n = this.rows.length;\n        let i = n;\n        let j;\n        const M = this.withAugumentedMatrix(Matrix.ofIdentity(n)).withRightTriangular();\n        const np = M.rows[0].length;\n        let p;\n        let elements;\n        let divisor;\n        let inverseElements = [];\n        let newElement;\n        while (i--) {\n            elements = [];\n            inverseElements[i] = [];\n            divisor = M.rows[i][i];\n            for (p = 0; p < np; p++) {\n                newElement = M.rows[i][p] / divisor;\n                elements.push(newElement);\n                if (p >= n) {\n                    inverseElements[i].push(newElement);\n                }\n            }\n            M.rows[i] = elements;\n            j = i;\n            while (j--) {\n                elements = [];\n                for (p = 0; p < np; p++) {\n                    elements.push(M.rows[j][p] - M.rows[i][p] * M.rows[j][i]);\n                }\n                M.rows[j] = elements;\n            }\n        }\n        return Matrix.givenRows(inverseElements);\n    }\n}\nexports.Matrix = Matrix;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Vector = void 0;\nconst Matrix_1 = require(\"../Matrix\");\nclass Vector {\n    constructor(elements) {\n        this.elements = Array.from(elements);\n    }\n    withMultipliedMatrix(matrix) {\n        const thisAsMatrix = Matrix_1.Matrix.givenRow(this.elements);\n        return matrix.withMultipliedMatrix(thisAsMatrix).toColumnVector(0);\n    }\n}\nexports.Vector = Vector;\n//# sourceMappingURL=index.js.map","import {\n  Observable,\n  ObservableArray,\n  ReadOnlyObservable,\n  ReadOnlyObservableArray,\n} from \"@anderjason/observable\";\nimport { ObjectUtil } from \"@anderjason/util\";\n\nexport type UndoClearBehavior = \"keepCurrent\" | \"clearAll\";\n\nexport class UndoContext<T = any> {\n  private _output = Observable.ofEmpty<T>(Observable.isStrictEqual);\n  readonly output = ReadOnlyObservable.givenObservable(this._output);\n\n  private _currentIndex = Observable.ofEmpty<number>();\n  readonly currentIndex = ReadOnlyObservable.givenObservable(\n    this._currentIndex\n  );\n\n  private _steps = ObservableArray.ofEmpty<T>();\n  readonly steps = ReadOnlyObservableArray.givenObservableArray(this._steps);\n\n  private _canUndo = Observable.givenValue<boolean>(\n    false,\n    Observable.isStrictEqual\n  );\n  readonly canUndo = ReadOnlyObservable.givenObservable(this._canUndo);\n\n  private _canRedo = Observable.givenValue<boolean>(\n    false,\n    Observable.isStrictEqual\n  );\n  readonly canRedo = ReadOnlyObservable.givenObservable(this._canRedo);\n\n  private _limit: number;\n\n  constructor(initialValue: T, limit: number) {\n    this._limit = limit;\n    this.pushStep(initialValue);\n  }\n\n  pushStep(step: T): void {\n    if (ObjectUtil.objectIsDeepEqual(step, this._output.value)) {\n      return; // no effect\n    }\n\n    this._steps.removeAllWhere((v, i) => i > this._currentIndex.value);\n\n    if (this._limit != null && this.steps.count === this._limit) {\n      this._steps.removeValueAtIndex(0);\n    }\n\n    this._steps.addValue(step);\n\n    this.setCurrentIndex(this._steps.count - 1);\n  }\n\n  replaceStep(step: T): void {\n    if (this._currentIndex.value == null) {\n      return;\n    }\n\n    if (ObjectUtil.objectIsDeepEqual(step, this._output.value)) {\n      return; // no effect\n    }\n\n    this._steps.replaceValueAtIndex(this._currentIndex.value, step);\n  }\n\n  undo(): boolean {\n    if (this._currentIndex.value == null || this._currentIndex.value === 0) {\n      return false;\n    }\n\n    this.setCurrentIndex(this.currentIndex.value - 1);\n\n    return true;\n  }\n\n  redo(): boolean {\n    if (\n      this._currentIndex.value == null ||\n      this._currentIndex.value === this._steps.count - 1\n    ) {\n      return false;\n    }\n\n    this.setCurrentIndex(this.currentIndex.value + 1);\n\n    return true;\n  }\n\n  clearSteps(clearBehavior: UndoClearBehavior): void {\n    const current = this._output.value;\n\n    if (current != null && clearBehavior == \"keepCurrent\") {\n      this._steps.sync([current]);\n      this.setCurrentIndex(0);\n    } else {\n      this._steps.clear();\n      this.setCurrentIndex(undefined);\n    }\n  }\n\n  private setCurrentIndex(index: number | undefined): void {\n    this._currentIndex.setValue(index);\n    this._output.setValue(\n      index != null ? this._steps.toOptionalValueGivenIndex(index) : undefined\n    );\n    this._canUndo.setValue(index != null && index > 0);\n    this._canRedo.setValue(index != null && index < this._steps.count - 1);\n  }\n}\n","import { Vector } from \"../Vector\";\n\nexport type MatrixRow = number[];\nexport type MatrixRows = MatrixRow[];\n\nexport class Matrix {\n  rows: MatrixRows;\n\n  static ofIdentity(size: number): Matrix {\n    const rows: MatrixRow[] = [];\n\n    for (let i = 0; i < size; i++) {\n      rows[i] = [];\n\n      for (let j = 0; j < size; j++) {\n        rows[i][j] = i === j ? 1 : 0;\n      }\n    }\n\n    return new Matrix(rows);\n  }\n\n  static givenRows(rows: MatrixRows): Matrix {\n    const rowsCopy: MatrixRows = [];\n\n    // deep copy\n    for (let row = 0; row < rows.length; row++) {\n      rowsCopy[row] = [];\n\n      for (let col = 0; col < rows[row].length; col++) {\n        rowsCopy[row][col] = rows[row][col];\n      }\n    }\n\n    return new Matrix(rowsCopy);\n  }\n\n  static givenRow(row: MatrixRow): Matrix {\n    const rows: MatrixRows = [];\n\n    for (let i = 0; i < row.length; i++) {\n      rows.push([row[i]]);\n    }\n\n    return new Matrix(rows);\n  }\n\n  private constructor(elements: MatrixRows) {\n    this.rows = elements;\n  }\n\n  isSquare(): boolean {\n    const cols = this.rows.length === 0 ? 0 : this.rows[0].length;\n\n    return this.rows.length === cols;\n  }\n\n  isSingular(): boolean {\n    return this.isSquare() && this.toDeterminant() === 0;\n  }\n\n  toDeterminant(): number {\n    if (this.rows.length === 0) {\n      return 1;\n    }\n\n    if (!this.isSquare()) {\n      return null;\n    }\n\n    const rightTriangular = this.withRightTriangular();\n    let result = rightTriangular.rows[0][0];\n\n    for (let i = 1; i < rightTriangular.rows.length; i++) {\n      result = result * rightTriangular.rows[i][i];\n    }\n\n    return result;\n  }\n\n  withClone(): Matrix {\n    return Matrix.givenRows(this.rows);\n  }\n\n  withRightTriangular(): Matrix {\n    if (this.rows.length === 0) {\n      return new Matrix([]);\n    }\n\n    let clone = this.withClone();\n\n    let row: MatrixRow;\n\n    for (let i = 0; i < this.rows.length; i++) {\n      if (clone.rows[i][i] === 0) {\n        for (let j = i + 1; j < this.rows.length; j++) {\n          if (clone.rows[j][i] !== 0) {\n            row = [];\n            for (let p = 0; p < this.rows[0].length; p++) {\n              row.push(clone.rows[i][p] + clone.rows[j][p]);\n            }\n            clone.rows[i] = row;\n            break;\n          }\n        }\n      }\n\n      if (clone.rows[i][i] !== 0) {\n        for (let j = i + 1; j < this.rows.length; j++) {\n          var multiplier = clone.rows[j][i] / clone.rows[i][i];\n          row = [];\n          for (let p = 0; p < this.rows[0].length; p++) {\n            row.push(\n              p <= i ? 0 : clone.rows[j][p] - clone.rows[i][p] * multiplier\n            );\n          }\n\n          clone.rows[j] = row;\n        }\n      }\n    }\n\n    return clone;\n  }\n\n  toOptionalValueGivenRowAndColumn(rowIndex: number, colIndex: number): number {\n    if (\n      rowIndex < 0 ||\n      rowIndex >= this.rows.length ||\n      colIndex < 0 ||\n      colIndex >= this.rows[0].length\n    ) {\n      return undefined;\n    }\n\n    return this.rows[rowIndex][colIndex];\n  }\n\n  withMap(\n    fn: (value: number, rowIdx: number, colIdx: number) => number\n  ): Matrix {\n    if (this.rows.length === 0) {\n      return new Matrix([]);\n    }\n\n    let result2d: MatrixRows = [];\n\n    for (let row = 0; row < this.rows.length; row++) {\n      result2d[row] = [];\n\n      for (let col = 0; col < this.rows[0].length; col++) {\n        result2d[row][col] = fn(this.rows[row][col], row, col);\n      }\n    }\n\n    return Matrix.givenRows(result2d);\n  }\n\n  withMultipliedMatrix(matrix: Matrix): Matrix {\n    if (this.rows.length === 0) {\n      throw new Error(\n        \"Cannot multiply because there are no rows in this matrix\"\n      );\n    }\n\n    if (this.rows[0].length !== matrix.rows.length) {\n      throw new Error(\"Cannot multiply the specified matrices\");\n    }\n\n    const M = matrix.rows;\n\n    let i = this.rows.length;\n    let nj = M[0].length;\n    let j;\n\n    let cols = this.rows[0].length;\n    let c;\n    let elements = [];\n    let sum;\n\n    while (i--) {\n      j = nj;\n      elements[i] = [];\n      while (j--) {\n        c = cols;\n        sum = 0;\n        while (c--) {\n          sum += this.rows[i][c] * M[c][j];\n        }\n        elements[i][j] = sum;\n      }\n    }\n\n    return Matrix.givenRows(elements);\n  }\n\n  toColumnVector(columnIndex: number): Vector {\n    if (this.rows.length === 0) {\n      return null;\n    }\n\n    if (columnIndex >= this.rows[0].length) {\n      return null;\n    }\n\n    let col: MatrixRow = [];\n\n    for (let i = 0; i < this.rows.length; i++) {\n      col.push(this.rows[i][columnIndex]);\n    }\n\n    return new Vector(col);\n  }\n\n  withAugumentedMatrix(other: Matrix): Matrix {\n    if (this.rows.length === 0) {\n      return this.withClone();\n    }\n\n    if (this.rows.length !== other.rows.length) {\n      return null;\n    }\n\n    const thisClone = this.withClone();\n    const cols = thisClone.rows[0].length;\n\n    for (let i = 0; i < this.rows.length; i++) {\n      for (let j = 0; j < other.rows[0].length; j++) {\n        thisClone.rows[i][cols + j] = other.rows[i][j];\n      }\n    }\n\n    return thisClone;\n  }\n\n  withInverse(): Matrix {\n    if (this.rows.length === 0) {\n      return null;\n    }\n\n    if (!this.isSquare() || this.isSingular()) {\n      return null;\n    }\n\n    const n = this.rows.length;\n    let i = n;\n    let j;\n\n    const M = this.withAugumentedMatrix(\n      Matrix.ofIdentity(n)\n    ).withRightTriangular();\n\n    const np = M.rows[0].length;\n    let p;\n    let elements;\n    let divisor;\n    let inverseElements = [];\n    let newElement;\n\n    while (i--) {\n      elements = [];\n      inverseElements[i] = [];\n      divisor = M.rows[i][i];\n\n      for (p = 0; p < np; p++) {\n        newElement = M.rows[i][p] / divisor;\n        elements.push(newElement);\n\n        if (p >= n) {\n          inverseElements[i].push(newElement);\n        }\n      }\n      M.rows[i] = elements;\n\n      j = i;\n      while (j--) {\n        elements = [];\n        for (p = 0; p < np; p++) {\n          elements.push(M.rows[j][p] - M.rows[i][p] * M.rows[j][i]);\n        }\n        M.rows[j] = elements;\n      }\n    }\n\n    return Matrix.givenRows(inverseElements);\n  }\n}\n","import { Matrix } from \"../Matrix\";\n\nexport class Vector {\n  elements: number[];\n\n  constructor(elements: number[]) {\n    this.elements = Array.from(elements);\n  }\n\n  withMultipliedMatrix(matrix: Matrix): Vector {\n    const thisAsMatrix = Matrix.givenRow(this.elements);\n    return matrix.withMultipliedMatrix(thisAsMatrix).toColumnVector(0);\n  }\n}\n","import { ObservableArray } from \"@anderjason/observable\";\nimport { IntersectionWatcherDemo } from \"./IntersectionWatcherDemo\";\nimport { ScrollAreaDemo } from \"./ScrollAreaDemo\";\nimport { ExampleDefinition, ExamplesHome } from \"@anderjason/example-tools\";\nimport { UndoDemo } from \"./UndoDemo\";\nimport { KeyboardWatcherDemo } from \"./KeyboardWatcherDemo\";\nimport { ElementSizeWatcherDemo } from \"./ElementSizeWatcherDemo\";\nimport { TransitionDemo } from \"./TransitionDemo\";\n\nconst definitions = ObservableArray.givenValues<ExampleDefinition>([\n  {\n    title: \"Transition\",\n    actor: new TransitionDemo({}),\n  },\n  {\n    title: \"Element size watcher\",\n    actor: new ElementSizeWatcherDemo({}),\n  },\n  {\n    title: \"Intersection watcher\",\n    actor: new IntersectionWatcherDemo({}),\n  },\n  {\n    title: \"Scroll area\",\n    actor: new ScrollAreaDemo({}),\n  },\n  {\n    title: \"Undo\",\n    actor: new UndoDemo({}),\n  },\n  {\n    title: \"Keyboard watcher\",\n    actor: new KeyboardWatcherDemo({}),\n  },\n]);\n\nconst main = new ExamplesHome({\n  title: \"@anderjason/web\",\n  definitions,\n});\nmain.activate();\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Observable = void 0;\nconst TypedEvent_1 = require(\"../TypedEvent\");\nclass Observable {\n    constructor(value, filter) {\n        this.didChange = new TypedEvent_1.TypedEvent();\n        this._isObservable = true;\n        this.discardFilter = filter;\n        if (value != null) {\n            this.setValue(value);\n        }\n    }\n    static isStrictEqual(newValue, oldValue) {\n        return newValue === oldValue;\n    }\n    static isObservable(input) {\n        if (input == null) {\n            return false;\n        }\n        if (typeof input !== \"object\") {\n            return false;\n        }\n        return input._isObservable === true;\n    }\n    static givenValue(value, discardFilter) {\n        return new Observable(value, discardFilter);\n    }\n    static ofEmpty(discardFilter) {\n        return new Observable(undefined, discardFilter);\n    }\n    get value() {\n        return this._value;\n    }\n    setValue(newValue) {\n        let discard = false;\n        if (this.discardFilter != null) {\n            try {\n                discard = this.discardFilter(newValue, this._value);\n            }\n            catch (err) {\n                console.warn(err);\n            }\n        }\n        if (discard) {\n            return;\n        }\n        this._value = newValue;\n        this.didChange.emit(newValue);\n    }\n}\nexports.Observable = Observable;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayIsEmptyOrNull = void 0;\nfunction arrayIsEmptyOrNull(input) {\n    if (input == null) {\n        return true;\n    }\n    if (!Array.isArray(input)) {\n        throw new Error(\"input must be an array\");\n    }\n    return input.length === 0;\n}\nexports.arrayIsEmptyOrNull = arrayIsEmptyOrNull;\n//# sourceMappingURL=arrayIsEmptyOrNull.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithEqualSizeGroups = void 0;\nfunction arrayWithEqualSizeGroups(input, groupSize) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    if (groupSize == null) {\n        throw new Error(\"groupSize is required\");\n    }\n    if (groupSize < 1) {\n        throw new Error(\"groupSize must be greater than 0\");\n    }\n    const result = [];\n    const length = input.length;\n    let i = 0;\n    while (i < length) {\n        result.push(input.slice(i, (i += groupSize)));\n    }\n    return result;\n}\nexports.arrayWithEqualSizeGroups = arrayWithEqualSizeGroups;\n//# sourceMappingURL=arrayWithEqualSizeGroups.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithLeftShift = void 0;\nfunction arrayWithLeftShift(input) {\n    let result = [...input];\n    if (result.length > 0) {\n        result.push(result.shift());\n    }\n    return result;\n}\nexports.arrayWithLeftShift = arrayWithLeftShift;\n//# sourceMappingURL=arrayWithLeftShift.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithOrderFromValue = void 0;\nfunction arrayWithOrderFromValue(input, getSortableValue, direction) {\n    const result = [...input];\n    if (direction === \"descending\") {\n        result.sort((a, b) => {\n            const valueA = getSortableValue(a);\n            const valueB = getSortableValue(b);\n            if (valueA < valueB) {\n                return 1;\n            }\n            if (valueA > valueB) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n    else {\n        result.sort((a, b) => {\n            const valueA = getSortableValue(a);\n            const valueB = getSortableValue(b);\n            if (valueA < valueB) {\n                return -1;\n            }\n            if (valueA > valueB) {\n                return 1;\n            }\n            return 0;\n        });\n    }\n    return result;\n}\nexports.arrayWithOrderFromValue = arrayWithOrderFromValue;\n//# sourceMappingURL=arrayWithOrderFromValue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithoutDuplicateValues = void 0;\nfunction arrayWithoutDuplicateValues(values) {\n    const seen = new Set();\n    const result = [];\n    // preserve order of the items\n    values.forEach((item) => {\n        if (!seen.has(item)) {\n            seen.add(item);\n            result.push(item);\n        }\n    });\n    return result;\n}\nexports.arrayWithoutDuplicateValues = arrayWithoutDuplicateValues;\n//# sourceMappingURL=arrayWithoutDuplicateValues.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithoutValue = void 0;\nfunction arrayWithoutValue(input, excludeValue) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    if (excludeValue == null) {\n        return [...input];\n    }\n    return input.filter((item) => item !== excludeValue);\n}\nexports.arrayWithoutValue = arrayWithoutValue;\n//# sourceMappingURL=arrayWithoutValue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithPageSubset = void 0;\nfunction arrayWithPageSubset(input, startIndex, pageSize) {\n    const start = startIndex;\n    const end = start + pageSize;\n    return input.slice(start, end);\n}\nexports.arrayWithPageSubset = arrayWithPageSubset;\n//# sourceMappingURL=arrayWithPageSubset.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithReversedOrder = void 0;\nfunction arrayWithReversedOrder(input) {\n    if (input == null) {\n        throw new Error(\"Input is required\");\n    }\n    const clone = [...input];\n    return clone.reverse();\n}\nexports.arrayWithReversedOrder = arrayWithReversedOrder;\n//# sourceMappingURL=arrayWithReversedOrder.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithRightShift = void 0;\nfunction arrayWithRightShift(input) {\n    let result = [...input];\n    if (result.length > 0) {\n        result.unshift(result.pop());\n    }\n    return result;\n}\nexports.arrayWithRightShift = arrayWithRightShift;\n//# sourceMappingURL=arrayWithRightShift.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrayWithValue = void 0;\nfunction arrayWithValue(input, value, allowDuplicates) {\n    const result = [...input];\n    if (result.indexOf(value) === -1 || allowDuplicates) {\n        result.push(value);\n    }\n    return result;\n}\nexports.arrayWithValue = arrayWithValue;\n//# sourceMappingURL=arrayWithValue.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numberArrayGivenRange = void 0;\nfunction numberArrayGivenRange(firstNumber, lastNumber) {\n    const result = [];\n    if (lastNumber === firstNumber) {\n        return [firstNumber];\n    }\n    if (firstNumber < lastNumber) {\n        for (let i = firstNumber; i < lastNumber + 1; i++) {\n            result.push(i);\n        }\n    }\n    else {\n        for (let i = lastNumber; i > firstNumber - 1; i--) {\n            result.push(i);\n        }\n    }\n    return result;\n}\nexports.numberArrayGivenRange = numberArrayGivenRange;\n//# sourceMappingURL=numberArrayGivenRange.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optionalIndexOfFirstMatchGivenArray = void 0;\nfunction optionalIndexOfFirstMatchGivenArray(array, isMatch) {\n    if (array == null) {\n        return undefined;\n    }\n    if (array.length === 0) {\n        return undefined;\n    }\n    if (!Array.isArray(array)) {\n        throw new Error(\"Expected an array\");\n    }\n    for (let i = 0; i < array.length; i++) {\n        const value = array[i];\n        if (isMatch(value)) {\n            return i;\n        }\n    }\n    return undefined;\n}\nexports.optionalIndexOfFirstMatchGivenArray = optionalIndexOfFirstMatchGivenArray;\n//# sourceMappingURL=optionalIndexOfFirstMatchGivenArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optionalLastValueGivenArray = void 0;\nfunction optionalLastValueGivenArray(array) {\n    if (array == null) {\n        return undefined;\n    }\n    if (!Array.isArray(array)) {\n        return undefined;\n    }\n    if (array.length === 0) {\n        return undefined;\n    }\n    return array[array.length - 1];\n}\nexports.optionalLastValueGivenArray = optionalLastValueGivenArray;\n//# sourceMappingURL=optionalLastValueGivenArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optionalNthValueGivenArray = void 0;\nfunction optionalNthValueGivenArray(array, n) {\n    if (array == null) {\n        return undefined;\n    }\n    if (!Array.isArray(array)) {\n        return undefined;\n    }\n    return n < array.length ? array[n] : undefined;\n}\nexports.optionalNthValueGivenArray = optionalNthValueGivenArray;\n//# sourceMappingURL=optionalNthValueGivenArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optionalRandomValueGivenArray = void 0;\nfunction optionalRandomValueGivenArray(input) {\n    if (input == null) {\n        return undefined;\n    }\n    if (!Array.isArray(input)) {\n        return undefined;\n    }\n    if (input.length === 0) {\n        return undefined;\n    }\n    return input[Math.floor(Math.random() * input.length)];\n}\nexports.optionalRandomValueGivenArray = optionalRandomValueGivenArray;\n//# sourceMappingURL=optionalRandomValueGivenArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.valueGivenArray = void 0;\nfunction valueGivenArray(array) {\n    if (array == null) {\n        throw new Error(\"array is required\");\n    }\n    if (!Array.isArray(array)) {\n        throw new Error(\"Input must be an array\");\n    }\n    if (array.length === 0) {\n        throw new Error(\"At least one item is required\");\n    }\n    return array[0];\n}\nexports.valueGivenArray = valueGivenArray;\n//# sourceMappingURL=valueGivenArray.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MapUtil = void 0;\nconst unionGivenMaps_1 = require(\"./_internal/unionGivenMaps\");\nconst differenceGivenMaps_1 = require(\"./_internal/differenceGivenMaps\");\nclass MapUtil {\n}\nexports.MapUtil = MapUtil;\nMapUtil.unionGivenMaps = unionGivenMaps_1.unionGivenMaps;\nMapUtil.differenceGivenMaps = differenceGivenMaps_1.differenceGivenMaps;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unionGivenMaps = void 0;\nfunction unionGivenMaps(iterables) {\n    const result = new Map();\n    for (let iterable of iterables) {\n        for (let item of iterable) {\n            const [key, val] = item;\n            result.set(key, val);\n        }\n    }\n    return result;\n}\nexports.unionGivenMaps = unionGivenMaps;\n//# sourceMappingURL=unionGivenMaps.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.differenceGivenMaps = void 0;\nfunction defaultIsValueEqual(thisValue, otherValue) {\n    return thisValue === otherValue;\n}\nfunction differenceGivenMaps(thisMap, otherMap, isValueEqual = defaultIsValueEqual) {\n    const addedItems = [];\n    const changedItems = [];\n    const removedItems = [];\n    const allKeys = new Set();\n    for (const key of thisMap.keys()) {\n        allKeys.add(key);\n    }\n    for (const key of otherMap.keys()) {\n        allKeys.add(key);\n    }\n    allKeys.forEach((key) => {\n        const thisValue = thisMap.get(key);\n        const otherValue = otherMap.get(key);\n        if (thisValue == null && otherValue == null) {\n            return;\n        }\n        else if (otherValue == null) {\n            removedItems.push({\n                key,\n                oldValue: thisValue,\n            });\n        }\n        else if (thisValue == null) {\n            addedItems.push({\n                key,\n                newValue: otherValue,\n            });\n        }\n        else {\n            if (!isValueEqual(thisValue, otherValue)) {\n                changedItems.push({\n                    key,\n                    oldValue: thisValue,\n                    newValue: otherValue,\n                });\n            }\n        }\n    });\n    return {\n        addedItems,\n        changedItems,\n        removedItems,\n        isEqual: addedItems.length === 0 &&\n            changedItems.length === 0 &&\n            removedItems.length === 0,\n    };\n}\nexports.differenceGivenMaps = differenceGivenMaps;\n//# sourceMappingURL=differenceGivenMaps.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NumberUtil = void 0;\nconst floatGivenFloatLike_1 = require(\"./_internal/floatGivenFloatLike\");\nconst integerGivenIntegerLike_1 = require(\"./_internal/integerGivenIntegerLike\");\nconst numberLikeIsIntegerLike_1 = require(\"./_internal/numberLikeIsIntegerLike\");\nconst numberWithCycle_1 = require(\"./_internal/numberWithCycle\");\nconst numberWithDecimalPlaceLimit_1 = require(\"./_internal/numberWithDecimalPlaceLimit\");\nconst numberWithEasing_1 = require(\"./_internal/numberWithEasing\");\nconst numberWithHardLimit_1 = require(\"./_internal/numberWithHardLimit\");\nconst numberWithRangeMap_1 = require(\"./_internal/numberWithRangeMap\");\nconst randomNumberGivenRange_1 = require(\"./_internal/randomNumberGivenRange\");\nclass NumberUtil {\n}\nexports.NumberUtil = NumberUtil;\nNumberUtil.floatGivenFloatLike = floatGivenFloatLike_1.floatGivenFloatLike;\nNumberUtil.integerGivenIntegerLike = integerGivenIntegerLike_1.integerGivenIntegerLike;\nNumberUtil.numberWithDecimalPlaceLimit = numberWithDecimalPlaceLimit_1.numberWithDecimalPlaceLimit;\nNumberUtil.numberWithEasing = numberWithEasing_1.numberWithEasing;\nNumberUtil.numberWithHardLimit = numberWithHardLimit_1.numberWithHardLimit;\nNumberUtil.numberWithRangeMap = numberWithRangeMap_1.numberWithRangeMap;\nNumberUtil.numberWithCycle = numberWithCycle_1.numberWithCycle;\nNumberUtil.randomNumberGivenRange = randomNumberGivenRange_1.randomNumberGivenRange;\nNumberUtil.numberLikeIsIntegerLike = numberLikeIsIntegerLike_1.numberLikeIsIntegerLike;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.floatGivenFloatLike = void 0;\nfunction floatGivenFloatLike(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    if (typeof input === \"number\") {\n        return input;\n    }\n    const n = parseFloat(input);\n    if (isNaN(n)) {\n        throw new Error(\"input must be float-like\");\n    }\n    return n;\n}\nexports.floatGivenFloatLike = floatGivenFloatLike;\n//# sourceMappingURL=floatGivenFloatLike.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.integerGivenIntegerLike = void 0;\nfunction integerGivenIntegerLike(input) {\n    if (input == null) {\n        return undefined;\n    }\n    if (typeof input === \"number\") {\n        return input;\n    }\n    return parseInt(input, 10);\n}\nexports.integerGivenIntegerLike = integerGivenIntegerLike;\n//# sourceMappingURL=integerGivenIntegerLike.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numberLikeIsIntegerLike = void 0;\nfunction numberLikeIsIntegerLike(input) {\n    if (typeof input === \"number\") {\n        return Number.isInteger(input);\n    }\n    return Number.isInteger(parseFloat(input));\n}\nexports.numberLikeIsIntegerLike = numberLikeIsIntegerLike;\n//# sourceMappingURL=numberLikeIsIntegerLike.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numberWithCycle = void 0;\nfunction numberWithCycle(time, cycleLength) {\n    let t = (time % cycleLength) / cycleLength;\n    if (t < 0.5) {\n        return t * 2;\n    }\n    t -= 0.5;\n    return 1 - t * 2;\n}\nexports.numberWithCycle = numberWithCycle;\n//# sourceMappingURL=numberWithCycle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numberWithDecimalPlaceLimit = void 0;\nfunction numberWithDecimalPlaceLimit(input, digitsAfterDecimalPoint = 1) {\n    return parseFloat(input.toFixed(digitsAfterDecimalPoint));\n}\nexports.numberWithDecimalPlaceLimit = numberWithDecimalPlaceLimit;\n//# sourceMappingURL=numberWithDecimalPlaceLimit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numberWithEasing = void 0;\nconst numberWithHardLimit_1 = require(\"./numberWithHardLimit\");\nconst pow = Math.pow;\nconst sqrt = Math.sqrt;\nconst sin = Math.sin;\nconst cos = Math.cos;\nconst PI = Math.PI;\nconst c1 = 1.70158;\nconst c2 = c1 * 1.525;\nconst c3 = c1 + 1;\nconst c4 = (2 * PI) / 3;\nconst c5 = (2 * PI) / 4.5;\nfunction bounceOut(x) {\n    const n1 = 7.5625;\n    const d1 = 2.75;\n    if (x < 1 / d1) {\n        return n1 * x * x;\n    }\n    else if (x < 2 / d1) {\n        return n1 * (x -= 1.5 / d1) * x + 0.75;\n    }\n    else if (x < 2.5 / d1) {\n        return n1 * (x -= 2.25 / d1) * x + 0.9375;\n    }\n    else {\n        return n1 * (x -= 2.625 / d1) * x + 0.984375;\n    }\n}\nfunction numberWithEasing(input, type) {\n    const x = numberWithHardLimit_1.numberWithHardLimit(input, 0, 1);\n    switch (type) {\n        case \"linear\":\n            return x;\n        case \"inQuad\":\n            return x * x;\n        case \"outQuad\":\n            return 1 - (1 - x) * (1 - x);\n        case \"inOutQuad\":\n            return x < 0.5 ? 2 * x * x : 1 - pow(-2 * x + 2, 2) / 2;\n        case \"inCubic\":\n            return x * x * x;\n        case \"outCubic\":\n            return 1 - pow(1 - x, 3);\n        case \"inOutCubic\":\n            return x < 0.5 ? 4 * x * x * x : 1 - pow(-2 * x + 2, 3) / 2;\n        case \"inQuart\":\n            return x * x * x * x;\n        case \"outQuart\":\n            return 1 - pow(1 - x, 4);\n        case \"inOutQuart\":\n            return x < 0.5 ? 8 * x * x * x * x : 1 - pow(-2 * x + 2, 4) / 2;\n        case \"inQuint\":\n            return x * x * x * x * x;\n        case \"outQuint\":\n            return 1 - pow(1 - x, 5);\n        case \"inOutQuint\":\n            return x < 0.5 ? 16 * x * x * x * x * x : 1 - pow(-2 * x + 2, 5) / 2;\n        case \"inSine\":\n            return 1 - cos((x * PI) / 2);\n        case \"outSine\":\n            return sin((x * PI) / 2);\n        case \"inOutSine\":\n            return -(cos(PI * x) - 1) / 2;\n        case \"inExpo\":\n            return x === 0 ? 0 : pow(2, 10 * x - 10);\n        case \"outExpo\":\n            return x === 1 ? 1 : 1 - pow(2, -10 * x);\n        case \"inOutExpo\":\n            return x === 0\n                ? 0\n                : x === 1\n                    ? 1\n                    : x < 0.5\n                        ? pow(2, 20 * x - 10) / 2\n                        : (2 - pow(2, -20 * x + 10)) / 2;\n        case \"inCirc\":\n            return 1 - sqrt(1 - pow(x, 2));\n        case \"outCirc\":\n            return sqrt(1 - pow(x - 1, 2));\n        case \"inOutCirc\":\n            return x < 0.5\n                ? (1 - sqrt(1 - pow(2 * x, 2))) / 2\n                : (sqrt(1 - pow(-2 * x + 2, 2)) + 1) / 2;\n        case \"inBack\":\n            return c3 * x * x * x - c1 * x * x;\n        case \"outBack\":\n            return 1 + c3 * pow(x - 1, 3) + c1 * pow(x - 1, 2);\n        case \"inOutBack\":\n            return x < 0.5\n                ? (pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2)) / 2\n                : (pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2;\n        case \"inElastic\":\n            return x === 0\n                ? 0\n                : x === 1\n                    ? 1\n                    : -pow(2, 10 * x - 10) * sin((x * 10 - 10.75) * c4);\n        case \"outElastic\":\n            return x === 0\n                ? 0\n                : x === 1\n                    ? 1\n                    : pow(2, -10 * x) * sin((x * 10 - 0.75) * c4) + 1;\n        case \"inOutElastic\":\n            return x === 0\n                ? 0\n                : x === 1\n                    ? 1\n                    : x < 0.5\n                        ? -(pow(2, 20 * x - 10) * sin((20 * x - 11.125) * c5)) / 2\n                        : (pow(2, -20 * x + 10) * sin((20 * x - 11.125) * c5)) / 2 + 1;\n        case \"inBounce\":\n            return 1 - bounceOut(1 - x);\n        case \"outBounce\":\n            return bounceOut(x);\n        case \"inOutBounce\":\n            return x < 0.5\n                ? (1 - bounceOut(1 - 2 * x)) / 2\n                : (1 + bounceOut(2 * x - 1)) / 2;\n        default:\n            throw new Error(\"Unsupported easing type\");\n    }\n}\nexports.numberWithEasing = numberWithEasing;\n//# sourceMappingURL=numberWithEasing.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.numberWithRangeMap = void 0;\nconst numberWithHardLimit_1 = require(\"./numberWithHardLimit\");\nfunction numberWithRangeMap(input, inputLow, inputHigh, outputLow, outputHigh) {\n    const result = ((input - inputLow) * (outputHigh - outputLow)) / (inputHigh - inputLow) +\n        outputLow;\n    return numberWithHardLimit_1.numberWithHardLimit(result, Math.min(outputLow, outputHigh), Math.max(outputLow, outputHigh));\n}\nexports.numberWithRangeMap = numberWithRangeMap;\n//# sourceMappingURL=numberWithRangeMap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomNumberGivenRange = void 0;\nfunction randomNumberGivenRange(min, max) {\n    return min + Math.random() * (max - min);\n}\nexports.randomNumberGivenRange = randomNumberGivenRange;\n//# sourceMappingURL=randomNumberGivenRange.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObjectUtil = void 0;\nconst objectIsDeepEqual_1 = require(\"./_internal/objectIsDeepEqual\");\nconst objectIsEmpty_1 = require(\"./_internal/objectIsEmpty\");\nconst objectIsShallowEqual_1 = require(\"./_internal/objectIsShallowEqual\");\nconst objectWithDeepMerge_1 = require(\"./_internal/objectWithDeepMerge\");\nconst objectWithoutBlankValues_1 = require(\"./_internal/objectWithoutBlankValues\");\nconst objectWithValueAtPath_1 = require(\"./_internal/objectWithValueAtPath\");\nconst unionGivenObjects_1 = require(\"./_internal/unionGivenObjects\");\nconst optionalValueAtPathGivenObject_1 = require(\"./_internal/optionalValueAtPathGivenObject\");\nclass ObjectUtil {\n}\nexports.ObjectUtil = ObjectUtil;\nObjectUtil.objectIsDeepEqual = objectIsDeepEqual_1.objectIsDeepEqual;\nObjectUtil.objectIsEmpty = objectIsEmpty_1.objectIsEmpty;\nObjectUtil.objectIsShallowEqual = objectIsShallowEqual_1.objectIsShallowEqual;\nObjectUtil.objectWithDeepMerge = objectWithDeepMerge_1.objectWithDeepMerge;\nObjectUtil.objectWithoutBlankValues = objectWithoutBlankValues_1.objectWithoutBlankValues;\nObjectUtil.objectWithValueAtPath = objectWithValueAtPath_1.objectWithValueAtPath;\nObjectUtil.unionGivenObjects = unionGivenObjects_1.unionGivenObjects;\nObjectUtil.optionalValueAtPathGivenObject = optionalValueAtPathGivenObject_1.optionalValueAtPathGivenObject;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectIsDeepEqual = void 0;\nfunction objectIsDeepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime();\n    }\n    else if (!a || !b || (typeof a !== \"object\" && typeof b !== \"object\")) {\n        return a === b;\n    }\n    else {\n        return objEquiv(a, b);\n    }\n}\nexports.objectIsDeepEqual = objectIsDeepEqual;\nfunction isArguments(object) {\n    return Object.prototype.toString.call(object) == \"[object Arguments]\";\n}\nfunction isUndefinedOrNull(value) {\n    return value === null || value === undefined;\n}\nfunction isBuffer(x) {\n    if (!x || typeof x !== \"object\" || typeof x.length !== \"number\") {\n        return false;\n    }\n    if (typeof x.copy !== \"function\" || typeof x.slice !== \"function\") {\n        return false;\n    }\n    if (x.length > 0 && typeof x[0] !== \"number\") {\n        return false;\n    }\n    return true;\n}\nfunction objEquiv(a, b) {\n    let i, key;\n    if (isUndefinedOrNull(a) || isUndefinedOrNull(b)) {\n        return false;\n    }\n    if (a.prototype !== b.prototype) {\n        return false;\n    }\n    if (isArguments(a)) {\n        if (!isArguments(b)) {\n            return false;\n        }\n        a = Array.prototype.slice.call(a);\n        b = Array.prototype.slice.call(b);\n        return objectIsDeepEqual(a, b);\n    }\n    if (isBuffer(a)) {\n        if (!isBuffer(b)) {\n            return false;\n        }\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (i = 0; i < a.length; i++) {\n            if (a[i] !== b[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    let ka, kb;\n    try {\n        ka = Object.keys(a);\n        kb = Object.keys(b);\n    }\n    catch (e) {\n        return false;\n    }\n    if (ka.length != kb.length) {\n        return false;\n    }\n    ka.sort();\n    kb.sort();\n    for (i = ka.length - 1; i >= 0; i--) {\n        if (ka[i] != kb[i]) {\n            return false;\n        }\n    }\n    for (i = ka.length - 1; i >= 0; i--) {\n        key = ka[i];\n        if (!objectIsDeepEqual(a[key], b[key])) {\n            return false;\n        }\n    }\n    return typeof a === typeof b;\n}\n//# sourceMappingURL=objectIsDeepEqual.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectIsEmpty = void 0;\nfunction objectIsEmpty(input) {\n    if (input == null) {\n        return true;\n    }\n    if (typeof input !== \"object\") {\n        throw new Error(\"input must be an object\");\n    }\n    return Object.keys(input).length === 0;\n}\nexports.objectIsEmpty = objectIsEmpty;\n//# sourceMappingURL=objectIsEmpty.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectIsShallowEqual = void 0;\nfunction objectIsShallowEqual(a, b) {\n    if (a == null && b == null) {\n        return true;\n    }\n    if (a == null || b == null) {\n        return false;\n    }\n    for (const key in a) {\n        if (!(key in b) || a[key] !== b[key]) {\n            return false;\n        }\n    }\n    for (const key in b) {\n        if (!(key in a) || a[key] !== b[key]) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.objectIsShallowEqual = objectIsShallowEqual;\n//# sourceMappingURL=objectIsShallowEqual.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectWithoutBlankValues = void 0;\nfunction objectWithoutBlankValues(input) {\n    const result = {};\n    Object.keys(input).forEach((key) => {\n        const value = input[key];\n        if (value != null) {\n            result[key] = value;\n        }\n    });\n    return result;\n}\nexports.objectWithoutBlankValues = objectWithoutBlankValues;\n//# sourceMappingURL=objectWithoutBlankValues.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectWithValueAtPath = void 0;\nfunction objectWithValueAtPath(object, valuePath, value) {\n    if (valuePath == null) {\n        throw new Error(\"Value path is required\");\n    }\n    let index = 0;\n    let parts;\n    if (Array.isArray(valuePath)) {\n        parts = valuePath;\n    }\n    else {\n        parts = valuePath.toParts();\n    }\n    let length = parts.length;\n    if (length === 0) {\n        return value;\n    }\n    // shallow clone\n    let result;\n    if (Array.isArray(object)) {\n        result = [...object];\n    }\n    else {\n        result = Object.assign({}, object);\n    }\n    // mutate the clone\n    let pointer = result;\n    while (pointer != null && index < length - 1) {\n        let key = parts[index];\n        if (Array.isArray(pointer[key])) {\n            pointer[key] = [...pointer[key]];\n        }\n        else {\n            pointer[key] = Object.assign({}, pointer[key]);\n        }\n        pointer = pointer[key];\n        index += 1;\n    }\n    if (pointer != null) {\n        pointer[parts[index]] = value;\n    }\n    return result;\n}\nexports.objectWithValueAtPath = objectWithValueAtPath;\n//# sourceMappingURL=objectWithValueAtPath.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unionGivenObjects = void 0;\nconst objectWithDeepMerge_1 = require(\"./objectWithDeepMerge\");\nfunction unionGivenObjects(objects) {\n    return objects.reduce((prev, next) => {\n        return objectWithDeepMerge_1.objectWithDeepMerge(prev, next);\n    }, {});\n}\nexports.unionGivenObjects = unionGivenObjects;\n//# sourceMappingURL=unionGivenObjects.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optionalValueAtPathGivenObject = void 0;\nfunction optionalValueAtPathGivenObject(object, valuePath) {\n    if (valuePath == null) {\n        throw new Error(\"Value path is required\");\n    }\n    if (object == null) {\n        return undefined;\n    }\n    let index = 0;\n    let parts;\n    if (Array.isArray(valuePath)) {\n        parts = valuePath;\n    }\n    else {\n        parts = valuePath.toParts();\n    }\n    let length = parts.length;\n    if (length === 0) {\n        return object;\n    }\n    while (object != null && index < length) {\n        object = object[parts[index++]];\n    }\n    return index && index == length ? object : undefined;\n}\nexports.optionalValueAtPathGivenObject = optionalValueAtPathGivenObject;\n//# sourceMappingURL=optionalValueAtPathGivenObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Percent = void 0;\nclass Percent {\n    constructor(value) {\n        this._value = value;\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    static givenString(value) {\n        if (value == null) {\n            throw new Error(\"Value is required\");\n        }\n        if (value.includes(\"%\")) {\n            return Percent.givenFraction(parseFloat(value), 100);\n        }\n        else {\n            return Percent.givenFraction(parseFloat(value), 1);\n        }\n    }\n    static givenFraction(numerator, denominator) {\n        if (denominator == 0) {\n            throw new Error(\"Denominator must not be 0\");\n        }\n        return new Percent(numerator / denominator);\n    }\n    static ofZero() {\n        return this._zero;\n    }\n    static ofHalf() {\n        return this._half;\n    }\n    static ofFull() {\n        return this._full;\n    }\n    get isZero() {\n        return this._value === 0;\n    }\n    get isFull() {\n        return this._value === 1;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Percent)) {\n            return false;\n        }\n        return this._value === other._value;\n    }\n    toString(fractionDigits) {\n        return `${this.toNumber(100).toFixed(fractionDigits)}%`;\n    }\n    toNumber(denominator) {\n        return this._value * denominator;\n    }\n    withInverse() {\n        if (this.isZero || this.isFull) {\n            return this;\n        }\n        return Percent.givenFraction(1, this.toNumber(1));\n    }\n}\nexports.Percent = Percent;\nPercent._zero = new Percent(0);\nPercent._half = new Percent(0.5);\nPercent._full = new Percent(1);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PromiseUtil = void 0;\nconst asyncDelayOfForever_1 = require(\"./_internal/asyncDelayOfForever\");\nconst asyncSequenceGivenArrayAndCallback_1 = require(\"./_internal/asyncSequenceGivenArrayAndCallback\");\nconst asyncSequenceGivenCountAndCallback_1 = require(\"./_internal/asyncSequenceGivenCountAndCallback\");\nconst asyncValueGivenArrayAndFilter_1 = require(\"./_internal/asyncValueGivenArrayAndFilter\");\nconst asyncValuesGivenArrayAndConverter_1 = require(\"./_internal/asyncValuesGivenArrayAndConverter\");\nclass PromiseUtil {\n}\nexports.PromiseUtil = PromiseUtil;\nPromiseUtil.asyncDelayOfForever = asyncDelayOfForever_1.asyncDelayOfForever;\nPromiseUtil.asyncSequenceGivenArrayAndCallback = asyncSequenceGivenArrayAndCallback_1.asyncSequenceGivenArrayAndCallback;\nPromiseUtil.asyncSequenceGivenCountAndCallback = asyncSequenceGivenCountAndCallback_1.asyncSequenceGivenCountAndCallback;\nPromiseUtil.asyncValueGivenArrayAndFilter = asyncValueGivenArrayAndFilter_1.asyncValueGivenArrayAndFilter;\nPromiseUtil.asyncValuesGivenArrayAndConverter = asyncValuesGivenArrayAndConverter_1.asyncValuesGivenArrayAndConverter;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asyncDelayOfForever = void 0;\nfunction asyncDelayOfForever() {\n    // promise never resolves\n    return new Promise(() => {\n        // need to keep a setInterval in the event loop because\n        // otherwise the process might eventually exit\n        setInterval(Function.prototype, 600000); // do nothing every 10 minutes\n    });\n}\nexports.asyncDelayOfForever = asyncDelayOfForever;\n//# sourceMappingURL=asyncDelayOfForever.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asyncSequenceGivenCountAndCallback = void 0;\nasync function asyncSequenceGivenCountAndCallback(times, fn) {\n    if (times < 1) {\n        return;\n    }\n    for (let index = 0; index < times; index++) {\n        await fn(index);\n    }\n}\nexports.asyncSequenceGivenCountAndCallback = asyncSequenceGivenCountAndCallback;\n//# sourceMappingURL=asyncSequenceGivenCountAndCallback.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asyncValueGivenArrayAndFilter = void 0;\nconst asyncSequenceGivenArrayAndCallback_1 = require(\"./asyncSequenceGivenArrayAndCallback\");\nasync function asyncValueGivenArrayAndFilter(input, fn) {\n    let result = undefined;\n    await asyncSequenceGivenArrayAndCallback_1.asyncSequenceGivenArrayAndCallback(input, (element) => {\n        return fn(element).then((isMatch) => {\n            if (isMatch == true && result == null) {\n                result = element;\n            }\n        });\n    });\n    return result;\n}\nexports.asyncValueGivenArrayAndFilter = asyncValueGivenArrayAndFilter;\n//# sourceMappingURL=asyncValueGivenArrayAndFilter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asyncValuesGivenArrayAndConverter = void 0;\nconst asyncSequenceGivenArrayAndCallback_1 = require(\"./asyncSequenceGivenArrayAndCallback\");\nfunction asyncValuesGivenArrayAndConverter(input, fn) {\n    const result = [];\n    return asyncSequenceGivenArrayAndCallback_1.asyncSequenceGivenArrayAndCallback(input, (element, idx) => {\n        return fn(element, idx).then((elementResult) => {\n            result.push(elementResult);\n        });\n    }).then(() => {\n        return result;\n    });\n}\nexports.asyncValuesGivenArrayAndConverter = asyncValuesGivenArrayAndConverter;\n//# sourceMappingURL=asyncValuesGivenArrayAndConverter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SetUtil = void 0;\nconst setIsEqual_1 = require(\"./_internal/setIsEqual\");\nconst intersectionGivenSets_1 = require(\"./_internal/intersectionGivenSets\");\nconst setWithItem_1 = require(\"./_internal/setWithItem\");\nconst setWithoutItem_1 = require(\"./_internal/setWithoutItem\");\nconst differenceGivenSets_1 = require(\"./_internal/differenceGivenSets\");\nconst unionGivenSets_1 = require(\"./_internal/unionGivenSets\");\nclass SetUtil {\n}\nexports.SetUtil = SetUtil;\nSetUtil.setIsEqual = setIsEqual_1.setIsEqual;\nSetUtil.intersectionGivenSets = intersectionGivenSets_1.intersectionGivenSets;\nSetUtil.differenceGivenSets = differenceGivenSets_1.differenceGivenSets;\nSetUtil.unionGivenSets = unionGivenSets_1.unionGivenSets;\nSetUtil.setWithItem = setWithItem_1.setWithItem;\nSetUtil.setWithoutItem = setWithoutItem_1.setWithoutItem;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setIsEqual = void 0;\nfunction setIsEqual(firstSet, secondSet) {\n    if (firstSet == null && secondSet == null) {\n        return true;\n    }\n    if (firstSet == null || secondSet == null) {\n        return false;\n    }\n    if (firstSet.size !== secondSet.size) {\n        return false;\n    }\n    let allMatch = true;\n    firstSet.forEach((value) => {\n        if (!secondSet.has(value)) {\n            allMatch = false;\n        }\n    });\n    return allMatch;\n}\nexports.setIsEqual = setIsEqual;\n//# sourceMappingURL=setIsEqual.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.intersectionGivenSets = void 0;\nconst ArrayUtil_1 = require(\"../../ArrayUtil\");\nfunction intersectionGivenSets(sets) {\n    if (sets == null) {\n        throw new Error(\"Sets are required\");\n    }\n    if (sets.length === 0) {\n        return new Set();\n    }\n    if (sets.length === 1) {\n        return new Set(sets[0]);\n    }\n    const result = new Set();\n    const smallestSet = ArrayUtil_1.ArrayUtil.arrayWithOrderFromValue(sets, (s) => s.size, \"ascending\")[0];\n    const otherSets = ArrayUtil_1.ArrayUtil.arrayWithoutValue(sets, smallestSet);\n    smallestSet.forEach((item) => {\n        if (otherSets.every((otherSet) => otherSet.has(item))) {\n            result.add(item);\n        }\n    });\n    return result;\n}\nexports.intersectionGivenSets = intersectionGivenSets;\n//# sourceMappingURL=intersectionGivenSets.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setWithItem = void 0;\nfunction setWithItem(set, item) {\n    let result = new Set(set);\n    result.add(item);\n    return result;\n}\nexports.setWithItem = setWithItem;\n//# sourceMappingURL=setWithItem.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.setWithoutItem = void 0;\nfunction setWithoutItem(set, item, isMatch) {\n    let result = new Set(set);\n    if (isMatch == null) {\n        result.delete(item);\n    }\n    else {\n        const setItems = Array.from(result);\n        setItems.forEach((setItem) => {\n            if (isMatch(item, setItem)) {\n                result.delete(setItem);\n            }\n        });\n    }\n    return result;\n}\nexports.setWithoutItem = setWithoutItem;\n//# sourceMappingURL=setWithoutItem.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.differenceGivenSets = void 0;\nfunction defaultIsValueEqual(thisValue, otherValue) {\n    return thisValue === otherValue;\n}\nfunction differenceGivenSets(thisSet, otherSet, isValueEqual = defaultIsValueEqual) {\n    const removedItems = [];\n    let isEqual = true;\n    const otherSetCopy = new Set(otherSet);\n    thisSet.forEach((v) => {\n        if (v == null) {\n            return;\n        }\n        otherSetCopy.delete(v);\n        if (!otherSet.has(v)) {\n            removedItems.push(v);\n            isEqual = false;\n        }\n    });\n    return {\n        addedItems: Array.from(otherSetCopy),\n        removedItems,\n        isEqual,\n    };\n}\nexports.differenceGivenSets = differenceGivenSets;\n//# sourceMappingURL=differenceGivenSets.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unionGivenSets = void 0;\nfunction unionGivenSets(sets) {\n    if (!Array.isArray(sets)) {\n        throw new Error(\"First argument should be an array\");\n    }\n    const result = new Set();\n    sets.forEach((set) => {\n        set.forEach((v) => {\n            result.add(v);\n        });\n    });\n    return result;\n}\nexports.unionGivenSets = unionGivenSets;\n//# sourceMappingURL=unionGivenSets.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StringUtil = void 0;\nconst stringOfRandomCharacters_1 = require(\"./_internal/stringOfRandomCharacters\");\nconst stringIsEmpty_1 = require(\"./_internal/stringIsEmpty\");\nconst stringWithCase_1 = require(\"./_internal/stringWithCase\");\nconst stringWithEachMatchReplaced_1 = require(\"./_internal/stringWithEachMatchReplaced\");\nconst stringWithReplacedTokens_1 = require(\"./_internal/stringWithReplacedTokens\");\nclass StringUtil {\n}\nexports.StringUtil = StringUtil;\nStringUtil.stringIsEmpty = stringIsEmpty_1.stringIsEmpty;\nStringUtil.stringOfRandomCharacters = stringOfRandomCharacters_1.stringOfRandomCharacters;\nStringUtil.stringWithCase = stringWithCase_1.stringWithCase;\nStringUtil.stringWithEachMatchReplaced = stringWithEachMatchReplaced_1.stringWithEachMatchReplaced;\nStringUtil.stringWithReplacedTokens = stringWithReplacedTokens_1.stringWithReplacedTokens;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringOfRandomCharacters = void 0;\nconst defaultCharacters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nfunction stringOfRandomCharacters(length, chars = defaultCharacters) {\n    const result = [];\n    const charactersLength = chars.length;\n    for (let i = 0; i < length; i++) {\n        result.push(chars.charAt(Math.floor(Math.random() * charactersLength)));\n    }\n    return result.join(\"\");\n}\nexports.stringOfRandomCharacters = stringOfRandomCharacters;\n//# sourceMappingURL=stringOfRandomCharacters.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringIsEmpty = void 0;\nfunction stringIsEmpty(str) {\n    return str == null || str.length === 0;\n}\nexports.stringIsEmpty = stringIsEmpty;\n//# sourceMappingURL=stringIsEmpty.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithCase = void 0;\nconst stringWithCamelCase_1 = require(\"./stringWithCamelCase\");\nconst stringWithInitialCapital_1 = require(\"./stringWithInitialCapital\");\nconst stringWithKebabCase_1 = require(\"./stringWithKebabCase\");\nconst stringWithOnlyInitialCapital_1 = require(\"./stringWithOnlyInitialCapital\");\nconst stringWithPascalCase_1 = require(\"./stringWithPascalCase\");\nconst stringWithSnakeCase_1 = require(\"./stringWithSnakeCase\");\nconst stringWithSpaceCase_1 = require(\"./stringWithSpaceCase\");\nfunction stringWithCase(input, stringCase) {\n    switch (stringCase) {\n        case \"camelCase\":\n            return stringWithCamelCase_1.stringWithCamelCase(input);\n        case \"Initial CaPiTaL\":\n            return stringWithInitialCapital_1.stringWithInitialCapital(input);\n        case \"Only initial capital\":\n            return stringWithOnlyInitialCapital_1.stringWithOnlyInitialCapital(input);\n        case \"kebab-case\":\n            return stringWithKebabCase_1.stringWithKebabCase(input);\n        case \"PascalCase\":\n            return stringWithPascalCase_1.stringWithPascalCase(input);\n        case \"snake_case\":\n            return stringWithSnakeCase_1.stringWithSnakeCase(input);\n        case \"space case\":\n            return stringWithSpaceCase_1.stringWithSpaceCase(input);\n        default:\n            throw new Error(\"Unsupported string case\");\n    }\n}\nexports.stringWithCase = stringWithCase;\n//# sourceMappingURL=stringWithCase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithInitialCapital = void 0;\nfunction stringWithInitialCapital(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    if (input.length === 0) {\n        return input;\n    }\n    return input.charAt(0).toUpperCase() + input.slice(1);\n}\nexports.stringWithInitialCapital = stringWithInitialCapital;\n//# sourceMappingURL=stringWithInitialCapital.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithKebabCase = void 0;\nconst stringWithNoCase_1 = require(\"./stringWithNoCase\");\nfunction stringWithKebabCase(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    return stringWithNoCase_1.stringWithNoCase(input)\n        .replace(/[\\W_]+(.|$)/g, (matches, match) => {\n        return match ? \"-\" + match : \"\";\n    })\n        .trim();\n}\nexports.stringWithKebabCase = stringWithKebabCase;\n//# sourceMappingURL=stringWithKebabCase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithOnlyInitialCapital = void 0;\nfunction stringWithOnlyInitialCapital(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    if (input.length === 0) {\n        return input;\n    }\n    return input.charAt(0).toUpperCase() + input.slice(1).toLowerCase();\n}\nexports.stringWithOnlyInitialCapital = stringWithOnlyInitialCapital;\n//# sourceMappingURL=stringWithOnlyInitialCapital.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithPascalCase = void 0;\nconst stringWithCamelCase_1 = require(\"./stringWithCamelCase\");\nfunction stringWithPascalCase(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    const camel = stringWithCamelCase_1.stringWithCamelCase(input);\n    return camel.charAt(0).toUpperCase() + camel.slice(1);\n}\nexports.stringWithPascalCase = stringWithPascalCase;\n//# sourceMappingURL=stringWithPascalCase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithSnakeCase = void 0;\nconst stringWithNoCase_1 = require(\"./stringWithNoCase\");\nfunction stringWithSnakeCase(input) {\n    if (input == null) {\n        throw new Error(\"input is required\");\n    }\n    return stringWithNoCase_1.stringWithNoCase(input)\n        .replace(/[\\W_]+(.|$)/g, (matches, match) => {\n        return match ? \"_\" + match : \"\";\n    })\n        .trim();\n}\nexports.stringWithSnakeCase = stringWithSnakeCase;\n//# sourceMappingURL=stringWithSnakeCase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithEachMatchReplaced = void 0;\nasync function stringWithEachMatchReplaced(input, regex, replace) {\n    let result = input;\n    let match = result.match(regex);\n    while (match != null) {\n        const replaceText = await replace(match);\n        const index = match.index;\n        if (index != null) {\n            result =\n                result.slice(0, index) +\n                    replaceText +\n                    result.slice(index + match[0].length);\n        }\n        match = result.match(regex);\n    }\n    return result;\n}\nexports.stringWithEachMatchReplaced = stringWithEachMatchReplaced;\n//# sourceMappingURL=stringWithEachMatchReplaced.js.map","\"use strict\";\n/**\n * @author Jason Anderson <jason@gearsandwires.com>\n * @copyright 2016-2019 Gears & Wires\n * @license See vendor/wireframe/LICENSE file\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringWithReplacedTokens = void 0;\nfunction stringWithReplacedTokens(input, variables, unmatchedTokenBehavior) {\n    let result = input;\n    Object.keys(variables).forEach((key) => {\n        const value = variables[key];\n        const regex = new RegExp(`{{\\\\s?${key}\\\\s?}}`, \"g\");\n        result = result.replace(regex, value);\n    });\n    const hasUnmatchedTokens = /{{\\s?\\w+\\s?}}/g.test(result);\n    if (hasUnmatchedTokens == true) {\n        switch (unmatchedTokenBehavior) {\n            case \"error\":\n                throw new Error(\"Template has unmatched tokens\");\n            case \"remove\":\n                result = result.replace(/\\s*{{\\s?\\w+\\s?}}(\\s?)\\s*/g, \"$1\");\n                break;\n            case \"ignore\":\n                break;\n        }\n    }\n    return result;\n}\nexports.stringWithReplacedTokens = stringWithReplacedTokens;\n//# sourceMappingURL=stringWithReplacedTokens.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValuePath = void 0;\nclass ValuePath {\n    constructor(pathParts) {\n        this._pathParts = pathParts;\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    static givenParts(pathParts = []) {\n        if (pathParts == null) {\n            return new ValuePath([]);\n        }\n        if (pathParts.some((part) => part == null)) {\n            throw new Error(\"Path cannot contain null or undefined parts\");\n        }\n        if (pathParts.some((part) => String(part).includes(\".\"))) {\n            throw new Error(\"Path parts cannot contain a period character\");\n        }\n        return new ValuePath(pathParts);\n    }\n    static givenString(path = \"\") {\n        if (path == null) {\n            return new ValuePath([]);\n        }\n        return new ValuePath(path.split(\".\"));\n    }\n    static ofEmpty() {\n        return new ValuePath([]);\n    }\n    get isEmpty() {\n        return this._pathParts.length === 0;\n    }\n    get length() {\n        return this._pathParts.length;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof ValuePath)) {\n            return false;\n        }\n        return this.toString() === other.toString();\n    }\n    isAncestorOf(other) {\n        if (other == null) {\n            return false;\n        }\n        const thisString = this.toString();\n        const otherString = other.toString();\n        return (otherString.startsWith(thisString) &&\n            otherString.length > thisString.length);\n    }\n    isEqualOrAncestorOf(other) {\n        if (other == null) {\n            return false;\n        }\n        const thisString = this.toString();\n        const otherString = other.toString();\n        return otherString.startsWith(thisString);\n    }\n    isDescendantOf(other) {\n        if (other == null) {\n            return false;\n        }\n        return other.isAncestorOf(this);\n    }\n    isEqualOrDescendantOf(other) {\n        if (other == null) {\n            return false;\n        }\n        const thisString = this.toString();\n        const otherString = other.toString();\n        return thisString.startsWith(otherString);\n    }\n    toParts() {\n        return this._pathParts;\n    }\n    toString() {\n        return this._pathParts.join(\".\");\n    }\n    toRelativePath(descendant) {\n        if (descendant == null) {\n            throw new Error(\"Descendant is required\");\n        }\n        if (!descendant.isDescendantOf(this)) {\n            throw new Error(\"Specified path is not a descendant of this VCC path\");\n        }\n        return new ValuePath(descendant.toParts().slice(this.toParts().length));\n    }\n    withRelativeParts(pathParts = []) {\n        if (pathParts == null) {\n            throw new Error(\"Path parts are required\");\n        }\n        return new ValuePath([...this._pathParts, ...pathParts]);\n    }\n    withRelativeString(pathString) {\n        if (pathString == null) {\n            throw new Error(\"Path string is required\");\n        }\n        const parts = pathString.split(\".\");\n        return new ValuePath([...this._pathParts, ...parts]);\n    }\n}\nexports.ValuePath = ValuePath;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservableArray = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst TypedEvent_1 = require(\"../TypedEvent\");\nclass ObservableArray {\n    constructor(values) {\n        this.didChange = new TypedEvent_1.TypedEvent();\n        this.didChangeSteps = new TypedEvent_1.TypedEvent();\n        this._isObservableArray = true;\n        this.replaceValueAtIndex = (index, value) => {\n            if (index < 0) {\n                throw new Error(\"Index cannot be negative\");\n            }\n            const oldValue = this._array[index];\n            if (oldValue === value && oldValue != null) {\n                return;\n            }\n            const updates = [];\n            if (oldValue != null) {\n                updates.push({\n                    type: \"remove\",\n                    value: oldValue,\n                    oldIndex: index,\n                });\n            }\n            this._array.splice(index, 1, value);\n            updates.push({\n                type: \"add\",\n                value,\n                newIndex: index,\n            });\n            this.didChange.emit([...this._array]);\n            this.didChangeSteps.emit(updates);\n        };\n        this._internalMove = (oldIndex, newIndex) => {\n            while (oldIndex < 0) {\n                oldIndex += this._array.length;\n            }\n            while (newIndex < 0) {\n                newIndex += this._array.length;\n            }\n            if (newIndex >= this._array.length) {\n                var k = newIndex - this._array.length + 1;\n                while (k--) {\n                    this._array.push(undefined);\n                }\n            }\n            this._array.splice(newIndex, 0, this._array.splice(oldIndex, 1)[0]);\n        };\n        this._array = [];\n        this.sync(values);\n    }\n    static ofEmpty() {\n        return new ObservableArray([]);\n    }\n    static givenValues(values) {\n        return new ObservableArray([...values]);\n    }\n    static isObservableArray(input) {\n        if (input == null) {\n            return false;\n        }\n        if (typeof input !== \"object\") {\n            return false;\n        }\n        return input._isObservableArray === true;\n    }\n    get count() {\n        return this._array.length;\n    }\n    forEach(fn) {\n        this._array.forEach(fn);\n    }\n    map(fn) {\n        return this._array.map(fn);\n    }\n    addValue(value, index) {\n        const newIndex = index != null ? index : this._array.length;\n        const updates = this._array\n            .slice(newIndex)\n            .map((v, i) => {\n            return {\n                type: \"move\",\n                value: v,\n                oldIndex: newIndex + i,\n                newIndex: newIndex + i + 1,\n            };\n        });\n        this._array.splice(newIndex, 0, value);\n        updates.push({\n            type: \"add\",\n            value,\n            newIndex,\n        });\n        this.didChange.emit([...this._array]);\n        this.didChangeSteps.emit(updates);\n    }\n    moveValueAtIndex(oldIndex, newIndex) {\n        if (oldIndex === newIndex) {\n            return;\n        }\n        while (oldIndex < 0) {\n            oldIndex += this._array.length;\n        }\n        while (newIndex < 0) {\n            newIndex += this._array.length;\n        }\n        const value = this._array[oldIndex];\n        const changes = [];\n        const minIndex = Math.min(oldIndex, newIndex);\n        const maxIndex = Math.max(oldIndex, newIndex);\n        let offset;\n        if (oldIndex < newIndex) {\n            offset = -1;\n        }\n        else {\n            offset = 1;\n        }\n        for (let i = minIndex; i <= maxIndex; i++) {\n            if (i === oldIndex) {\n                changes.push({\n                    type: \"move\",\n                    value,\n                    oldIndex,\n                    newIndex,\n                });\n            }\n            else {\n                if (this._array[i] != null) {\n                    changes.push({\n                        type: \"move\",\n                        value: this._array[i],\n                        oldIndex: i,\n                        newIndex: i + offset,\n                    });\n                }\n            }\n        }\n        this._internalMove(oldIndex, newIndex);\n        this.didChange.emit([...this._array]);\n        this.didChangeSteps.emit(changes);\n    }\n    sync(input) {\n        if (input == null || input.length === 0) {\n            this.clear();\n            return;\n        }\n        let adds = [];\n        let removes = [];\n        let moves = [];\n        input.forEach((newValue, idx) => {\n            if (this._array[idx] !== newValue) {\n                if (this._array[idx] != null) {\n                    removes.push({\n                        type: \"remove\",\n                        oldIndex: idx,\n                        value: this._array[idx],\n                    });\n                }\n                adds.push({\n                    type: \"add\",\n                    newIndex: idx,\n                    value: newValue,\n                });\n            }\n        });\n        for (let i = input.length; i < this._array.length; i++) {\n            removes.push({\n                type: \"remove\",\n                oldIndex: i,\n                value: this._array[i],\n            });\n        }\n        Array.from(removes).forEach((remove) => {\n            if (remove.value == null) {\n                return;\n            }\n            const matchingAdd = adds.find((add) => add.value === remove.value);\n            if (matchingAdd != null) {\n                removes = util_1.ArrayUtil.arrayWithoutValue(removes, remove);\n                adds = util_1.ArrayUtil.arrayWithoutValue(adds, matchingAdd);\n                moves.push({\n                    type: \"move\",\n                    oldIndex: remove.oldIndex,\n                    newIndex: matchingAdd.newIndex,\n                    value: remove.value,\n                });\n            }\n        });\n        const updates = [...removes, ...moves, ...adds];\n        this._array = [...input];\n        this.didChange.emit(this.toValues());\n        this.didChangeSteps.emit(updates);\n    }\n    removeValue(value) {\n        this.removeAllWhere((v) => v === value);\n    }\n    removeValueAtIndex(index) {\n        this.removeAllWhere((v, i) => i === index);\n    }\n    removeAllWhere(filter) {\n        if (filter == null) {\n            throw new Error(\"Filter is required\");\n        }\n        const updates = [];\n        let removedCount = 0;\n        this._array.forEach((v, i) => {\n            const isMatch = filter(v, i);\n            if (isMatch) {\n                updates.push({\n                    type: \"remove\",\n                    value: this._array[i],\n                    oldIndex: i,\n                });\n                removedCount += 1;\n            }\n            else {\n                if (removedCount > 0) {\n                    updates.push({\n                        type: \"move\",\n                        value: this._array[i],\n                        oldIndex: i,\n                        newIndex: i - removedCount,\n                    });\n                }\n            }\n        });\n        const reversedUpdates = util_1.ArrayUtil.arrayWithReversedOrder(updates);\n        reversedUpdates.forEach((update) => {\n            if (update.type === \"remove\") {\n                this._array.splice(update.oldIndex, 1);\n            }\n        });\n        this.didChange.emit([...this._array]);\n        this.didChangeSteps.emit(updates);\n    }\n    clear() {\n        const updates = this._array.map((v, i) => {\n            return {\n                type: \"remove\",\n                value: v,\n                oldIndex: i,\n            };\n        });\n        this._array = [];\n        this.didChange.emit([...this._array]);\n        this.didChangeSteps.emit(updates);\n    }\n    hasValue(value, fromIndex) {\n        return this._array.indexOf(value, fromIndex) !== -1;\n    }\n    toOptionalValueGivenIndex(index) {\n        return this._array[index];\n    }\n    toIndexOfValue(value, fromIndex) {\n        return this._array.indexOf(value, fromIndex);\n    }\n    toValues() {\n        return Array.from(this._array);\n    }\n}\nexports.ObservableArray = ObservableArray;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservableDict = exports.dictGivenObject = void 0;\nconst TypedEvent_1 = require(\"../TypedEvent\");\nfunction dictGivenObject(obj) {\n    if (obj == null) {\n        throw new Error(\"Object is required\");\n    }\n    const result = {};\n    Object.keys(obj).forEach((key) => {\n        result[String(key)] = obj[key];\n    });\n    return result;\n}\nexports.dictGivenObject = dictGivenObject;\nclass ObservableDict {\n    constructor(dict) {\n        this.didChange = new TypedEvent_1.TypedEvent();\n        this.didChangeSteps = new TypedEvent_1.TypedEvent();\n        this._isObservableDict = true;\n        this._map = new Map();\n        Object.keys(dict).forEach((key) => {\n            this._map.set(key, dict[key]);\n        });\n    }\n    static ofEmpty() {\n        return new ObservableDict({});\n    }\n    static givenValues(values) {\n        return new ObservableDict(values);\n    }\n    static isObservableDict(input) {\n        if (input == null) {\n            return false;\n        }\n        if (typeof input !== \"object\") {\n            return false;\n        }\n        return input._isObservableDict === true;\n    }\n    get count() {\n        return this._map.size;\n    }\n    setValue(key, value) {\n        const updates = [];\n        if (this._map.has(key)) {\n            const oldValue = this._map.get(key);\n            if (oldValue === value) {\n                return;\n            }\n            updates.push({\n                type: \"update\",\n                key,\n                oldValue,\n                newValue: value,\n            });\n        }\n        else {\n            updates.push({\n                type: \"add\",\n                key,\n                newValue: value,\n            });\n        }\n        this._map.set(key, value);\n        this.didChange.emit(this.toValues());\n        this.didChangeSteps.emit(updates);\n    }\n    removeKey(key) {\n        if (!this._map.has(key)) {\n            return;\n        }\n        const updates = [\n            {\n                type: \"remove\",\n                key,\n                oldValue: this._map.get(key),\n            },\n        ];\n        this._map.delete(key);\n        this.didChange.emit(this.toValues());\n        this.didChangeSteps.emit(updates);\n    }\n    clear() {\n        const updates = [];\n        for (let [k, v] of this._map) {\n            updates.push({\n                type: \"remove\",\n                key: k,\n                oldValue: v,\n            });\n        }\n        this._map.clear();\n        this.didChange.emit({});\n        this.didChangeSteps.emit(updates);\n    }\n    sync(input) {\n        if (input == null) {\n            this.clear();\n            return;\n        }\n        const updates = [];\n        Object.keys(input).forEach((key) => {\n            if (this._map.has(key)) {\n                updates.push({\n                    type: \"update\",\n                    key,\n                    oldValue: this._map.get(key),\n                    newValue: input[key],\n                });\n            }\n            else {\n                updates.push({\n                    type: \"add\",\n                    key,\n                    newValue: input[key],\n                });\n            }\n            this._map.set(key, input[key]);\n        });\n        const inputKeys = new Set(Object.keys(input));\n        for (let key of this._map.keys()) {\n            if (!inputKeys.has(key)) {\n                updates.push({\n                    type: \"remove\",\n                    key,\n                    oldValue: this._map.get(key),\n                });\n                this._map.delete(key);\n            }\n        }\n        this.didChange.emit(this.toValues());\n        this.didChangeSteps.emit(updates);\n    }\n    hasKey(key) {\n        return this._map.has(key);\n    }\n    toOptionalValueGivenKey(key) {\n        return this._map.get(key);\n    }\n    toKeys() {\n        return new Set(this._map.keys());\n    }\n    toValues() {\n        const dict = {};\n        for (let [key, value] of this._map) {\n            dict[key] = value;\n        }\n        return dict;\n    }\n}\nexports.ObservableDict = ObservableDict;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservableSet = void 0;\nconst TypedEvent_1 = require(\"../TypedEvent\");\nconst util_1 = require(\"@anderjason/util\");\nclass ObservableSet {\n    constructor(values) {\n        this.didChange = new TypedEvent_1.TypedEvent();\n        this.didChangeSteps = new TypedEvent_1.TypedEvent();\n        this._isObservableSet = true;\n        this._set = values;\n    }\n    static ofEmpty() {\n        return new ObservableSet(new Set());\n    }\n    static givenValues(values) {\n        return new ObservableSet(new Set(values));\n    }\n    static isObservableSet(input) {\n        if (input == null) {\n            return false;\n        }\n        if (typeof input !== \"object\") {\n            return false;\n        }\n        return input._isObservableSet === true;\n    }\n    get count() {\n        return this._set.size;\n    }\n    addValue(value) {\n        if (this._set.has(value)) {\n            return false;\n        }\n        this._set.add(value);\n        this.didChange.emit(Array.from(this._set));\n        this.didChangeSteps.emit([\n            {\n                type: \"add\",\n                value,\n            },\n        ]);\n        return true;\n    }\n    removeValue(value) {\n        if (!this._set.has(value)) {\n            return false;\n        }\n        this._set.delete(value);\n        this.didChange.emit(Array.from(this._set));\n        this.didChangeSteps.emit([\n            {\n                type: \"remove\",\n                value,\n            },\n        ]);\n        return true;\n    }\n    removeAllWhere(filter) {\n        if (filter == null) {\n            throw new Error(\"Filter is required\");\n        }\n        const updates = [];\n        Array.from(this._set).forEach((v) => {\n            const isMatch = filter(v);\n            if (isMatch) {\n                this._set.delete(v);\n                updates.push({\n                    type: \"remove\",\n                    value: v,\n                });\n            }\n        });\n        this.didChange.emit(Array.from(this._set));\n        this.didChangeSteps.emit(updates);\n    }\n    sync(values) {\n        if (values == null) {\n            this.clear();\n            return;\n        }\n        const newSet = new Set(values);\n        const updates = [];\n        const diff = util_1.SetUtil.differenceGivenSets(this._set, newSet);\n        diff.addedItems.forEach((value) => {\n            updates.push({\n                type: \"add\",\n                value,\n            });\n        });\n        diff.removedItems.forEach((value) => {\n            updates.push({\n                type: \"remove\",\n                value,\n            });\n        });\n        this._set = newSet;\n        this.didChange.emit(Array.from(this._set));\n        this.didChangeSteps.emit(updates);\n    }\n    clear() {\n        const values = this.toSet();\n        this._set.clear();\n        const updates = [];\n        values.forEach((value) => {\n            updates.push({\n                type: \"remove\",\n                value,\n            });\n        });\n        this.didChange.emit(Array.from(this._set));\n        this.didChangeSteps.emit(updates);\n    }\n    hasValue(value) {\n        return this._set.has(value);\n    }\n    toSet() {\n        return new Set(this._set);\n    }\n    toArray() {\n        return Array.from(this._set);\n    }\n}\nexports.ObservableSet = ObservableSet;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadOnlyObservable = void 0;\nclass ReadOnlyObservable {\n    constructor(observable) {\n        this._isObservable = true;\n        this._observable = observable;\n    }\n    static givenObservable(observable) {\n        return new ReadOnlyObservable(observable);\n    }\n    get value() {\n        return this._observable.value;\n    }\n    get didChange() {\n        return this._observable.didChange;\n    }\n}\nexports.ReadOnlyObservable = ReadOnlyObservable;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadOnlyObservableArray = void 0;\nclass ReadOnlyObservableArray {\n    constructor(observableArray) {\n        this._isObservableArray = true;\n        this._observableArray = observableArray;\n    }\n    static givenObservableArray(observableArray) {\n        return new ReadOnlyObservableArray(observableArray);\n    }\n    get count() {\n        return this._observableArray.count;\n    }\n    get didChange() {\n        return this._observableArray.didChange;\n    }\n    get didChangeSteps() {\n        return this._observableArray.didChangeSteps;\n    }\n    hasValue(value) {\n        return this._observableArray.hasValue(value);\n    }\n    toOptionalValueGivenIndex(index) {\n        return this._observableArray.toOptionalValueGivenIndex(index);\n    }\n    toIndexOfValue(value, fromIndex) {\n        return this._observableArray.toIndexOfValue(value, fromIndex);\n    }\n    toValues() {\n        return this._observableArray.toValues();\n    }\n}\nexports.ReadOnlyObservableArray = ReadOnlyObservableArray;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadOnlyObservableDict = void 0;\nclass ReadOnlyObservableDict {\n    constructor(observableDict) {\n        this._isObservableDict = true;\n        this._observableDict = observableDict;\n    }\n    static givenObservableDict(observableDict) {\n        return new ReadOnlyObservableDict(observableDict);\n    }\n    get count() {\n        return this._observableDict.count;\n    }\n    get didChange() {\n        return this._observableDict.didChange;\n    }\n    get didChangeSteps() {\n        return this._observableDict.didChangeSteps;\n    }\n    hasKey(key) {\n        return this._observableDict.hasKey(key);\n    }\n    toOptionalValueGivenKey(key) {\n        return this._observableDict.toOptionalValueGivenKey(key);\n    }\n    toKeys() {\n        return this._observableDict.toKeys();\n    }\n    toValues() {\n        return this._observableDict.toValues();\n    }\n}\nexports.ReadOnlyObservableDict = ReadOnlyObservableDict;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadOnlyObservableSet = void 0;\nclass ReadOnlyObservableSet {\n    constructor(observableSet) {\n        this._isObservableSet = true;\n        this._observableSet = observableSet;\n    }\n    static givenObservableSet(observableSet) {\n        return new ReadOnlyObservableSet(observableSet);\n    }\n    get count() {\n        return this._observableSet.count;\n    }\n    hasValue(value) {\n        return this._observableSet.hasValue(value);\n    }\n    toSet() {\n        return this._observableSet.toSet();\n    }\n    toArray() {\n        return this._observableSet.toArray();\n    }\n    get didChange() {\n        return this._observableSet.didChange;\n    }\n    get didChangeSteps() {\n        return this._observableSet.didChangeSteps;\n    }\n}\nexports.ReadOnlyObservableSet = ReadOnlyObservableSet;\n//# sourceMappingURL=index.js.map","import { Color } from \"@anderjason/color\";\nimport { Observable, ObservableArray } from \"@anderjason/observable\";\nimport { ElementStyle, ScrollArea } from \"../../../src\";\nimport { Actor, ArrayActivator } from \"skytree\";\nimport { ActiveBox } from \"./ActiveBox\";\n\nexport interface IntersectionWatcherDemoProps {}\n\nexport class IntersectionWatcherDemo extends Actor<\n  IntersectionWatcherDemoProps\n> {\n  readonly parentElement = Observable.ofEmpty<HTMLElement>();\n  readonly isVisible = Observable.ofEmpty<boolean>();\n\n  onActivate() {\n    const wrapper = this.addActor(\n      new ScrollArea({\n        parentElement: this.parentElement,\n        direction: \"vertical\",\n        scrollPositionColor: Color.givenHexString(\"#FFFFFF\"),\n      })\n    );\n\n    const el = ObservableArray.givenValues([1, 2, 3, 4, 5, 6]);\n\n    this.addActor(\n      new ArrayActivator({\n        input: el,\n        fn: () => {\n          return new ActiveBox({\n            parentElement: wrapper.element,\n          });\n        },\n      })\n    );\n  }\n}\n\nconst WrapperStyle = ElementStyle.givenDefinition({\n  css: `\n    background: #333;\n    position: absolute;\n    width: 300px;\n    height: 300px;\n    transform: translate(-50%, -50%);\n    left: 50%;\n    top: 50%;\n    color: white;\n    overflow-y: scroll;\n  `,\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hsbGivenRgbFloat = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction hsbGivenRgbFloat(rgbFloatColor) {\n    const r = rgbFloatColor.r.toNumber(1);\n    const g = rgbFloatColor.g.toNumber(1);\n    const b = rgbFloatColor.b.toNumber(1);\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    const delta = max - min;\n    let h = 0;\n    if (delta != 0) {\n        if (r == max) {\n            h = (g - b) / delta;\n        }\n        else {\n            if (g == max) {\n                h = 2 + (b - r) / delta;\n            }\n            else {\n                h = 4 + (r - g) / delta;\n            }\n        }\n        h *= 60;\n        if (h < 0) {\n            h += 360;\n        }\n    }\n    return {\n        h: util_1.Percent.givenFraction(h, 360),\n        s: util_1.Percent.givenFraction(max == 0 ? 0 : (max - min) / max, 1),\n        b: util_1.Percent.givenFraction(max, 1),\n    };\n}\nexports.hsbGivenRgbFloat = hsbGivenRgbFloat;\n//# sourceMappingURL=hsbGivenRgbFloat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hslGivenRgbFloat = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction hslGivenRgbFloat(rgbColor) {\n    const r = rgbColor.r.toNumber(1);\n    const g = rgbColor.g.toNumber(1);\n    const b = rgbColor.b.toNumber(1);\n    let min = Math.min(r, g, b); //Min. value of RGB\n    let max = Math.max(r, g, b); //Max. value of RGB\n    let delMax = max - min; //Delta RGB value\n    let delR;\n    let delG;\n    let delB;\n    let h = 0;\n    let s = 0;\n    let l = (max + min) / 2;\n    if (delMax == 0) {\n        h = 0;\n        s = 0;\n    }\n    else {\n        if (l < 0.5) {\n            s = delMax / (max + min);\n        }\n        else {\n            s = delMax / (2 - max - min);\n        }\n        delR = ((max - r) / 6 + delMax / 2) / delMax;\n        delG = ((max - g) / 6 + delMax / 2) / delMax;\n        delB = ((max - b) / 6 + delMax / 2) / delMax;\n        if (r == max) {\n            h = delB - delG;\n        }\n        else if (g == max) {\n            h = 1 / 3 + delR - delB;\n        }\n        else if (b == max) {\n            h = 2 / 3 + delG - delR;\n        }\n        if (h < 0) {\n            h += 1;\n        }\n        if (h > 1) {\n            h -= 1;\n        }\n    }\n    return {\n        h: util_1.Percent.givenFraction(h, 1),\n        s: util_1.Percent.givenFraction(s, 1),\n        l: util_1.Percent.givenFraction(l, 1),\n    };\n}\nexports.hslGivenRgbFloat = hslGivenRgbFloat;\n//# sourceMappingURL=hslGivenRgbFloat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.labGivenHcl = void 0;\nconst DEG2RAD = Math.PI / 180;\nfunction labGivenHcl(hclColor) {\n    let h = hclColor.h.toNumber(359);\n    let c = hclColor.c.toNumber(140);\n    let l = hclColor.l.toNumber(100);\n    h = h * DEG2RAD;\n    return {\n        l,\n        a: Math.cos(h) * c,\n        b: Math.sin(h) * c,\n    };\n}\nexports.labGivenHcl = labGivenHcl;\n//# sourceMappingURL=labGivenHcl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.labGivenXyz = void 0;\nfunction labGivenXyz(xyzColor) {\n    let x = xyzColor.x / 95.047;\n    let y = xyzColor.y / 100.0;\n    let z = xyzColor.z / 108.883;\n    if (x > 0.008856) {\n        x = Math.pow(x, 1 / 3);\n    }\n    else {\n        x = 7.787 * x + 16 / 116;\n    }\n    if (y > 0.008856) {\n        y = Math.pow(y, 1 / 3);\n    }\n    else {\n        y = 7.787 * y + 16 / 116;\n    }\n    if (z > 0.008856) {\n        z = Math.pow(z, 1 / 3);\n    }\n    else {\n        z = 7.787 * z + 16 / 116;\n    }\n    return {\n        l: 116 * y - 16,\n        a: 500 * (x - y),\n        b: 200 * (y - z)\n    };\n}\nexports.labGivenXyz = labGivenXyz;\n//# sourceMappingURL=labGivenXyz.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hclGivenLab = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst RAD2DEG = 180 / Math.PI;\nfunction hclGivenLab(labColor) {\n    const { l, a, b } = labColor;\n    const c = Math.sqrt(a * a + b * b);\n    let h = (Math.atan2(b, a) * RAD2DEG + 360) % 360;\n    if (Math.round(c * 10000) === 0) {\n        h = Number.NaN;\n    }\n    return {\n        h: util_1.Percent.givenFraction(h, 360),\n        c: util_1.Percent.givenFraction(c, 140),\n        l: util_1.Percent.givenFraction(l, 100),\n    };\n}\nexports.hclGivenLab = hclGivenLab;\n//# sourceMappingURL=hclGivenLab.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rgbFloatGivenHsl = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction getRgbComponent(v1, v2, vH) {\n    if (vH < 0) {\n        vH += 1;\n    }\n    if (vH > 1) {\n        vH -= 1;\n    }\n    if (6 * vH < 1) {\n        return v1 + (v2 - v1) * 6 * vH;\n    }\n    if (2 * vH < 1) {\n        return v2;\n    }\n    if (3 * vH < 2) {\n        return v1 + (v2 - v1) * (2 / 3 - vH) * 6;\n    }\n    return v1;\n}\nfunction rgbFloatGivenHsl(hslColor) {\n    const h = hslColor.h.toNumber(1);\n    const s = hslColor.s.toNumber(1);\n    const l = hslColor.l.toNumber(1);\n    if (s == 0) {\n        return {\n            r: hslColor.l,\n            g: hslColor.l,\n            b: hslColor.l,\n        };\n    }\n    let var1;\n    let var2;\n    if (l < 0.5) {\n        var2 = l * (1 + s);\n    }\n    else {\n        var2 = l + s - s * l;\n    }\n    var1 = 2 * l - var2;\n    return {\n        r: util_1.Percent.givenFraction(getRgbComponent(var1, var2, h + 1 / 3), 1),\n        g: util_1.Percent.givenFraction(getRgbComponent(var1, var2, h), 1),\n        b: util_1.Percent.givenFraction(getRgbComponent(var1, var2, h - 1 / 3), 1),\n    };\n}\nexports.rgbFloatGivenHsl = rgbFloatGivenHsl;\n//# sourceMappingURL=rgbFloatGivenHsl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rgbFloatGivenXyz = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction rgbFloatGivenXyz(xyzColor) {\n    const x = xyzColor.x / 100;\n    const y = xyzColor.y / 100;\n    const z = xyzColor.z / 100;\n    let r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n    let g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n    let b = x * 0.0557 + y * -0.204 + z * 1.057;\n    if (r > 0.0031308) {\n        r = 1.055 * Math.pow(r, 1 / 2.4) - 0.055;\n    }\n    else {\n        r = 12.92 * r;\n    }\n    if (g > 0.0031308) {\n        g = 1.055 * Math.pow(g, 1 / 2.4) - 0.055;\n    }\n    else {\n        g = 12.92 * g;\n    }\n    if (b > 0.0031308) {\n        b = 1.055 * Math.pow(b, 1 / 2.4) - 0.055;\n    }\n    else {\n        b = 12.92 * b;\n    }\n    return {\n        r: util_1.Percent.givenFraction(util_1.NumberUtil.numberWithHardLimit(r, 0, 1), 1),\n        g: util_1.Percent.givenFraction(util_1.NumberUtil.numberWithHardLimit(g, 0, 1), 1),\n        b: util_1.Percent.givenFraction(util_1.NumberUtil.numberWithHardLimit(b, 0, 1), 1),\n    };\n}\nexports.rgbFloatGivenXyz = rgbFloatGivenXyz;\n//# sourceMappingURL=rgbFloatGivenXyz.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hsbStringGivenHsb = void 0;\nfunction hsbStringGivenHsb(hsbColor) {\n    const h = Math.round(hsbColor.h.toNumber(359));\n    const s = Math.round(hsbColor.s.toNumber(100));\n    const b = Math.round(hsbColor.b.toNumber(100));\n    return `hsb(${h}, ${s}%, ${b}%)`;\n}\nexports.hsbStringGivenHsb = hsbStringGivenHsb;\n//# sourceMappingURL=hsbStringGivenHsb.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hslStringGivenHsl = void 0;\nfunction hslStringGivenHsl(hslColor) {\n    const h = Math.round(hslColor.h.toNumber(359));\n    const s = Math.round(hslColor.s.toNumber(100));\n    const l = Math.round(hslColor.l.toNumber(100));\n    return `hsl(${h}, ${s}%, ${l}%)`;\n}\nexports.hslStringGivenHsl = hslStringGivenHsl;\n//# sourceMappingURL=hslStringGivenHsl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rgbStringGivenRgbFloat = void 0;\nfunction rgbStringGivenRgbFloat(rgbColor, alpha) {\n    const r = Math.round(rgbColor.r.toNumber(255));\n    const g = Math.round(rgbColor.g.toNumber(255));\n    const b = Math.round(rgbColor.b.toNumber(255));\n    const a = alpha.toNumber(1);\n    if (a === 1) {\n        return `rgb(${r}, ${g}, ${b})`;\n    }\n    else {\n        return `rgba(${r}, ${g}, ${b}, ${a})`;\n    }\n}\nexports.rgbStringGivenRgbFloat = rgbStringGivenRgbFloat;\n//# sourceMappingURL=rgbStringGivenRgbFloat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.xyzGivenLab = void 0;\nfunction xyzGivenLab(labColor) {\n    let y = (labColor.l + 16) / 116;\n    let x = labColor.a / 500 + y;\n    let z = y - labColor.b / 200;\n    if (Math.pow(y, 3) > 0.008856) {\n        y = Math.pow(y, 3);\n    }\n    else {\n        y = (y - 16 / 116) / 7.787;\n    }\n    if (Math.pow(x, 3) > 0.008856) {\n        x = Math.pow(x, 3);\n    }\n    else {\n        x = (x - 16 / 116) / 7.787;\n    }\n    if (Math.pow(z, 3) > 0.008856) {\n        z = Math.pow(z, 3);\n    }\n    else {\n        z = (z - 16 / 116) / 7.787;\n    }\n    return {\n        x: x * 95.047,\n        y: y * 100.0,\n        z: z * 108.883\n    };\n}\nexports.xyzGivenLab = xyzGivenLab;\n//# sourceMappingURL=xyzGivenLab.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.xyzGivenRgbFloat = void 0;\nfunction xyzGivenRgbFloat(rgbFloatColor) {\n    let r = rgbFloatColor.r.toNumber(1);\n    let g = rgbFloatColor.g.toNumber(1);\n    let b = rgbFloatColor.b.toNumber(1);\n    if (r > 0.04045) {\n        r = Math.pow((r + 0.055) / 1.055, 2.4);\n    }\n    else {\n        r = r / 12.92;\n    }\n    if (g > 0.04045) {\n        g = Math.pow((g + 0.055) / 1.055, 2.4);\n    }\n    else {\n        g = g / 12.92;\n    }\n    if (b > 0.04045) {\n        b = Math.pow((b + 0.055) / 1.055, 2.4);\n    }\n    else {\n        b = b / 12.92;\n    }\n    r = r * 100;\n    g = g * 100;\n    b = b * 100;\n    return {\n        x: r * 0.4124 + g * 0.3576 + b * 0.1805,\n        y: r * 0.2126 + g * 0.7152 + b * 0.0722,\n        z: r * 0.0193 + g * 0.1192 + b * 0.9505,\n    };\n}\nexports.xyzGivenRgbFloat = xyzGivenRgbFloat;\n//# sourceMappingURL=xyzGivenRgbFloat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rgbFloatGivenHex = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst hexRegex = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\nfunction rgbFloatGivenHex(hexColor) {\n    if (!hexColor.match(hexRegex)) {\n        throw new Error(`Unrecognized hex color: ${hexColor}`);\n    }\n    // remove optional leading #\n    if (hexColor.length === 4 || hexColor.length === 7) {\n        hexColor = hexColor.substr(1);\n    }\n    // expand short-notation to full six-digit\n    if (hexColor.length === 3) {\n        const parts = hexColor.split(\"\");\n        hexColor = parts[0] + parts[0] + parts[1] + parts[1] + parts[2] + parts[2];\n    }\n    const u = parseInt(hexColor, 16);\n    const r = u >> 16;\n    const g = (u >> 8) & 0xff;\n    const b = u & 0xff;\n    return {\n        r: util_1.Percent.givenFraction(r, 255),\n        g: util_1.Percent.givenFraction(g, 255),\n        b: util_1.Percent.givenFraction(b, 255),\n    };\n}\nexports.rgbFloatGivenHex = rgbFloatGivenHex;\n//# sourceMappingURL=rgbFloatGivenHex.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hexGivenRgb = void 0;\nfunction hexGivenRgb(rgbColor, alpha) {\n    const hexR = Math.round(rgbColor.r.toNumber(255))\n        .toString(16)\n        .padStart(2, \"0\");\n    const hexG = Math.round(rgbColor.g.toNumber(255))\n        .toString(16)\n        .padStart(2, \"0\");\n    const hexB = Math.round(rgbColor.b.toNumber(255))\n        .toString(16)\n        .padStart(2, \"0\");\n    if (alpha.toNumber(1) === 1) {\n        return `#${hexR}${hexG}${hexB}`;\n    }\n    else {\n        const hexA = Math.round(alpha.toNumber(255)).toString(16).padStart(2, \"0\");\n        return `#${hexR}${hexG}${hexB}${hexA}`;\n    }\n}\nexports.hexGivenRgb = hexGivenRgb;\n//# sourceMappingURL=hexGivenRgb.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.highContrastColorGivenColor = void 0;\nconst __1 = require(\"..\");\nconst util_1 = require(\"@anderjason/util\");\nfunction highContrastColorGivenColor(input) {\n    const hclColor = input.toHclColor();\n    let v;\n    if (hclColor.l.toNumber(1) > 0.5) {\n        v = util_1.Percent.ofZero();\n    }\n    else {\n        v = util_1.Percent.givenFraction(1, 1);\n    }\n    return __1.Color.givenRgbFloat({ r: v, g: v, b: v });\n}\nexports.highContrastColorGivenColor = highContrastColorGivenColor;\n//# sourceMappingURL=highContrastColorGivenColor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.distanceGivenColors = void 0;\nfunction distanceGivenColors(colorA, colorB) {\n    const labA = colorA.toLabColor();\n    const labB = colorB.toLabColor();\n    const deltaL = Math.abs(labA.l - labB.l);\n    const deltaA = Math.abs(labA.a - labB.a);\n    const deltaB = Math.abs(labA.b - labB.b);\n    return deltaL + deltaA + deltaB;\n}\nexports.distanceGivenColors = distanceGivenColors;\n//# sourceMappingURL=distanceGivenColors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorGradient = void 0;\nconst hclInterpolatedColorOfColors_1 = require(\"./_internal/hclInterpolatedColorOfColors\");\nconst rgbInterpolatedColorOfColors_1 = require(\"./_internal/rgbInterpolatedColorOfColors\");\nconst hclStepsOfColorGradient_1 = require(\"./_internal/hclStepsOfColorGradient\");\nconst rgbStepsOfColorGradient_1 = require(\"./_internal/rgbStepsOfColorGradient\");\nclass ColorGradient {\n    constructor(steps) {\n        this._steps = steps;\n    }\n    static givenSteps(steps) {\n        if (steps.length < 2) {\n            throw new Error(\"At least 2 steps are required\");\n        }\n        return new ColorGradient(steps);\n    }\n    toSteps() {\n        return this._steps;\n    }\n    toLinearGradientString(direction) {\n        const colors = this._steps.map((s) => s.toString());\n        return `linear-gradient(${direction}, ${colors.join(\",\")})`;\n    }\n    toHclInterpolatedColor(percent) {\n        return hclInterpolatedColorOfColors_1.hclInterpolatedColorOfColors(this._steps, percent);\n    }\n    toRgbInterpolatedColor(percent) {\n        return rgbInterpolatedColorOfColors_1.rgbInterpolatedColorOfColors(this._steps, percent);\n    }\n    withHclStepCount(stepCount) {\n        return new ColorGradient(hclStepsOfColorGradient_1.hclStepsOfColorGradient(this, stepCount));\n    }\n    withRgbStepCount(stepCount) {\n        return new ColorGradient(rgbStepsOfColorGradient_1.rgbStepsOfColorGradient(this, stepCount));\n    }\n}\nexports.ColorGradient = ColorGradient;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hclInterpolatedColorOfColors = void 0;\nconst hclInterpolatedColorOfTwoColors_1 = require(\"./hclInterpolatedColorOfTwoColors\");\nconst util_1 = require(\"@anderjason/util\");\nfunction hclInterpolatedColorOfColors(colors, percent) {\n    const decimalRatioPerStep = 1 / (colors.length - 1);\n    if (percent.isFull) {\n        return util_1.ArrayUtil.optionalLastValueGivenArray(colors);\n    }\n    const lowerBoundIdx = Math.floor(percent.toNumber(1) * (colors.length - 1));\n    const upperBoundIdx = Math.ceil(percent.toNumber(1) * (colors.length - 1));\n    const lowerColor = colors[lowerBoundIdx];\n    const upperColor = colors[upperBoundIdx];\n    const partRatio = util_1.Percent.givenFraction((percent.toNumber(1) - lowerBoundIdx * decimalRatioPerStep) /\n        decimalRatioPerStep, 1);\n    return hclInterpolatedColorOfTwoColors_1.hclInterpolatedColorOfTwoColors(lowerColor, upperColor, partRatio);\n}\nexports.hclInterpolatedColorOfColors = hclInterpolatedColorOfColors;\n//# sourceMappingURL=hclInterpolatedColorOfColors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hclInterpolatedColorOfTwoColors = void 0;\nconst Color_1 = require(\"../../Color\");\nconst util_1 = require(\"@anderjason/util\");\nfunction hclInterpolatedColorOfTwoColors(color1, color2, percent) {\n    if (color1 == null) {\n        throw new Error(\"Color 1 is required\");\n    }\n    if (color2 == null) {\n        throw new Error(\"Color 2 is required\");\n    }\n    if (percent.isZero) {\n        return color1;\n    }\n    if (percent.isFull) {\n        return color2;\n    }\n    const hcl1 = color1.toHclColor();\n    const hcl2 = color2.toHclColor();\n    const h1 = hcl1.h.toNumber(1);\n    const c1 = hcl1.c.toNumber(1);\n    const l1 = hcl1.l.toNumber(1);\n    const h2 = hcl2.h.toNumber(1);\n    const c2 = hcl2.c.toNumber(1);\n    const l2 = hcl2.l.toNumber(1);\n    let deltaH;\n    if (h2 > h1 && h2 - h1 > 0.5) {\n        deltaH = h2 - (h1 + 1);\n    }\n    else if (h2 < h1 && h1 - h2 > 0.5) {\n        deltaH = h2 + 1 - h1;\n    }\n    else {\n        deltaH = h2 - h1;\n    }\n    return Color_1.Color.givenHclFloat({\n        h: util_1.Percent.givenFraction(h1 + percent.toNumber(1) * deltaH, 1),\n        c: util_1.Percent.givenFraction(c1 + percent.toNumber(1) * (c2 - c1), 1),\n        l: util_1.Percent.givenFraction(l1 + percent.toNumber(1) * (l2 - l1), 1),\n    });\n}\nexports.hclInterpolatedColorOfTwoColors = hclInterpolatedColorOfTwoColors;\n//# sourceMappingURL=hclInterpolatedColorOfTwoColors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rgbInterpolatedColorOfColors = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst rgbInterpolatedColorOfTwoColors_1 = require(\"./rgbInterpolatedColorOfTwoColors\");\nfunction rgbInterpolatedColorOfColors(colors, percent) {\n    const decimalRatioPerStep = 1 / (colors.length - 1);\n    if (percent.isFull) {\n        return util_1.ArrayUtil.optionalLastValueGivenArray(colors);\n    }\n    const lowerBoundIdx = Math.floor(percent.toNumber(1) * (colors.length - 1));\n    const upperBoundIdx = Math.ceil(percent.toNumber(1) * (colors.length - 1));\n    const lowerColor = colors[lowerBoundIdx];\n    const upperColor = colors[upperBoundIdx];\n    const partRatio = util_1.Percent.givenFraction((percent.toNumber(1) - lowerBoundIdx * decimalRatioPerStep) /\n        decimalRatioPerStep, 1);\n    return rgbInterpolatedColorOfTwoColors_1.rgbInterpolatedColorOfTwoColors(lowerColor, upperColor, partRatio);\n}\nexports.rgbInterpolatedColorOfColors = rgbInterpolatedColorOfColors;\n//# sourceMappingURL=rgbInterpolatedColorOfColors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rgbInterpolatedColorOfTwoColors = void 0;\nconst Color_1 = require(\"../../Color\");\nconst util_1 = require(\"@anderjason/util\");\nfunction rgbInterpolatedColorOfTwoColors(color1, color2, percent) {\n    if (color1 == null) {\n        throw new Error(\"Color 1 is required\");\n    }\n    if (color2 == null) {\n        throw new Error(\"Color 2 is required\");\n    }\n    if (percent.isZero) {\n        return color1;\n    }\n    if (percent.isFull) {\n        return color2;\n    }\n    const rgb1 = color1.toRgbFloatColor();\n    const rgb2 = color2.toRgbFloatColor();\n    const r1 = rgb1.r.toNumber(1);\n    const g1 = rgb1.g.toNumber(1);\n    const b1 = rgb1.b.toNumber(1);\n    const r2 = rgb2.r.toNumber(1);\n    const g2 = rgb2.g.toNumber(1);\n    const b2 = rgb2.b.toNumber(1);\n    return Color_1.Color.givenRgbFloat({\n        r: util_1.Percent.givenFraction(r1 + percent.toNumber(1) * (r2 - r1), 1),\n        g: util_1.Percent.givenFraction(g1 + percent.toNumber(1) * (g2 - g1), 1),\n        b: util_1.Percent.givenFraction(b1 + percent.toNumber(1) * (b2 - b1), 1),\n    });\n}\nexports.rgbInterpolatedColorOfTwoColors = rgbInterpolatedColorOfTwoColors;\n//# sourceMappingURL=rgbInterpolatedColorOfTwoColors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hclStepsOfColorGradient = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction hclStepsOfColorGradient(colorGradient, totalSteps) {\n    if (totalSteps < 2) {\n        throw new Error(\"At least two total steps are required\");\n    }\n    return util_1.ArrayUtil.numberArrayGivenRange(0, totalSteps - 1).map((n) => colorGradient.toHclInterpolatedColor(util_1.Percent.givenFraction(n, totalSteps - 1)));\n}\nexports.hclStepsOfColorGradient = hclStepsOfColorGradient;\n//# sourceMappingURL=hclStepsOfColorGradient.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rgbStepsOfColorGradient = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction rgbStepsOfColorGradient(colorGradient, totalSteps) {\n    if (totalSteps < 2) {\n        throw new Error(\"At least two total steps are required\");\n    }\n    return util_1.ArrayUtil.numberArrayGivenRange(0, totalSteps - 1).map((n) => colorGradient.toRgbInterpolatedColor(util_1.Percent.givenFraction(n, totalSteps - 1)));\n}\nexports.rgbStepsOfColorGradient = rgbStepsOfColorGradient;\n//# sourceMappingURL=rgbStepsOfColorGradient.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Palette = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst colorsGivenCanvasImageSource_1 = require(\"./_internal/colorsGivenCanvasImageSource\");\nclass Palette {\n    constructor(colors) {\n        this._colors = colors;\n    }\n    static givenColors(colors) {\n        return new Palette(colors);\n    }\n    static givenCanvasImageSource(imageSource, maxColors) {\n        const colors = colorsGivenCanvasImageSource_1.colorsGivenCanvasImageSource(imageSource, maxColors);\n        return new Palette(colors);\n    }\n    get colors() {\n        return [...this._colors];\n    }\n    isEqual(otherPalette) {\n        if (otherPalette.colors.length !== this.colors.length) {\n            return false;\n        }\n        return this.colors.every((color, idx) => {\n            const otherColor = otherPalette.colors[idx];\n            return color.isEqual(otherColor);\n        });\n    }\n    toNearestIndexGivenColor(targetColor) {\n        const distances = this._colors.map((c, idx) => {\n            return {\n                idx,\n                distance: c.toDistanceGivenColor(targetColor),\n            };\n        });\n        const ordered = util_1.ArrayUtil.arrayWithOrderFromValue(distances, (d) => d.distance, \"ascending\");\n        return ordered[0].idx;\n    }\n    toNearestColorGivenColor(targetColor) {\n        return this.toOptionalColorGivenIndex(this.toNearestIndexGivenColor(targetColor));\n    }\n    toOptionalColorGivenIndex(index) {\n        return this._colors[index];\n    }\n    toIndexGivenColor(inputColor) {\n        const index = this._colors.findIndex((c) => c.isEqual(inputColor));\n        if (index == -1) {\n            throw new Error(\"Color not found in toIndexGivenColor\");\n        }\n        return index;\n    }\n}\nexports.Palette = Palette;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.colorsGivenCanvasImageSource = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst Color_1 = require(\"../../Color\");\nfunction colorsGivenCanvasImageSource(input, maxColors) {\n    const internalCanvas = document.createElement(\"canvas\");\n    internalCanvas.width = 50;\n    internalCanvas.height = 50;\n    const ctx = internalCanvas.getContext(\"2d\");\n    ctx.drawImage(input, 0, 0, internalCanvas.width, internalCanvas.height);\n    const frequencyByHexString = new Map();\n    const samplePixel = (x, y) => {\n        const [r, g, b, a] = ctx.getImageData(x, y, 1, 1).data;\n        if (a === 255) {\n            const color = Color_1.Color.givenRgb255(r, g, b);\n            const hexColor = color.toHexString();\n            if (!frequencyByHexString.has(hexColor)) {\n                frequencyByHexString.set(hexColor, 1);\n            }\n            else {\n                frequencyByHexString.set(hexColor, frequencyByHexString.get(hexColor) + 1);\n            }\n        }\n    };\n    const imgPixelCount = internalCanvas.width * internalCanvas.height;\n    if (imgPixelCount <= maxColors) {\n        for (let x = 0; x < internalCanvas.width; x++) {\n            for (let y = 0; y < internalCanvas.height; y++) {\n                samplePixel(x, y);\n            }\n        }\n    }\n    else {\n        // random sampling\n        const sampleCount = maxColors * 8;\n        for (let n = 0; n < sampleCount; n++) {\n            const x = Math.floor(Math.random() * internalCanvas.width);\n            const y = Math.floor(Math.random() * internalCanvas.height);\n            samplePixel(x, y);\n        }\n    }\n    let results = [];\n    for (const [hexColor, frequency] of frequencyByHexString) {\n        results.push({\n            hexColor,\n            frequency,\n        });\n    }\n    results = util_1.ArrayUtil.arrayWithOrderFromValue(results, (r) => r.frequency, \"descending\");\n    const clusters = [];\n    let needsCluster = [...results];\n    const distanceThreshold = 10;\n    while (needsCluster.length > 1) {\n        const targetColor = Color_1.Color.givenHexString(needsCluster[0].hexColor);\n        const removeHexColors = new Set();\n        const cluster = needsCluster.filter((item) => {\n            const itemColor = Color_1.Color.givenHexString(item.hexColor);\n            const distance = targetColor.toDistanceGivenColor(itemColor);\n            const inCluster = distance < distanceThreshold;\n            if (inCluster) {\n                removeHexColors.add(item.hexColor);\n            }\n            return inCluster;\n        });\n        clusters.push(cluster);\n        needsCluster = needsCluster.filter((item) => !removeHexColors.has(item.hexColor));\n    }\n    if (needsCluster.length > 0) {\n        clusters.push([needsCluster[0]]);\n    }\n    results = clusters.map((cluster) => cluster[0]);\n    results = results.slice(0, maxColors);\n    let colors = results.map((r) => Color_1.Color.givenHexString(r.hexColor));\n    const firstColor = colors[0];\n    colors = util_1.ArrayUtil.arrayWithOrderFromValue(colors, (color) => {\n        return firstColor.toDistanceGivenColor(color);\n    }, \"ascending\");\n    return colors;\n}\nexports.colorsGivenCanvasImageSource = colorsGivenCanvasImageSource;\n//# sourceMappingURL=colorsGivenCanvasImageSource.js.map","import { blobGivenCanvas } from \"./_internal/blobGivenCanvas\";\nimport { canvasGivenBlob } from \"./_internal/canvasGivenBlob\";\n\nexport class CanvasUtil {\n  static blobGivenCanvas = blobGivenCanvas;\n  static canvasGivenBlob = canvasGivenBlob;\n}\n","export async function blobGivenCanvas(\n  canvas: HTMLCanvasElement,\n  type: \"image/png\" | \"image/jpeg\" | \"image/webp\"\n): Promise<Blob> {\n  return new Promise((resolve, reject) => {\n    canvas.toBlob((blob) => {\n      if (blob == null) {\n        reject(new Error(\"Unknown error rendering canvas to blob\"));\n        return;\n      }\n\n      resolve(blob);\n    }, type);\n  });\n}\n","import { Size2 } from \"@anderjason/geometry\";\n\nexport async function canvasGivenBlob(\n  blob: Blob | File,\n  maxSize?: Size2\n): Promise<HTMLCanvasElement> {\n  return new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n\n    fileReader.onerror = () => {\n      reject(fileReader.error);\n    };\n\n    fileReader.onloadend = (e) => {\n      const img = new Image();\n\n      img.addEventListener(\"error\", (e) => {\n        reject(e.error);\n      });\n\n      img.addEventListener(\"load\", () => {\n        const canvas = document.createElement(\"canvas\");\n\n        let width = img.width;\n        let height = img.height;\n\n        if (maxSize != null) {\n          const scaleX = maxSize.width / img.width;\n          const scaleY = maxSize.height / img.height;\n          const scale = Math.min(scaleX, scaleY, 1);\n\n          width = Math.round(img.width * scale);\n          height = Math.round(img.height * scale);\n        }\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const ctx = canvas.getContext(\"2d\")!;\n        ctx.imageSmoothingEnabled = true;\n        ctx.imageSmoothingQuality = \"high\";\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n        resolve(canvas);\n      });\n\n      img.src = e.target.result as string;\n    };\n\n    fileReader.readAsDataURL(blob);\n  });\n}\n","import { Actor } from \"skytree\";\nimport { Observable } from \"@anderjason/observable\";\n\nexport interface CheckboxBindingProps {\n  inputElement: HTMLElement;\n\n  initialValue?: boolean;\n  shouldPreventChange?: (newValue: boolean) => boolean;\n}\n\nconst allowAll = () => false;\n\nexport class CheckboxBinding extends Actor<CheckboxBindingProps> {\n  readonly output: Observable<boolean>;\n  readonly inputElement: HTMLInputElement;\n\n  private _previousValue: boolean;\n\n  constructor(props: CheckboxBindingProps) {\n    super(props);\n\n    if (props.inputElement == null) {\n      throw new Error(\"Input element is required\");\n    }\n\n    const nodeName = props.inputElement.nodeName.toLowerCase();\n    if (nodeName !== \"input\") {\n      throw new Error(`Expected an input element, but got '${nodeName}'`);\n    }\n\n    this.inputElement = props.inputElement as HTMLInputElement;\n    if (this.inputElement.type !== \"checkbox\") {\n      throw new Error(`Expected an input with type \"checkbox\"`);\n    }\n\n    this.output = Observable.givenValue(\n      props.initialValue || false,\n      Observable.isStrictEqual\n    );\n  }\n\n  onActivate() {\n    this._previousValue = this.inputElement.checked;\n\n    this.inputElement.addEventListener(\"input\", (e: Event) => {\n      const newValue = this.inputElement.checked;\n\n      const shouldPreventChange = this.props.shouldPreventChange || allowAll;\n      if (shouldPreventChange(newValue)) {\n        this.inputElement.checked = this._previousValue;\n        return;\n      }\n\n      this.output.setValue(newValue);\n      this._previousValue = newValue;\n    });\n\n    this.cancelOnDeactivate(\n      this.output.didChange.subscribe((value) => {\n        this.inputElement.checked = value;\n      }, true)\n    );\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ArrayActivator = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst Actor_1 = require(\"../Actor\");\nclass ArrayActivator extends Actor_1.Actor {\n    constructor(props) {\n        super(props);\n        this._output = observable_1.ObservableArray.ofEmpty();\n        this.output = observable_1.ReadOnlyObservableArray.givenObservableArray(this._output);\n        this._previousInput = [];\n        if (observable_1.ObservableArray.isObservableArray(props.input)) {\n            this._observableInput = props.input;\n        }\n        else {\n            this._observableInput = observable_1.ObservableArray.givenValues(props.input);\n        }\n    }\n    onActivate() {\n        this.cancelOnDeactivate(this._observableInput.didChange.subscribe((newInput) => {\n            if (newInput == null) {\n                return;\n            }\n            for (let i = 0; i < newInput.length; i++) {\n                if (this._previousInput[i] !== newInput[i]) {\n                    const newValue = newInput[i];\n                    const previousObject = this._output.toOptionalValueGivenIndex(i);\n                    const newObject = this.props.fn(newValue, i, previousObject);\n                    if (previousObject !== newObject) {\n                        if (previousObject != null) {\n                            this.removeActor(previousObject);\n                        }\n                        if (newObject != null) {\n                            this.addActor(newObject);\n                        }\n                    }\n                    // this needs to happen after adding the new object above,\n                    // so the object is initialized by the time this observable updates\n                    this._output.replaceValueAtIndex(i, newObject);\n                }\n            }\n            if (this._previousInput.length > newInput.length) {\n                for (let i = newInput.length; i < this._previousInput.length; i++) {\n                    const object = this._output.toOptionalValueGivenIndex(i);\n                    if (object != null) {\n                        this.removeActor(object);\n                    }\n                }\n                this._output.removeAllWhere((v, i) => i >= newInput.length);\n            }\n            this._previousInput = newInput;\n        }, true));\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            this._output.clear();\n        }));\n    }\n}\nexports.ArrayActivator = ArrayActivator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConvertBinding = void 0;\nconst Actor_1 = require(\"../Actor\");\nconst observable_1 = require(\"@anderjason/observable\");\nclass ConvertBinding extends Actor_1.Actor {\n    constructor(props) {\n        super(props);\n        this._output =\n            props.output || observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.output = observable_1.ReadOnlyObservable.givenObservable(this._output);\n    }\n    onActivate() {\n        let latestChangeId = 0;\n        this.cancelOnDeactivate(this.props.input.didChange.subscribe(async (value) => {\n            latestChangeId += 1;\n            if (latestChangeId > 10000) {\n                latestChangeId = 0;\n            }\n            let thisChangeId = latestChangeId;\n            const convertedValue = await this.props.fn(value);\n            if (thisChangeId === latestChangeId) {\n                this._output.setValue(convertedValue);\n            }\n        }, true));\n    }\n}\nexports.ConvertBinding = ConvertBinding;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SourceTargetBinding = void 0;\nconst Actor_1 = require(\"../Actor\");\nconst observable_1 = require(\"@anderjason/observable\");\nclass SourceTargetBinding extends Actor_1.Actor {\n    constructor() {\n        super(...arguments);\n        this._source = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.source = observable_1.ReadOnlyObservable.givenObservable(this._source);\n        this._target = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.target = observable_1.ReadOnlyObservable.givenObservable(this._target);\n    }\n    onActivate() {\n        if (this._source.value == null) {\n            this.setSource(this.props.source);\n        }\n        if (this._target.value == null) {\n            this.setTarget(this.props.target);\n        }\n        this.cancelOnDeactivate(this.source.didChange.subscribe((source) => {\n            if (this._sourceValueReceipt != null) {\n                this.removeCancelOnDeactivate(this._sourceValueReceipt);\n                this._sourceValueReceipt.cancel();\n                this._sourceValueReceipt = undefined;\n            }\n            if (source != null) {\n                this._sourceValueReceipt = this.cancelOnDeactivate(source.didChange.subscribe(() => {\n                    this.updateTarget();\n                }, true));\n            }\n            this.updateTarget();\n        }, true));\n        this.cancelOnDeactivate(this.target.didChange.subscribe(() => {\n            this.updateTarget();\n        }));\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            if (this._sourceValueReceipt != null) {\n                this.removeCancelOnDeactivate(this._sourceValueReceipt);\n                this._sourceValueReceipt.cancel();\n                this._sourceValueReceipt = undefined;\n            }\n        }));\n    }\n    setSource(newSource) {\n        if (observable_1.Observable.isObservable(newSource)) {\n            this._source.setValue(newSource);\n        }\n        else {\n            this._source.setValue(observable_1.Observable.givenValue(newSource));\n        }\n    }\n    setTarget(newTarget) {\n        this._target.setValue(newTarget);\n    }\n    updateTarget() {\n        const source = this.source.value;\n        const target = this.target.value;\n        if (source == null || target == null) {\n            return;\n        }\n        target.setValue(source.value);\n    }\n}\nexports.SourceTargetBinding = SourceTargetBinding;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DelayActivator = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst ConditionalActivator_1 = require(\"../ConditionalActivator\");\nconst Actor_1 = require(\"../Actor\");\nconst Timer_1 = require(\"../Timer\");\nclass DelayActivator extends Actor_1.Actor {\n    onActivate() {\n        const shouldActivate = observable_1.Observable.givenValue(false);\n        if (this.props.activateAfter != null) {\n            this.addActor(new Timer_1.Timer({\n                duration: this.props.activateAfter,\n                isRepeating: false,\n                fn: () => {\n                    shouldActivate.setValue(true);\n                },\n            }));\n        }\n        else {\n            shouldActivate.setValue(true);\n        }\n        if (this.props.deactivateAfter != null) {\n            this.addActor(new ConditionalActivator_1.ConditionalActivator({\n                input: shouldActivate,\n                fn: (v) => v,\n                actor: new Timer_1.Timer({\n                    duration: this.props.deactivateAfter,\n                    isRepeating: false,\n                    fn: () => {\n                        shouldActivate.setValue(false);\n                    },\n                }),\n            }));\n        }\n        this.addActor(new ConditionalActivator_1.ConditionalActivator({\n            input: shouldActivate,\n            fn: (v) => v,\n            actor: this.props.actor,\n        }));\n    }\n}\nexports.DelayActivator = DelayActivator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExclusiveActivator = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst Actor_1 = require(\"../Actor\");\nclass ExclusiveActivator extends Actor_1.Actor {\n    constructor() {\n        super(...arguments);\n        this._output = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.output = observable_1.ReadOnlyObservable.givenObservable(this._output);\n    }\n    onActivate() {\n        if (this.props.input != null && this.props.fn != null) {\n            this.cancelOnDeactivate(this.props.input.didChange.subscribe((newValue, oldValue) => {\n                const newObject = this.props.fn(newValue, oldValue, this._output.value);\n                if (newObject === this._lastObject) {\n                    return;\n                }\n                if (this._lastObject != null) {\n                    this.removeActor(this._lastObject);\n                    this._lastObject = undefined;\n                }\n                if (newObject != null) {\n                    this._lastObject = newObject;\n                    this.addActor(newObject);\n                }\n                this._output.setValue(this._lastObject);\n            }, true));\n        }\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            this._output.setValue(undefined);\n        }));\n    }\n}\nexports.ExclusiveActivator = ExclusiveActivator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultiBinding = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst Actor_1 = require(\"../Actor\");\nclass MultiBinding extends Actor_1.Actor {\n    constructor() {\n        super(...arguments);\n        this.didInvalidate = new observable_1.TypedEvent();\n        this._willInvalidateLater = false;\n        this._invalidatedSetByGroup = new Map();\n    }\n    static givenGroups(groups) {\n        return new MultiBinding({\n            groups,\n        });\n    }\n    static givenOneGroup(group) {\n        return new MultiBinding({\n            groups: [group],\n        });\n    }\n    static givenAnyChange(inputs) {\n        const groups = inputs.map((input) => {\n            return [input];\n        });\n        return new MultiBinding({\n            groups,\n        });\n    }\n    onActivate() {\n        this.props.groups.forEach((group) => {\n            const invalidatedSet = new Set();\n            this._invalidatedSetByGroup.set(group, invalidatedSet);\n            group.forEach((input) => {\n                this.cancelOnDeactivate(input.didChange.subscribe(() => {\n                    invalidatedSet.add(input);\n                    this.onChange();\n                }));\n            });\n        });\n    }\n    isAnyGroupInvalidated() {\n        return this.props.groups.some((group) => {\n            const invalidatedSet = this._invalidatedSetByGroup.get(group);\n            return invalidatedSet.size === group.length;\n        });\n    }\n    onChange() {\n        if (this.isAnyGroupInvalidated()) {\n            this.invalidateNow();\n            return;\n        }\n        if (this._willInvalidateLater) {\n            return;\n        }\n        this._willInvalidateLater = true;\n        setTimeout(() => {\n            if (this._willInvalidateLater == true) {\n                this.invalidateNow();\n            }\n        }, 0);\n    }\n    invalidateNow() {\n        this.didInvalidate.emit();\n        this._willInvalidateLater = false;\n        for (let [group, invalidatedSet] of this._invalidatedSetByGroup) {\n            invalidatedSet.clear();\n        }\n    }\n}\nexports.MultiBinding = MultiBinding;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PathBinding = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst util_1 = require(\"@anderjason/util\");\nconst Actor_1 = require(\"../Actor\");\nclass PathBinding extends Actor_1.Actor {\n    constructor(props) {\n        super(props);\n        if (observable_1.Observable.isObservable(props.output)) {\n            this._output = props.output;\n        }\n        else {\n            this._output = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        }\n        this.output = observable_1.ReadOnlyObservable.givenObservable(this._output);\n    }\n    static refreshAllHavingInput(input) {\n        const bindingGroup = this.bindingGroupsByInput.get(input);\n        if (bindingGroup == null) {\n            return;\n        }\n        const bindings = util_1.ArrayUtil.arrayWithOrderFromValue(Array.from(bindingGroup.bindings), (binding) => binding.props.path.toParts().length, \"ascending\");\n        bindings.forEach((binding) => {\n            binding.refresh();\n        });\n    }\n    onActivate() {\n        let bindingGroup = PathBinding.bindingGroupsByInput.get(this.props.input);\n        if (bindingGroup == null) {\n            bindingGroup = {\n                bindings: new Set(),\n                inputReceipt: this.props.input.didChange.subscribe(() => {\n                    PathBinding.refreshAllHavingInput(this.props.input);\n                }),\n            };\n            PathBinding.bindingGroupsByInput.set(this.props.input, bindingGroup);\n        }\n        bindingGroup.bindings.add(this);\n        this.refresh();\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            bindingGroup.bindings.delete(this);\n            if (bindingGroup.bindings.size === 0) {\n                bindingGroup.inputReceipt.cancel();\n                PathBinding.bindingGroupsByInput.delete(this.props.input);\n            }\n        }));\n    }\n    refresh() {\n        this._output.setValue(util_1.ObjectUtil.optionalValueAtPathGivenObject(this.props.input.value, this.props.path));\n    }\n}\nexports.PathBinding = PathBinding;\nPathBinding.bindingGroupsByInput = new Map();\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SequentialWorker = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst util_1 = require(\"@anderjason/util\");\nconst Actor_1 = require(\"../Actor\");\nclass SequentialWorker extends Actor_1.Actor {\n    constructor() {\n        super(...arguments);\n        this._jobs = [];\n        this._callbackByJob = new Map();\n        this._isBusy = false;\n    }\n    onActivate() {\n        this.startNextJob();\n    }\n    addWork(callback, cancelledCallback, priority = 5) {\n        const state = observable_1.Observable.givenValue(\"queued\");\n        const receipt = this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            if (job.state.value === \"queued\") {\n                job.state.setValue(\"cancelled\");\n            }\n            this._jobs = util_1.ArrayUtil.arrayWithoutValue(this._jobs, job);\n            this._callbackByJob.delete(job);\n            if (cancelledCallback != null) {\n                try {\n                    cancelledCallback();\n                }\n                catch (err) {\n                    console.error(err);\n                }\n            }\n        }));\n        const job = {\n            receipt: receipt,\n            priority,\n            state,\n        };\n        this._jobs.push(job);\n        this._callbackByJob.set(job, callback);\n        setTimeout(() => {\n            this.startNextJob();\n        }, 1);\n        return job;\n    }\n    startNextJob() {\n        if (this._isBusy) {\n            return;\n        }\n        if (this.isActive.value === false) {\n            return;\n        }\n        const orderedJobs = util_1.ArrayUtil.arrayWithOrderFromValue(this._jobs, (job) => job.priority, \"descending\");\n        const nextJob = orderedJobs[0];\n        if (nextJob == null) {\n            return;\n        }\n        this._jobs = this._jobs.filter((job) => job !== nextJob);\n        this._isBusy = true;\n        this.runJob(nextJob).then(() => {\n            this._isBusy = false;\n            this.startNextJob();\n        });\n    }\n    async runJob(job) {\n        if (job == null) {\n            return;\n        }\n        if (job.state.value !== \"queued\") {\n            return;\n        }\n        job.state.setValue(\"running\");\n        const callback = this._callbackByJob.get(job);\n        this._callbackByJob.delete(job);\n        try {\n            await callback();\n        }\n        catch (err) {\n            console.error(err);\n        }\n        job.state.setValue(\"finished\");\n    }\n}\nexports.SequentialWorker = SequentialWorker;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Box2 = void 0;\nconst Point2_1 = require(\"../Point2\");\nconst Size2_1 = require(\"../Size2\");\nclass Box2 {\n    constructor(center, size) {\n        this._center = center;\n        this._size = size;\n    }\n    static givenDomRect(domRect) {\n        return Box2.givenTopLeftSize(Point2_1.Point2.givenXY(domRect.left, domRect.top), Size2_1.Size2.givenWidthHeight(domRect.width, domRect.height));\n    }\n    static givenCenterSize(center, size) {\n        return new Box2(center, size);\n    }\n    static givenOppositeCorners(pointA, pointB) {\n        const minX = Math.min(pointA.x, pointB.x);\n        const minY = Math.min(pointA.y, pointB.y);\n        const maxX = Math.max(pointA.x, pointB.x);\n        const maxY = Math.max(pointA.y, pointB.y);\n        const size = Size2_1.Size2.givenWidthHeight(maxX - minX, maxY - minY);\n        const center = Point2_1.Point2.givenXY(minX + size.width / 2, minY + size.height / 2);\n        return this.givenCenterSize(center, size);\n    }\n    static givenTopLeftSize(topLeft, size) {\n        const center = Point2_1.Point2.givenXY(topLeft.x + size.width / 2, topLeft.y + size.height / 2);\n        return this.givenCenterSize(center, size);\n    }\n    static givenContainedPoints(points) {\n        const allX = points.map((point) => point.x);\n        const allY = points.map((point) => point.y);\n        const minX = Math.min(...allX);\n        const minY = Math.min(...allY);\n        const maxX = Math.max(...allX);\n        const maxY = Math.max(...allY);\n        return Box2.givenOppositeCorners(Point2_1.Point2.givenXY(minX, minY), Point2_1.Point2.givenXY(maxX, maxY));\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get center() {\n        return this._center;\n    }\n    get size() {\n        return this._size;\n    }\n    isPointInside(point) {\n        return (point.x >= this.toLeft() &&\n            point.x <= this.toRight() &&\n            point.y >= this.toTop() &&\n            point.y <= this.toBottom());\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Box2)) {\n            return false;\n        }\n        return (other._center.isEqual(this._center) && other._size.isEqual(this._size));\n    }\n    toTop() {\n        return this._center.y - this._size.height / 2;\n    }\n    toLeft() {\n        return this._center.x - this._size.width / 2;\n    }\n    toRight() {\n        return this._center.x + this._size.width / 2;\n    }\n    toBottom() {\n        return this._center.y + this._size.height / 2;\n    }\n    toLeftTop() {\n        return Point2_1.Point2.givenXY(this.toLeft(), this.toTop());\n    }\n    toCenterTop() {\n        return Point2_1.Point2.givenXY(this._center.x, this.toTop());\n    }\n    toRightTop() {\n        return Point2_1.Point2.givenXY(this.toRight(), this.toTop());\n    }\n    toLeftCenter() {\n        return Point2_1.Point2.givenXY(this.toLeft(), this._center.y);\n    }\n    toRightCenter() {\n        return Point2_1.Point2.givenXY(this.toRight(), this._center.y);\n    }\n    toLeftBottom() {\n        return Point2_1.Point2.givenXY(this.toLeft(), this.toBottom());\n    }\n    toCenterBottom() {\n        return Point2_1.Point2.givenXY(this._center.x, this.toBottom());\n    }\n    toRightBottom() {\n        return Point2_1.Point2.givenXY(this.toRight(), this.toBottom());\n    }\n    toScaledBox(boundingBox, scaleMode, anchor) {\n        const { size, scale } = this._size.toScaledSize(boundingBox._size, scaleMode);\n        let centerX;\n        switch (anchor) {\n            case \"leftTop\":\n            case \"leftCenter\":\n            case \"leftBottom\":\n                centerX = boundingBox.toLeft() + size.toHalf().width;\n                break;\n            case \"centerTop\":\n            case \"center\":\n            case \"centerBottom\":\n                centerX = boundingBox._center.x;\n                break;\n            case \"rightTop\":\n            case \"rightCenter\":\n            case \"rightBottom\":\n                centerX = boundingBox.toRight() - size.toHalf().width;\n                break;\n        }\n        let centerY;\n        switch (anchor) {\n            case \"leftTop\":\n            case \"centerTop\":\n            case \"rightTop\":\n                centerY = boundingBox.toTop() + size.toHalf().height;\n                break;\n            case \"leftCenter\":\n            case \"center\":\n            case \"rightCenter\":\n                centerY = boundingBox._center.y;\n                break;\n            case \"leftBottom\":\n            case \"centerBottom\":\n            case \"rightBottom\":\n                centerY = boundingBox.toBottom() - size.toHalf().height;\n                break;\n        }\n        return {\n            box: Box2.givenCenterSize(Point2_1.Point2.givenXY(centerX, centerY), size),\n            scale,\n        };\n    }\n    withAddedSize(size, anchor) {\n        const newSize = this._size.withAddedSize(size);\n        let centerX;\n        switch (anchor) {\n            case \"leftTop\":\n            case \"leftCenter\":\n            case \"leftBottom\":\n                centerX = this.toLeft() + newSize.toHalf().width;\n                break;\n            case \"centerTop\":\n            case \"center\":\n            case \"centerBottom\":\n                centerX = this._center.x;\n                break;\n            case \"rightTop\":\n            case \"rightCenter\":\n            case \"rightBottom\":\n                centerX = this.toRight() - newSize.toHalf().width;\n                break;\n        }\n        let centerY;\n        switch (anchor) {\n            case \"leftTop\":\n            case \"centerTop\":\n            case \"rightTop\":\n                centerY = this.toTop() + newSize.toHalf().height;\n                break;\n            case \"leftCenter\":\n            case \"center\":\n            case \"rightCenter\":\n                centerY = this._center.y;\n                break;\n            case \"leftBottom\":\n            case \"centerBottom\":\n            case \"rightBottom\":\n                centerY = this.toBottom() - newSize.toHalf().height;\n                break;\n        }\n        return Box2.givenCenterSize(Point2_1.Point2.givenXY(centerX, centerY), newSize);\n    }\n}\nexports.Box2 = Box2;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Line2 = void 0;\nconst Vector2_1 = require(\"../Vector2\");\nconst optionalLineIntersectionGivenPoints_1 = require(\"./optionalLineIntersectionGivenPoints\");\nclass Line2 {\n    constructor(vector, point) {\n        this._vector = vector.withNormalizedMagnitude();\n        this._point = point;\n    }\n    static givenVectorAndPoint(vector, point) {\n        return new Line2(vector, point);\n    }\n    static givenPoints(a, b) {\n        const vector = a.toVector(b);\n        return new Line2(vector, a);\n    }\n    static givenSegment(lineSegment) {\n        return Line2.givenPoints(lineSegment.startPoint, lineSegment.endPoint);\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get vector() {\n        return this._vector;\n    }\n    get point() {\n        return this._point;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Line2)) {\n            return false;\n        }\n        return other.vector.isEqual(this.vector) && other.point.isEqual(this.point);\n    }\n    toNearestTouchingPoint(point) {\n        const pnt = Vector2_1.Vector2.givenXY(point.x, point.y);\n        const linePnt = Vector2_1.Vector2.givenXY(this._point.x, this._point.y);\n        const v = pnt.withSubtractedVector(linePnt);\n        const d = v.toDotProduct(this._vector);\n        return linePnt\n            .withAddedVector(this._vector.withMultipliedScalar(d))\n            .toPoint();\n    }\n    toOptionalIntersectionGivenSegment(other) {\n        const startA = this.point;\n        const endA = this.point.withAddedVector(this.vector);\n        const startB = other.startPoint;\n        const endB = other.endPoint;\n        return optionalLineIntersectionGivenPoints_1.optionalLineIntersectionGivenPoints(startA, endA, startB, endB, \"extendThis\");\n    }\n    toOptionalIntersectionGivenLine(other) {\n        const startA = this.point;\n        const endA = this.point.withAddedVector(this.vector);\n        const startB = other.point;\n        const endB = other.point.withAddedVector(other.vector);\n        return optionalLineIntersectionGivenPoints_1.optionalLineIntersectionGivenPoints(startA, endA, startB, endB, \"extendBoth\");\n    }\n    withIntercept(intercept) {\n        return new Line2(this._vector, intercept);\n    }\n    withVector(vector) {\n        return new Line2(vector, this._point);\n    }\n}\nexports.Line2 = Line2;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Polygon2 = void 0;\nconst __1 = require(\"..\");\nconst Vector2_1 = require(\"../Vector2\");\nconst svgPathStringGivenPolygon_1 = require(\"./_internal/svgPathStringGivenPolygon\");\nclass Polygon2 {\n    constructor(points) {\n        this.points = points;\n    }\n    static ofEmpty() {\n        return new Polygon2([]);\n    }\n    static givenPoints(points) {\n        return new Polygon2(points);\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get isClockwise() {\n        if (this.points == null || this.points.length < 3) {\n            return;\n        }\n        const p = this.points;\n        return (Vector2_1.Vector2.givenPoints(p[0], p[1])\n            .withRotation(__1.Rotation.givenDegrees(90), \"clockwise\")\n            .toDotProduct(Vector2_1.Vector2.givenPoints(p[1], p[2])) >= 0);\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Polygon2)) {\n            return false;\n        }\n        if (this.points.length !== other.points.length) {\n            return false;\n        }\n        return this.points.every((point, idx) => {\n            return point.isEqual(other.points[idx]);\n        });\n    }\n    withExpansion(distance) {\n        const expanded = [];\n        const rotationDirection = this.isClockwise\n            ? \"counterclockwise\"\n            : \"clockwise\";\n        const points = this.points;\n        const deg90 = __1.Rotation.givenDegrees(90);\n        this.points.forEach((thisPoint, idx) => {\n            // get this point (pt1), the point before it\n            // (pt0) and the point that follows it (pt2)\n            const prevPoint = points[idx > 0 ? idx - 1 : points.length - 1];\n            const nextPoint = points[idx < points.length - 1 ? idx + 1 : 0];\n            // find the line vectors of the lines going\n            // into the current point\n            const vectorA = Vector2_1.Vector2.givenPoints(prevPoint, thisPoint);\n            const vectorB = Vector2_1.Vector2.givenPoints(thisPoint, nextPoint);\n            // find the normals of the two lines, multiplied\n            // to the distance that polygon should inflate\n            const vectorC = vectorA\n                .withRotation(deg90, rotationDirection)\n                .withNormalizedMagnitude()\n                .withMultipliedScalar(distance);\n            const vectorD = vectorB\n                .withRotation(deg90, rotationDirection)\n                .withNormalizedMagnitude()\n                .withMultipliedScalar(distance);\n            // use the normals to find two points on the\n            // lines parallel to the polygon lines\n            const pointA = prevPoint.withAddedVector(vectorC);\n            const pointB = thisPoint.withAddedVector(vectorC);\n            const pointC = thisPoint.withAddedVector(vectorD);\n            const pointD = nextPoint.withAddedVector(vectorD);\n            // find the intersection of the two lines, and\n            // add it to the expanded polygon\n            const lineSegmentA = __1.Segment2.givenPoints(pointA, pointB);\n            const lineSegmentB = __1.Segment2.givenPoints(pointC, pointD);\n            const intersection = lineSegmentA.toOptionalIntersectionGivenSegment(lineSegmentB);\n            if (intersection == null) {\n                throw new Error(\"Could not find line intersection\");\n            }\n            expanded.push(intersection);\n        });\n        return Polygon2.givenPoints(expanded);\n    }\n    toSvgPathString(cornerRadius = 0) {\n        return svgPathStringGivenPolygon_1.svgPathStringGivenPolygon(this, cornerRadius);\n    }\n    toBounds() {\n        const allX = this.points.map((p) => p.x);\n        const allY = this.points.map((p) => p.y);\n        const minX = Math.min(...allX);\n        const minY = Math.min(...allY);\n        const maxX = Math.max(...allX);\n        const maxY = Math.max(...allY);\n        const topLeft = __1.Point2.givenXY(minX, minY);\n        const bottomRight = __1.Point2.givenXY(maxX, maxY);\n        return __1.Box2.givenOppositeCorners(topLeft, bottomRight);\n    }\n}\nexports.Polygon2 = Polygon2;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.svgPathStringGivenPolygon = void 0;\nconst util_1 = require(\"@anderjason/util\");\nfunction svgPathStringGivenPolygon(polygon, radius) {\n    let pathCoords = polygon.points;\n    const path = [];\n    // Reset indexes, so there are no gaps\n    pathCoords = pathCoords.slice();\n    for (let i = 0; i < pathCoords.length; i++) {\n        // 1. Get current coord and the next two (startpoint, cornerpoint, endpoint) to calculate rounded curve\n        const c2Index = i + 1 > pathCoords.length - 1 ? (i + 1) % pathCoords.length : i + 1;\n        const c3Index = i + 2 > pathCoords.length - 1 ? (i + 2) % pathCoords.length : i + 2;\n        const c1 = pathCoords[i];\n        const c2 = pathCoords[c2Index];\n        const c3 = pathCoords[c3Index];\n        let thisRadius = radius;\n        // 2. For each 3 coords, enter two new path commands: Line to start of curve, bezier curve around corner.\n        // Calculate curvePoint c1 -> c2\n        const c1c2Distance = Math.sqrt(Math.pow(c1.x - c2.x, 2) + Math.pow(c1.y - c2.y, 2));\n        const c2c3Distance = Math.sqrt(Math.pow(c2.x - c3.x, 2) + Math.pow(c2.y - c3.y, 2));\n        const minDistance = Math.min(c1c2Distance, c2c3Distance);\n        const threshold = 30;\n        if (minDistance < threshold) {\n            thisRadius = util_1.NumberUtil.numberWithRangeMap(minDistance, 0, threshold, 0, radius);\n        }\n        const c1c2DistanceRatio = (c1c2Distance - thisRadius) / c1c2Distance;\n        const c1c2CurvePoint = [\n            ((1 - c1c2DistanceRatio) * c1.x + c1c2DistanceRatio * c2.x).toFixed(1),\n            ((1 - c1c2DistanceRatio) * c1.y + c1c2DistanceRatio * c2.y).toFixed(1),\n        ];\n        // Calculate curvePoint c2 -> c3\n        const c2c3DistanceRatio = thisRadius / c2c3Distance;\n        const c2c3CurvePoint = [\n            ((1 - c2c3DistanceRatio) * c2.x + c2c3DistanceRatio * c3.x).toFixed(1),\n            ((1 - c2c3DistanceRatio) * c2.y + c2c3DistanceRatio * c3.y).toFixed(1),\n        ];\n        // If at last coord of polygon, also save that as starting point\n        if (i === pathCoords.length - 1) {\n            path.unshift(\"M\" + c2c3CurvePoint.join(\",\"));\n        }\n        // Line to start of curve (L endcoord)\n        path.push(\"L\" + c1c2CurvePoint.join(\",\"));\n        // Bezier line around curve (Q controlcoord endcoord)\n        path.push(\"Q\" + c2.x + \",\" + c2.y + \",\" + c2c3CurvePoint.join(\",\"));\n    }\n    path.push(\"Z\");\n    return path.join(\" \");\n}\nexports.svgPathStringGivenPolygon = svgPathStringGivenPolygon;\n//# sourceMappingURL=svgPathStringGivenPolygon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.segmentWithClippingBox = void 0;\nconst __1 = require(\"..\");\nconst Point2_1 = require(\"../../Point2\");\nconst mask = [0, 1, 2, 2, 4, 0, 4, 4, 8, 1, 0, 2, 8, 1, 8, 0];\nconst tab1 = [4, 3, 0, 3, 1, 4, 0, 3, 2, 2, 4, 2, 1, 1, 0, 4];\nconst tab2 = [4, 0, 1, 1, 2, 4, 2, 2, 3, 0, 4, 1, 3, 0, 3, 4];\nfunction pointCross(a, b) {\n    return new Vector(a.y - b.y, b.x - a.x, a.x * b.y - a.y * b.x);\n}\nfunction cross(u, v) {\n    const z = u.x * v.y - u.y * v.x;\n    return Point2_1.Point2.givenXY((u.y * v.z - u.z * v.y) / z, (u.z * v.x - u.x * v.z) / z);\n}\nfunction dot(u, v) {\n    return u.x * v.x + u.y * v.y + u.z * v.z;\n}\nclass Vector {\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n}\nclass Clip {\n    constructor(a, b) {\n        if (a.x < b.x) {\n            this.x_min = a.x;\n            this.x_max = b.x;\n        }\n        else {\n            this.x_min = b.x;\n            this.x_max = a.x;\n        }\n        if (a.y < b.y) {\n            this.y_min = a.y;\n            this.y_max = b.y;\n        }\n        else {\n            this.y_min = b.y;\n            this.y_max = a.y;\n        }\n        this.x = [\n            new Vector(this.x_min, this.y_min, 1),\n            new Vector(this.x_max, this.y_min, 1),\n            new Vector(this.x_max, this.y_max, 1),\n            new Vector(this.x_min, this.y_max, 1),\n        ];\n        this.e = [\n            new Vector(0, 1, -this.y_min),\n            new Vector(1, 0, -this.x_max),\n            new Vector(0, 1, -this.y_max),\n            new Vector(1, 0, -this.x_min),\n        ];\n    }\n    code(pt) {\n        let c = 0;\n        if (pt.x < this.x_min) {\n            c = 8;\n        }\n        else if (pt.x > this.x_max) {\n            c = 2;\n        }\n        if (pt.y < this.y_min) {\n            c |= 1;\n        }\n        else if (pt.y > this.y_max) {\n            c |= 4;\n        }\n        return c;\n    }\n    clipLine(input) {\n        const xA = input.startPoint;\n        const xB = input.endPoint;\n        const codeA = this.code(xA);\n        const codeB = this.code(xB);\n        if ((codeA | codeB) === 0) {\n            return input; // both points inside\n        }\n        if ((codeA & codeB) !== 0) {\n            return undefined; // both points outside\n        }\n        const p = pointCross(xA, xB);\n        let c = 0;\n        for (let k = 0; k < 4; k += 1) {\n            if (dot(p, this.x[k]) <= 0) {\n                c |= 1 << k;\n            }\n        }\n        if (c === 0 || c === 15) {\n            return undefined;\n        }\n        const i = tab1[c];\n        const j = tab2[c];\n        if (codeA !== 0 && codeB !== 0) {\n            const newXA = cross(p, this.e[i]);\n            const newXB = cross(p, this.e[j]);\n            return __1.Segment2.givenPoints(newXA, newXB);\n        }\n        if (codeA === 0) {\n            let newXB = null;\n            if ((codeB & mask[c]) === 0) {\n                newXB = cross(p, this.e[i]);\n            }\n            else {\n                newXB = cross(p, this.e[j]);\n            }\n            return __1.Segment2.givenPoints(xA, newXB);\n        }\n        if (codeB === 0) {\n            let newXA = null;\n            if ((codeA & mask[c]) === 0) {\n                newXA = cross(p, this.e[i]);\n            }\n            else {\n                newXA = cross(p, this.e[j]);\n            }\n            return __1.Segment2.givenPoints(newXA, xB);\n        }\n    }\n}\nfunction segmentWithClippingBox(segment, clipRegion) {\n    const clipLeftTop = clipRegion.toLeftTop();\n    const clipRightBottom = clipRegion.toRightBottom();\n    const clip = new Clip(clipLeftTop, clipRightBottom);\n    return clip.clipLine(segment);\n}\nexports.segmentWithClippingBox = segmentWithClippingBox;\n//# sourceMappingURL=segmentWithClippingBox.js.map","import { Corners } from \"..\";\nimport { GrahamScan } from \"./GrahamScan\";\nimport { ArrayUtil } from \"@anderjason/util\";\nimport { Point2, Rotation } from \"@anderjason/geometry\";\n\ntype CornerName = \"leftTop\" | \"rightTop\" | \"rightBottom\" | \"leftBottom\";\ntype Rectangle = [Point2, Point2, Point2, Point2];\n\ninterface RectangleWithArea {\n  rectangle: Rectangle;\n  area: number;\n}\n\nexport function cornersGivenContainedPoints(points: Point2[]): Corners {\n  const rectangles: Rectangle[] = getAllBoundingRectangles(points);\n\n  let rectanglesWithArea: RectangleWithArea[] = rectangles.map((rectangle) => {\n    return {\n      rectangle,\n      area: getArea(rectangle),\n    };\n  });\n\n  rectanglesWithArea = ArrayUtil.arrayWithOrderFromValue(\n    rectanglesWithArea,\n    (rwa) => {\n      return rwa.area;\n    },\n    \"ascending\"\n  );\n\n  let lastArea = 0;\n  rectanglesWithArea = rectanglesWithArea.filter((rwa) => {\n    // TODO I'm trying here to avoid the bounding box flickering between\n    // different rectangle alternatives when dragging regions around.\n\n    // This generally works, but still misses some cases. Increasing the threshold\n    // number below might work, but there's probably a better way to handle this\n    const isSignificantlyDifferent = rwa.area - lastArea > 2000;\n    lastArea = rwa.area;\n\n    return isSignificantlyDifferent;\n  });\n\n  const minimum = rectanglesWithArea[0].rectangle;\n\n  return Corners.givenPoints([\n    minimum[0], // left top\n    minimum[3], // right top\n    minimum[2], // right bottom\n    minimum[1], // left bottom\n  ]);\n}\n\nfunction getAllBoundingRectangles(points: Point2[]): Rectangle[] {\n  const rectangles: Rectangle[] = [];\n\n  const gs = new GrahamScan();\n  const convexHull: Point2[] = gs.getConvexHull(points);\n\n  const I = new Caliper(convexHull, getIndex(convexHull, \"rightTop\"), 90);\n  const J = new Caliper(convexHull, getIndex(convexHull, \"leftTop\"), 180);\n  const K = new Caliper(convexHull, getIndex(convexHull, \"leftBottom\"), 270);\n  const L = new Caliper(convexHull, getIndex(convexHull, \"rightBottom\"), 0);\n\n  while (L.currentAngle < 90.0) {\n    const rect: Rectangle = [\n      L.getIntersection(I),\n      I.getIntersection(J),\n      J.getIntersection(K),\n      K.getIntersection(L),\n    ];\n    rectangles.push(rect);\n\n    const smallestTheta: number = getSmallestTheta(I, J, K, L);\n\n    I.rotateBy(smallestTheta);\n    J.rotateBy(smallestTheta);\n    K.rotateBy(smallestTheta);\n    L.rotateBy(smallestTheta);\n  }\n\n  return rectangles;\n}\n\nfunction getArea(rectangle: Rectangle): number {\n  const deltaXAB = rectangle[0].x - rectangle[1].x;\n  const deltaYAB = rectangle[0].y - rectangle[1].y;\n\n  const deltaXBC = rectangle[1].x - rectangle[2].x;\n  const deltaYBC = rectangle[1].y - rectangle[2].y;\n\n  const lengthAB = Math.sqrt(deltaXAB * deltaXAB + deltaYAB * deltaYAB);\n  const lengthBC = Math.sqrt(deltaXBC * deltaXBC + deltaYBC * deltaYBC);\n\n  return lengthAB * lengthBC;\n}\n\nfunction getIndex(convexHull: Point2[], corner: CornerName): number {\n  let index: number = 0;\n  let point: Point2 = convexHull[index];\n\n  for (let i = 1; i < convexHull.length - 1; i++) {\n    let temp: Point2 = convexHull[i];\n    let change: boolean = false;\n\n    switch (corner) {\n      case \"rightTop\":\n        change = temp.x > point.x || (temp.x == point.x && temp.y > point.y);\n        break;\n      case \"leftTop\":\n        change = temp.y > point.y || (temp.y == point.y && temp.x < point.x);\n        break;\n      case \"leftBottom\":\n        change = temp.x < point.x || (temp.x == point.x && temp.y < point.y);\n        break;\n      case \"rightBottom\":\n        change = temp.y < point.y || (temp.y == point.y && temp.x > point.x);\n        break;\n      default:\n        break;\n    }\n\n    if (change) {\n      index = i;\n      point = temp;\n    }\n  }\n\n  return index;\n}\n\nfunction getSmallestTheta(\n  I: Caliper,\n  J: Caliper,\n  K: Caliper,\n  L: Caliper\n): number {\n  const thetaI: number = I.getDeltaAngleNextPoint();\n  const thetaJ: number = J.getDeltaAngleNextPoint();\n  const thetaK: number = K.getDeltaAngleNextPoint();\n  const thetaL: number = L.getDeltaAngleNextPoint();\n\n  if (thetaI <= thetaJ && thetaI <= thetaK && thetaI <= thetaL) {\n    return thetaI;\n  } else if (thetaJ <= thetaK && thetaJ <= thetaL) {\n    return thetaJ;\n  } else if (thetaK <= thetaL) {\n    return thetaK;\n  } else {\n    return thetaL;\n  }\n}\n\nclass Caliper {\n  static SIGMA = 0.00000000001;\n\n  readonly convexHull: Point2[];\n  pointIndex: number;\n  currentAngle: number;\n\n  constructor(convexHull: Point2[], pointIndex: number, currentAngle: number) {\n    this.convexHull = convexHull;\n    this.pointIndex = pointIndex;\n    this.currentAngle = currentAngle;\n  }\n\n  getAngleNextPoint(): number {\n    const p1: Point2 = this.convexHull[this.pointIndex];\n    const p2: Point2 = this.convexHull[\n      (this.pointIndex + 1) % this.convexHull.length\n    ];\n\n    const deltaX: number = p2.x - p1.x;\n    const deltaY: number = p2.y - p1.y;\n\n    const angle: number = (Math.atan2(deltaY, deltaX) * 180) / Math.PI;\n\n    return angle < 0 ? 360 + angle : angle;\n  }\n\n  getConstant(): number {\n    const p: Point2 = this.convexHull[this.pointIndex];\n\n    return p.y - this.getSlope() * p.x;\n  }\n\n  getDeltaAngleNextPoint(): number {\n    let angle: number = this.getAngleNextPoint();\n    if (angle === this.currentAngle) {\n      return 90; // ?\n    }\n\n    if (angle < 0) {\n      angle = 360 + angle - this.currentAngle;\n    } else {\n      angle -= this.currentAngle;\n    }\n\n    return angle < 0 ? 360 : angle;\n  }\n\n  getIntersection(that: Caliper): Point2 {\n    // the x-intercept of 'this' and 'that': x = ((c2 - c1) / (m1 - m2))\n    let x: number;\n    // the y-intercept of 'this' and 'that', given 'x': (m*x) + c\n    let y: number;\n\n    if (this.isVertical()) {\n      x = this.convexHull[this.pointIndex].x;\n    } else if (this.isHorizontal()) {\n      x = that.convexHull[that.pointIndex].x;\n    } else {\n      x =\n        (that.getConstant() - this.getConstant()) /\n        (this.getSlope() - that.getSlope());\n    }\n\n    if (this.isVertical()) {\n      y = that.getConstant();\n    } else if (this.isHorizontal()) {\n      y = this.getConstant();\n    } else {\n      y = this.getSlope() * x + this.getConstant();\n    }\n\n    return Point2.givenXY(Math.round(x), Math.round(y));\n  }\n\n  getSlope(): number {\n    return Math.tan(Rotation.givenDegrees(this.currentAngle).radians);\n  }\n\n  isHorizontal(): boolean {\n    return (\n      Math.abs(this.currentAngle) < Caliper.SIGMA ||\n      Math.abs(this.currentAngle - 180.0) < Caliper.SIGMA\n    );\n  }\n\n  isVertical(): boolean {\n    return (\n      Math.abs(this.currentAngle - 90.0) < Caliper.SIGMA ||\n      Math.abs(this.currentAngle - 270.0) < Caliper.SIGMA\n    );\n  }\n\n  rotateBy(angle: number): void {\n    if (this.getDeltaAngleNextPoint() == angle) {\n      this.pointIndex++;\n    }\n\n    this.currentAngle = (this.currentAngle + angle) % 360;\n  }\n}\n","import { ArrayUtil } from \"@anderjason/util\";\nimport { Point2 } from \"@anderjason/geometry\";\n\ntype Turn = \"clockwise\" | \"counterclockwise\" | \"collinear\";\n\n// Ported from https://github.com/bkiers/GrahamScan\n\nexport class GrahamScan {\n  /**\n   * Returns true iff all points in <code>points</code> are collinear.\n   *\n   * @param points the list of points.\n   * @return       true iff all points in <code>points</code> are collinear.\n   */\n  areAllCollinear(points: Point2[]): boolean {\n    if (points.length < 2) {\n      return true;\n    }\n\n    const a: Point2 = points[0];\n    const b: Point2 = points[1];\n\n    for (let i = 2; i < points.length; i++) {\n      const c: Point2 = points[i];\n\n      if (this.getTurn(a, b, c) !== \"collinear\") {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Returns the convex hull of the points created from the list\n   * <code>points</code>. Note that the first and last point in the\n   * returned <code>List&lt;java.awt.Point&gt;</code> are the same\n   * point.\n   *\n   * @param points the list of points.\n   * @return       the convex hull of the points created from the list\n   *               <code>points</code>.\n   * @throws IllegalArgumentException if all points are collinear or if there\n   *                                  are less than 3 unique points present.\n   */\n  getConvexHull(points: Point2[]): Point2[] {\n    const sorted: Point2[] = this.getSortedPointSet(points);\n\n    if (sorted.length < 3) {\n      throw new Error(\n        \"can only create a convex hull of 3 or more unique points\"\n      );\n    }\n\n    if (this.areAllCollinear(sorted)) {\n      throw new Error(\"cannot create a convex hull from collinear points\");\n    }\n\n    const stack: Point2[] = [];\n    stack.push(sorted[0]);\n    stack.push(sorted[1]);\n\n    for (let i = 2; i < sorted.length; i++) {\n      const head: Point2 = sorted[i];\n      const middle: Point2 = stack.pop();\n      const tail: Point2 = ArrayUtil.optionalLastValueGivenArray(stack);\n\n      const turn: Turn = this.getTurn(tail, middle, head);\n\n      switch (turn) {\n        case \"counterclockwise\":\n          stack.push(middle);\n          stack.push(head);\n          break;\n        case \"clockwise\":\n          i--;\n          break;\n        case \"collinear\":\n          stack.push(head);\n          break;\n      }\n    }\n\n    // close the hull\n    stack.push(sorted[0]);\n\n    return stack;\n  }\n\n  /**\n   * Returns the points with the lowest y coordinate. In case more than 1 such\n   * point exists, the one with the lowest x coordinate is returned.\n   *\n   * @param points the list of points to return the lowest point from.\n   * @return       the points with the lowest y coordinate. In case more than\n   *               1 such point exists, the one with the lowest x coordinate\n   *               is returned.\n   */\n  getLowestPoint(points: Point2[]): Point2 {\n    let lowest: Point2 = points[0];\n\n    for (let i = 1; i < points.length; i++) {\n      let temp: Point2 = points[i];\n\n      if (temp.y < lowest.y || (temp.y == lowest.y && temp.x < lowest.x)) {\n        lowest = temp;\n      }\n    }\n\n    return lowest;\n  }\n\n  /**\n   * Returns a sorted set of points from the list <code>points</code>. The\n   * set of points are sorted in increasing order of the angle they and the\n   * lowest point <tt>P</tt> make with the x-axis. If tow (or more) points\n   * form the same angle towards <tt>P</tt>, the one closest to <tt>P</tt>\n   * comes first.\n   *\n   * @param points the list of points to sort.\n   * @return       a sorted set of points from the list <code>points</code>.\n   * @see GrahamScan#getLowestPoint(java.util.List)\n   */\n  getSortedPointSet(points: Point2[]): Point2[] {\n    let lowest: Point2 = this.getLowestPoint(points);\n\n    const result: Point2[] = [...points];\n    result.sort((a, b) => {\n      if (a.isEqual(b)) {\n        return 0;\n      }\n\n      // use longs to guard against int-underflow\n      let thetaA: number = Math.atan2(a.y - lowest.y, a.x - lowest.x);\n      let thetaB: number = Math.atan2(b.y - lowest.y, b.x - lowest.x);\n\n      if (thetaA < thetaB) {\n        return -1;\n      } else if (thetaA > thetaB) {\n        return 1;\n      } else {\n        // collinear with the 'lowest' point, let the point closest to it come first\n\n        // use longs to guard against int-over/underflow\n        let distanceA: number = Math.sqrt(\n          (lowest.x - a.x) * (lowest.x - a.x) +\n            (lowest.y - a.y) * (lowest.y - a.y)\n        );\n        let distanceB: number = Math.sqrt(\n          (lowest.x - b.x) * (lowest.x - b.x) +\n            (lowest.y - b.y) * (lowest.y - b.y)\n        );\n\n        if (distanceA < distanceB) {\n          return -1;\n        } else {\n          return 1;\n        }\n      }\n    });\n\n    return result;\n  }\n\n  /**\n   * Returns the GrahamScan#Turn formed by traversing through the\n   * ordered points <code>a</code>, <code>b</code> and <code>c</code>.\n   * More specifically, the cross product <tt>C</tt> between the\n   * 3 points (vectors) is calculated:\n   *\n   * <tt>(b.x-a.x * c.y-a.y) - (b.y-a.y * c.x-a.x)</tt>\n   *\n   * and if <tt>C</tt> is less than 0, the turn is CLOCKWISE, if\n   * <tt>C</tt> is more than 0, the turn is COUNTER_CLOCKWISE, else\n   * the three points are COLLINEAR.\n   *\n   * @param a the starting point.\n   * @param b the second point.\n   * @param c the end point.\n   * @return the GrahamScan#Turn formed by traversing through the\n   *         ordered points <code>a</code>, <code>b</code> and\n   *         <code>c</code>.\n   */\n  getTurn(a: Point2, b: Point2, c: Point2): Turn {\n    // use longs to guard against int-over/underflow\n    let crossProduct: number =\n      (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x);\n\n    if (crossProduct > 0) {\n      return \"counterclockwise\";\n    } else if (crossProduct < 0) {\n      return \"clockwise\";\n    } else {\n      return \"collinear\";\n    }\n  }\n}\n","import { Point2 } from \"@anderjason/geometry\";\nimport { ArrayUtil } from \"@anderjason/util\";\nimport { Corners } from \"..\";\nimport { totalDistanceGivenPointArrays } from \"./totalDistanceGivenPointArrays\";\n\nexport function cornersWithAlignment(\n  input: Corners,\n  alignment: Corners\n): Corners {\n  const candidateArrayA = input.toPoints();\n  const candidateArrayB = ArrayUtil.arrayWithLeftShift(candidateArrayA);\n  const candidateArrayC = ArrayUtil.arrayWithLeftShift(candidateArrayB);\n  const candidateArrayD = ArrayUtil.arrayWithLeftShift(candidateArrayC);\n  const candidateArrayE = ArrayUtil.arrayWithReversedOrder(candidateArrayA);\n  const candidateArrayF = ArrayUtil.arrayWithLeftShift(candidateArrayE);\n  const candidateArrayG = ArrayUtil.arrayWithLeftShift(candidateArrayF);\n  const candidateArrayH = ArrayUtil.arrayWithLeftShift(candidateArrayG);\n\n  const targetArray = alignment.toPoints();\n\n  const candidateArrays: Point2[][] = [\n    candidateArrayA,\n    candidateArrayB,\n    candidateArrayC,\n    candidateArrayD,\n    candidateArrayE,\n    candidateArrayF,\n    candidateArrayG,\n    candidateArrayH,\n  ];\n\n  const arraysWithDistance = candidateArrays.map((candidateArray) => {\n    return {\n      candidateArray,\n      totalDistance: totalDistanceGivenPointArrays(candidateArray, targetArray),\n    };\n  });\n\n  const sorted = ArrayUtil.arrayWithOrderFromValue(\n    arraysWithDistance,\n    (arrayWithDistance) => {\n      return arrayWithDistance.totalDistance;\n    },\n    \"ascending\"\n  );\n\n  const bestCandidateArray: Point2[] = sorted[0].candidateArray;\n  return Corners.givenPoints(bestCandidateArray);\n}\n","import { Point2 } from \"@anderjason/geometry\";\n\nexport function totalDistanceGivenPointArrays(\n  a: Point2[],\n  b: Point2[]\n): number {\n  if (a == null || b == null) {\n    throw new Error(\"Two arrays are required\");\n  }\n\n  if (a.length !== b.length) {\n    throw new Error(\"Both arrays must be the same length\");\n  }\n\n  let difference = 0;\n\n  a.forEach((point, idx) => {\n    difference += point.toDistance(b[idx]);\n  });\n\n  return difference;\n}\n","import { Actor } from \"skytree\";\nimport {\n  Observable,\n  ReadOnlyObservable,\n  Receipt,\n} from \"@anderjason/observable\";\nimport { Size2 } from \"@anderjason/geometry\";\nimport ResizeObserverPolyfill from \"resize-observer-polyfill\";\n\nlet LocalResizeObserver: typeof ResizeObserverPolyfill;\n\nif (\"ResizeObserver\" in window) {\n  LocalResizeObserver = (window as any).ResizeObserver;\n} else {\n  LocalResizeObserver = ResizeObserverPolyfill;\n}\n\nexport interface InternalElementSizeWatcherProps {\n  element: HTMLElement;\n  output: Observable<Size2>;\n}\n\nclass InternalElementSizeWatcher extends Actor<\n  InternalElementSizeWatcherProps\n> {\n  onActivate() {\n    const observer = new LocalResizeObserver((elements) => {\n      const element = elements[0];\n      if (element == null) {\n        return;\n      }\n\n      const bounds = element.contentRect;\n      this.props.output.setValue(\n        Size2.givenWidthHeight(bounds.width, bounds.height)\n      );\n    });\n\n    // start observing\n    observer.observe(this.props.element);\n\n    // set initial value\n\n    const initialBounds = this.props.element.getBoundingClientRect();\n    this.props.output.setValue(\n      Size2.givenWidthHeight(initialBounds.width, initialBounds.height)\n    );\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        observer.disconnect();\n        this.props.output.setValue(undefined);\n      })\n    );\n  }\n}\n\nexport interface ElementSizeWatcherProps {\n  element: HTMLElement | Observable<HTMLElement>;\n\n  output?: Observable<Size2>;\n}\n\nexport class ElementSizeWatcher extends Actor<ElementSizeWatcherProps> {\n  private _output: Observable<Size2>;\n  readonly output: ReadOnlyObservable<Size2>;\n\n  private _element: Observable<HTMLElement>;\n  private _activeWatcher: InternalElementSizeWatcher | undefined;\n\n  constructor(props: ElementSizeWatcherProps) {\n    super(props);\n\n    if (Observable.isObservable(props.element)) {\n      this._element = props.element;\n    } else {\n      this._element = Observable.givenValue(props.element);\n    }\n\n    this._output = props.output || Observable.ofEmpty<Size2>(Size2.isEqual);\n    this.output = ReadOnlyObservable.givenObservable(this._output);\n  }\n\n  onActivate() {\n    this.cancelOnDeactivate(\n      this._element.didChange.subscribe((element) => {\n        if (this._activeWatcher != null) {\n          this.removeActor(this._activeWatcher);\n          this._activeWatcher = undefined;\n        }\n\n        if (element != null) {\n          this._activeWatcher = this.addActor(\n            new InternalElementSizeWatcher({\n              element,\n              output: this._output,\n            })\n          );\n        }\n      }, true)\n    );\n  }\n}\n","/**\r\n * A collection of shims that provide minimal functionality of the ES6 collections.\r\n *\r\n * These implementations are not meant to be used outside of the ResizeObserver\r\n * modules as they cover only a limited range of use cases.\r\n */\r\n/* eslint-disable require-jsdoc, valid-jsdoc */\r\nvar MapShim = (function () {\r\n    if (typeof Map !== 'undefined') {\r\n        return Map;\r\n    }\r\n    /**\r\n     * Returns index in provided array that matches the specified key.\r\n     *\r\n     * @param {Array<Array>} arr\r\n     * @param {*} key\r\n     * @returns {number}\r\n     */\r\n    function getIndex(arr, key) {\r\n        var result = -1;\r\n        arr.some(function (entry, index) {\r\n            if (entry[0] === key) {\r\n                result = index;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return result;\r\n    }\r\n    return /** @class */ (function () {\r\n        function class_1() {\r\n            this.__entries__ = [];\r\n        }\r\n        Object.defineProperty(class_1.prototype, \"size\", {\r\n            /**\r\n             * @returns {boolean}\r\n             */\r\n            get: function () {\r\n                return this.__entries__.length;\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n        /**\r\n         * @param {*} key\r\n         * @returns {*}\r\n         */\r\n        class_1.prototype.get = function (key) {\r\n            var index = getIndex(this.__entries__, key);\r\n            var entry = this.__entries__[index];\r\n            return entry && entry[1];\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @param {*} value\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.set = function (key, value) {\r\n            var index = getIndex(this.__entries__, key);\r\n            if (~index) {\r\n                this.__entries__[index][1] = value;\r\n            }\r\n            else {\r\n                this.__entries__.push([key, value]);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.delete = function (key) {\r\n            var entries = this.__entries__;\r\n            var index = getIndex(entries, key);\r\n            if (~index) {\r\n                entries.splice(index, 1);\r\n            }\r\n        };\r\n        /**\r\n         * @param {*} key\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.has = function (key) {\r\n            return !!~getIndex(this.__entries__, key);\r\n        };\r\n        /**\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.clear = function () {\r\n            this.__entries__.splice(0);\r\n        };\r\n        /**\r\n         * @param {Function} callback\r\n         * @param {*} [ctx=null]\r\n         * @returns {void}\r\n         */\r\n        class_1.prototype.forEach = function (callback, ctx) {\r\n            if (ctx === void 0) { ctx = null; }\r\n            for (var _i = 0, _a = this.__entries__; _i < _a.length; _i++) {\r\n                var entry = _a[_i];\r\n                callback.call(ctx, entry[1], entry[0]);\r\n            }\r\n        };\r\n        return class_1;\r\n    }());\r\n})();\n\n/**\r\n * Detects whether window and document objects are available in current environment.\r\n */\r\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined' && window.document === document;\n\n// Returns global object of a current environment.\r\nvar global$1 = (function () {\r\n    if (typeof global !== 'undefined' && global.Math === Math) {\r\n        return global;\r\n    }\r\n    if (typeof self !== 'undefined' && self.Math === Math) {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined' && window.Math === Math) {\r\n        return window;\r\n    }\r\n    // eslint-disable-next-line no-new-func\r\n    return Function('return this')();\r\n})();\n\n/**\r\n * A shim for the requestAnimationFrame which falls back to the setTimeout if\r\n * first one is not supported.\r\n *\r\n * @returns {number} Requests' identifier.\r\n */\r\nvar requestAnimationFrame$1 = (function () {\r\n    if (typeof requestAnimationFrame === 'function') {\r\n        // It's required to use a bounded function because IE sometimes throws\r\n        // an \"Invalid calling object\" error if rAF is invoked without the global\r\n        // object on the left hand side.\r\n        return requestAnimationFrame.bind(global$1);\r\n    }\r\n    return function (callback) { return setTimeout(function () { return callback(Date.now()); }, 1000 / 60); };\r\n})();\n\n// Defines minimum timeout before adding a trailing call.\r\nvar trailingTimeout = 2;\r\n/**\r\n * Creates a wrapper function which ensures that provided callback will be\r\n * invoked only once during the specified delay period.\r\n *\r\n * @param {Function} callback - Function to be invoked after the delay period.\r\n * @param {number} delay - Delay after which to invoke callback.\r\n * @returns {Function}\r\n */\r\nfunction throttle (callback, delay) {\r\n    var leadingCall = false, trailingCall = false, lastCallTime = 0;\r\n    /**\r\n     * Invokes the original callback function and schedules new invocation if\r\n     * the \"proxy\" was called during current request.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function resolvePending() {\r\n        if (leadingCall) {\r\n            leadingCall = false;\r\n            callback();\r\n        }\r\n        if (trailingCall) {\r\n            proxy();\r\n        }\r\n    }\r\n    /**\r\n     * Callback invoked after the specified delay. It will further postpone\r\n     * invocation of the original function delegating it to the\r\n     * requestAnimationFrame.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function timeoutCallback() {\r\n        requestAnimationFrame$1(resolvePending);\r\n    }\r\n    /**\r\n     * Schedules invocation of the original function.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    function proxy() {\r\n        var timeStamp = Date.now();\r\n        if (leadingCall) {\r\n            // Reject immediately following calls.\r\n            if (timeStamp - lastCallTime < trailingTimeout) {\r\n                return;\r\n            }\r\n            // Schedule new call to be in invoked when the pending one is resolved.\r\n            // This is important for \"transitions\" which never actually start\r\n            // immediately so there is a chance that we might miss one if change\r\n            // happens amids the pending invocation.\r\n            trailingCall = true;\r\n        }\r\n        else {\r\n            leadingCall = true;\r\n            trailingCall = false;\r\n            setTimeout(timeoutCallback, delay);\r\n        }\r\n        lastCallTime = timeStamp;\r\n    }\r\n    return proxy;\r\n}\n\n// Minimum delay before invoking the update of observers.\r\nvar REFRESH_DELAY = 20;\r\n// A list of substrings of CSS properties used to find transition events that\r\n// might affect dimensions of observed elements.\r\nvar transitionKeys = ['top', 'right', 'bottom', 'left', 'width', 'height', 'size', 'weight'];\r\n// Check if MutationObserver is available.\r\nvar mutationObserverSupported = typeof MutationObserver !== 'undefined';\r\n/**\r\n * Singleton controller class which handles updates of ResizeObserver instances.\r\n */\r\nvar ResizeObserverController = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserverController.\r\n     *\r\n     * @private\r\n     */\r\n    function ResizeObserverController() {\r\n        /**\r\n         * Indicates whether DOM listeners have been added.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.connected_ = false;\r\n        /**\r\n         * Tells that controller has subscribed for Mutation Events.\r\n         *\r\n         * @private {boolean}\r\n         */\r\n        this.mutationEventsAdded_ = false;\r\n        /**\r\n         * Keeps reference to the instance of MutationObserver.\r\n         *\r\n         * @private {MutationObserver}\r\n         */\r\n        this.mutationsObserver_ = null;\r\n        /**\r\n         * A list of connected observers.\r\n         *\r\n         * @private {Array<ResizeObserverSPI>}\r\n         */\r\n        this.observers_ = [];\r\n        this.onTransitionEnd_ = this.onTransitionEnd_.bind(this);\r\n        this.refresh = throttle(this.refresh.bind(this), REFRESH_DELAY);\r\n    }\r\n    /**\r\n     * Adds observer to observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be added.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.addObserver = function (observer) {\r\n        if (!~this.observers_.indexOf(observer)) {\r\n            this.observers_.push(observer);\r\n        }\r\n        // Add listeners if they haven't been added yet.\r\n        if (!this.connected_) {\r\n            this.connect_();\r\n        }\r\n    };\r\n    /**\r\n     * Removes observer from observers list.\r\n     *\r\n     * @param {ResizeObserverSPI} observer - Observer to be removed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.removeObserver = function (observer) {\r\n        var observers = this.observers_;\r\n        var index = observers.indexOf(observer);\r\n        // Remove observer if it's present in registry.\r\n        if (~index) {\r\n            observers.splice(index, 1);\r\n        }\r\n        // Remove listeners if controller has no connected observers.\r\n        if (!observers.length && this.connected_) {\r\n            this.disconnect_();\r\n        }\r\n    };\r\n    /**\r\n     * Invokes the update of observers. It will continue running updates insofar\r\n     * it detects changes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.refresh = function () {\r\n        var changesDetected = this.updateObservers_();\r\n        // Continue running updates if changes have been detected as there might\r\n        // be future ones caused by CSS transitions.\r\n        if (changesDetected) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Updates every observer from observers list and notifies them of queued\r\n     * entries.\r\n     *\r\n     * @private\r\n     * @returns {boolean} Returns \"true\" if any observer has detected changes in\r\n     *      dimensions of it's elements.\r\n     */\r\n    ResizeObserverController.prototype.updateObservers_ = function () {\r\n        // Collect observers that have active observations.\r\n        var activeObservers = this.observers_.filter(function (observer) {\r\n            return observer.gatherActive(), observer.hasActive();\r\n        });\r\n        // Deliver notifications in a separate cycle in order to avoid any\r\n        // collisions between observers, e.g. when multiple instances of\r\n        // ResizeObserver are tracking the same element and the callback of one\r\n        // of them changes content dimensions of the observed target. Sometimes\r\n        // this may result in notifications being blocked for the rest of observers.\r\n        activeObservers.forEach(function (observer) { return observer.broadcastActive(); });\r\n        return activeObservers.length > 0;\r\n    };\r\n    /**\r\n     * Initializes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.connect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already added.\r\n        if (!isBrowser || this.connected_) {\r\n            return;\r\n        }\r\n        // Subscription to the \"Transitionend\" event is used as a workaround for\r\n        // delayed transitions. This way it's possible to capture at least the\r\n        // final state of an element.\r\n        document.addEventListener('transitionend', this.onTransitionEnd_);\r\n        window.addEventListener('resize', this.refresh);\r\n        if (mutationObserverSupported) {\r\n            this.mutationsObserver_ = new MutationObserver(this.refresh);\r\n            this.mutationsObserver_.observe(document, {\r\n                attributes: true,\r\n                childList: true,\r\n                characterData: true,\r\n                subtree: true\r\n            });\r\n        }\r\n        else {\r\n            document.addEventListener('DOMSubtreeModified', this.refresh);\r\n            this.mutationEventsAdded_ = true;\r\n        }\r\n        this.connected_ = true;\r\n    };\r\n    /**\r\n     * Removes DOM listeners.\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.disconnect_ = function () {\r\n        // Do nothing if running in a non-browser environment or if listeners\r\n        // have been already removed.\r\n        if (!isBrowser || !this.connected_) {\r\n            return;\r\n        }\r\n        document.removeEventListener('transitionend', this.onTransitionEnd_);\r\n        window.removeEventListener('resize', this.refresh);\r\n        if (this.mutationsObserver_) {\r\n            this.mutationsObserver_.disconnect();\r\n        }\r\n        if (this.mutationEventsAdded_) {\r\n            document.removeEventListener('DOMSubtreeModified', this.refresh);\r\n        }\r\n        this.mutationsObserver_ = null;\r\n        this.mutationEventsAdded_ = false;\r\n        this.connected_ = false;\r\n    };\r\n    /**\r\n     * \"Transitionend\" event handler.\r\n     *\r\n     * @private\r\n     * @param {TransitionEvent} event\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverController.prototype.onTransitionEnd_ = function (_a) {\r\n        var _b = _a.propertyName, propertyName = _b === void 0 ? '' : _b;\r\n        // Detect whether transition may affect dimensions of an element.\r\n        var isReflowProperty = transitionKeys.some(function (key) {\r\n            return !!~propertyName.indexOf(key);\r\n        });\r\n        if (isReflowProperty) {\r\n            this.refresh();\r\n        }\r\n    };\r\n    /**\r\n     * Returns instance of the ResizeObserverController.\r\n     *\r\n     * @returns {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.getInstance = function () {\r\n        if (!this.instance_) {\r\n            this.instance_ = new ResizeObserverController();\r\n        }\r\n        return this.instance_;\r\n    };\r\n    /**\r\n     * Holds reference to the controller's instance.\r\n     *\r\n     * @private {ResizeObserverController}\r\n     */\r\n    ResizeObserverController.instance_ = null;\r\n    return ResizeObserverController;\r\n}());\n\n/**\r\n * Defines non-writable/enumerable properties of the provided target object.\r\n *\r\n * @param {Object} target - Object for which to define properties.\r\n * @param {Object} props - Properties to be defined.\r\n * @returns {Object} Target object.\r\n */\r\nvar defineConfigurable = (function (target, props) {\r\n    for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\r\n        var key = _a[_i];\r\n        Object.defineProperty(target, key, {\r\n            value: props[key],\r\n            enumerable: false,\r\n            writable: false,\r\n            configurable: true\r\n        });\r\n    }\r\n    return target;\r\n});\n\n/**\r\n * Returns the global object associated with provided element.\r\n *\r\n * @param {Object} target\r\n * @returns {Object}\r\n */\r\nvar getWindowOf = (function (target) {\r\n    // Assume that the element is an instance of Node, which means that it\r\n    // has the \"ownerDocument\" property from which we can retrieve a\r\n    // corresponding global object.\r\n    var ownerGlobal = target && target.ownerDocument && target.ownerDocument.defaultView;\r\n    // Return the local global object if it's not possible extract one from\r\n    // provided element.\r\n    return ownerGlobal || global$1;\r\n});\n\n// Placeholder of an empty content rectangle.\r\nvar emptyRect = createRectInit(0, 0, 0, 0);\r\n/**\r\n * Converts provided string to a number.\r\n *\r\n * @param {number|string} value\r\n * @returns {number}\r\n */\r\nfunction toFloat(value) {\r\n    return parseFloat(value) || 0;\r\n}\r\n/**\r\n * Extracts borders size from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @param {...string} positions - Borders positions (top, right, ...)\r\n * @returns {number}\r\n */\r\nfunction getBordersSize(styles) {\r\n    var positions = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        positions[_i - 1] = arguments[_i];\r\n    }\r\n    return positions.reduce(function (size, position) {\r\n        var value = styles['border-' + position + '-width'];\r\n        return size + toFloat(value);\r\n    }, 0);\r\n}\r\n/**\r\n * Extracts paddings sizes from provided styles.\r\n *\r\n * @param {CSSStyleDeclaration} styles\r\n * @returns {Object} Paddings box.\r\n */\r\nfunction getPaddings(styles) {\r\n    var positions = ['top', 'right', 'bottom', 'left'];\r\n    var paddings = {};\r\n    for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n        var position = positions_1[_i];\r\n        var value = styles['padding-' + position];\r\n        paddings[position] = toFloat(value);\r\n    }\r\n    return paddings;\r\n}\r\n/**\r\n * Calculates content rectangle of provided SVG element.\r\n *\r\n * @param {SVGGraphicsElement} target - Element content rectangle of which needs\r\n *      to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getSVGContentRect(target) {\r\n    var bbox = target.getBBox();\r\n    return createRectInit(0, 0, bbox.width, bbox.height);\r\n}\r\n/**\r\n * Calculates content rectangle of provided HTMLElement.\r\n *\r\n * @param {HTMLElement} target - Element for which to calculate the content rectangle.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getHTMLElementContentRect(target) {\r\n    // Client width & height properties can't be\r\n    // used exclusively as they provide rounded values.\r\n    var clientWidth = target.clientWidth, clientHeight = target.clientHeight;\r\n    // By this condition we can catch all non-replaced inline, hidden and\r\n    // detached elements. Though elements with width & height properties less\r\n    // than 0.5 will be discarded as well.\r\n    //\r\n    // Without it we would need to implement separate methods for each of\r\n    // those cases and it's not possible to perform a precise and performance\r\n    // effective test for hidden elements. E.g. even jQuery's ':visible' filter\r\n    // gives wrong results for elements with width & height less than 0.5.\r\n    if (!clientWidth && !clientHeight) {\r\n        return emptyRect;\r\n    }\r\n    var styles = getWindowOf(target).getComputedStyle(target);\r\n    var paddings = getPaddings(styles);\r\n    var horizPad = paddings.left + paddings.right;\r\n    var vertPad = paddings.top + paddings.bottom;\r\n    // Computed styles of width & height are being used because they are the\r\n    // only dimensions available to JS that contain non-rounded values. It could\r\n    // be possible to utilize the getBoundingClientRect if only it's data wasn't\r\n    // affected by CSS transformations let alone paddings, borders and scroll bars.\r\n    var width = toFloat(styles.width), height = toFloat(styles.height);\r\n    // Width & height include paddings and borders when the 'border-box' box\r\n    // model is applied (except for IE).\r\n    if (styles.boxSizing === 'border-box') {\r\n        // Following conditions are required to handle Internet Explorer which\r\n        // doesn't include paddings and borders to computed CSS dimensions.\r\n        //\r\n        // We can say that if CSS dimensions + paddings are equal to the \"client\"\r\n        // properties then it's either IE, and thus we don't need to subtract\r\n        // anything, or an element merely doesn't have paddings/borders styles.\r\n        if (Math.round(width + horizPad) !== clientWidth) {\r\n            width -= getBordersSize(styles, 'left', 'right') + horizPad;\r\n        }\r\n        if (Math.round(height + vertPad) !== clientHeight) {\r\n            height -= getBordersSize(styles, 'top', 'bottom') + vertPad;\r\n        }\r\n    }\r\n    // Following steps can't be applied to the document's root element as its\r\n    // client[Width/Height] properties represent viewport area of the window.\r\n    // Besides, it's as well not necessary as the <html> itself neither has\r\n    // rendered scroll bars nor it can be clipped.\r\n    if (!isDocumentElement(target)) {\r\n        // In some browsers (only in Firefox, actually) CSS width & height\r\n        // include scroll bars size which can be removed at this step as scroll\r\n        // bars are the only difference between rounded dimensions + paddings\r\n        // and \"client\" properties, though that is not always true in Chrome.\r\n        var vertScrollbar = Math.round(width + horizPad) - clientWidth;\r\n        var horizScrollbar = Math.round(height + vertPad) - clientHeight;\r\n        // Chrome has a rather weird rounding of \"client\" properties.\r\n        // E.g. for an element with content width of 314.2px it sometimes gives\r\n        // the client width of 315px and for the width of 314.7px it may give\r\n        // 314px. And it doesn't happen all the time. So just ignore this delta\r\n        // as a non-relevant.\r\n        if (Math.abs(vertScrollbar) !== 1) {\r\n            width -= vertScrollbar;\r\n        }\r\n        if (Math.abs(horizScrollbar) !== 1) {\r\n            height -= horizScrollbar;\r\n        }\r\n    }\r\n    return createRectInit(paddings.left, paddings.top, width, height);\r\n}\r\n/**\r\n * Checks whether provided element is an instance of the SVGGraphicsElement.\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nvar isSVGGraphicsElement = (function () {\r\n    // Some browsers, namely IE and Edge, don't have the SVGGraphicsElement\r\n    // interface.\r\n    if (typeof SVGGraphicsElement !== 'undefined') {\r\n        return function (target) { return target instanceof getWindowOf(target).SVGGraphicsElement; };\r\n    }\r\n    // If it's so, then check that element is at least an instance of the\r\n    // SVGElement and that it has the \"getBBox\" method.\r\n    // eslint-disable-next-line no-extra-parens\r\n    return function (target) { return (target instanceof getWindowOf(target).SVGElement &&\r\n        typeof target.getBBox === 'function'); };\r\n})();\r\n/**\r\n * Checks whether provided element is a document element (<html>).\r\n *\r\n * @param {Element} target - Element to be checked.\r\n * @returns {boolean}\r\n */\r\nfunction isDocumentElement(target) {\r\n    return target === getWindowOf(target).document.documentElement;\r\n}\r\n/**\r\n * Calculates an appropriate content rectangle for provided html or svg element.\r\n *\r\n * @param {Element} target - Element content rectangle of which needs to be calculated.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction getContentRect(target) {\r\n    if (!isBrowser) {\r\n        return emptyRect;\r\n    }\r\n    if (isSVGGraphicsElement(target)) {\r\n        return getSVGContentRect(target);\r\n    }\r\n    return getHTMLElementContentRect(target);\r\n}\r\n/**\r\n * Creates rectangle with an interface of the DOMRectReadOnly.\r\n * Spec: https://drafts.fxtf.org/geometry/#domrectreadonly\r\n *\r\n * @param {DOMRectInit} rectInit - Object with rectangle's x/y coordinates and dimensions.\r\n * @returns {DOMRectReadOnly}\r\n */\r\nfunction createReadOnlyRect(_a) {\r\n    var x = _a.x, y = _a.y, width = _a.width, height = _a.height;\r\n    // If DOMRectReadOnly is available use it as a prototype for the rectangle.\r\n    var Constr = typeof DOMRectReadOnly !== 'undefined' ? DOMRectReadOnly : Object;\r\n    var rect = Object.create(Constr.prototype);\r\n    // Rectangle's properties are not writable and non-enumerable.\r\n    defineConfigurable(rect, {\r\n        x: x, y: y, width: width, height: height,\r\n        top: y,\r\n        right: x + width,\r\n        bottom: height + y,\r\n        left: x\r\n    });\r\n    return rect;\r\n}\r\n/**\r\n * Creates DOMRectInit object based on the provided dimensions and the x/y coordinates.\r\n * Spec: https://drafts.fxtf.org/geometry/#dictdef-domrectinit\r\n *\r\n * @param {number} x - X coordinate.\r\n * @param {number} y - Y coordinate.\r\n * @param {number} width - Rectangle's width.\r\n * @param {number} height - Rectangle's height.\r\n * @returns {DOMRectInit}\r\n */\r\nfunction createRectInit(x, y, width, height) {\r\n    return { x: x, y: y, width: width, height: height };\r\n}\n\n/**\r\n * Class that is responsible for computations of the content rectangle of\r\n * provided DOM element and for keeping track of it's changes.\r\n */\r\nvar ResizeObservation = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObservation.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     */\r\n    function ResizeObservation(target) {\r\n        /**\r\n         * Broadcasted width of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastWidth = 0;\r\n        /**\r\n         * Broadcasted height of content rectangle.\r\n         *\r\n         * @type {number}\r\n         */\r\n        this.broadcastHeight = 0;\r\n        /**\r\n         * Reference to the last observed content rectangle.\r\n         *\r\n         * @private {DOMRectInit}\r\n         */\r\n        this.contentRect_ = createRectInit(0, 0, 0, 0);\r\n        this.target = target;\r\n    }\r\n    /**\r\n     * Updates content rectangle and tells whether it's width or height properties\r\n     * have changed since the last broadcast.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObservation.prototype.isActive = function () {\r\n        var rect = getContentRect(this.target);\r\n        this.contentRect_ = rect;\r\n        return (rect.width !== this.broadcastWidth ||\r\n            rect.height !== this.broadcastHeight);\r\n    };\r\n    /**\r\n     * Updates 'broadcastWidth' and 'broadcastHeight' properties with a data\r\n     * from the corresponding properties of the last observed content rectangle.\r\n     *\r\n     * @returns {DOMRectInit} Last observed content rectangle.\r\n     */\r\n    ResizeObservation.prototype.broadcastRect = function () {\r\n        var rect = this.contentRect_;\r\n        this.broadcastWidth = rect.width;\r\n        this.broadcastHeight = rect.height;\r\n        return rect;\r\n    };\r\n    return ResizeObservation;\r\n}());\n\nvar ResizeObserverEntry = /** @class */ (function () {\r\n    /**\r\n     * Creates an instance of ResizeObserverEntry.\r\n     *\r\n     * @param {Element} target - Element that is being observed.\r\n     * @param {DOMRectInit} rectInit - Data of the element's content rectangle.\r\n     */\r\n    function ResizeObserverEntry(target, rectInit) {\r\n        var contentRect = createReadOnlyRect(rectInit);\r\n        // According to the specification following properties are not writable\r\n        // and are also not enumerable in the native implementation.\r\n        //\r\n        // Property accessors are not being used as they'd require to define a\r\n        // private WeakMap storage which may cause memory leaks in browsers that\r\n        // don't support this type of collections.\r\n        defineConfigurable(this, { target: target, contentRect: contentRect });\r\n    }\r\n    return ResizeObserverEntry;\r\n}());\n\nvar ResizeObserverSPI = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback function that is invoked\r\n     *      when one of the observed elements changes it's content dimensions.\r\n     * @param {ResizeObserverController} controller - Controller instance which\r\n     *      is responsible for the updates of observer.\r\n     * @param {ResizeObserver} callbackCtx - Reference to the public\r\n     *      ResizeObserver instance which will be passed to callback function.\r\n     */\r\n    function ResizeObserverSPI(callback, controller, callbackCtx) {\r\n        /**\r\n         * Collection of resize observations that have detected changes in dimensions\r\n         * of elements.\r\n         *\r\n         * @private {Array<ResizeObservation>}\r\n         */\r\n        this.activeObservations_ = [];\r\n        /**\r\n         * Registry of the ResizeObservation instances.\r\n         *\r\n         * @private {Map<Element, ResizeObservation>}\r\n         */\r\n        this.observations_ = new MapShim();\r\n        if (typeof callback !== 'function') {\r\n            throw new TypeError('The callback provided as parameter 1 is not a function.');\r\n        }\r\n        this.callback_ = callback;\r\n        this.controller_ = controller;\r\n        this.callbackCtx_ = callbackCtx;\r\n    }\r\n    /**\r\n     * Starts observing provided element.\r\n     *\r\n     * @param {Element} target - Element to be observed.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.observe = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is already being observed.\r\n        if (observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.set(target, new ResizeObservation(target));\r\n        this.controller_.addObserver(this);\r\n        // Force the update of observations.\r\n        this.controller_.refresh();\r\n    };\r\n    /**\r\n     * Stops observing provided element.\r\n     *\r\n     * @param {Element} target - Element to stop observing.\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.unobserve = function (target) {\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        // Do nothing if current environment doesn't have the Element interface.\r\n        if (typeof Element === 'undefined' || !(Element instanceof Object)) {\r\n            return;\r\n        }\r\n        if (!(target instanceof getWindowOf(target).Element)) {\r\n            throw new TypeError('parameter 1 is not of type \"Element\".');\r\n        }\r\n        var observations = this.observations_;\r\n        // Do nothing if element is not being observed.\r\n        if (!observations.has(target)) {\r\n            return;\r\n        }\r\n        observations.delete(target);\r\n        if (!observations.size) {\r\n            this.controller_.removeObserver(this);\r\n        }\r\n    };\r\n    /**\r\n     * Stops observing all elements.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.disconnect = function () {\r\n        this.clearActive();\r\n        this.observations_.clear();\r\n        this.controller_.removeObserver(this);\r\n    };\r\n    /**\r\n     * Collects observation instances the associated element of which has changed\r\n     * it's content rectangle.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.gatherActive = function () {\r\n        var _this = this;\r\n        this.clearActive();\r\n        this.observations_.forEach(function (observation) {\r\n            if (observation.isActive()) {\r\n                _this.activeObservations_.push(observation);\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Invokes initial callback function with a list of ResizeObserverEntry\r\n     * instances collected from active resize observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.broadcastActive = function () {\r\n        // Do nothing if observer doesn't have active observations.\r\n        if (!this.hasActive()) {\r\n            return;\r\n        }\r\n        var ctx = this.callbackCtx_;\r\n        // Create ResizeObserverEntry instance for every active observation.\r\n        var entries = this.activeObservations_.map(function (observation) {\r\n            return new ResizeObserverEntry(observation.target, observation.broadcastRect());\r\n        });\r\n        this.callback_.call(ctx, entries, ctx);\r\n        this.clearActive();\r\n    };\r\n    /**\r\n     * Clears the collection of active observations.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    ResizeObserverSPI.prototype.clearActive = function () {\r\n        this.activeObservations_.splice(0);\r\n    };\r\n    /**\r\n     * Tells whether observer has active observations.\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    ResizeObserverSPI.prototype.hasActive = function () {\r\n        return this.activeObservations_.length > 0;\r\n    };\r\n    return ResizeObserverSPI;\r\n}());\n\n// Registry of internal observers. If WeakMap is not available use current shim\r\n// for the Map collection as it has all required methods and because WeakMap\r\n// can't be fully polyfilled anyway.\r\nvar observers = typeof WeakMap !== 'undefined' ? new WeakMap() : new MapShim();\r\n/**\r\n * ResizeObserver API. Encapsulates the ResizeObserver SPI implementation\r\n * exposing only those methods and properties that are defined in the spec.\r\n */\r\nvar ResizeObserver = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance of ResizeObserver.\r\n     *\r\n     * @param {ResizeObserverCallback} callback - Callback that is invoked when\r\n     *      dimensions of the observed elements change.\r\n     */\r\n    function ResizeObserver(callback) {\r\n        if (!(this instanceof ResizeObserver)) {\r\n            throw new TypeError('Cannot call a class as a function.');\r\n        }\r\n        if (!arguments.length) {\r\n            throw new TypeError('1 argument required, but only 0 present.');\r\n        }\r\n        var controller = ResizeObserverController.getInstance();\r\n        var observer = new ResizeObserverSPI(callback, controller, this);\r\n        observers.set(this, observer);\r\n    }\r\n    return ResizeObserver;\r\n}());\r\n// Expose public methods of ResizeObserver.\r\n[\r\n    'observe',\r\n    'unobserve',\r\n    'disconnect'\r\n].forEach(function (method) {\r\n    ResizeObserver.prototype[method] = function () {\r\n        var _a;\r\n        return (_a = observers.get(this))[method].apply(_a, arguments);\r\n    };\r\n});\n\nvar index = (function () {\r\n    // Export existing implementation if available.\r\n    if (typeof global$1.ResizeObserver !== 'undefined') {\r\n        return global$1.ResizeObserver;\r\n    }\r\n    return ResizeObserver;\r\n})();\n\nexport default index;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { defineCssClass } from \"./defineCssClass\";\nimport { ElementStyle } from \"..\";\n\nexport function componentStyleToPreparedDomAction(\n  elementStyle: ElementStyle\n): void {\n  defineCssClass(elementStyle.toClassNames(), elementStyle.css);\n\n  const modifiers = elementStyle.toOptionalModifiers();\n  if (modifiers != null) {\n    Object.keys(modifiers).forEach((modifierKey) => {\n      const modifierCss = modifiers[modifierKey];\n      const modifierClassNames = elementStyle.toClassNames(modifierKey);\n\n      defineCssClass(modifierClassNames, modifierCss);\n    });\n  }\n}\n","/// <reference path=\"./defineCssClass.d.ts\" />\n\nimport { compile, serialize, stringify } from \"stylis\";\n\nlet styleElement: HTMLStyleElement;\n\nif (typeof document !== \"undefined\") {\n  styleElement = document.createElement(\"style\");\n  styleElement.type = \"text/css\";\n  document.head.appendChild(styleElement);\n}\n\nexport function defineCssClass(classNames: string[], css: string): void {\n  if (typeof document === \"undefined\") {\n    return;\n  }\n\n  const modifiedClassName = classNames.map((name) => `.${name}`).join(\"\");\n\n  const styleContent = serialize(\n    compile(`${modifiedClassName}{${css}}`),\n    stringify\n  );\n\n  if (styleElement != null) {\n    styleElement.appendChild(document.createTextNode(styleContent));\n  }\n}\n","import { Actor } from \"skytree\";\n\nexport interface EveryFrameProps {\n  callback: (frameNumber: number) => void;\n}\n\nexport class EveryFrame extends Actor<EveryFrameProps> {\n  frameNumber: number = 0;\n\n  onActivate() {\n    const nextFrame = () => {\n      if (this.isActive.value === false) {\n        return;\n      }\n\n      this.frameNumber += 1;\n      this.props.callback(this.frameNumber);\n\n      requestAnimationFrame(nextFrame);\n    };\n\n    requestAnimationFrame(nextFrame);\n  }\n}\n","import {\n  Observable,\n  ReadOnlyObservable,\n  Receipt,\n} from \"@anderjason/observable\";\nimport { Actor } from \"skytree\";\n\nexport interface FocusWatcherProps {\n  element: HTMLInputElement | HTMLTextAreaElement;\n\n  output?: Observable<boolean>;\n}\n\nexport class FocusWatcher extends Actor<FocusWatcherProps> {\n  private _output: Observable<boolean>;\n  readonly output: ReadOnlyObservable<boolean>;\n\n  constructor(props: FocusWatcherProps) {\n    super(props);\n\n    this._output =\n      props.output || Observable.ofEmpty<boolean>(Observable.isStrictEqual);\n\n    this.output = ReadOnlyObservable.givenObservable(this._output);\n  }\n\n  onActivate() {\n    const onFocus = () => {\n      this._output.setValue(true);\n    };\n\n    const onBlur = () => {\n      this._output.setValue(false);\n    };\n\n    this.props.element.addEventListener(\"focus\", onFocus);\n    this.props.element.addEventListener(\"blur\", onBlur);\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        this.props.element.removeEventListener(\"focus\", onFocus);\n        this.props.element.removeEventListener(\"blur\", onBlur);\n      })\n    );\n\n    this._output.setValue(this.props.element === document.activeElement);\n  }\n}\n","import {\n  Observable,\n  ReadOnlyObservable,\n  Receipt,\n} from \"@anderjason/observable\";\nimport { Percent } from \"@anderjason/util\";\nimport { Actor } from \"skytree\";\n\nexport interface InternalIntersectionWatcherProps {\n  element: HTMLElement;\n  minimumVisiblePercent: Percent;\n  isElementVisible: Observable<boolean>;\n\n  scrollElement?: HTMLElement;\n  rootMargin?: string;\n}\n\nclass InternalIntersectionWatcher extends Actor<\n  InternalIntersectionWatcherProps\n> {\n  onActivate() {\n    const threshold = this.props.minimumVisiblePercent.toNumber(1);\n\n    const observer = new IntersectionObserver(\n      (elements) => {\n        const element = elements[0];\n        if (element == null) {\n          return;\n        }\n\n        this.props.isElementVisible.setValue(element.isIntersecting == true);\n      },\n      {\n        root: this.props.scrollElement || this.props.element.parentElement,\n        rootMargin: this.props.rootMargin,\n        threshold,\n      }\n    );\n\n    observer.observe(this.props.element);\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        observer.disconnect();\n        this.props.isElementVisible.setValue(undefined);\n      })\n    );\n  }\n}\n\nexport interface IntersectionWatcherProps {\n  element: HTMLElement | Observable<HTMLElement>;\n  minimumVisiblePercent: Percent;\n\n  scrollElement?: HTMLElement;\n  rootMargin?: string;\n  isElementVisible?: Observable<boolean>;\n}\n\nexport class IntersectionWatcher extends Actor<IntersectionWatcherProps> {\n  private _isElementVisible: Observable<boolean>;\n  readonly isElementVisible: ReadOnlyObservable<boolean>;\n\n  private _element: Observable<HTMLElement>;\n  private _activeWatcher: InternalIntersectionWatcher | undefined;\n\n  constructor(props: IntersectionWatcherProps) {\n    super(props);\n\n    if (Observable.isObservable(props.element)) {\n      this._element = props.element;\n    } else {\n      this._element = Observable.givenValue(props.element);\n    }\n\n    this._isElementVisible =\n      props.isElementVisible ||\n      Observable.ofEmpty<boolean>(Observable.isStrictEqual);\n    this.isElementVisible = ReadOnlyObservable.givenObservable(\n      this._isElementVisible\n    );\n  }\n\n  onActivate() {\n    this.cancelOnDeactivate(\n      this._element.didChange.subscribe((element) => {\n        if (this._activeWatcher != null) {\n          this.removeActor(this._activeWatcher);\n          this._activeWatcher = undefined;\n        }\n\n        if (element != null) {\n          this._activeWatcher = this.addActor(\n            new InternalIntersectionWatcher({\n              element,\n              minimumVisiblePercent: this.props.minimumVisiblePercent,\n              isElementVisible: this._isElementVisible,\n              rootMargin: this.props.rootMargin,\n              scrollElement: this.props.scrollElement,\n            })\n          );\n        }\n      }, true)\n    );\n  }\n}\n","import {\n  Observable,\n  ObservableArray,\n  ReadOnlyObservable,\n  Receipt,\n} from \"@anderjason/observable\";\nimport { Actor } from \"skytree\";\nimport { KeyboardWatcher } from \"../KeyboardWatcher\";\n\nexport type KeyCombination = string[];\n\nexport interface KeyboardShortcutProps {\n  keyCombinations: KeyCombination[];\n  onPress: () => void;\n}\n\nexport class KeyboardShortcut extends Actor<KeyboardShortcutProps> {\n  private static shortcutsByKeyCombination = new Map<\n    string,\n    ObservableArray<KeyboardShortcut>\n  >();\n\n  private static getShortcutsArray(\n    keyCombination: KeyCombination\n  ): ObservableArray<KeyboardShortcut> {\n    const joinedCombination = keyCombination.join(\",\");\n    let shortcuts = KeyboardShortcut.shortcutsByKeyCombination.get(\n      joinedCombination\n    );\n    if (shortcuts == null) {\n      shortcuts = ObservableArray.ofEmpty();\n      KeyboardShortcut.shortcutsByKeyCombination.set(\n        joinedCombination,\n        shortcuts\n      );\n    }\n\n    return shortcuts;\n  }\n\n  static givenKey(key: string, onPress: () => void): KeyboardShortcut {\n    const keyCombination: KeyCombination = [key];\n    return KeyboardShortcut.givenKeyCombination(keyCombination, onPress);\n  }\n\n  static givenKeyCombination(\n    keyCombination: KeyCombination,\n    onPress: () => void\n  ): KeyboardShortcut {\n    return new KeyboardShortcut({\n      keyCombinations: [keyCombination],\n      onPress,\n    });\n  }\n\n  static givenAnyKeyCombination(\n    keyCombinations: KeyCombination[],\n    onPress: () => void\n  ): KeyboardShortcut {\n    return new KeyboardShortcut({ keyCombinations, onPress });\n  }\n\n  private _isPressed = Observable.ofEmpty<boolean>(Observable.isStrictEqual);\n  readonly isPressed = ReadOnlyObservable.givenObservable(this._isPressed);\n\n  onActivate() {\n    const keyCombinations = this.props.keyCombinations.map((keyCombination) => {\n      return keyCombination.map((key) => {\n        if (key.length === 1) {\n          return key.toLowerCase();\n        } else {\n          return key;\n        }\n      });\n    });\n\n    keyCombinations.forEach((combination) => {\n      KeyboardShortcut.getShortcutsArray(combination).addValue(this);\n    });\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        keyCombinations.forEach((combination) => {\n          KeyboardShortcut.getShortcutsArray(combination).removeValue(this);\n        });\n      })\n    );\n\n    this.cancelOnDeactivate(\n      KeyboardWatcher.instance.keys.didChange.subscribe(() => {\n        const activeKeyCombination = keyCombinations.find((keyCombination) => {\n          return keyCombination.every((key) => {\n            return KeyboardWatcher.instance.keys.hasValue(key);\n          });\n        });\n\n        if (activeKeyCombination == null) {\n          this._isPressed.setValue(false);\n          return;\n        }\n\n        const shortcuts = KeyboardShortcut.getShortcutsArray(\n          activeKeyCombination\n        );\n\n        if (shortcuts.toOptionalValueGivenIndex(shortcuts.count - 1) == this) {\n          this._isPressed.setValue(activeKeyCombination != null);\n        } else {\n          this._isPressed.setValue(false);\n        }\n      }, true)\n    );\n\n    this.cancelOnDeactivate(\n      this._isPressed.didChange.subscribe((isPressed) => {\n        if (isPressed) {\n          this.props.onPress();\n        }\n      }, true)\n    );\n  }\n}\n","import { currentHostIsLocal } from \"./_internal/currentHostIsLocal\";\nimport { objectGivenQueryString } from \"./_internal/objectGivenQueryString\";\nimport { objectOfCurrentQueryString } from \"./_internal/objectOfCurrentQueryString\";\nimport { queryStringGivenObject } from \"./_internal/queryStringGivenObject\";\nimport { updateCurrentQueryString } from \"./_internal/updateCurrentQueryString\";\n\nexport class LocationUtil {\n  static currentHostIsLocal = currentHostIsLocal;\n  static objectGivenQueryString = objectGivenQueryString;\n  static objectOfCurrentQueryString = objectOfCurrentQueryString;\n  static queryStringGivenObject = queryStringGivenObject;\n  static updateCurrentQueryString = updateCurrentQueryString;\n}\n","export function currentHostIsLocal(): boolean {\n  const { hostname } = window.location;\n\n  return hostname === \"localhost\" || hostname.startsWith(\"192.\");\n}\n","import { objectOfCurrentQueryString } from \"./objectOfCurrentQueryString\";\nimport { queryStringGivenObject } from \"./queryStringGivenObject\";\n\nexport function updateCurrentQueryString(values: any): void {\n  if (values == null || Object.keys(values).length === 0) {\n    return;\n  }\n\n  const previousValue = objectOfCurrentQueryString();\n\n  const allValues = {\n    ...previousValue,\n    ...values,\n  };\n\n  const newQueryString = queryStringGivenObject(allValues);\n\n  window.history.replaceState(\n    null,\n    \"\",\n    `${window.location.pathname}${newQueryString}`\n  );\n}\n","import { Size2 } from \"@anderjason/geometry\";\nimport { Actor } from \"skytree\";\nimport { ManagedElement } from \"@anderjason/web\";\nimport { Observable, ObservableBase } from \"@anderjason/observable\";\n\nexport interface ManagedCanvasProps {\n  parentElement: Observable<HTMLElement>;\n  size: ObservableBase<Size2>;\n}\n\nexport class ManagedCanvas extends Actor<ManagedCanvasProps> {\n  private _canvas: ManagedElement<HTMLCanvasElement>;\n  private _context: CanvasRenderingContext2D;\n\n  get context(): CanvasRenderingContext2D {\n    return this._context;\n  }\n\n  get element(): HTMLCanvasElement {\n    return this._canvas.element;\n  }\n\n  onActivate() {\n    this._canvas = this.addActor(\n      ManagedElement.givenDefinition({\n        tagName: \"canvas\",\n        parentElement: this.props.parentElement,\n      })\n    );\n    this._context = this._canvas.element.getContext(\"2d\")!;\n\n    const devicePixelRatio = window.devicePixelRatio || 1;\n\n    this.cancelOnDeactivate(\n      this.props.size.didChange.subscribe((size) => {\n        if (size == null) {\n          return;\n        }\n\n        if (this.props.parentElement.value == null) {\n          return;\n        }\n\n        const newSize = Size2.givenWidthHeight(\n          size.width * devicePixelRatio,\n          size.height * devicePixelRatio\n        );\n\n        this._canvas.element.width = newSize.width;\n        this._canvas.element.height = newSize.height;\n        this._canvas.style.width = `${size.width}px`;\n        this._canvas.style.height = `${size.height}px`;\n      }, true)\n    );\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CanvasUtil = void 0;\nconst blobGivenCanvas_1 = require(\"./_internal/blobGivenCanvas\");\nconst canvasGivenBlob_1 = require(\"./_internal/canvasGivenBlob\");\nclass CanvasUtil {\n}\nexports.CanvasUtil = CanvasUtil;\nCanvasUtil.blobGivenCanvas = blobGivenCanvas_1.blobGivenCanvas;\nCanvasUtil.canvasGivenBlob = canvasGivenBlob_1.canvasGivenBlob;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.blobGivenCanvas = void 0;\nasync function blobGivenCanvas(canvas, type) {\n    return new Promise((resolve, reject) => {\n        canvas.toBlob((blob) => {\n            if (blob == null) {\n                reject(new Error(\"Unknown error rendering canvas to blob\"));\n                return;\n            }\n            resolve(blob);\n        }, type);\n    });\n}\nexports.blobGivenCanvas = blobGivenCanvas;\n//# sourceMappingURL=blobGivenCanvas.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.canvasGivenBlob = void 0;\nasync function canvasGivenBlob(blob, maxSize) {\n    return new Promise((resolve, reject) => {\n        const fileReader = new FileReader();\n        fileReader.onerror = () => {\n            reject(fileReader.error);\n        };\n        fileReader.onloadend = (e) => {\n            const img = new Image();\n            img.addEventListener(\"error\", (e) => {\n                reject(e.error);\n            });\n            img.addEventListener(\"load\", () => {\n                const canvas = document.createElement(\"canvas\");\n                let width = img.width;\n                let height = img.height;\n                if (maxSize != null) {\n                    const scaleX = maxSize.width / img.width;\n                    const scaleY = maxSize.height / img.height;\n                    const scale = Math.min(scaleX, scaleY, 1);\n                    width = Math.round(img.width * scale);\n                    height = Math.round(img.height * scale);\n                }\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext(\"2d\");\n                ctx.imageSmoothingEnabled = true;\n                ctx.imageSmoothingQuality = \"high\";\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n                resolve(canvas);\n            });\n            img.src = e.target.result;\n        };\n        fileReader.readAsDataURL(blob);\n    });\n}\nexports.canvasGivenBlob = canvasGivenBlob;\n//# sourceMappingURL=canvasGivenBlob.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CheckboxBinding = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst allowAll = () => false;\nclass CheckboxBinding extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        if (props.inputElement == null) {\n            throw new Error(\"Input element is required\");\n        }\n        const nodeName = props.inputElement.nodeName.toLowerCase();\n        if (nodeName !== \"input\") {\n            throw new Error(`Expected an input element, but got '${nodeName}'`);\n        }\n        this.inputElement = props.inputElement;\n        if (this.inputElement.type !== \"checkbox\") {\n            throw new Error(`Expected an input with type \"checkbox\"`);\n        }\n        this.isChecked = observable_1.Observable.givenValue(props.initialValue || false, observable_1.Observable.isStrictEqual);\n    }\n    onActivate() {\n        this._previousValue = this.inputElement.checked;\n        this.inputElement.addEventListener(\"input\", (e) => {\n            const newValue = this.inputElement.checked;\n            const shouldPreventChange = this.props.shouldPreventChange || allowAll;\n            if (shouldPreventChange(newValue)) {\n                this.inputElement.checked = this._previousValue;\n                return;\n            }\n            this.isChecked.setValue(newValue);\n            this._previousValue = newValue;\n        });\n        this.cancelOnDeactivate(this.isChecked.didChange.subscribe((value) => {\n            this.inputElement.checked = value;\n        }, true));\n    }\n}\nexports.CheckboxBinding = CheckboxBinding;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cornersGivenContainedPoints = void 0;\nconst __1 = require(\"..\");\nconst GrahamScan_1 = require(\"./GrahamScan\");\nconst util_1 = require(\"@anderjason/util\");\nconst geometry_1 = require(\"@anderjason/geometry\");\nfunction cornersGivenContainedPoints(points) {\n    const rectangles = getAllBoundingRectangles(points);\n    let rectanglesWithArea = rectangles.map((rectangle) => {\n        return {\n            rectangle,\n            area: getArea(rectangle),\n        };\n    });\n    rectanglesWithArea = util_1.ArrayUtil.arrayWithOrderFromValue(rectanglesWithArea, (rwa) => {\n        return rwa.area;\n    }, \"ascending\");\n    let lastArea = 0;\n    rectanglesWithArea = rectanglesWithArea.filter((rwa) => {\n        // TODO I'm trying here to avoid the bounding box flickering between\n        // different rectangle alternatives when dragging regions around.\n        // This generally works, but still misses some cases. Increasing the threshold\n        // number below might work, but there's probably a better way to handle this\n        const isSignificantlyDifferent = rwa.area - lastArea > 2000;\n        lastArea = rwa.area;\n        return isSignificantlyDifferent;\n    });\n    const minimum = rectanglesWithArea[0].rectangle;\n    return __1.Corners.givenPoints([\n        minimum[0],\n        minimum[3],\n        minimum[2],\n        minimum[1],\n    ]);\n}\nexports.cornersGivenContainedPoints = cornersGivenContainedPoints;\nfunction getAllBoundingRectangles(points) {\n    const rectangles = [];\n    const gs = new GrahamScan_1.GrahamScan();\n    const convexHull = gs.getConvexHull(points);\n    const I = new Caliper(convexHull, getIndex(convexHull, \"rightTop\"), 90);\n    const J = new Caliper(convexHull, getIndex(convexHull, \"leftTop\"), 180);\n    const K = new Caliper(convexHull, getIndex(convexHull, \"leftBottom\"), 270);\n    const L = new Caliper(convexHull, getIndex(convexHull, \"rightBottom\"), 0);\n    while (L.currentAngle < 90.0) {\n        const rect = [\n            L.getIntersection(I),\n            I.getIntersection(J),\n            J.getIntersection(K),\n            K.getIntersection(L),\n        ];\n        rectangles.push(rect);\n        const smallestTheta = getSmallestTheta(I, J, K, L);\n        I.rotateBy(smallestTheta);\n        J.rotateBy(smallestTheta);\n        K.rotateBy(smallestTheta);\n        L.rotateBy(smallestTheta);\n    }\n    return rectangles;\n}\nfunction getArea(rectangle) {\n    const deltaXAB = rectangle[0].x - rectangle[1].x;\n    const deltaYAB = rectangle[0].y - rectangle[1].y;\n    const deltaXBC = rectangle[1].x - rectangle[2].x;\n    const deltaYBC = rectangle[1].y - rectangle[2].y;\n    const lengthAB = Math.sqrt(deltaXAB * deltaXAB + deltaYAB * deltaYAB);\n    const lengthBC = Math.sqrt(deltaXBC * deltaXBC + deltaYBC * deltaYBC);\n    return lengthAB * lengthBC;\n}\nfunction getIndex(convexHull, corner) {\n    let index = 0;\n    let point = convexHull[index];\n    for (let i = 1; i < convexHull.length - 1; i++) {\n        let temp = convexHull[i];\n        let change = false;\n        switch (corner) {\n            case \"rightTop\":\n                change = temp.x > point.x || (temp.x == point.x && temp.y > point.y);\n                break;\n            case \"leftTop\":\n                change = temp.y > point.y || (temp.y == point.y && temp.x < point.x);\n                break;\n            case \"leftBottom\":\n                change = temp.x < point.x || (temp.x == point.x && temp.y < point.y);\n                break;\n            case \"rightBottom\":\n                change = temp.y < point.y || (temp.y == point.y && temp.x > point.x);\n                break;\n            default:\n                break;\n        }\n        if (change) {\n            index = i;\n            point = temp;\n        }\n    }\n    return index;\n}\nfunction getSmallestTheta(I, J, K, L) {\n    const thetaI = I.getDeltaAngleNextPoint();\n    const thetaJ = J.getDeltaAngleNextPoint();\n    const thetaK = K.getDeltaAngleNextPoint();\n    const thetaL = L.getDeltaAngleNextPoint();\n    if (thetaI <= thetaJ && thetaI <= thetaK && thetaI <= thetaL) {\n        return thetaI;\n    }\n    else if (thetaJ <= thetaK && thetaJ <= thetaL) {\n        return thetaJ;\n    }\n    else if (thetaK <= thetaL) {\n        return thetaK;\n    }\n    else {\n        return thetaL;\n    }\n}\nclass Caliper {\n    constructor(convexHull, pointIndex, currentAngle) {\n        this.convexHull = convexHull;\n        this.pointIndex = pointIndex;\n        this.currentAngle = currentAngle;\n    }\n    getAngleNextPoint() {\n        const p1 = this.convexHull[this.pointIndex];\n        const p2 = this.convexHull[(this.pointIndex + 1) % this.convexHull.length];\n        const deltaX = p2.x - p1.x;\n        const deltaY = p2.y - p1.y;\n        const angle = (Math.atan2(deltaY, deltaX) * 180) / Math.PI;\n        return angle < 0 ? 360 + angle : angle;\n    }\n    getConstant() {\n        const p = this.convexHull[this.pointIndex];\n        return p.y - this.getSlope() * p.x;\n    }\n    getDeltaAngleNextPoint() {\n        let angle = this.getAngleNextPoint();\n        if (angle === this.currentAngle) {\n            return 90; // ?\n        }\n        if (angle < 0) {\n            angle = 360 + angle - this.currentAngle;\n        }\n        else {\n            angle -= this.currentAngle;\n        }\n        return angle < 0 ? 360 : angle;\n    }\n    getIntersection(that) {\n        // the x-intercept of 'this' and 'that': x = ((c2 - c1) / (m1 - m2))\n        let x;\n        // the y-intercept of 'this' and 'that', given 'x': (m*x) + c\n        let y;\n        if (this.isVertical()) {\n            x = this.convexHull[this.pointIndex].x;\n        }\n        else if (this.isHorizontal()) {\n            x = that.convexHull[that.pointIndex].x;\n        }\n        else {\n            x =\n                (that.getConstant() - this.getConstant()) /\n                    (this.getSlope() - that.getSlope());\n        }\n        if (this.isVertical()) {\n            y = that.getConstant();\n        }\n        else if (this.isHorizontal()) {\n            y = this.getConstant();\n        }\n        else {\n            y = this.getSlope() * x + this.getConstant();\n        }\n        return geometry_1.Point2.givenXY(Math.round(x), Math.round(y));\n    }\n    getSlope() {\n        return Math.tan(geometry_1.Rotation.givenDegrees(this.currentAngle).radians);\n    }\n    isHorizontal() {\n        return (Math.abs(this.currentAngle) < Caliper.SIGMA ||\n            Math.abs(this.currentAngle - 180.0) < Caliper.SIGMA);\n    }\n    isVertical() {\n        return (Math.abs(this.currentAngle - 90.0) < Caliper.SIGMA ||\n            Math.abs(this.currentAngle - 270.0) < Caliper.SIGMA);\n    }\n    rotateBy(angle) {\n        if (this.getDeltaAngleNextPoint() == angle) {\n            this.pointIndex++;\n        }\n        this.currentAngle = (this.currentAngle + angle) % 360;\n    }\n}\nCaliper.SIGMA = 0.00000000001;\n//# sourceMappingURL=cornersGivenContainedPoints.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GrahamScan = void 0;\nconst util_1 = require(\"@anderjason/util\");\n// Ported from https://github.com/bkiers/GrahamScan\nclass GrahamScan {\n    /**\n     * Returns true iff all points in <code>points</code> are collinear.\n     *\n     * @param points the list of points.\n     * @return       true iff all points in <code>points</code> are collinear.\n     */\n    areAllCollinear(points) {\n        if (points.length < 2) {\n            return true;\n        }\n        const a = points[0];\n        const b = points[1];\n        for (let i = 2; i < points.length; i++) {\n            const c = points[i];\n            if (this.getTurn(a, b, c) !== \"collinear\") {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Returns the convex hull of the points created from the list\n     * <code>points</code>. Note that the first and last point in the\n     * returned <code>List&lt;java.awt.Point&gt;</code> are the same\n     * point.\n     *\n     * @param points the list of points.\n     * @return       the convex hull of the points created from the list\n     *               <code>points</code>.\n     * @throws IllegalArgumentException if all points are collinear or if there\n     *                                  are less than 3 unique points present.\n     */\n    getConvexHull(points) {\n        const sorted = this.getSortedPointSet(points);\n        if (sorted.length < 3) {\n            throw new Error(\"can only create a convex hull of 3 or more unique points\");\n        }\n        if (this.areAllCollinear(sorted)) {\n            throw new Error(\"cannot create a convex hull from collinear points\");\n        }\n        const stack = [];\n        stack.push(sorted[0]);\n        stack.push(sorted[1]);\n        for (let i = 2; i < sorted.length; i++) {\n            const head = sorted[i];\n            const middle = stack.pop();\n            const tail = util_1.ArrayUtil.optionalLastValueGivenArray(stack);\n            const turn = this.getTurn(tail, middle, head);\n            switch (turn) {\n                case \"counterclockwise\":\n                    stack.push(middle);\n                    stack.push(head);\n                    break;\n                case \"clockwise\":\n                    i--;\n                    break;\n                case \"collinear\":\n                    stack.push(head);\n                    break;\n            }\n        }\n        // close the hull\n        stack.push(sorted[0]);\n        return stack;\n    }\n    /**\n     * Returns the points with the lowest y coordinate. In case more than 1 such\n     * point exists, the one with the lowest x coordinate is returned.\n     *\n     * @param points the list of points to return the lowest point from.\n     * @return       the points with the lowest y coordinate. In case more than\n     *               1 such point exists, the one with the lowest x coordinate\n     *               is returned.\n     */\n    getLowestPoint(points) {\n        let lowest = points[0];\n        for (let i = 1; i < points.length; i++) {\n            let temp = points[i];\n            if (temp.y < lowest.y || (temp.y == lowest.y && temp.x < lowest.x)) {\n                lowest = temp;\n            }\n        }\n        return lowest;\n    }\n    /**\n     * Returns a sorted set of points from the list <code>points</code>. The\n     * set of points are sorted in increasing order of the angle they and the\n     * lowest point <tt>P</tt> make with the x-axis. If tow (or more) points\n     * form the same angle towards <tt>P</tt>, the one closest to <tt>P</tt>\n     * comes first.\n     *\n     * @param points the list of points to sort.\n     * @return       a sorted set of points from the list <code>points</code>.\n     * @see GrahamScan#getLowestPoint(java.util.List)\n     */\n    getSortedPointSet(points) {\n        let lowest = this.getLowestPoint(points);\n        const result = [...points];\n        result.sort((a, b) => {\n            if (a.isEqual(b)) {\n                return 0;\n            }\n            // use longs to guard against int-underflow\n            let thetaA = Math.atan2(a.y - lowest.y, a.x - lowest.x);\n            let thetaB = Math.atan2(b.y - lowest.y, b.x - lowest.x);\n            if (thetaA < thetaB) {\n                return -1;\n            }\n            else if (thetaA > thetaB) {\n                return 1;\n            }\n            else {\n                // collinear with the 'lowest' point, let the point closest to it come first\n                // use longs to guard against int-over/underflow\n                let distanceA = Math.sqrt((lowest.x - a.x) * (lowest.x - a.x) +\n                    (lowest.y - a.y) * (lowest.y - a.y));\n                let distanceB = Math.sqrt((lowest.x - b.x) * (lowest.x - b.x) +\n                    (lowest.y - b.y) * (lowest.y - b.y));\n                if (distanceA < distanceB) {\n                    return -1;\n                }\n                else {\n                    return 1;\n                }\n            }\n        });\n        return result;\n    }\n    /**\n     * Returns the GrahamScan#Turn formed by traversing through the\n     * ordered points <code>a</code>, <code>b</code> and <code>c</code>.\n     * More specifically, the cross product <tt>C</tt> between the\n     * 3 points (vectors) is calculated:\n     *\n     * <tt>(b.x-a.x * c.y-a.y) - (b.y-a.y * c.x-a.x)</tt>\n     *\n     * and if <tt>C</tt> is less than 0, the turn is CLOCKWISE, if\n     * <tt>C</tt> is more than 0, the turn is COUNTER_CLOCKWISE, else\n     * the three points are COLLINEAR.\n     *\n     * @param a the starting point.\n     * @param b the second point.\n     * @param c the end point.\n     * @return the GrahamScan#Turn formed by traversing through the\n     *         ordered points <code>a</code>, <code>b</code> and\n     *         <code>c</code>.\n     */\n    getTurn(a, b, c) {\n        // use longs to guard against int-over/underflow\n        let crossProduct = (b.x - a.x) * (c.y - a.y) - (b.y - a.y) * (c.x - a.x);\n        if (crossProduct > 0) {\n            return \"counterclockwise\";\n        }\n        else if (crossProduct < 0) {\n            return \"clockwise\";\n        }\n        else {\n            return \"collinear\";\n        }\n    }\n}\nexports.GrahamScan = GrahamScan;\n//# sourceMappingURL=GrahamScan.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cornersWithAlignment = void 0;\nconst util_1 = require(\"@anderjason/util\");\nconst __1 = require(\"..\");\nconst totalDistanceGivenPointArrays_1 = require(\"./totalDistanceGivenPointArrays\");\nfunction cornersWithAlignment(input, alignment) {\n    const candidateArrayA = input.toPoints();\n    const candidateArrayB = util_1.ArrayUtil.arrayWithLeftShift(candidateArrayA);\n    const candidateArrayC = util_1.ArrayUtil.arrayWithLeftShift(candidateArrayB);\n    const candidateArrayD = util_1.ArrayUtil.arrayWithLeftShift(candidateArrayC);\n    const candidateArrayE = util_1.ArrayUtil.arrayWithReversedOrder(candidateArrayA);\n    const candidateArrayF = util_1.ArrayUtil.arrayWithLeftShift(candidateArrayE);\n    const candidateArrayG = util_1.ArrayUtil.arrayWithLeftShift(candidateArrayF);\n    const candidateArrayH = util_1.ArrayUtil.arrayWithLeftShift(candidateArrayG);\n    const targetArray = alignment.toPoints();\n    const candidateArrays = [\n        candidateArrayA,\n        candidateArrayB,\n        candidateArrayC,\n        candidateArrayD,\n        candidateArrayE,\n        candidateArrayF,\n        candidateArrayG,\n        candidateArrayH,\n    ];\n    const arraysWithDistance = candidateArrays.map((candidateArray) => {\n        return {\n            candidateArray,\n            totalDistance: totalDistanceGivenPointArrays_1.totalDistanceGivenPointArrays(candidateArray, targetArray),\n        };\n    });\n    const sorted = util_1.ArrayUtil.arrayWithOrderFromValue(arraysWithDistance, (arrayWithDistance) => {\n        return arrayWithDistance.totalDistance;\n    }, \"ascending\");\n    const bestCandidateArray = sorted[0].candidateArray;\n    return __1.Corners.givenPoints(bestCandidateArray);\n}\nexports.cornersWithAlignment = cornersWithAlignment;\n//# sourceMappingURL=cornersWithAlignment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.totalDistanceGivenPointArrays = void 0;\nfunction totalDistanceGivenPointArrays(a, b) {\n    if (a == null || b == null) {\n        throw new Error(\"Two arrays are required\");\n    }\n    if (a.length !== b.length) {\n        throw new Error(\"Both arrays must be the same length\");\n    }\n    let difference = 0;\n    a.forEach((point, idx) => {\n        difference += point.toDistance(b[idx]);\n    });\n    return difference;\n}\nexports.totalDistanceGivenPointArrays = totalDistanceGivenPointArrays;\n//# sourceMappingURL=totalDistanceGivenPointArrays.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ElementBoundsWatcher = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst geometry_1 = require(\"@anderjason/geometry\");\nclass InternalElementBoundsWatcher extends skytree_1.Actor {\n    onActivate() {\n        // missing Typescript definition for ResizeObserver\n        // @ts-ignore\n        const observer = new ResizeObserver((elements) => {\n            const element = elements[0];\n            if (element == null) {\n                return;\n            }\n            const bounds = element.contentRect;\n            const box = geometry_1.Box2.givenDomRect(bounds);\n            this.props.output.setValue(box);\n        });\n        // start observing\n        observer.observe(this.props.element);\n        // set initial value\n        this.props.output.setValue(geometry_1.Box2.givenDomRect(this.props.element.getBoundingClientRect()));\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            observer.disconnect();\n            this.props.output.setValue(undefined);\n        }));\n    }\n}\nclass ElementBoundsWatcher extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        if (observable_1.Observable.isObservable(props.element)) {\n            this._element = props.element;\n        }\n        else {\n            this._element = observable_1.Observable.givenValue(props.element);\n        }\n        this._output = props.output || observable_1.Observable.ofEmpty(geometry_1.Box2.isEqual);\n        this.output = observable_1.ReadOnlyObservable.givenObservable(this._output);\n    }\n    onActivate() {\n        this.cancelOnDeactivate(this._element.didChange.subscribe((element) => {\n            if (this._activeWatcher != null) {\n                this.removeActor(this._activeWatcher);\n                this._activeWatcher = undefined;\n            }\n            if (element != null) {\n                this._activeWatcher = this.addActor(new InternalElementBoundsWatcher({\n                    element,\n                    output: this._output,\n                }));\n            }\n        }, true));\n    }\n}\nexports.ElementBoundsWatcher = ElementBoundsWatcher;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.componentStyleToPreparedDomAction = void 0;\nconst defineCssClass_1 = require(\"./defineCssClass\");\nfunction componentStyleToPreparedDomAction(elementStyle) {\n    defineCssClass_1.defineCssClass(elementStyle.toClassNames(), elementStyle.css);\n    const modifiers = elementStyle.toOptionalModifiers();\n    if (modifiers != null) {\n        Object.keys(modifiers).forEach((modifierKey) => {\n            const modifierCss = modifiers[modifierKey];\n            const modifierClassNames = elementStyle.toClassNames(modifierKey);\n            defineCssClass_1.defineCssClass(modifierClassNames, modifierCss);\n        });\n    }\n}\nexports.componentStyleToPreparedDomAction = componentStyleToPreparedDomAction;\n//# sourceMappingURL=componentStyleToPreparedDomAction.js.map","\"use strict\";\n/// <reference path=\"./defineCssClass.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defineCssClass = void 0;\nconst stylis_1 = require(\"stylis\");\nlet styleElement;\nif (typeof document !== \"undefined\") {\n    styleElement = document.createElement(\"style\");\n    styleElement.type = \"text/css\";\n    document.head.appendChild(styleElement);\n}\nfunction defineCssClass(classNames, css) {\n    if (typeof document === \"undefined\") {\n        return;\n    }\n    const modifiedClassName = classNames.map((name) => `.${name}`).join(\"\");\n    const styleContent = stylis_1.serialize(stylis_1.compile(`${modifiedClassName}{${css}}`), stylis_1.stringify);\n    if (styleElement != null) {\n        styleElement.appendChild(document.createTextNode(styleContent));\n    }\n}\nexports.defineCssClass = defineCssClass;\n//# sourceMappingURL=defineCssClass.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EveryFrame = void 0;\nconst skytree_1 = require(\"skytree\");\nclass EveryFrame extends skytree_1.Actor {\n    constructor() {\n        super(...arguments);\n        this.frameNumber = 0;\n    }\n    onActivate() {\n        const nextFrame = () => {\n            if (this.isActive.value === false) {\n                return;\n            }\n            this.frameNumber += 1;\n            this.props.callback(this.frameNumber);\n            requestAnimationFrame(nextFrame);\n        };\n        requestAnimationFrame(nextFrame);\n    }\n}\nexports.EveryFrame = EveryFrame;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FocusWatcher = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst skytree_1 = require(\"skytree\");\nclass FocusWatcher extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        this._output =\n            props.output || observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.output = observable_1.ReadOnlyObservable.givenObservable(this._output);\n    }\n    onActivate() {\n        const onFocus = () => {\n            this._output.setValue(true);\n        };\n        const onBlur = () => {\n            this._output.setValue(false);\n        };\n        this.props.element.addEventListener(\"focus\", onFocus);\n        this.props.element.addEventListener(\"blur\", onBlur);\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            this.props.element.removeEventListener(\"focus\", onFocus);\n            this.props.element.removeEventListener(\"blur\", onBlur);\n        }));\n        this._output.setValue(this.props.element === document.activeElement);\n    }\n}\nexports.FocusWatcher = FocusWatcher;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IntersectionWatcher = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst skytree_1 = require(\"skytree\");\nclass InternalIntersectionWatcher extends skytree_1.Actor {\n    onActivate() {\n        const threshold = this.props.minimumVisiblePercent.toNumber(1);\n        const observer = new IntersectionObserver((elements) => {\n            const element = elements[0];\n            if (element == null) {\n                return;\n            }\n            this.props.isElementVisible.setValue(element.isIntersecting == true);\n        }, {\n            root: this.props.scrollElement || this.props.element.parentElement,\n            rootMargin: this.props.rootMargin,\n            threshold,\n        });\n        observer.observe(this.props.element);\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            observer.disconnect();\n            this.props.isElementVisible.setValue(undefined);\n        }));\n    }\n}\nclass IntersectionWatcher extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        if (observable_1.Observable.isObservable(props.element)) {\n            this._element = props.element;\n        }\n        else {\n            this._element = observable_1.Observable.givenValue(props.element);\n        }\n        this._isElementVisible =\n            props.isElementVisible ||\n                observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.isElementVisible = observable_1.ReadOnlyObservable.givenObservable(this._isElementVisible);\n    }\n    onActivate() {\n        this.cancelOnDeactivate(this._element.didChange.subscribe((element) => {\n            if (this._activeWatcher != null) {\n                this.removeActor(this._activeWatcher);\n                this._activeWatcher = undefined;\n            }\n            if (element != null) {\n                this._activeWatcher = this.addActor(new InternalIntersectionWatcher({\n                    element,\n                    minimumVisiblePercent: this.props.minimumVisiblePercent,\n                    isElementVisible: this._isElementVisible,\n                    rootMargin: this.props.rootMargin,\n                    scrollElement: this.props.scrollElement,\n                }));\n            }\n        }, true));\n    }\n}\nexports.IntersectionWatcher = IntersectionWatcher;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeyboardShortcut = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst skytree_1 = require(\"skytree\");\nconst KeyboardWatcher_1 = require(\"../KeyboardWatcher\");\nclass KeyboardShortcut extends skytree_1.Actor {\n    constructor() {\n        super(...arguments);\n        this._isPressed = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.isPressed = observable_1.ReadOnlyObservable.givenObservable(this._isPressed);\n    }\n    static getShortcutsArray(keyCombination) {\n        const joinedCombination = keyCombination.join(\",\");\n        let shortcuts = KeyboardShortcut.shortcutsByKeyCombination.get(joinedCombination);\n        if (shortcuts == null) {\n            shortcuts = observable_1.ObservableArray.ofEmpty();\n            KeyboardShortcut.shortcutsByKeyCombination.set(joinedCombination, shortcuts);\n        }\n        return shortcuts;\n    }\n    static givenKey(key, onPress) {\n        const keyCombination = [key];\n        return KeyboardShortcut.givenKeyCombination(keyCombination, onPress);\n    }\n    static givenKeyCombination(keyCombination, onPress) {\n        return new KeyboardShortcut({\n            keyCombinations: [keyCombination],\n            onPress,\n        });\n    }\n    static givenAnyKeyCombination(keyCombinations, onPress) {\n        return new KeyboardShortcut({ keyCombinations, onPress });\n    }\n    onActivate() {\n        const keyCombinations = this.props.keyCombinations.map((keyCombination) => {\n            return keyCombination.map((key) => {\n                if (key.length === 1) {\n                    return key.toLowerCase();\n                }\n                else {\n                    return key;\n                }\n            });\n        });\n        keyCombinations.forEach((combination) => {\n            KeyboardShortcut.getShortcutsArray(combination).addValue(this);\n        });\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            keyCombinations.forEach((combination) => {\n                KeyboardShortcut.getShortcutsArray(combination).removeValue(this);\n            });\n        }));\n        this.cancelOnDeactivate(KeyboardWatcher_1.KeyboardWatcher.instance.keys.didChange.subscribe(() => {\n            const activeKeyCombination = keyCombinations.find((keyCombination) => {\n                return keyCombination.every((key) => {\n                    return KeyboardWatcher_1.KeyboardWatcher.instance.keys.hasValue(key);\n                });\n            });\n            if (activeKeyCombination == null) {\n                this._isPressed.setValue(false);\n                return;\n            }\n            const shortcuts = KeyboardShortcut.getShortcutsArray(activeKeyCombination);\n            if (shortcuts.toOptionalValueGivenIndex(shortcuts.count - 1) == this) {\n                this._isPressed.setValue(activeKeyCombination != null);\n            }\n            else {\n                this._isPressed.setValue(false);\n            }\n        }, true));\n        this.cancelOnDeactivate(this._isPressed.didChange.subscribe((isPressed) => {\n            if (isPressed) {\n                this.props.onPress();\n            }\n        }, true));\n    }\n}\nexports.KeyboardShortcut = KeyboardShortcut;\nKeyboardShortcut.shortcutsByKeyCombination = new Map();\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LocationUtil = void 0;\nconst currentHostIsLocal_1 = require(\"./_internal/currentHostIsLocal\");\nconst objectGivenQueryString_1 = require(\"./_internal/objectGivenQueryString\");\nconst objectOfCurrentQueryString_1 = require(\"./_internal/objectOfCurrentQueryString\");\nconst queryStringGivenObject_1 = require(\"./_internal/queryStringGivenObject\");\nconst updateCurrentQueryString_1 = require(\"./_internal/updateCurrentQueryString\");\nclass LocationUtil {\n}\nexports.LocationUtil = LocationUtil;\nLocationUtil.currentHostIsLocal = currentHostIsLocal_1.currentHostIsLocal;\nLocationUtil.objectGivenQueryString = objectGivenQueryString_1.objectGivenQueryString;\nLocationUtil.objectOfCurrentQueryString = objectOfCurrentQueryString_1.objectOfCurrentQueryString;\nLocationUtil.queryStringGivenObject = queryStringGivenObject_1.queryStringGivenObject;\nLocationUtil.updateCurrentQueryString = updateCurrentQueryString_1.updateCurrentQueryString;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.currentHostIsLocal = void 0;\nfunction currentHostIsLocal() {\n    const { hostname } = window.location;\n    return hostname === \"localhost\" || hostname.startsWith(\"192.\");\n}\nexports.currentHostIsLocal = currentHostIsLocal;\n//# sourceMappingURL=currentHostIsLocal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.updateCurrentQueryString = void 0;\nconst objectOfCurrentQueryString_1 = require(\"./objectOfCurrentQueryString\");\nconst queryStringGivenObject_1 = require(\"./queryStringGivenObject\");\nfunction updateCurrentQueryString(values) {\n    if (values == null || Object.keys(values).length === 0) {\n        return;\n    }\n    const previousValue = objectOfCurrentQueryString_1.objectOfCurrentQueryString();\n    const allValues = Object.assign(Object.assign({}, previousValue), values);\n    const newQueryString = queryStringGivenObject_1.queryStringGivenObject(allValues);\n    window.history.replaceState(null, \"\", `${window.location.pathname}${newQueryString}`);\n}\nexports.updateCurrentQueryString = updateCurrentQueryString;\n//# sourceMappingURL=updateCurrentQueryString.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NetworkUtil = void 0;\nconst dataUrlGivenUrl_1 = require(\"./_internal/dataUrlGivenUrl\");\nconst blobGivenUrl_1 = require(\"./_internal/blobGivenUrl\");\nconst imageBitmapGivenUrl_1 = require(\"./_internal/imageBitmapGivenUrl\");\nconst scriptGivenUrl_1 = require(\"./_internal/scriptGivenUrl\");\nconst dataUrlGivenBlob_1 = require(\"./_internal/dataUrlGivenBlob\");\nclass NetworkUtil {\n}\nexports.NetworkUtil = NetworkUtil;\nNetworkUtil.blobGivenUrl = blobGivenUrl_1.blobGivenUrl;\nNetworkUtil.dataUrlGivenUrl = dataUrlGivenUrl_1.dataUrlGivenUrl;\nNetworkUtil.dataUrlGivenBlob = dataUrlGivenBlob_1.dataUrlGivenBlob;\nNetworkUtil.imageBitmapGivenUrl = imageBitmapGivenUrl_1.imageBitmapGivenUrl;\nNetworkUtil.scriptGivenUrl = scriptGivenUrl_1.scriptGivenUrl;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dataUrlGivenUrl = void 0;\nconst blobGivenUrl_1 = require(\"./blobGivenUrl\");\nconst dataUrlGivenBlob_1 = require(\"./dataUrlGivenBlob\");\nasync function dataUrlGivenUrl(url) {\n    const blob = await blobGivenUrl_1.blobGivenUrl(url);\n    const dataUrl = await dataUrlGivenBlob_1.dataUrlGivenBlob(blob);\n    return dataUrl;\n}\nexports.dataUrlGivenUrl = dataUrlGivenUrl;\n//# sourceMappingURL=dataUrlGivenUrl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.imageBitmapGivenUrl = void 0;\nfunction imageBitmapGivenUrl(url) {\n    return new Promise((resolve, reject) => {\n        const img = document.createElement(\"img\");\n        img.onload = () => {\n            resolve(img);\n        };\n        img.onerror = () => {\n            reject(new Error(\"Could not load image\"));\n        };\n        img.crossOrigin = \"anonymous\";\n        img.src = url;\n    });\n}\nexports.imageBitmapGivenUrl = imageBitmapGivenUrl;\n//# sourceMappingURL=imageBitmapGivenUrl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.scriptGivenUrl = void 0;\nfunction scriptGivenUrl(url) {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement(\"script\");\n        script.type = \"text/javascript\";\n        script.onload = () => {\n            resolve();\n        };\n        script.onerror = () => {\n            reject();\n        };\n        script.src = url;\n        document.head.appendChild(script);\n    });\n}\nexports.scriptGivenUrl = scriptGivenUrl;\n//# sourceMappingURL=scriptGivenUrl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservableState = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst util_1 = require(\"@anderjason/util\");\nconst UndoContext_1 = require(\"../UndoContext\");\nconst skytree_1 = require(\"skytree\");\nconst ObservableStateBinding_1 = require(\"./_internal/ObservableStateBinding\");\nfunction clone(input) {\n    if (typeof input === \"object\") {\n        return util_1.ObjectUtil.objectWithDeepMerge({}, input);\n    }\n    else if (Array.isArray(input)) {\n        return util_1.ObjectUtil.objectWithDeepMerge([], input);\n    }\n    else {\n        return input;\n    }\n}\nclass ObservableState extends skytree_1.Actor {\n    constructor() {\n        super(...arguments);\n        this._state = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.state = observable_1.ReadOnlyObservable.givenObservable(this._state);\n        this._pathBindings = new Set();\n    }\n    onActivate() {\n        this._undoContext = new UndoContext_1.UndoContext(clone(this.props.initialState || {}), 10);\n        this.cancelOnDeactivate(this._undoContext.currentStep.didChange.subscribe((undoStep) => {\n            this._state.setValue(clone(undoStep));\n        }, true));\n    }\n    get undoContext() {\n        return this._undoContext;\n    }\n    subscribe(valuePath, fn, includeLast = false) {\n        const binding = this.addActor(new skytree_1.PathBinding({\n            input: this._state,\n            path: valuePath,\n        }));\n        this._pathBindings.add(binding);\n        const innerHandle = this.cancelOnDeactivate(binding.output.didChange.subscribe((value) => {\n            fn(value);\n        }, includeLast));\n        return new observable_1.Receipt(() => {\n            this._pathBindings.delete(binding);\n            innerHandle.cancel();\n            this.removeCancelOnDeactivate(innerHandle);\n            this.removeActor(binding);\n        });\n    }\n    toBinding(definition) {\n        return new ObservableStateBinding_1.ObservableStateBinding(Object.assign({ observableState: this }, definition));\n    }\n    toOptionalValueGivenPath(path) {\n        return clone(util_1.ObjectUtil.optionalValueAtPathGivenObject(this._state.value, path));\n    }\n    update(path, inputValue) {\n        // const currentValue = ObjectUtil.optionalValueAtPathGivenObject(\n        //   this._state.value,\n        //   path\n        // );\n        // if (ObjectUtil.objectIsDeepEqual(currentValue, inputValue)) {\n        //   return;\n        // }\n        const obj = util_1.ObjectUtil.objectWithValueAtPath(this._state.value, path, clone(inputValue));\n        this._state.setValue(obj);\n    }\n}\nexports.ObservableState = ObservableState;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservableStateBinding = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst skytree_1 = require(\"skytree\");\nclass ObservableStateBinding extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        if (props.output != null) {\n            this.output = props.output;\n        }\n        else {\n            this.output = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        }\n    }\n    onActivate() {\n        let isUpdating = false;\n        this.cancelOnDeactivate(this.props.observableState.subscribe(this.props.valuePath, (vccValue) => {\n            isUpdating = true;\n            let result = vccValue;\n            if (this.props.outputValueGivenPartialState != null) {\n                result = this.props.outputValueGivenPartialState(result);\n            }\n            this.output.setValue(result);\n            isUpdating = false;\n        }, true));\n        this.cancelOnDeactivate(this.output.didChange.subscribe((value) => {\n            if (isUpdating == true) {\n                return;\n            }\n            let result = value;\n            if (this.props.partialStateGivenOutputValue != null) {\n                result = this.props.outputValueGivenPartialState(result);\n            }\n            this.props.observableState.update(this.props.valuePath, result);\n        }));\n    }\n}\nexports.ObservableStateBinding = ObservableStateBinding;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Pointer = void 0;\nconst geometry_1 = require(\"@anderjason/geometry\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst skytree_1 = require(\"skytree\");\nconst PendingClick_1 = require(\"./PendingClick\");\nconst TouchVisualizer_1 = require(\"./TouchVisualizer\");\nclass Pointer extends skytree_1.Actor {\n    constructor() {\n        super();\n        this.points = observable_1.Observable.givenValue({});\n        this.didClick = new observable_1.TypedEvent();\n        this.didSingleClick = new observable_1.TypedEvent();\n        this.didDoubleClick = new observable_1.TypedEvent();\n        this.didStart = new observable_1.TypedEvent();\n        this.didEnd = new observable_1.TypedEvent();\n        this._hoveredElement = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.hoveredElement = observable_1.ReadOnlyObservable.givenObservable(this._hoveredElement);\n        this._referenceCountByTarget = new Map();\n        this.onKeyDown = (e) => {\n            if (e.repeat) {\n                return;\n            }\n            if (!e.altKey) {\n                return;\n            }\n            if (e.key === \"t\") {\n                this._keyboardTouchActive = true;\n                this.startTouch(\"first\", this._screenSpaceKeyboardTouchPoint);\n            }\n        };\n        this.onKeyUp = (e) => {\n            if (e.repeat) {\n                return;\n            }\n            if (!this._keyboardTouchActive) {\n                return;\n            }\n            if (e.key === \"t\") {\n                this._keyboardTouchActive = false;\n                this.endTouch(\"first\", this._screenSpaceKeyboardTouchPoint);\n            }\n        };\n        this.onPointerDown = (e) => {\n            if (e.button !== 0) {\n                return;\n            }\n            const screenPoint = geometry_1.Point2.givenXY(e.clientX, e.clientY);\n            const isPrimary = e.isPrimary && !this._keyboardTouchActive;\n            const namedTouchPoint = isPrimary ? \"first\" : \"second\";\n            const isHandled = this.startTouch(namedTouchPoint, screenPoint);\n            if (namedTouchPoint === \"first\") {\n                this._pendingClick.pressButton(screenPoint);\n            }\n            if (isHandled) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        };\n        this.onPointerMove = (e) => {\n            const screenPoint = geometry_1.Point2.givenXY(e.clientX, e.clientY);\n            this._screenSpaceKeyboardTouchPoint = screenPoint;\n            const isPrimary = e.isPrimary && !this._keyboardTouchActive;\n            const namedTouchPoint = isPrimary ? \"first\" : \"second\";\n            this.moveTouch(namedTouchPoint, screenPoint);\n            if (namedTouchPoint === \"first\") {\n                this._pendingClick.movePointer(screenPoint);\n            }\n        };\n        this.onPointerUp = (e) => {\n            if (e.button !== 0) {\n                return;\n            }\n            const screenPoint = geometry_1.Point2.givenXY(e.clientX, e.clientY);\n            const isPrimary = e.isPrimary && !this._keyboardTouchActive;\n            const namedTouchPoint = isPrimary ? \"first\" : \"second\";\n            const isHandled = this.endTouch(namedTouchPoint, screenPoint);\n            if (namedTouchPoint === \"first\") {\n                this._pendingClick.releaseButton(screenPoint);\n            }\n            if (isHandled) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        };\n        this.onPointerEnter = (e) => {\n            if (e.buttons !== 0) {\n                return;\n            }\n            this._pendingClick.reset();\n            if (this._screenSpacePoint1 != null) {\n                this.endTouch(\"first\", this._screenSpacePoint1);\n            }\n            if (this._screenSpacePoint2 != null) {\n                this.endTouch(\"second\", this._screenSpacePoint2);\n            }\n        };\n        this.updateTouchPosition = (namedTouchPoint, screenPoint) => {\n            if (namedTouchPoint === \"first\") {\n                this._screenSpacePoint1 = screenPoint;\n            }\n            else if (namedTouchPoint === \"second\") {\n                this._screenSpacePoint2 = screenPoint;\n            }\n            this.notifyPointsChanged();\n        };\n    }\n    static get instance() {\n        if (Pointer._instance == null) {\n            Pointer._instance = new Pointer();\n            Pointer._instance.activate();\n        }\n        return this._instance;\n    }\n    onActivate() {\n        if (window.location.hostname === \"localhost\" ||\n            window.location.hostname === \"192.168.1.100\") {\n            this.addActor(new TouchVisualizer_1.TouchVisualizer({\n                touchSupport: this,\n            }));\n        }\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            this._referenceCountByTarget.clear();\n        }));\n        this._pendingClick = this.addActor(new PendingClick_1.PendingClick());\n        this.cancelOnDeactivate(this._pendingClick.didClick.subscribe((screenPoint) => {\n            this.onClick(screenPoint);\n        }));\n        this.cancelOnDeactivate(this._pendingClick.didSingleClick.subscribe((screenPoint) => {\n            this.onSingleClick(screenPoint);\n        }));\n        this.cancelOnDeactivate(this._pendingClick.didDoubleClick.subscribe((screenPoint) => {\n            this.onDoubleClick(screenPoint);\n        }));\n        if (typeof document !== \"undefined\") {\n            document.body.addEventListener(\"keydown\", this.onKeyDown);\n            document.body.addEventListener(\"keyup\", this.onKeyUp);\n            document.body.addEventListener(\"pointerdown\", this.onPointerDown);\n            document.body.addEventListener(\"pointermove\", this.onPointerMove);\n            document.body.addEventListener(\"pointerup\", this.onPointerUp);\n            document.body.addEventListener(\"pointerenter\", this.onPointerEnter);\n            this.cancelOnDeactivate(new observable_1.Receipt(() => {\n                document.body.removeEventListener(\"keydown\", this.onKeyDown);\n                document.body.removeEventListener(\"keyup\", this.onKeyUp);\n                document.body.removeEventListener(\"pointerdown\", this.onPointerDown);\n                document.body.removeEventListener(\"pointermove\", this.onPointerMove);\n                document.body.removeEventListener(\"pointerup\", this.onPointerUp);\n                document.body.removeEventListener(\"pointerenter\", this.onPointerEnter);\n            }));\n        }\n    }\n    resetPendingClick() {\n        this._pendingClick.reset();\n    }\n    addTarget(element) {\n        const referenceCount = this._referenceCountByTarget.get(element) || 0;\n        this._referenceCountByTarget.set(element, referenceCount + 1);\n        return new observable_1.Receipt(() => {\n            if (!this._referenceCountByTarget.has(element)) {\n                return;\n            }\n            const newCount = this._referenceCountByTarget.get(element) - 1;\n            if (newCount < 1) {\n                this._referenceCountByTarget.delete(element);\n            }\n            else {\n                this._referenceCountByTarget.set(element, newCount);\n            }\n        });\n    }\n    startTouch(namedTouchPoint, screenPoint) {\n        const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n        // save this point for a possible keyboard-simulated touch event later\n        this._screenSpaceKeyboardTouchPoint = screenPoint;\n        this.updateTouchPosition(namedTouchPoint, screenPoint);\n        const event = {\n            screenPoint,\n            target,\n            namedTouchPoint,\n            isHandled: false,\n        };\n        this.didStart.emit(event);\n        return event.isHandled;\n    }\n    moveTouch(namedTouchPoint, screenPoint) {\n        if (namedTouchPoint === \"first\" && this._screenSpacePoint1 == null) {\n            return;\n        }\n        if (namedTouchPoint === \"second\" && this._screenSpacePoint2 == null) {\n            return;\n        }\n        // save this point for a possible keyboard-simulated touch event later\n        this._screenSpaceKeyboardTouchPoint = screenPoint;\n        this.updateTouchPosition(namedTouchPoint, screenPoint);\n    }\n    endTouch(namedTouchPoint, screenPoint) {\n        const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n        if (namedTouchPoint === \"first\") {\n            this._screenSpacePoint1 = undefined;\n            this._screenSpacePoint2 = undefined;\n        }\n        else {\n            this._screenSpacePoint2 = undefined;\n        }\n        this.notifyPointsChanged();\n        const event = {\n            screenPoint,\n            target,\n            namedTouchPoint,\n            isHandled: false,\n        };\n        this.didEnd.emit(event);\n        return event.isHandled;\n    }\n    onClick(screenPoint) {\n        const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n        this.didClick.emit({\n            screenPoint,\n            target,\n            namedTouchPoint: \"first\",\n            isHandled: false,\n        });\n    }\n    onSingleClick(screenPoint) {\n        const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n        this.didSingleClick.emit({\n            screenPoint,\n            target,\n            namedTouchPoint: \"first\",\n            isHandled: false,\n        });\n    }\n    onDoubleClick(screenPoint) {\n        const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n        this.didDoubleClick.emit({\n            screenPoint,\n            target,\n            namedTouchPoint: \"first\",\n            isHandled: false,\n        });\n    }\n    optionalTargetElementGivenScreenPoint(screenPoint) {\n        if (screenPoint == null) {\n            return;\n        }\n        const elements = document.elementsFromPoint(screenPoint.x, screenPoint.y);\n        const match = elements.find((el) => this._referenceCountByTarget.has(el));\n        if (match == null) {\n            return undefined;\n        }\n        return match;\n    }\n    notifyPointsChanged() {\n        this.points.setValue({\n            first: this._screenSpacePoint1,\n            second: this._screenSpacePoint2,\n        });\n    }\n}\nexports.Pointer = Pointer;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PendingClick = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst time_1 = require(\"@anderjason/time\");\nfunction pointIsNearPoint(a, b, threshold = 4) {\n    if (a == null || b == null) {\n        return false;\n    }\n    const distance = a.toDistance(b);\n    return distance < threshold;\n}\nclass PendingClick extends skytree_1.Actor {\n    constructor() {\n        super();\n        this.didClick = new observable_1.TypedEvent();\n        this.didSingleClick = new observable_1.TypedEvent();\n        this.didDoubleClick = new observable_1.TypedEvent();\n        this._evaluateLongPressLater = new time_1.Debounce({\n            duration: time_1.Duration.givenSeconds(0.5),\n            fn: async () => {\n                this.evaluateLongPress();\n            },\n        });\n    }\n    onActivate() {\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            this._evaluateLongPressLater.clear();\n        }));\n    }\n    pressButton(newPoint) {\n        if (this.isActive.value == false) {\n            return;\n        }\n        if (!pointIsNearPoint(newPoint, this._targetPoint)) {\n            this.reset();\n        }\n        switch (this._state) {\n            case \"idle\":\n                this._targetPoint = newPoint;\n                this._state = \"down\";\n                this._evaluateLongPressLater.invoke();\n                break;\n            case \"click\":\n                this._state = \"down2\";\n                break;\n            default:\n                break;\n        }\n    }\n    movePointer(newPoint) {\n        if (!pointIsNearPoint(newPoint, this._targetPoint)) {\n            this.reset();\n        }\n    }\n    releaseButton(newPoint) {\n        if (this.isActive.value == false) {\n            return;\n        }\n        if (!pointIsNearPoint(newPoint, this._targetPoint)) {\n            this.reset();\n        }\n        switch (this._state) {\n            case \"down\":\n                this._state = \"click\";\n                this.notifyClick();\n                break;\n            case \"down2\":\n                this.notifyDoubleClick();\n                break;\n            case \"idle\":\n            default:\n                break;\n        }\n    }\n    evaluateLongPress() {\n        switch (this._state) {\n            case \"down\":\n                this.notifyClick();\n                requestAnimationFrame(() => {\n                    this.notifyDoubleClick();\n                });\n                break;\n            case \"down2\":\n                this.notifyDoubleClick();\n                break;\n            case \"click\":\n                this.notifySingleClick();\n                break;\n            default:\n                this.reset();\n                break;\n        }\n    }\n    reset() {\n        this._targetPoint = undefined;\n        this._state = \"idle\";\n        this._evaluateLongPressLater.clear();\n    }\n    notifyClick() {\n        const screenPoint = this._targetPoint;\n        this.didClick.emit(screenPoint);\n    }\n    notifySingleClick() {\n        const screenPoint = this._targetPoint;\n        this.reset();\n        this.didSingleClick.emit(screenPoint);\n    }\n    notifyDoubleClick() {\n        const screenPoint = this._targetPoint;\n        this.reset();\n        this.didDoubleClick.emit(screenPoint);\n    }\n}\nexports.PendingClick = PendingClick;\n//# sourceMappingURL=PendingClick.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Debounce = void 0;\nclass Debounce {\n    constructor(props) {\n        this._timeout = null;\n        this.props = props;\n    }\n    invoke(args) {\n        this._lastArgs = args;\n        if (this._timeout != null) {\n            clearTimeout(this._timeout);\n        }\n        this._timeout = setTimeout(() => {\n            this.invokeNow();\n        }, this.props.duration.toMilliseconds());\n    }\n    clear() {\n        this._lastArgs = undefined;\n        if (this._timeout != null) {\n            clearTimeout(this._timeout);\n            this._timeout = null;\n        }\n    }\n    invokeNow() {\n        const args = this._lastArgs;\n        this.clear();\n        this.props.fn(args);\n    }\n}\nexports.Debounce = Debounce;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Duration = void 0;\nclass Duration {\n    constructor(milliseconds) {\n        this._milliseconds = milliseconds;\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    static givenMilliseconds(milliseconds) {\n        return new Duration(milliseconds);\n    }\n    static givenSeconds(seconds) {\n        return Duration.givenMilliseconds(seconds * 1000);\n    }\n    static givenMinutes(minutes) {\n        return Duration.givenSeconds(minutes * 60);\n    }\n    static givenHours(hours) {\n        return Duration.givenMinutes(hours * 60);\n    }\n    static givenDays(days) {\n        return Duration.givenHours(days * 24);\n    }\n    static givenInstantRange(start, end) {\n        return new Duration(end.toEpochMilliseconds() - start.toEpochMilliseconds());\n    }\n    static ofMinimum() {\n        return new Duration(0);\n    }\n    get isMinimum() {\n        return this._milliseconds === 0;\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Duration)) {\n            return false;\n        }\n        return this._milliseconds === other._milliseconds;\n    }\n    toMilliseconds() {\n        return this._milliseconds;\n    }\n    toSeconds() {\n        return this._milliseconds / 1000;\n    }\n    toMinutes() {\n        return this.toSeconds() / 60;\n    }\n    toHours() {\n        return this.toMinutes() / 60;\n    }\n    toDays() {\n        return this.toHours() / 24;\n    }\n    toDelay() {\n        return new Promise((resolve) => setTimeout(resolve, this._milliseconds));\n    }\n    withAddedMilliseconds(ms) {\n        return new Duration(this._milliseconds + ms);\n    }\n    withAddedSeconds(seconds) {\n        return Duration.givenSeconds(this.toSeconds() + seconds);\n    }\n    withAddedMinutes(minutes) {\n        return Duration.givenMinutes(this.toMinutes() + minutes);\n    }\n    withAddedHours(hours) {\n        return Duration.givenHours(this.toHours() + hours);\n    }\n    withAddedDays(days) {\n        return Duration.givenDays(this.toDays() + days);\n    }\n}\nexports.Duration = Duration;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Instant = void 0;\nclass Instant {\n    constructor(epochMilliseconds) {\n        this._epochMilliseconds = epochMilliseconds;\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    static ofNow() {\n        return new Instant(new Date().getTime());\n    }\n    static givenEpochMilliseconds(epochMilliseconds) {\n        if (typeof epochMilliseconds === \"string\") {\n            return new Instant(parseInt(epochMilliseconds));\n        }\n        else {\n            return new Instant(epochMilliseconds);\n        }\n    }\n    isEqual(other) {\n        if (other == null) {\n            return false;\n        }\n        if (!(other instanceof Instant)) {\n            return false;\n        }\n        return this._epochMilliseconds === other._epochMilliseconds;\n    }\n    toEpochMilliseconds() {\n        return this._epochMilliseconds;\n    }\n    toNativeDate() {\n        return new Date(this._epochMilliseconds);\n    }\n    toString() {\n        return this.toEpochMilliseconds().toString();\n    }\n    withAddedDuration(duration) {\n        return new Instant(this._epochMilliseconds + duration.toMilliseconds());\n    }\n}\nexports.Instant = Instant;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Throttle = void 0;\nclass Throttle {\n    constructor(props) {\n        this._timeout = null;\n        this._isBlocked = false;\n        this.props = props;\n    }\n    invoke(args) {\n        if (this._isBlocked) {\n            return;\n        }\n        this._isBlocked = true;\n        this._timeout = setTimeout(() => {\n            this.clear();\n        }, this.props.duration.toMilliseconds());\n        this.props.fn(args);\n    }\n    clear() {\n        this._isBlocked = false;\n        if (this._timeout != null) {\n            clearTimeout(this._timeout);\n            this._timeout = null;\n        }\n    }\n}\nexports.Throttle = Throttle;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TouchVisualizer = void 0;\nconst skytree_1 = require(\"skytree\");\nconst ElementStyle_1 = require(\"../ElementStyle\");\nclass TouchVisualizer extends skytree_1.Actor {\n    onActivate() {\n        const wrapper = this.addActor(WrapperStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: document.body,\n        }));\n        wrapper.element.id = \"TouchVisualizer\";\n        const point1 = this.addActor(PointStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: wrapper.element,\n        }));\n        point1.style.backgroundColor = \"red\";\n        const point2 = this.addActor(PointStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: wrapper.element,\n        }));\n        point2.style.backgroundColor = \"blue\";\n        this.cancelOnDeactivate(this.props.touchSupport.points.didChange.subscribe((points) => {\n            if (points.first != null) {\n                point1.style.transform = `translate(${points.first.x}px, ${points.first.y}px)`;\n                point1.addModifier(\"isVisible\");\n            }\n            else {\n                point1.removeModifier(\"isVisible\");\n            }\n            if (points.second != null) {\n                point2.style.transform = `translate(${points.second.x}px, ${points.second.y}px)`;\n                point2.addModifier(\"isVisible\");\n            }\n            else {\n                point2.removeModifier(\"isVisible\");\n            }\n        }));\n    }\n}\nexports.TouchVisualizer = TouchVisualizer;\nconst WrapperStyle = ElementStyle_1.ElementStyle.givenDefinition({\n    css: `\n    bottom: 0;\n    left: 0;\n    pointer-events: none;\n    position: absolute;\n    right: 0;\n    top: 0;\n    user-select: none;\n    z-index: 1000;\n  `,\n});\nconst PointStyle = ElementStyle_1.ElementStyle.givenDefinition({\n    css: `\n    background: rgba(255,255,255,0.9);\n    border-radius: 50%;\n    box-shadow: 0 0 0 5px rgba(255,255,255,.35);\n    display: none;\n    height: 35px;\n    left: -17.5px;\n    position: absolute;\n    top: -17.5px;\n    width: 35px;\n  `,\n    modifiers: {\n        isVisible: `\n      display: block;\n    `,\n    },\n});\n//# sourceMappingURL=TouchVisualizer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Preload = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst FontFaceObserver = require(\"fontfaceobserver\");\nconst skytree_1 = require(\"skytree\");\nconst blobGivenUrl_1 = require(\"../NetworkUtil/_internal/blobGivenUrl\");\nconst dataUrlGivenBlob_1 = require(\"../NetworkUtil/_internal/dataUrlGivenBlob\");\nconst videoMetadataGivenUrl_1 = require(\"../NetworkUtil/_internal/videoMetadataGivenUrl\");\nclass Preload extends skytree_1.Actor {\n    constructor() {\n        super(...arguments);\n        this.didLoadVideo = new observable_1.TypedEvent();\n        this.didLoadImage = new observable_1.TypedEvent();\n        this.didLoadFont = new observable_1.TypedEvent();\n        this._isReady = observable_1.Observable.givenValue(true, observable_1.Observable.isStrictEqual);\n        this.isReady = observable_1.ReadOnlyObservable.givenObservable(this._isReady);\n        this._videoMetadataByUrl = new Map();\n        this._imageDataUrlByUrl = new Map();\n        this._loadedFontSet = new Set();\n        this._loadingVideoSet = new Set();\n        this._loadingFontSet = new Set();\n        this._loadingImageSet = new Set();\n        this._requestedFontSet = new Set();\n    }\n    static get instance() {\n        if (this._instance == null) {\n            this._instance = new Preload();\n            this._instance.activate();\n        }\n        return this._instance;\n    }\n    onActivate() {\n        this._sequentialWorker = this.addActor(new skytree_1.SequentialWorker({}));\n    }\n    addImage(url, priority = 5) {\n        if (this._imageDataUrlByUrl.has(url)) {\n            return;\n        }\n        this._imageDataUrlByUrl.set(url, observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual));\n        this._loadingImageSet.add(url);\n        this._isReady.setValue(false);\n        this._sequentialWorker.addWork(async () => {\n            await this.loadImage(url);\n        }, undefined, priority);\n    }\n    addFont(fontStyle, priority = 5) {\n        if (this._requestedFontSet.has(fontStyle)) {\n            return;\n        }\n        this._isReady.setValue(false);\n        this._requestedFontSet.add(fontStyle);\n        this.loadGoogleFont(fontStyle);\n    }\n    addVideo(url, priority = 5) {\n        if (this._videoMetadataByUrl.has(url)) {\n            return;\n        }\n        this._videoMetadataByUrl.set(url, observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual));\n        this._loadingVideoSet.add(url);\n        this._isReady.setValue(false);\n        this._sequentialWorker.addWork(async () => {\n            await this.loadVideo(url);\n        }, undefined, priority);\n    }\n    toPreloadedImageUrl(imageUrl) {\n        if (!this._imageDataUrlByUrl.has(imageUrl)) {\n            this.addImage(imageUrl);\n        }\n        return this._imageDataUrlByUrl.get(imageUrl);\n    }\n    toVideoMetadataGivenUrl(url) {\n        if (!this._videoMetadataByUrl.has(url)) {\n            this.addVideo(url);\n        }\n        return this._videoMetadataByUrl.get(url);\n    }\n    ensureImageLoaded(imageUrl) {\n        if (!this._imageDataUrlByUrl.has(imageUrl)) {\n            this.addImage(imageUrl);\n        }\n        return new Promise((resolve) => {\n            const observable = this.toPreloadedImageUrl(imageUrl);\n            const receipt = observable.didChange.subscribe((value) => {\n                if (value == null) {\n                    return;\n                }\n                setTimeout(() => {\n                    receipt.cancel();\n                    resolve();\n                }, 1);\n            }, true);\n        });\n    }\n    ensureFontLoaded(fontStyle) {\n        if (this._loadedFontSet.has(fontStyle)) {\n            return Promise.resolve();\n        }\n        if (!this._loadingFontSet.has(fontStyle)) {\n            return Promise.reject(new Error(`This font style has not been defined. Call defineCustom() first.`));\n        }\n        return new Promise((resolve) => {\n            const handle = this.didLoadFont.subscribe((loadedTextStyle) => {\n                if (loadedTextStyle === fontStyle) {\n                    handle.cancel();\n                    resolve();\n                }\n            });\n        });\n    }\n    ensureVideoLoaded(url) {\n        if (!this._videoMetadataByUrl.has(url)) {\n            this.addVideo(url);\n        }\n        return new Promise((resolve) => {\n            const observable = this.toVideoMetadataGivenUrl(url);\n            const receipt = observable.didChange.subscribe((value) => {\n                if (value == null) {\n                    return;\n                }\n                setTimeout(() => {\n                    receipt.cancel();\n                    resolve();\n                }, 1);\n            }, true);\n        });\n    }\n    ensureAllLoaded() {\n        if (this._isReady.value === true) {\n            return Promise.resolve();\n        }\n        return new Promise((resolve) => {\n            const handle = this.isReady.didChange.subscribe((isReady) => {\n                if (isReady === true) {\n                    handle.cancel();\n                    resolve();\n                }\n            });\n        });\n    }\n    async loadImage(url) {\n        const blob = await blobGivenUrl_1.blobGivenUrl(url);\n        const dataUrl = await dataUrlGivenBlob_1.dataUrlGivenBlob(blob);\n        this._imageDataUrlByUrl.get(url).setValue(dataUrl);\n        this._loadingImageSet.delete(url);\n        this.didLoadImage.emit(url);\n        this.checkReady();\n    }\n    async loadVideo(url) {\n        const metadata = await videoMetadataGivenUrl_1.videoMetadataGivenUrl(url);\n        this._videoMetadataByUrl.get(url).setValue(metadata);\n        this._loadingVideoSet.delete(url);\n        this.didLoadVideo.emit(url);\n        this.checkReady();\n    }\n    loadGoogleFont(fontStyle) {\n        if (fontStyle == null) {\n            return;\n        }\n        if (this._loadingFontSet.has(fontStyle) ||\n            this._loadedFontSet.has(fontStyle)) {\n            return;\n        }\n        this._loadingFontSet.add(fontStyle);\n        const link = document.createElement(\"link\");\n        link.href = fontStyle.url;\n        link.rel = \"stylesheet\";\n        link.type = \"text/css\";\n        document.head.appendChild(link);\n        const font = new FontFaceObserver(fontStyle.fontFamily, {\n            weight: fontStyle.weight,\n            style: fontStyle.style,\n        });\n        font.load().then(() => {\n            this._loadingFontSet.delete(fontStyle);\n            this._loadedFontSet.add(fontStyle);\n            this.didLoadFont.emit(fontStyle);\n            this.checkReady();\n        });\n    }\n    checkReady() {\n        this._isReady.setValue(this._loadingFontSet.size === 0 &&\n            this._loadingImageSet.size === 0 &&\n            this._loadingVideoSet.size === 0);\n    }\n}\nexports.Preload = Preload;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.videoMetadataGivenUrl = void 0;\nconst geometry_1 = require(\"@anderjason/geometry\");\nfunction videoMetadataGivenUrl(url) {\n    return new Promise((resolve, reject) => {\n        const video = document.createElement(\"video\");\n        video.addEventListener(\"loadedmetadata\", () => {\n            resolve({\n                url,\n                contentSize: geometry_1.Size2.givenWidthHeight(video.videoWidth, video.videoHeight),\n            });\n        }, false);\n        video.addEventListener(\"error\", () => {\n            reject(new Error(\"Could not load image\"));\n        });\n        video.src = url;\n    });\n}\nexports.videoMetadataGivenUrl = videoMetadataGivenUrl;\n//# sourceMappingURL=videoMetadataGivenUrl.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScreenSize = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst time_1 = require(\"@anderjason/time\");\nconst geometry_1 = require(\"@anderjason/geometry\");\nconst skytree_1 = require(\"skytree\");\nclass ScreenSize extends skytree_1.Actor {\n    constructor() {\n        super();\n        this._availableSize = observable_1.Observable.ofEmpty(geometry_1.Size2.isEqual);\n        this.availableSize = observable_1.ReadOnlyObservable.givenObservable(this._availableSize);\n        this._scrollbarSize = observable_1.Observable.ofEmpty(geometry_1.Size2.isEqual);\n        this.scrollbarSize = observable_1.ReadOnlyObservable.givenObservable(this._scrollbarSize);\n        this.isPollingEnabled = observable_1.Observable.givenValue(true, observable_1.Observable.isStrictEqual);\n        this._measureScrollbarLater = new time_1.Debounce({\n            fn: async () => {\n                this.measureScrollbar();\n            },\n            duration: time_1.Duration.givenMilliseconds(250),\n        });\n        window.addEventListener(\"resize\", () => {\n            this.recalculateSize();\n        });\n        this.recalculateSize();\n        if (this._availableSize.value.isZero) {\n            requestAnimationFrame(() => {\n                this.recalculateSize();\n            });\n        }\n        this.addActor(new skytree_1.ConditionalActivator({\n            input: this.isPollingEnabled,\n            fn: (v) => v,\n            actor: new skytree_1.Timer({\n                fn: () => {\n                    this.recalculateSize();\n                },\n                isRepeating: true,\n                duration: time_1.Duration.givenSeconds(0.25),\n            }),\n        }));\n    }\n    static get instance() {\n        if (this._instance == null) {\n            this._instance = new ScreenSize();\n            this._instance.activate();\n        }\n        return this._instance;\n    }\n    measureScrollbar() {\n        const measureScrollbarOuter = document.createElement(\"div\");\n        measureScrollbarOuter.style.position = \"absolute\";\n        measureScrollbarOuter.style.visibility = \"hidden\";\n        measureScrollbarOuter.style.overflow = \"scroll\";\n        document.body.appendChild(measureScrollbarOuter);\n        const measureScrollbarInner = document.createElement(\"div\");\n        measureScrollbarOuter.appendChild(measureScrollbarInner);\n        const scrollbarWidth = measureScrollbarOuter.offsetWidth - measureScrollbarInner.offsetWidth;\n        const scrollbarHeight = measureScrollbarOuter.offsetHeight - measureScrollbarInner.offsetHeight;\n        this._scrollbarSize.setValue(geometry_1.Size2.givenWidthHeight(scrollbarWidth, scrollbarHeight));\n        document.body.removeChild(measureScrollbarOuter);\n    }\n    recalculateSize() {\n        this._availableSize.setValue(geometry_1.Size2.givenWidthHeight(Math.min(window.outerWidth, window.innerWidth), Math.min(window.innerHeight, window.outerHeight)));\n        this._measureScrollbarLater.invoke();\n    }\n}\nexports.ScreenSize = ScreenSize;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScrollArea = exports.styleGivenHexColor = void 0;\nconst geometry_1 = require(\"@anderjason/geometry\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst util_1 = require(\"@anderjason/util\");\nconst ManagedElement_1 = require(\"../ManagedElement\");\nconst ElementStyle_1 = require(\"../ElementStyle\");\nconst skytree_1 = require(\"skytree\");\nconst stylesByHexColor = new Map();\nfunction styleGivenHexColor(color) {\n    const hexColor = color.toHexString();\n    if (!stylesByHexColor.has(hexColor)) {\n        const hexColorIdle = color\n            .withAlpha(util_1.Percent.givenFraction(0.2, 1))\n            .toHexString();\n        const result = ElementStyle_1.ElementStyle.givenDefinition({\n            css: `\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n        transition: 0.2s ease color;\n        color: ${hexColorIdle};\n\n        &:hover {\n          color: ${hexColor};\n        }\n\n        &::-webkit-scrollbar {\n          width: 22px;\n          height: 22px;\n          border-radius: 13px;\n          background-clip: padding-box;\n        }\n    \n        &::-webkit-scrollbar-corner {\n          background: transparent;\n        }\n\n        &::-webkit-scrollbar-thumb {\n          border-radius: 13px;\n          background-clip: padding-box;\n          border: 8px solid transparent;\n          box-shadow: inset 0 0 0 10px;\n        }\n      `,\n        });\n        stylesByHexColor.set(hexColor, result);\n    }\n    return stylesByHexColor.get(hexColor);\n}\nexports.styleGivenHexColor = styleGivenHexColor;\nclass ScrollArea extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        this._scrollbarSize = observable_1.Observable.ofEmpty();\n        this.scrollbarSize = observable_1.ReadOnlyObservable.givenObservable(this._scrollbarSize);\n        switch (props.direction) {\n            case \"none\":\n                this._scrollbarSize.setValue(geometry_1.Size2.ofZero());\n                break;\n            case \"horizontal\":\n                this._scrollbarSize.setValue(geometry_1.Size2.givenWidthHeight(0, 22));\n                break;\n            case \"vertical\":\n                this._scrollbarSize.setValue(geometry_1.Size2.givenWidthHeight(22, 0));\n                break;\n            case \"both\":\n                this._scrollbarSize.setValue(geometry_1.Size2.givenWidthHeight(22, 22));\n                break;\n        }\n    }\n    get element() {\n        return this._wrapper.element;\n    }\n    onActivate() {\n        this._wrapper = this.addActor(ManagedElement_1.ManagedElement.givenDefinition({\n            tagName: \"div\",\n            parentElement: this.props.parentElement,\n        }));\n        if (this.props.backgroundColor != null) {\n            this._wrapper.style.backgroundColor = this.props.backgroundColor.toHexString();\n        }\n        let observableColor;\n        if (observable_1.Observable.isObservable(this.props.scrollPositionColor)) {\n            observableColor = this.props.scrollPositionColor;\n        }\n        else {\n            observableColor = observable_1.Observable.givenValue(this.props.scrollPositionColor);\n        }\n        this.cancelOnDeactivate(observableColor.didChange.subscribe((color) => {\n            const elementStyle = styleGivenHexColor(color);\n            if (elementStyle == null) {\n                return;\n            }\n            this._wrapper.element.className = elementStyle.toCombinedClassName();\n        }, true));\n        const onDirectionChanged = (direction) => {\n            switch (direction) {\n                case \"none\":\n                    this._wrapper.style.overflowX = \"hidden\";\n                    this._wrapper.style.overflowY = \"hidden\";\n                    break;\n                case \"vertical\":\n                    this._wrapper.style.overflowX = \"hidden\";\n                    this._wrapper.style.overflowY = \"scroll\";\n                    break;\n                case \"horizontal\":\n                    this._wrapper.style.overflowX = \"scroll\";\n                    this._wrapper.style.overflowY = \"hidden\";\n                    break;\n                case \"both\":\n                    this._wrapper.style.overflowX = \"scroll\";\n                    this._wrapper.style.overflowY = \"scroll\";\n                    break;\n                default:\n                    throw new Error(\"Unsupported direction\");\n            }\n        };\n        if (observable_1.Observable.isObservable(this.props.direction)) {\n            this.cancelOnDeactivate(this.props.direction.didChange.subscribe((direction) => {\n                onDirectionChanged(direction);\n            }, true));\n        }\n        else {\n            onDirectionChanged(this.props.direction);\n        }\n    }\n}\nexports.ScrollArea = ScrollArea;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScrollWatcher = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst geometry_1 = require(\"@anderjason/geometry\");\nclass InternalScrollWatcher extends skytree_1.Actor {\n    onActivate() {\n        const onScroll = () => {\n            this.props.position.setValue(geometry_1.Point2.givenXY(this.props.element.scrollLeft, this.props.element.scrollTop));\n        };\n        this.props.element.addEventListener(\"scroll\", onScroll);\n        onScroll();\n        this.cancelOnDeactivate(new observable_1.Receipt(() => {\n            this.props.element.removeEventListener(\"scroll\", onScroll);\n            this.props.position.setValue(undefined);\n        }));\n    }\n}\nclass ScrollWatcher extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        this._position = observable_1.Observable.ofEmpty(geometry_1.Point2.isEqual);\n        this.position = observable_1.ReadOnlyObservable.givenObservable(this._position);\n        if (observable_1.Observable.isObservable(props.element)) {\n            this._element = props.element;\n        }\n        else {\n            this._element = observable_1.Observable.givenValue(props.element);\n        }\n    }\n    onActivate() {\n        this.cancelOnDeactivate(this._element.didChange.subscribe((element) => {\n            if (this._activeWatcher != null) {\n                this.removeActor(this._activeWatcher);\n                this._activeWatcher = undefined;\n            }\n            if (element != null) {\n                this._activeWatcher = this.addActor(new InternalScrollWatcher({\n                    element,\n                    position: this._position,\n                }));\n            }\n        }, true));\n    }\n}\nexports.ScrollWatcher = ScrollWatcher;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SequentialChoice = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nclass SequentialChoice {\n    constructor(props) {\n        this._nextOption = observable_1.Observable.ofEmpty();\n        this.nextOption = observable_1.ReadOnlyObservable.givenObservable(this._nextOption);\n        this._previousOption = observable_1.Observable.ofEmpty();\n        this.previousOption = observable_1.ReadOnlyObservable.givenObservable(this._previousOption);\n        this.setCurrentIndex = (idx) => {\n            const len = this.props.options.length;\n            if (this.props.options == null || len === 0) {\n                this._currentIdx = undefined;\n            }\n            this.currentOption.setValue(this.props.options[idx % len]);\n            if (len > 1) {\n                this._nextOption.setValue(this.props.options[(idx + 1) % len]);\n                if (idx < 1) {\n                    const previousIdx = len - (Math.abs(idx - 1) % len);\n                    this._previousOption.setValue(this.props.options[previousIdx]);\n                }\n                else {\n                    this._previousOption.setValue(this.props.options[(idx - 1) % len]);\n                }\n            }\n            this._currentIdx = idx;\n        };\n        this.selectNextOption = () => {\n            this.setCurrentIndex(this._currentIdx + 1);\n        };\n        this.selectPreviousOption = () => {\n            if (this._currentIdx === 0) {\n                this.setCurrentIndex(this.props.options.length - 1);\n            }\n            else {\n                this.setCurrentIndex(this._currentIdx - 1);\n            }\n        };\n        this.props = props;\n        this.currentOption =\n            props.output || observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        if (props.options.length > 0) {\n            // is an option already selected?\n            if (this.currentOption.value != null) {\n                // is the selected option in the list?\n                const index = props.options.indexOf(this.currentOption.value);\n                if (index !== -1) {\n                    this.setCurrentIndex(index);\n                }\n                else {\n                    // if not, ignore the selection\n                    this.currentOption.setValue(undefined);\n                }\n            }\n            // if there's no selection, set the first item\n            if (this.currentOption.value == null) {\n                this.setCurrentIndex(0);\n            }\n        }\n    }\n}\nexports.SequentialChoice = SequentialChoice;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StepDelayBinding = void 0;\nconst observable_1 = require(\"@anderjason/observable\");\nconst skytree_1 = require(\"skytree\");\nclass StepDelayBinding extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        if (props.output != null) {\n            this._output = props.output;\n        }\n        else {\n            this._output = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        }\n        this.output = observable_1.ReadOnlyObservable.givenObservable(this._output);\n    }\n    onActivate() {\n        const values = [];\n        this.cancelOnDeactivate(this.props.input.didChange.subscribe((input) => {\n            values.push(input);\n            if (values.length > this.props.stepsBehind) {\n                this._output.setValue(values.shift());\n            }\n        }, true));\n    }\n}\nexports.StepDelayBinding = StepDelayBinding;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextInputBinding = void 0;\nconst skytree_1 = require(\"skytree\");\nconst observable_1 = require(\"@anderjason/observable\");\nconst util_1 = require(\"@anderjason/util\");\nclass TextInputBinding extends skytree_1.Actor {\n    constructor(props) {\n        super(props);\n        this._displayText = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.displayText = observable_1.ReadOnlyObservable.givenObservable(this._displayText);\n        this._isEmpty = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.isEmpty = observable_1.ReadOnlyObservable.givenObservable(this._isEmpty);\n        this._rawInputValue = observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n        this.rawInputText = observable_1.ReadOnlyObservable.givenObservable(this._rawInputValue);\n        if (props.inputElement == null) {\n            throw new Error(\"Input is required\");\n        }\n        const nodeName = props.inputElement.nodeName.toLowerCase();\n        if (nodeName !== \"input\" && nodeName !== \"textarea\") {\n            throw new Error(`Expected an input or textarea element, but got '${nodeName}'`);\n        }\n        this._inputElement = props.inputElement;\n        this.value =\n            this.props.value || observable_1.Observable.ofEmpty(observable_1.Observable.isStrictEqual);\n    }\n    onActivate() {\n        this._previousDisplayText = this._inputElement.value;\n        this._caretPosition = this._inputElement.selectionStart;\n        this._inputElement.addEventListener(\"keydown\", (e) => {\n            this._caretPosition = this._inputElement.selectionStart;\n            this._previousDisplayText = this._inputElement.value;\n            this._rawInputValue.setValue(this._inputElement.value);\n            this._isEmpty.setValue(util_1.StringUtil.stringIsEmpty(this._inputElement.value));\n        });\n        this._inputElement.addEventListener(\"input\", (e) => {\n            const displayText = this._inputElement.value;\n            let value = this.props.valueGivenDisplayText(displayText);\n            let overrideText;\n            if (this.props.overrideDisplayText != null) {\n                overrideText = this.props.overrideDisplayText({\n                    displayText,\n                    value,\n                    previousDisplayText: this._previousDisplayText,\n                    previousValue: this.value.value,\n                });\n                if (overrideText == null) {\n                    this.onOverride(this._previousDisplayText, true);\n                    return;\n                }\n                else {\n                    this.onOverride(overrideText, false);\n                    value = this.props.valueGivenDisplayText(overrideText);\n                }\n            }\n            this.value.setValue(value);\n            if (overrideText != null) {\n                requestAnimationFrame(() => {\n                    this._inputElement.value = overrideText;\n                    this._rawInputValue.setValue(this._inputElement.value);\n                    this._isEmpty.setValue(util_1.StringUtil.stringIsEmpty(this._inputElement.value));\n                });\n            }\n        });\n        this.cancelOnDeactivate(this.value.didChange.subscribe((value) => {\n            const displayText = this.props.displayTextGivenValue(value);\n            this._inputElement.value = displayText || \"\";\n            this._rawInputValue.setValue(this._inputElement.value);\n            this._isEmpty.setValue(util_1.StringUtil.stringIsEmpty(this._inputElement.value));\n        }, true));\n    }\n    onOverride(text, setCaretPosition) {\n        this._previousDisplayText = text;\n        this._inputElement.value = text;\n        if (setCaretPosition) {\n            this._inputElement.setSelectionRange(this._caretPosition, this._caretPosition);\n        }\n        this._rawInputValue.setValue(text);\n        this._isEmpty.setValue(util_1.StringUtil.stringIsEmpty(text));\n    }\n}\nexports.TextInputBinding = TextInputBinding;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transform = exports.matrix3dOfIdentity = void 0;\nconst geometry_1 = require(\"@anderjason/geometry\");\nconst matrixTransformGivenCorners_1 = require(\"./_internal/matrixTransformGivenCorners\");\nfunction vectorWithAppliedVectors(input, a, b) {\n    const vectorA = a.withMultipliedScalar(input.x);\n    const vectorB = b.withMultipliedScalar(input.y);\n    return vectorA.withAddedVector(vectorB);\n}\nfunction matrix3dOfIdentity() {\n    let matrix = [];\n    for (let i = 0; i < 16; i++) {\n        i % 5 == 0 ? matrix.push(1) : matrix.push(0);\n    }\n    return matrix;\n}\nexports.matrix3dOfIdentity = matrix3dOfIdentity;\nfunction matrix3dGivenNumbers(source) {\n    if (source == null) {\n        return undefined;\n    }\n    if (source && source.constructor === Array) {\n        let values = source\n            .filter((value) => typeof value === \"number\")\n            .filter((value) => !isNaN(value));\n        if (source.length === 6 && values.length === 6) {\n            let matrix = matrix3dOfIdentity();\n            matrix[0] = values[0];\n            matrix[1] = values[1];\n            matrix[4] = values[2];\n            matrix[5] = values[3];\n            matrix[12] = values[4];\n            matrix[13] = values[5];\n            return matrix;\n        }\n        else if (source.length === 16 && values.length === 16) {\n            return source;\n        }\n    }\n    throw new TypeError(`Expected a number[] with length 6 or 16, but got '${source}'`);\n}\nclass Transform {\n    constructor(matrix3d) {\n        this.isEqual = (other) => {\n            if (other == null) {\n                return false;\n            }\n            if (!(other instanceof Transform)) {\n                return false;\n            }\n            return this.matrix3d.every((number, idx) => {\n                return other.matrix3d[idx] === number;\n            });\n        };\n        if (matrix3d == null) {\n            throw new Error(\"Matrix is required\");\n        }\n        this.matrix3d = matrix3d;\n    }\n    static givenCssMatrixTransform(source) {\n        if (typeof source === \"string\") {\n            let match = source.match(/matrix(3d)?\\(([^)]+)\\)/);\n            if (match) {\n                let raw = match[2].split(\", \").map(parseFloat);\n                const matrix3d = matrix3dGivenNumbers(raw);\n                return new Transform(matrix3d);\n            }\n        }\n        throw new Error(\"Could not create Transform from CSS matrix transform string\");\n    }\n    static givenMatrix3D(input) {\n        return new Transform(input);\n    }\n    static givenCornersAndSize(corners, size) {\n        const matrix3d = matrix3dGivenNumbers(matrixTransformGivenCorners_1.matrixTransformGivenCorners(corners, size));\n        if (matrix3d == null) {\n            return undefined;\n        }\n        return new Transform(matrix3d);\n    }\n    static givenScale(scale) {\n        return new Transform(matrix3dGivenNumbers([scale.width, 0, 0, scale.height, 0, 0]));\n    }\n    static givenPoints(source1, source2, destination1, destination2, rotate) {\n        const vSource1 = geometry_1.Vector2.givenPoint(source1);\n        const vSource2 = geometry_1.Vector2.givenPoint(source2);\n        const vDest1 = geometry_1.Vector2.givenPoint(destination1);\n        const vDest2 = geometry_1.Vector2.givenPoint(destination2);\n        // Source vector.\n        const a = vSource2.withSubtractedVector(vSource1);\n        // Destination vector.\n        const b = vDest2.withSubtractedVector(vDest1);\n        let x;\n        let y;\n        if (rotate) {\n            const alen = a.toDotProduct(a);\n            const sig = a.toDotProduct(b);\n            const del = a.x * b.y - a.y * b.x;\n            x = sig / alen;\n            y = del / alen;\n        }\n        else {\n            const alen = Math.sqrt(a.toDotProduct(a));\n            const blen = Math.sqrt(a.toDotProduct(b));\n            const scale = blen / alen;\n            x = scale;\n            y = 0;\n        }\n        const rotateScaleA = geometry_1.Vector2.givenXY(x, y);\n        const rotateScaleB = geometry_1.Vector2.givenXY(-y, x);\n        // Position of source1 if rotation is applied.\n        const vectorA = rotateScaleA.withMultipliedScalar(vSource1.x);\n        const vectorB = rotateScaleB.withMultipliedScalar(vSource1.y);\n        const rs0 = vectorA.withAddedVector(vectorB);\n        // Since d[0] = rs0 + t\n        const t = vDest1.withSubtractedVector(rs0);\n        const matrix = [\n            rotateScaleA.x,\n            rotateScaleA.y,\n            0,\n            0,\n            rotateScaleB.x,\n            rotateScaleB.y,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            t.x,\n            t.y,\n            0,\n            0,\n        ];\n        return new Transform(matrix);\n    }\n    static isEqual(a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return a.isEqual(b);\n    }\n    get is2d() {\n        return this.matrix3d[2] === 0 && this.matrix3d[3] === 0;\n    }\n    toTranslation() {\n        const e = this.matrix3d[12];\n        const f = this.matrix3d[13];\n        return geometry_1.Point2.givenXY(e, f);\n    }\n    toCssTranslation() {\n        const translation = this.toTranslation();\n        return `translate(${translation.x}px, ${translation.y}px)`;\n    }\n    toRotation() {\n        const a = this.matrix3d[0];\n        const b = this.matrix3d[1];\n        const c = this.matrix3d[4];\n        const d = this.matrix3d[5];\n        if (a != 0 || b != 0) {\n            const r = Math.sqrt(a * a + b * b);\n            const radians = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            return geometry_1.Rotation.givenRadians(radians);\n        }\n        else if (c != 0 || d != 0) {\n            const s = Math.sqrt(c * c + d * d);\n            const radians = Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            return geometry_1.Rotation.givenRadians(radians);\n        }\n        else {\n            return geometry_1.Rotation.givenDegrees(0);\n        }\n    }\n    toCssRotation() {\n        const rotation = this.toRotation();\n        return `rotate(${rotation.toDegrees()}deg)`;\n    }\n    toScale() {\n        const a = this.matrix3d[0];\n        const b = this.matrix3d[1];\n        const c = this.matrix3d[4];\n        const d = this.matrix3d[5];\n        const delta = a * d - b * c;\n        if (a != 0 || b != 0) {\n            const r = Math.sqrt(a * a + b * b);\n            return geometry_1.Size2.givenWidthHeight(r, delta / r);\n        }\n        else if (c != 0 || d != 0) {\n            const s = Math.sqrt(c * c + d * d);\n            return geometry_1.Size2.givenWidthHeight(delta / s, s);\n        }\n        else {\n            // a = b = c = d = 0\n            return geometry_1.Size2.ofZero();\n        }\n    }\n    toCssScale() {\n        const scale = this.toScale();\n        return `scale(${scale.width}, ${scale.height})`;\n    }\n    toSkewX() {\n        const a = this.matrix3d[0];\n        const b = this.matrix3d[1];\n        const c = this.matrix3d[4];\n        const d = this.matrix3d[5];\n        if (a != 0 || b != 0) {\n            const r = Math.sqrt(a * a + b * b);\n            const radians = Math.atan((a * c + b * d) / (r * r));\n            return geometry_1.Rotation.givenRadians(radians);\n        }\n        else {\n            return geometry_1.Rotation.ofZero();\n        }\n    }\n    toSkewY() {\n        const a = this.matrix3d[0];\n        const b = this.matrix3d[1];\n        const c = this.matrix3d[4];\n        const d = this.matrix3d[5];\n        if (a != 0 || b != 0) {\n            return geometry_1.Rotation.ofZero();\n        }\n        else if (c != 0 || d != 0) {\n            const s = Math.sqrt(c * c + d * d);\n            const radians = Math.atan((a * c + b * d) / (s * s));\n            return geometry_1.Rotation.givenRadians(radians);\n        }\n        else {\n            return geometry_1.Rotation.ofZero();\n        }\n    }\n    toCssSkew() {\n        const skewX = this.toSkewX();\n        const skewY = this.toSkewY();\n        return `skew(${skewX.toDegrees()}deg, ${skewY.toDegrees()}deg)`;\n    }\n    toCssMatrixTransform() {\n        return `matrix3d(${this.matrix3d.join(\", \")})`;\n    }\n    toCssCombinedTransform() {\n        const parts = [\n            this.toCssTranslation(),\n            this.toCssRotation(),\n            this.toCssScale(),\n            this.toCssSkew(),\n        ];\n        return parts.join(\" \");\n    }\n    toTranslateVector() {\n        const e = this.matrix3d[12];\n        const f = this.matrix3d[13];\n        return geometry_1.Vector2.givenXY(e, f);\n    }\n    toVectors() {\n        return [\n            geometry_1.Vector2.givenXY(this.matrix3d[0], this.matrix3d[1]),\n            geometry_1.Vector2.givenXY(this.matrix3d[4], this.matrix3d[5]),\n        ];\n    }\n    toTransformedPoint(input) {\n        const inVertex = [input.x, input.y, 0, 1];\n        const outVertex = [0, 0, 0, 0];\n        for (let col = 0; col < 4; ++col) {\n            let sum = 0;\n            for (let row = 0; row < 4; ++row) {\n                sum += this.matrix3d[row * 4 + col] * inVertex[row];\n            }\n            outVertex[col] = sum;\n        }\n        for (let i = 0; i < 4; ++i) {\n            outVertex[i] = outVertex[i] / outVertex[3];\n        }\n        return geometry_1.Point2.givenXY(outVertex[0], outVertex[1]);\n    }\n    withCascade(other) {\n        const [otherA, otherB] = other.toVectors();\n        const [thisA, thisB] = this.toVectors();\n        const resultA = vectorWithAppliedVectors(otherA, thisA, thisB);\n        const resultB = vectorWithAppliedVectors(otherB, thisA, thisB);\n        const resultC = vectorWithAppliedVectors(this.toTranslateVector(), otherA, otherB);\n        const resultVector = other.toTranslateVector().withAddedVector(resultC);\n        const newMatrix = [...this.matrix3d];\n        newMatrix[0] = resultA.x;\n        newMatrix[1] = resultA.y;\n        newMatrix[4] = resultB.x;\n        newMatrix[5] = resultB.y;\n        newMatrix[12] = resultVector.x;\n        newMatrix[13] = resultVector.y;\n        return new Transform(newMatrix);\n    }\n    withTranslation(point) {\n        const newMatrix = [...this.matrix3d];\n        newMatrix[12] = point.x;\n        newMatrix[13] = point.y;\n        return new Transform(newMatrix);\n    }\n}\nexports.Transform = Transform;\nTransform.identity = new Transform([\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n    0,\n    0,\n    0,\n    0,\n    1,\n]);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.matrixTransformGivenCorners = void 0;\nconst Matrix_1 = require(\"./Matrix\");\nconst Vector_1 = require(\"./Vector\");\nfunction matrixTransformGivenCorners(corners, size) {\n    const { width, height } = size;\n    const fromPts = [\n        {\n            x: 0,\n            y: 0,\n        },\n        {\n            x: 0,\n            y: height,\n        },\n        {\n            x: width,\n            y: 0,\n        },\n        {\n            x: width,\n            y: height,\n        },\n    ];\n    const toPts = [\n        {\n            x: corners.leftTop.x,\n            y: corners.leftTop.y,\n        },\n        {\n            x: corners.leftBottom.x,\n            y: corners.leftBottom.y,\n        },\n        {\n            x: corners.rightTop.x,\n            y: corners.rightTop.y,\n        },\n        {\n            x: corners.rightBottom.x,\n            y: corners.rightBottom.y,\n        },\n    ];\n    const E = Matrix_1.Matrix.givenRows([\n        [\n            fromPts[0].x,\n            fromPts[0].y,\n            1,\n            0,\n            0,\n            0,\n            -fromPts[0].x * toPts[0].x,\n            -fromPts[0].y * toPts[0].x,\n        ],\n        [\n            0,\n            0,\n            0,\n            fromPts[0].x,\n            fromPts[0].y,\n            1,\n            -fromPts[0].x * toPts[0].y,\n            -fromPts[0].y * toPts[0].y,\n        ],\n        [\n            fromPts[1].x,\n            fromPts[1].y,\n            1,\n            0,\n            0,\n            0,\n            -fromPts[1].x * toPts[1].x,\n            -fromPts[1].y * toPts[1].x,\n        ],\n        [\n            0,\n            0,\n            0,\n            fromPts[1].x,\n            fromPts[1].y,\n            1,\n            -fromPts[1].x * toPts[1].y,\n            -fromPts[1].y * toPts[1].y,\n        ],\n        [\n            fromPts[2].x,\n            fromPts[2].y,\n            1,\n            0,\n            0,\n            0,\n            -fromPts[2].x * toPts[2].x,\n            -fromPts[2].y * toPts[2].x,\n        ],\n        [\n            0,\n            0,\n            0,\n            fromPts[2].x,\n            fromPts[2].y,\n            1,\n            -fromPts[2].x * toPts[2].y,\n            -fromPts[2].y * toPts[2].y,\n        ],\n        [\n            fromPts[3].x,\n            fromPts[3].y,\n            1,\n            0,\n            0,\n            0,\n            -fromPts[3].x * toPts[3].x,\n            -fromPts[3].y * toPts[3].x,\n        ],\n        [\n            0,\n            0,\n            0,\n            fromPts[3].x,\n            fromPts[3].y,\n            1,\n            -fromPts[3].x * toPts[3].y,\n            -fromPts[3].y * toPts[3].y,\n        ],\n    ]);\n    const inverseE = E.withInverse();\n    if (inverseE == null) {\n        return undefined;\n    }\n    const vector = new Vector_1.Vector([\n        toPts[0].x,\n        toPts[0].y,\n        toPts[1].x,\n        toPts[1].y,\n        toPts[2].x,\n        toPts[2].y,\n        toPts[3].x,\n        toPts[3].y,\n    ]);\n    const r = vector.withMultipliedMatrix(inverseE);\n    const transformMatrix = Matrix_1.Matrix.givenRows([\n        [r.elements[0], r.elements[1], 0, r.elements[2]],\n        [r.elements[3], r.elements[4], 0, r.elements[5]],\n        [0, 0, 1, 0],\n        [r.elements[6], r.elements[7], 0, 1],\n    ]);\n    const result = [];\n    for (var i = 0; i <= 3; i++) {\n        for (var j = 0; j <= 3; j++) {\n            result.push(transformMatrix.toOptionalValueGivenRowAndColumn(j, i));\n        }\n    }\n    return result;\n}\nexports.matrixTransformGivenCorners = matrixTransformGivenCorners;\n//# sourceMappingURL=matrixTransformGivenCorners.js.map","import { dataUrlGivenUrl } from \"./_internal/dataUrlGivenUrl\";\nimport { blobGivenUrl } from \"./_internal/blobGivenUrl\";\nimport { imageBitmapGivenUrl } from \"./_internal/imageBitmapGivenUrl\";\nimport { scriptGivenUrl } from \"./_internal/scriptGivenUrl\";\nimport { dataUrlGivenBlob } from \"./_internal/dataUrlGivenBlob\";\n\nexport class NetworkUtil {\n  static blobGivenUrl = blobGivenUrl;\n  static dataUrlGivenUrl = dataUrlGivenUrl;\n  static dataUrlGivenBlob = dataUrlGivenBlob;\n  static imageBitmapGivenUrl = imageBitmapGivenUrl;\n  static scriptGivenUrl = scriptGivenUrl;\n}\n","import { blobGivenUrl } from \"./blobGivenUrl\";\nimport { dataUrlGivenBlob } from \"./dataUrlGivenBlob\";\n\nexport async function dataUrlGivenUrl(url: string): Promise<string> {\n  const blob = await blobGivenUrl(url);\n  const dataUrl = await dataUrlGivenBlob(blob);\n\n  return dataUrl;\n}\n","export function imageBitmapGivenUrl(url: string): Promise<ImageBitmap> {\n  return new Promise((resolve, reject) => {\n    const img = document.createElement(\"img\");\n\n    img.onload = () => {\n      resolve(img as any);\n    };\n\n    img.onerror = () => {\n      reject(new Error(\"Could not load image\"));\n    };\n\n    img.crossOrigin = \"anonymous\";\n    img.src = url;\n  });\n}\n","export function scriptGivenUrl(url: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.type = \"text/javascript\";\n    script.onload = () => {\n      resolve();\n    };\n    script.onerror = () => {\n      reject();\n    };\n    script.src = url;\n\n    document.head.appendChild(script);\n  });\n}\n","import {\n  Observable,\n  ReadOnlyObservable,\n  Receipt,\n} from \"@anderjason/observable\";\nimport { ObjectUtil, ValuePath } from \"@anderjason/util\";\nimport { UndoContext } from \"../UndoContext\";\nimport { Actor, PathBinding } from \"skytree\";\nimport { ObservableStateBinding } from \"./_internal/ObservableStateBinding\";\n\nexport interface ObservableStateProps {\n  initialState?: any;\n}\n\nexport interface ObservableStateBindingDefinition<T> {\n  valuePath: ValuePath;\n\n  output?: Observable<T>;\n  partialStateGivenOutputValue?: (outputValue: T) => any;\n  outputValueGivenPartialState?: (partialState: any) => T;\n}\n\nfunction clone(input: unknown): unknown {\n  if (typeof input === \"object\") {\n    return ObjectUtil.objectWithDeepMerge({}, input);\n  } else if (Array.isArray(input)) {\n    return ObjectUtil.objectWithDeepMerge([], input);\n  } else {\n    return input;\n  }\n}\n\nexport class ObservableState extends Actor<ObservableStateProps> {\n  private _state = Observable.ofEmpty<unknown>(Observable.isStrictEqual);\n  readonly state = ReadOnlyObservable.givenObservable(this._state);\n\n  private _undoContext: UndoContext;\n  private _pathBindings = new Set<PathBinding<unknown, unknown>>();\n\n  onActivate() {\n    this._undoContext = new UndoContext<unknown>(\n      clone(this.props.initialState || {}),\n      10\n    );\n\n    this.cancelOnDeactivate(\n      this._undoContext.output.didChange.subscribe((undoStep) => {\n        this._state.setValue(clone(undoStep));\n      }, true)\n    );\n  }\n\n  get undoContext(): UndoContext {\n    return this._undoContext;\n  }\n\n  pushCurrentState(): void {\n    if (this.state.value == null) {\n      return;\n    }\n\n    this._undoContext.pushStep(this.state.value);\n  }\n\n  subscribe(\n    valuePath: ValuePath,\n    fn: (value: any) => void,\n    includeLast = false\n  ): Receipt {\n    const binding = this.addActor(\n      new PathBinding({\n        input: this._state,\n        path: valuePath,\n      })\n    );\n\n    this._pathBindings.add(binding);\n\n    const innerHandle = this.cancelOnDeactivate(\n      binding.output.didChange.subscribe((value) => {\n        fn(value);\n      }, includeLast)\n    );\n\n    return new Receipt(() => {\n      this._pathBindings.delete(binding);\n\n      innerHandle.cancel();\n      this.removeCancelOnDeactivate(innerHandle);\n      this.removeActor(binding);\n    });\n  }\n\n  toBinding<T>(\n    definition: ObservableStateBindingDefinition<T>\n  ): ObservableStateBinding<T> {\n    return new ObservableStateBinding<T>({\n      observableState: this,\n      ...definition,\n    });\n  }\n\n  toOptionalValueGivenPath(path: ValuePath): any {\n    return clone(\n      ObjectUtil.optionalValueAtPathGivenObject(this._state.value, path)\n    );\n  }\n\n  update(path: ValuePath, inputValue: any): boolean {\n    const currentValue = ObjectUtil.optionalValueAtPathGivenObject(\n      this._state.value,\n      path\n    );\n\n    if (ObjectUtil.objectIsDeepEqual(currentValue, inputValue)) {\n      return false;\n    }\n\n    const obj = ObjectUtil.objectWithValueAtPath(\n      this._state.value,\n      path,\n      clone(inputValue)\n    );\n\n    this._state.setValue(obj);\n\n    return true;\n  }\n}\n","import { Observable } from \"@anderjason/observable\";\nimport { ValuePath } from \"@anderjason/util\";\nimport { Actor } from \"skytree\";\nimport { ObservableState } from \"../..\";\n\nexport interface ObservableStateBindingProps<T> {\n  observableState: ObservableState;\n  valuePath: ValuePath;\n\n  output?: Observable<T>;\n  partialStateGivenOutputValue?: (outputValue: T) => any;\n  outputValueGivenPartialState?: (partialState: any) => T;\n}\n\nexport class ObservableStateBinding<T> extends Actor<\n  ObservableStateBindingProps<T>\n> {\n  readonly output: Observable<T>;\n\n  constructor(props: ObservableStateBindingProps<T>) {\n    super(props);\n\n    if (props.output != null) {\n      this.output = props.output;\n    } else {\n      this.output = Observable.ofEmpty<T>(Observable.isStrictEqual);\n    }\n  }\n\n  onActivate() {\n    let isUpdating = false;\n\n    this.cancelOnDeactivate(\n      this.props.observableState.subscribe(\n        this.props.valuePath,\n        (vccValue) => {\n          isUpdating = true;\n\n          let result = vccValue;\n          if (this.props.outputValueGivenPartialState != null) {\n            result = this.props.outputValueGivenPartialState(result);\n          }\n\n          this.output.setValue(result);\n\n          isUpdating = false;\n        },\n        true\n      )\n    );\n\n    this.cancelOnDeactivate(\n      this.output.didChange.subscribe((value) => {\n        if (isUpdating == true) {\n          return;\n        }\n\n        let result = value;\n        if (this.props.partialStateGivenOutputValue != null) {\n          result = this.props.outputValueGivenPartialState(result);\n        }\n\n        this.props.observableState.update(this.props.valuePath, result);\n      })\n    );\n  }\n}\n","import { Point2 } from \"@anderjason/geometry\";\nimport {\n  Observable,\n  ReadOnlyObservable,\n  Receipt,\n  TypedEvent,\n} from \"@anderjason/observable\";\nimport { Actor } from \"skytree\";\nimport { LocationUtil } from \"..\";\nimport { PendingClick } from \"./PendingClick\";\nimport { TouchVisualizer } from \"./TouchVisualizer\";\n\nexport interface TouchPoints {\n  first?: Point2;\n  second?: Point2;\n}\n\ntype NamedTouchPoint = \"first\" | \"second\";\n\nexport interface TouchSupportEvent {\n  screenPoint: Point2;\n  isHandled: boolean;\n  namedTouchPoint: NamedTouchPoint;\n\n  target?: Element;\n}\n\nexport class Pointer extends Actor<void> {\n  private static _instance: Pointer;\n\n  static get instance(): Pointer {\n    if (Pointer._instance == null) {\n      Pointer._instance = new Pointer();\n      Pointer._instance.activate();\n    }\n\n    return this._instance;\n  }\n\n  readonly points = Observable.givenValue<TouchPoints>({});\n\n  readonly didClick = new TypedEvent<TouchSupportEvent>();\n  readonly didSingleClick = new TypedEvent<TouchSupportEvent>();\n  readonly didDoubleClick = new TypedEvent<TouchSupportEvent>();\n  readonly didStart = new TypedEvent<TouchSupportEvent>();\n  readonly didEnd = new TypedEvent<TouchSupportEvent>();\n\n  private _hoveredElement = Observable.ofEmpty<Element>(\n    Observable.isStrictEqual\n  );\n  readonly hoveredElement = ReadOnlyObservable.givenObservable(\n    this._hoveredElement\n  );\n\n  private _referenceCountByTarget = new Map<Element, number>();\n\n  private _screenSpacePoint1: Point2;\n  private _screenSpacePoint2: Point2;\n  private _screenSpaceKeyboardTouchPoint: Point2;\n  private _keyboardTouchActive: boolean;\n  private _pendingClick: PendingClick;\n\n  private constructor() {\n    super();\n  }\n\n  onActivate() {\n    // if (\n    //   LocationUtil.currentHostIsLocal()\n    // ) {\n    //   this.addActor(\n    //     new TouchVisualizer({\n    //       touchSupport: this,\n    //     })\n    //   );\n    // }\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        this._referenceCountByTarget.clear();\n      })\n    );\n\n    this._pendingClick = this.addActor(new PendingClick());\n\n    this.cancelOnDeactivate(\n      this._pendingClick.didClick.subscribe((screenPoint) => {\n        this.onClick(screenPoint);\n      })\n    );\n\n    this.cancelOnDeactivate(\n      this._pendingClick.didSingleClick.subscribe((screenPoint) => {\n        this.onSingleClick(screenPoint);\n      })\n    );\n\n    this.cancelOnDeactivate(\n      this._pendingClick.didDoubleClick.subscribe((screenPoint) => {\n        this.onDoubleClick(screenPoint);\n      })\n    );\n\n    if (typeof document !== \"undefined\") {\n      document.body.addEventListener(\"keydown\", this.onKeyDown);\n      document.body.addEventListener(\"keyup\", this.onKeyUp);\n\n      document.body.addEventListener(\"pointerdown\", this.onPointerDown);\n      document.body.addEventListener(\"pointermove\", this.onPointerMove);\n      document.body.addEventListener(\"pointerup\", this.onPointerUp);\n      document.body.addEventListener(\"pointerenter\", this.onPointerEnter);\n\n      this.cancelOnDeactivate(\n        new Receipt(() => {\n          document.body.removeEventListener(\"keydown\", this.onKeyDown);\n          document.body.removeEventListener(\"keyup\", this.onKeyUp);\n\n          document.body.removeEventListener(\"pointerdown\", this.onPointerDown);\n          document.body.removeEventListener(\"pointermove\", this.onPointerMove);\n          document.body.removeEventListener(\"pointerup\", this.onPointerUp);\n          document.body.removeEventListener(\n            \"pointerenter\",\n            this.onPointerEnter\n          );\n        })\n      );\n    }\n  }\n\n  resetPendingClick(): void {\n    this._pendingClick.reset();\n  }\n\n  addTarget(element: Element): Receipt {\n    const referenceCount: number =\n      this._referenceCountByTarget.get(element) || 0;\n    this._referenceCountByTarget.set(element, referenceCount + 1);\n\n    return new Receipt(() => {\n      if (!this._referenceCountByTarget.has(element)) {\n        return;\n      }\n\n      const newCount = this._referenceCountByTarget.get(element) - 1;\n      if (newCount < 1) {\n        this._referenceCountByTarget.delete(element);\n      } else {\n        this._referenceCountByTarget.set(element, newCount);\n      }\n    });\n  }\n\n  private onKeyDown = (e: KeyboardEvent): void => {\n    if (e.repeat) {\n      return;\n    }\n\n    if (!e.altKey) {\n      return;\n    }\n\n    if (e.key === \"t\") {\n      this._keyboardTouchActive = true;\n      this.startTouch(\"first\", this._screenSpaceKeyboardTouchPoint);\n    }\n  };\n\n  private onKeyUp = (e: KeyboardEvent): void => {\n    if (e.repeat) {\n      return;\n    }\n\n    if (!this._keyboardTouchActive) {\n      return;\n    }\n\n    if (e.key === \"t\") {\n      this._keyboardTouchActive = false;\n      this.endTouch(\"first\", this._screenSpaceKeyboardTouchPoint);\n    }\n  };\n\n  private startTouch(\n    namedTouchPoint: NamedTouchPoint,\n    screenPoint: Point2\n  ): boolean {\n    const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n    // save this point for a possible keyboard-simulated touch event later\n    this._screenSpaceKeyboardTouchPoint = screenPoint;\n\n    this.updateTouchPosition(namedTouchPoint, screenPoint);\n\n    const event: TouchSupportEvent = {\n      screenPoint,\n      target,\n      namedTouchPoint,\n      isHandled: false,\n    };\n\n    this.didStart.emit(event);\n\n    return event.isHandled;\n  }\n\n  private moveTouch(\n    namedTouchPoint: NamedTouchPoint,\n    screenPoint: Point2\n  ): void {\n    if (namedTouchPoint === \"first\" && this._screenSpacePoint1 == null) {\n      return;\n    }\n\n    if (namedTouchPoint === \"second\" && this._screenSpacePoint2 == null) {\n      return;\n    }\n\n    // save this point for a possible keyboard-simulated touch event later\n    this._screenSpaceKeyboardTouchPoint = screenPoint;\n\n    this.updateTouchPosition(namedTouchPoint, screenPoint);\n  }\n\n  private endTouch(\n    namedTouchPoint: NamedTouchPoint,\n    screenPoint: Point2\n  ): boolean {\n    const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n\n    if (namedTouchPoint === \"first\") {\n      this._screenSpacePoint1 = undefined;\n      this._screenSpacePoint2 = undefined;\n    } else {\n      this._screenSpacePoint2 = undefined;\n    }\n\n    this.notifyPointsChanged();\n\n    const event = {\n      screenPoint,\n      target,\n      namedTouchPoint,\n      isHandled: false,\n    };\n\n    this.didEnd.emit(event);\n\n    return event.isHandled;\n  }\n\n  private onPointerDown = (e: PointerEvent): void => {\n    if (e.button !== 0) {\n      return;\n    }\n\n    const screenPoint = Point2.givenXY(e.clientX, e.clientY);\n    const isPrimary = e.isPrimary && !this._keyboardTouchActive;\n    const namedTouchPoint = isPrimary ? \"first\" : \"second\";\n\n    const isHandled = this.startTouch(namedTouchPoint, screenPoint);\n\n    if (namedTouchPoint === \"first\") {\n      this._pendingClick.pressButton(screenPoint);\n    }\n\n    if (isHandled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  private onPointerMove = (e: PointerEvent): void => {\n    const screenPoint = Point2.givenXY(e.clientX, e.clientY);\n    this._screenSpaceKeyboardTouchPoint = screenPoint;\n\n    const isPrimary = e.isPrimary && !this._keyboardTouchActive;\n    const namedTouchPoint = isPrimary ? \"first\" : \"second\";\n\n    this.moveTouch(namedTouchPoint, screenPoint);\n\n    if (namedTouchPoint === \"first\") {\n      this._pendingClick.movePointer(screenPoint);\n    }\n  };\n\n  private onPointerUp = (e: PointerEvent): void => {\n    if (e.button !== 0) {\n      return;\n    }\n\n    const screenPoint = Point2.givenXY(e.clientX, e.clientY);\n    const isPrimary = e.isPrimary && !this._keyboardTouchActive;\n    const namedTouchPoint = isPrimary ? \"first\" : \"second\";\n\n    const isHandled = this.endTouch(namedTouchPoint, screenPoint);\n\n    if (namedTouchPoint === \"first\") {\n      this._pendingClick.releaseButton(screenPoint);\n    }\n\n    if (isHandled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n\n  private onPointerEnter = (e: PointerEvent): void => {\n    if (e.buttons !== 0) {\n      return;\n    }\n\n    this._pendingClick.reset();\n\n    if (this._screenSpacePoint1 != null) {\n      this.endTouch(\"first\", this._screenSpacePoint1);\n    }\n\n    if (this._screenSpacePoint2 != null) {\n      this.endTouch(\"second\", this._screenSpacePoint2);\n    }\n  };\n\n  private onClick(screenPoint: Point2): void {\n    const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n\n    this.didClick.emit({\n      screenPoint,\n      target,\n      namedTouchPoint: \"first\",\n      isHandled: false,\n    });\n  }\n\n  private onSingleClick(screenPoint: Point2): void {\n    const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n\n    this.didSingleClick.emit({\n      screenPoint,\n      target,\n      namedTouchPoint: \"first\",\n      isHandled: false,\n    });\n  }\n\n  private onDoubleClick(screenPoint: Point2): void {\n    const target = this.optionalTargetElementGivenScreenPoint(screenPoint);\n\n    this.didDoubleClick.emit({\n      screenPoint,\n      target,\n      namedTouchPoint: \"first\",\n      isHandled: false,\n    });\n  }\n\n  private updateTouchPosition = (\n    namedTouchPoint: NamedTouchPoint,\n    screenPoint: Point2\n  ): void => {\n    if (namedTouchPoint === \"first\") {\n      this._screenSpacePoint1 = screenPoint;\n    } else if (namedTouchPoint === \"second\") {\n      this._screenSpacePoint2 = screenPoint;\n    }\n\n    this.notifyPointsChanged();\n  };\n\n  private optionalTargetElementGivenScreenPoint(\n    screenPoint: Point2\n  ): Element | undefined {\n    if (screenPoint == null) {\n      return;\n    }\n\n    const elements = document.elementsFromPoint(screenPoint.x, screenPoint.y);\n    const match = elements.find((el) => this._referenceCountByTarget.has(el));\n\n    if (match == null) {\n      return undefined;\n    }\n\n    return match as Element;\n  }\n\n  private notifyPointsChanged(): void {\n    this.points.setValue({\n      first: this._screenSpacePoint1,\n      second: this._screenSpacePoint2,\n    });\n  }\n}\n","import { Actor } from \"skytree\";\nimport { TypedEvent, Receipt } from \"@anderjason/observable\";\nimport { Point2 } from \"@anderjason/geometry\";\nimport { Debounce, Duration } from \"@anderjason/time\";\n\nfunction pointIsNearPoint(\n  a: Point2,\n  b: Point2,\n  threshold: number = 4\n): boolean {\n  if (a == null || b == null) {\n    return false;\n  }\n\n  const distance = a.toDistance(b);\n  return distance < threshold;\n}\n\ntype PendingClickState = \"idle\" | \"down\" | \"click\" | \"down2\";\n\nexport class PendingClick extends Actor<void> {\n  readonly didClick = new TypedEvent<Point2>();\n  readonly didSingleClick = new TypedEvent<Point2>();\n  readonly didDoubleClick = new TypedEvent<Point2>();\n\n  private _targetPoint: Point2;\n  private _state: PendingClickState;\n  private _evaluateLongPressLater: Debounce;\n\n  constructor() {\n    super();\n\n    this._evaluateLongPressLater = new Debounce({\n      duration: Duration.givenSeconds(0.5),\n      fn: async () => {\n        this.evaluateLongPress();\n      },\n    });\n  }\n\n  onActivate() {\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        this._evaluateLongPressLater.clear();\n      })\n    );\n  }\n\n  pressButton(newPoint: Point2): void {\n    if (this.isActive.value == false) {\n      return;\n    }\n\n    if (!pointIsNearPoint(newPoint, this._targetPoint)) {\n      this.reset();\n    }\n\n    switch (this._state) {\n      case \"idle\":\n        this._targetPoint = newPoint;\n        this._state = \"down\";\n        this._evaluateLongPressLater.invoke();\n        break;\n      case \"click\":\n        this._state = \"down2\";\n        break;\n      default:\n        break;\n    }\n  }\n\n  movePointer(newPoint: Point2): void {\n    if (!pointIsNearPoint(newPoint, this._targetPoint)) {\n      this.reset();\n    }\n  }\n\n  releaseButton(newPoint: Point2): void {\n    if (this.isActive.value == false) {\n      return;\n    }\n\n    if (!pointIsNearPoint(newPoint, this._targetPoint)) {\n      this.reset();\n    }\n\n    switch (this._state) {\n      case \"down\":\n        this._state = \"click\";\n        this.notifyClick();\n        break;\n      case \"down2\":\n        this.notifyDoubleClick();\n        break;\n      case \"idle\":\n      default:\n        break;\n    }\n  }\n\n  private evaluateLongPress() {\n    switch (this._state) {\n      case \"down\":\n        this.notifyClick();\n        requestAnimationFrame(() => {\n          this.notifyDoubleClick();\n        });\n        break;\n      case \"down2\":\n        this.notifyDoubleClick();\n        break;\n      case \"click\":\n        this.notifySingleClick();\n        break;\n      default:\n        this.reset();\n        break;\n    }\n  }\n\n  reset() {\n    this._targetPoint = undefined;\n    this._state = \"idle\";\n    this._evaluateLongPressLater.clear();\n  }\n\n  private notifyClick() {\n    const screenPoint = this._targetPoint;\n\n    this.didClick.emit(screenPoint);\n  }\n\n  private notifySingleClick() {\n    const screenPoint = this._targetPoint;\n\n    this.reset();\n\n    this.didSingleClick.emit(screenPoint);\n  }\n\n  private notifyDoubleClick() {\n    const screenPoint = this._targetPoint;\n\n    this.reset();\n\n    this.didDoubleClick.emit(screenPoint);\n  }\n}\n","import { Size2 } from \"@anderjason/geometry\";\nimport {\n  Observable,\n  ReadOnlyObservable,\n  TypedEvent,\n} from \"@anderjason/observable\";\nimport * as FontFaceObserver from \"fontfaceobserver\";\nimport { Actor, SequentialWorker } from \"skytree\";\nimport { blobGivenUrl } from \"../NetworkUtil/_internal/blobGivenUrl\";\nimport { dataUrlGivenBlob } from \"../NetworkUtil/_internal/dataUrlGivenBlob\";\nimport { videoMetadataGivenUrl } from \"../NetworkUtil/_internal/videoMetadataGivenUrl\";\n\nexport interface FontStyle {\n  url: string;\n  fontFamily: string;\n  weight?: number;\n  style?: \"normal\" | \"italic\";\n}\n\nexport interface VideoMetadata {\n  url: string;\n  contentSize: Size2;\n}\n\nexport class Preload extends Actor<void> {\n  private static _instance: Preload;\n\n  static get instance(): Preload {\n    if (this._instance == null) {\n      this._instance = new Preload();\n      this._instance.activate();\n    }\n\n    return this._instance;\n  }\n\n  readonly didLoadVideo = new TypedEvent<string>();\n  readonly didLoadImage = new TypedEvent<string>();\n  readonly didLoadFont = new TypedEvent<FontStyle>();\n\n  private _isReady = Observable.givenValue(true, Observable.isStrictEqual);\n  readonly isReady = ReadOnlyObservable.givenObservable(this._isReady);\n\n  private _sequentialWorker: SequentialWorker;\n\n  private _videoMetadataByUrl = new Map<string, Observable<VideoMetadata>>();\n  private _imageDataUrlByUrl = new Map<string, Observable<string>>();\n  private _loadedFontSet = new Set<FontStyle>();\n\n  private _loadingVideoSet = new Set<string>();\n  private _loadingFontSet = new Set<FontStyle>();\n  private _loadingImageSet = new Set<string>();\n\n  private _requestedFontSet = new Set<FontStyle>();\n\n  onActivate() {\n    this._sequentialWorker = this.addActor(new SequentialWorker({}));\n  }\n\n  addImage(\n    url: string,\n    priority: number = 5,\n    includeCredentials?: boolean\n  ): void {\n    if (this._imageDataUrlByUrl.has(url)) {\n      return;\n    }\n\n    this._imageDataUrlByUrl.set(\n      url,\n      Observable.ofEmpty<string>(Observable.isStrictEqual)\n    );\n\n    this._loadingImageSet.add(url);\n    this._isReady.setValue(false);\n\n    this._sequentialWorker.addWork(\n      async () => {\n        await this.loadImage(url, includeCredentials);\n      },\n      undefined,\n      priority\n    );\n  }\n\n  addFont(fontStyle: FontStyle, priority: number = 5): void {\n    if (this._requestedFontSet.has(fontStyle)) {\n      return;\n    }\n\n    this._isReady.setValue(false);\n    this._requestedFontSet.add(fontStyle);\n    this.loadGoogleFont(fontStyle);\n  }\n\n  addVideo(url: string, priority: number = 5): void {\n    if (this._videoMetadataByUrl.has(url)) {\n      return;\n    }\n\n    this._videoMetadataByUrl.set(\n      url,\n      Observable.ofEmpty<VideoMetadata>(Observable.isStrictEqual)\n    );\n\n    this._loadingVideoSet.add(url);\n    this._isReady.setValue(false);\n\n    this._sequentialWorker.addWork(\n      async () => {\n        await this.loadVideo(url);\n      },\n      undefined,\n      priority\n    );\n  }\n\n  toPreloadedImageUrl(imageUrl: string): Observable<string> {\n    if (!this._imageDataUrlByUrl.has(imageUrl)) {\n      this.addImage(imageUrl);\n    }\n\n    return this._imageDataUrlByUrl.get(imageUrl);\n  }\n\n  toVideoMetadataGivenUrl(url: string): Observable<VideoMetadata> {\n    if (!this._videoMetadataByUrl.has(url)) {\n      this.addVideo(url);\n    }\n\n    return this._videoMetadataByUrl.get(url);\n  }\n\n  ensureImageLoaded(imageUrl: string): Promise<void> {\n    if (!this._imageDataUrlByUrl.has(imageUrl)) {\n      this.addImage(imageUrl);\n    }\n\n    return new Promise((resolve) => {\n      const observable = this.toPreloadedImageUrl(imageUrl);\n      const receipt = observable.didChange.subscribe((value) => {\n        if (value == null) {\n          return;\n        }\n\n        setTimeout(() => {\n          receipt.cancel();\n          resolve();\n        }, 1);\n      }, true);\n    });\n  }\n\n  ensureFontLoaded(fontStyle: FontStyle): Promise<void> {\n    if (this._loadedFontSet.has(fontStyle)) {\n      return Promise.resolve();\n    }\n\n    if (!this._loadingFontSet.has(fontStyle)) {\n      return Promise.reject(\n        new Error(\n          `This font style has not been defined. Call defineCustom() first.`\n        )\n      );\n    }\n\n    return new Promise((resolve) => {\n      const handle = this.didLoadFont.subscribe((loadedTextStyle) => {\n        if (loadedTextStyle === fontStyle) {\n          handle.cancel();\n          resolve();\n        }\n      });\n    });\n  }\n\n  ensureVideoLoaded(url: string): Promise<void> {\n    if (!this._videoMetadataByUrl.has(url)) {\n      this.addVideo(url);\n    }\n\n    return new Promise((resolve) => {\n      const observable = this.toVideoMetadataGivenUrl(url);\n      const receipt = observable.didChange.subscribe((value) => {\n        if (value == null) {\n          return;\n        }\n\n        setTimeout(() => {\n          receipt.cancel();\n          resolve();\n        }, 1);\n      }, true);\n    });\n  }\n\n  ensureAllLoaded(): Promise<void> {\n    if (this._isReady.value === true) {\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve) => {\n      const handle = this.isReady.didChange.subscribe((isReady) => {\n        if (isReady === true) {\n          handle.cancel();\n          resolve();\n        }\n      });\n    });\n  }\n\n  private async loadImage(\n    url: string,\n    includeCredentials: boolean\n  ): Promise<void> {\n    let init: RequestInit;\n    if (includeCredentials) {\n      init = {\n        credentials: \"include\",\n      };\n    }\n\n    const blob = await blobGivenUrl(url, init);\n    const dataUrl = await dataUrlGivenBlob(blob);\n\n    this._imageDataUrlByUrl.get(url).setValue(dataUrl);\n\n    this._loadingImageSet.delete(url);\n    this.didLoadImage.emit(url);\n    this.checkReady();\n  }\n\n  private async loadVideo(url: string): Promise<void> {\n    const metadata = await videoMetadataGivenUrl(url);\n\n    this._videoMetadataByUrl.get(url).setValue(metadata);\n\n    this._loadingVideoSet.delete(url);\n    this.didLoadVideo.emit(url);\n    this.checkReady();\n  }\n\n  private loadGoogleFont(fontStyle: FontStyle): void {\n    if (fontStyle == null) {\n      return;\n    }\n\n    if (\n      this._loadingFontSet.has(fontStyle) ||\n      this._loadedFontSet.has(fontStyle)\n    ) {\n      return;\n    }\n\n    this._loadingFontSet.add(fontStyle);\n\n    const link = document.createElement(\"link\");\n    link.href = fontStyle.url;\n    link.rel = \"stylesheet\";\n    link.type = \"text/css\";\n    document.head.appendChild(link);\n\n    const font = new FontFaceObserver(fontStyle.fontFamily, {\n      weight: fontStyle.weight,\n      style: fontStyle.style,\n    });\n\n    font.load().then(() => {\n      this._loadingFontSet.delete(fontStyle);\n      this._loadedFontSet.add(fontStyle);\n      this.didLoadFont.emit(fontStyle);\n      this.checkReady();\n    });\n  }\n\n  private checkReady(): void {\n    this._isReady.setValue(\n      this._loadingFontSet.size === 0 &&\n        this._loadingImageSet.size === 0 &&\n        this._loadingVideoSet.size === 0\n    );\n  }\n}\n","import { Size2 } from \"@anderjason/geometry\";\nimport { VideoMetadata } from \"../../Preload\";\n\nexport function videoMetadataGivenUrl(url: string): Promise<VideoMetadata> {\n  return new Promise((resolve, reject) => {\n    const video = document.createElement(\"video\");\n\n    video.addEventListener(\n      \"loadedmetadata\",\n      () => {\n        resolve({\n          url,\n          contentSize: Size2.givenWidthHeight(\n            video.videoWidth,\n            video.videoHeight\n          ),\n        });\n      },\n      false\n    );\n\n    video.addEventListener(\"error\", () => {\n      reject(new Error(\"Could not load image\"));\n    });\n\n    video.src = url;\n  });\n}\n","import { Observable, ReadOnlyObservable } from \"@anderjason/observable\";\nimport { Duration, Debounce } from \"@anderjason/time\";\nimport { Size2 } from \"@anderjason/geometry\";\nimport { ConditionalActivator, Actor, Timer } from \"skytree\";\n\nexport class ScreenSize extends Actor<void> {\n  private static _instance: ScreenSize;\n\n  static get instance(): ScreenSize {\n    if (this._instance == null) {\n      this._instance = new ScreenSize();\n      this._instance.activate();\n    }\n\n    return this._instance;\n  }\n\n  private _measureScrollbarLater: Debounce;\n\n  private _availableSize = Observable.ofEmpty<Size2>(Size2.isEqual);\n  readonly availableSize = ReadOnlyObservable.givenObservable(\n    this._availableSize\n  );\n\n  private _scrollbarSize = Observable.ofEmpty<Size2>(Size2.isEqual);\n  readonly scrollbarSize = ReadOnlyObservable.givenObservable(\n    this._scrollbarSize\n  );\n\n  readonly isPollingEnabled = Observable.givenValue(\n    true,\n    Observable.isStrictEqual\n  );\n\n  private constructor() {\n    super();\n\n    this._measureScrollbarLater = new Debounce({\n      fn: async () => {\n        this.measureScrollbar();\n      },\n      duration: Duration.givenMilliseconds(250),\n    });\n\n    window.addEventListener(\"resize\", () => {\n      this.recalculateSize();\n    });\n\n    this.recalculateSize();\n\n    if (this._availableSize.value.isZero) {\n      requestAnimationFrame(() => {\n        this.recalculateSize();\n      });\n    }\n\n    this.addActor(\n      new ConditionalActivator({\n        input: this.isPollingEnabled,\n        fn: (v) => v,\n        actor: new Timer({\n          fn: () => {\n            this.recalculateSize();\n          },\n          isRepeating: true,\n          duration: Duration.givenSeconds(0.25),\n        }),\n      })\n    );\n  }\n\n  private measureScrollbar(): void {\n    const measureScrollbarOuter = document.createElement(\"div\");\n    measureScrollbarOuter.style.position = \"absolute\";\n    measureScrollbarOuter.style.visibility = \"hidden\";\n    measureScrollbarOuter.style.overflow = \"scroll\";\n    document.body.appendChild(measureScrollbarOuter);\n\n    const measureScrollbarInner = document.createElement(\"div\");\n    measureScrollbarOuter.appendChild(measureScrollbarInner);\n\n    const scrollbarWidth =\n      measureScrollbarOuter.offsetWidth - measureScrollbarInner.offsetWidth;\n\n    const scrollbarHeight =\n      measureScrollbarOuter.offsetHeight - measureScrollbarInner.offsetHeight;\n\n    this._scrollbarSize.setValue(\n      Size2.givenWidthHeight(scrollbarWidth, scrollbarHeight)\n    );\n\n    document.body.removeChild(measureScrollbarOuter);\n  }\n\n  recalculateSize() {\n    this._availableSize.setValue(\n      Size2.givenWidthHeight(\n        Math.min(window.outerWidth, window.innerWidth),\n        Math.min(window.innerHeight, window.outerHeight)\n      )\n    );\n\n    this._measureScrollbarLater.invoke();\n  }\n}\n","import { Color } from \"@anderjason/color\";\nimport { Size2 } from \"@anderjason/geometry\";\nimport {\n  Observable,\n  ObservableBase,\n  ReadOnlyObservable,\n} from \"@anderjason/observable\";\nimport { Percent } from \"@anderjason/util\";\nimport { ManagedElement } from \"../ManagedElement\";\nimport { ElementStyle } from \"../ElementStyle\";\nimport { Actor } from \"skytree\";\n\nexport type ScrollDirection = \"none\" | \"vertical\" | \"horizontal\" | \"both\";\n\nexport interface ScrollAreaProps {\n  parentElement: HTMLElement | Observable<HTMLElement>;\n  direction: ScrollDirection | ObservableBase<ScrollDirection>;\n  scrollPositionColor: Color | ObservableBase<Color>;\n\n  backgroundColor?: Color;\n}\n\nconst stylesByHexColor = new Map<string, ElementStyle>();\nexport function styleGivenHexColor(color: Color): ElementStyle {\n  const hexColor = color.toHexString();\n  if (!stylesByHexColor.has(hexColor)) {\n    const hexColorIdle = color\n      .withAlpha(Percent.givenFraction(0.2, 1))\n      .toHexString();\n\n    const result = ElementStyle.givenDefinition({\n      css: `\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n        transition: 0.2s ease color;\n        color: ${hexColorIdle};\n\n        &:hover {\n          color: ${hexColor};\n        }\n\n        &::-webkit-scrollbar {\n          width: 22px;\n          height: 22px;\n          border-radius: 13px;\n          background-clip: padding-box;\n        }\n    \n        &::-webkit-scrollbar-corner {\n          background: transparent;\n        }\n\n        &::-webkit-scrollbar-thumb {\n          border-radius: 13px;\n          background-clip: padding-box;\n          border: 8px solid transparent;\n          box-shadow: inset 0 0 0 10px;\n        }\n      `,\n    });\n\n    stylesByHexColor.set(hexColor, result);\n  }\n\n  return stylesByHexColor.get(hexColor);\n}\n\nexport class ScrollArea extends Actor<ScrollAreaProps> {\n  private _scrollbarSize = Observable.ofEmpty<Size2>();\n  readonly scrollbarSize = ReadOnlyObservable.givenObservable(\n    this._scrollbarSize\n  );\n\n  private _wrapper: ManagedElement<HTMLDivElement>;\n\n  constructor(props: ScrollAreaProps) {\n    super(props);\n\n    switch (props.direction) {\n      case \"none\":\n        this._scrollbarSize.setValue(Size2.ofZero());\n        break;\n      case \"horizontal\":\n        this._scrollbarSize.setValue(Size2.givenWidthHeight(0, 22));\n        break;\n      case \"vertical\":\n        this._scrollbarSize.setValue(Size2.givenWidthHeight(22, 0));\n        break;\n      case \"both\":\n        this._scrollbarSize.setValue(Size2.givenWidthHeight(22, 22));\n        break;\n    }\n  }\n\n  get element(): HTMLElement {\n    return this._wrapper.element;\n  }\n\n  onActivate() {\n    this._wrapper = this.addActor(\n      ManagedElement.givenDefinition({\n        tagName: \"div\",\n        parentElement: this.props.parentElement,\n      })\n    );\n\n    if (this.props.backgroundColor != null) {\n      this._wrapper.style.backgroundColor = this.props.backgroundColor.toHexString();\n    }\n\n    let observableColor: ObservableBase<Color>;\n    if (Observable.isObservable(this.props.scrollPositionColor)) {\n      observableColor = this.props.scrollPositionColor;\n    } else {\n      observableColor = Observable.givenValue(this.props.scrollPositionColor);\n    }\n\n    this.cancelOnDeactivate(\n      observableColor.didChange.subscribe((color) => {\n        const elementStyle = styleGivenHexColor(color);\n\n        if (elementStyle == null) {\n          return;\n        }\n\n        this._wrapper.element.className = elementStyle.toCombinedClassName();\n      }, true)\n    );\n\n    const onDirectionChanged = (direction: ScrollDirection) => {\n      switch (direction) {\n        case \"none\":\n          this._wrapper.style.overflowX = \"hidden\";\n          this._wrapper.style.overflowY = \"hidden\";\n          break;\n        case \"vertical\":\n          this._wrapper.style.overflowX = \"hidden\";\n          this._wrapper.style.overflowY = \"scroll\";\n          break;\n        case \"horizontal\":\n          this._wrapper.style.overflowX = \"scroll\";\n          this._wrapper.style.overflowY = \"hidden\";\n          break;\n        case \"both\":\n          this._wrapper.style.overflowX = \"scroll\";\n          this._wrapper.style.overflowY = \"scroll\";\n          break;\n        default:\n          throw new Error(\"Unsupported direction\");\n      }\n    };\n\n    if (Observable.isObservable(this.props.direction)) {\n      this.cancelOnDeactivate(\n        this.props.direction.didChange.subscribe((direction) => {\n          onDirectionChanged(direction);\n        }, true)\n      );\n    } else {\n      onDirectionChanged(this.props.direction);\n    }\n  }\n}\n","import { Actor } from \"skytree\";\nimport {\n  Observable,\n  ReadOnlyObservable,\n  Receipt,\n} from \"@anderjason/observable\";\nimport { Point2 } from \"@anderjason/geometry\";\n\nexport interface InternalScrollWatcherProps {\n  element: HTMLElement;\n  position: Observable<Point2>;\n}\n\nclass InternalScrollWatcher extends Actor<InternalScrollWatcherProps> {\n  onActivate() {\n    const onScroll = () => {\n      this.props.position.setValue(\n        Point2.givenXY(\n          this.props.element.scrollLeft,\n          this.props.element.scrollTop\n        )\n      );\n    };\n\n    this.props.element.addEventListener(\"scroll\", onScroll);\n    onScroll();\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        this.props.element.removeEventListener(\"scroll\", onScroll);\n        this.props.position.setValue(undefined);\n      })\n    );\n  }\n}\n\nexport interface ScrollWatcherProps {\n  element?: HTMLElement | Observable<HTMLElement>;\n}\n\nexport class ScrollWatcher extends Actor<ScrollWatcherProps> {\n  private _position = Observable.ofEmpty<Point2>(Point2.isEqual);\n  readonly position = ReadOnlyObservable.givenObservable(this._position);\n\n  private _element: Observable<HTMLElement>;\n  private _activeWatcher: InternalScrollWatcher | undefined;\n\n  constructor(props: ScrollWatcherProps) {\n    super(props);\n\n    if (Observable.isObservable(props.element)) {\n      this._element = props.element;\n    } else {\n      this._element = Observable.givenValue(props.element);\n    }\n  }\n\n  onActivate() {\n    this.cancelOnDeactivate(\n      this._element.didChange.subscribe((element) => {\n        if (this._activeWatcher != null) {\n          this.removeActor(this._activeWatcher);\n          this._activeWatcher = undefined;\n        }\n\n        if (element != null) {\n          this._activeWatcher = this.addActor(\n            new InternalScrollWatcher({\n              element,\n              position: this._position,\n            })\n          );\n        }\n      }, true)\n    );\n  }\n}\n","import { Observable, ReadOnlyObservable } from \"@anderjason/observable\";\n\nexport interface SequentialChoiceProps<T> {\n  options: T[];\n\n  output?: Observable<T>;\n}\n\nexport class SequentialChoice<T> {\n  readonly currentOption: Observable<T>;\n\n  private _nextOption = Observable.ofEmpty<T>();\n  readonly nextOption = ReadOnlyObservable.givenObservable(this._nextOption);\n\n  private _previousOption = Observable.ofEmpty<T>();\n  readonly previousOption = ReadOnlyObservable.givenObservable(\n    this._previousOption\n  );\n\n  private _currentIdx: number;\n\n  private props: SequentialChoiceProps<T>;\n\n  constructor(props: SequentialChoiceProps<T>) {\n    this.props = props;\n\n    this.currentOption =\n      props.output || Observable.ofEmpty(Observable.isStrictEqual);\n\n    if (props.options.length > 0) {\n      // is an option already selected?\n      if (this.currentOption.value != null) {\n        // is the selected option in the list?\n        const index = props.options.indexOf(this.currentOption.value);\n        if (index !== -1) {\n          this.setCurrentIndex(index);\n        } else {\n          // if not, ignore the selection\n          this.currentOption.setValue(undefined);\n        }\n      }\n\n      // if there's no selection, set the first item\n      if (this.currentOption.value == null) {\n        this.setCurrentIndex(0);\n      }\n    }\n  }\n\n  private setCurrentIndex = (idx: number): void => {\n    const len = this.props.options.length;\n\n    if (this.props.options == null || len === 0) {\n      this._currentIdx = undefined;\n    }\n\n    this.currentOption.setValue(this.props.options[idx % len]);\n\n    if (len > 1) {\n      this._nextOption.setValue(this.props.options[(idx + 1) % len]);\n\n      if (idx < 1) {\n        const previousIdx = len - (Math.abs(idx - 1) % len);\n        this._previousOption.setValue(this.props.options[previousIdx]);\n      } else {\n        this._previousOption.setValue(this.props.options[(idx - 1) % len]);\n      }\n    }\n\n    this._currentIdx = idx;\n  };\n\n  selectNextOption = (): void => {\n    this.setCurrentIndex(this._currentIdx + 1);\n  };\n\n  selectPreviousOption = (): void => {\n    if (this._currentIdx === 0) {\n      this.setCurrentIndex(this.props.options.length - 1);\n    } else {\n      this.setCurrentIndex(this._currentIdx - 1);\n    }\n  };\n}\n","import {\n  Observable,\n  ObservableBase,\n  ReadOnlyObservable,\n} from \"@anderjason/observable\";\nimport { Actor } from \"skytree\";\n\nexport interface StepDelayBindingProps<T> {\n  input: ObservableBase<T>;\n  stepsBehind: number;\n\n  output?: Observable<T>;\n}\n\nexport class StepDelayBinding<T> extends Actor<StepDelayBindingProps<T>> {\n  private _output: Observable<T>;\n  readonly output: ReadOnlyObservable<T>;\n\n  constructor(props: StepDelayBindingProps<T>) {\n    super(props);\n\n    if (props.output != null) {\n      this._output = props.output;\n    } else {\n      this._output = Observable.ofEmpty<T>(Observable.isStrictEqual);\n    }\n\n    this.output = ReadOnlyObservable.givenObservable(this._output);\n  }\n\n  onActivate() {\n    const values: T[] = [];\n\n    this.cancelOnDeactivate(\n      this.props.input.didChange.subscribe((input) => {\n        values.push(input);\n\n        if (values.length > this.props.stepsBehind) {\n          this._output.setValue(values.shift());\n        }\n      }, true)\n    );\n  }\n}\n","import { Actor } from \"skytree\";\nimport { Observable, ReadOnlyObservable } from \"@anderjason/observable\";\nimport { StringUtil } from \"@anderjason/util\";\n\nexport interface TextInputBindingProps<T> {\n  inputElement: HTMLElement;\n  displayTextGivenValue: (value: T) => string;\n  valueGivenDisplayText: (displayText: string) => T;\n\n  value?: Observable<T>;\n  overrideDisplayText?: (e: TextInputChangingData<T>) => string;\n}\n\nexport interface TextInputChangingData<T> {\n  displayText: string;\n  value: T;\n  previousDisplayText: string;\n  previousValue: T;\n}\n\nexport class TextInputBinding<T = string> extends Actor<\n  TextInputBindingProps<T>\n> {\n  readonly output: Observable<T>;\n\n  private _displayText = Observable.ofEmpty<string>(Observable.isStrictEqual);\n  readonly displayText = ReadOnlyObservable.givenObservable(this._displayText);\n\n  private _isEmpty = Observable.ofEmpty<boolean>(Observable.isStrictEqual);\n  readonly isEmpty = ReadOnlyObservable.givenObservable(this._isEmpty);\n\n  private _rawInputValue = Observable.ofEmpty<string>(Observable.isStrictEqual);\n  readonly rawInputText = ReadOnlyObservable.givenObservable(\n    this._rawInputValue\n  );\n\n  private _previousDisplayText: string;\n  private _caretPosition: number;\n  private _inputElement: HTMLInputElement | HTMLTextAreaElement;\n\n  constructor(props: TextInputBindingProps<T>) {\n    super(props);\n\n    if (props.inputElement == null) {\n      throw new Error(\"Input is required\");\n    }\n\n    const nodeName = props.inputElement.nodeName.toLowerCase();\n    if (nodeName !== \"input\" && nodeName !== \"textarea\") {\n      throw new Error(\n        `Expected an input or textarea element, but got '${nodeName}'`\n      );\n    }\n\n    this._inputElement = props.inputElement as HTMLInputElement;\n\n    this.output =\n      this.props.value || Observable.ofEmpty(Observable.isStrictEqual);\n  }\n\n  onActivate() {\n    this._previousDisplayText = this._inputElement.value;\n    this._caretPosition = this._inputElement.selectionStart;\n\n    this._inputElement.addEventListener(\"keydown\", (e) => {\n      this._caretPosition = this._inputElement.selectionStart;\n      this._previousDisplayText = this._inputElement.value;\n      this._rawInputValue.setValue(this._inputElement.value);\n      this._isEmpty.setValue(\n        StringUtil.stringIsEmpty(this._inputElement.value)\n      );\n    });\n\n    this._inputElement.addEventListener(\"input\", (e: Event) => {\n      const displayText = this._inputElement.value;\n      let value = this.props.valueGivenDisplayText(displayText);\n\n      let overrideText: string;\n\n      if (this.props.overrideDisplayText != null) {\n        overrideText = this.props.overrideDisplayText({\n          displayText,\n          value,\n          previousDisplayText: this._previousDisplayText,\n          previousValue: this.output.value,\n        });\n        if (overrideText == null) {\n          this.onOverride(this._previousDisplayText, true);\n          return;\n        } else {\n          this.onOverride(overrideText, false);\n          value = this.props.valueGivenDisplayText(overrideText);\n        }\n      }\n\n      this.output.setValue(value);\n\n      if (overrideText != null) {\n        requestAnimationFrame(() => {\n          this._inputElement.value = overrideText;\n          this._rawInputValue.setValue(this._inputElement.value);\n          this._isEmpty.setValue(\n            StringUtil.stringIsEmpty(this._inputElement.value)\n          );\n        });\n      }\n    });\n\n    this.cancelOnDeactivate(\n      this.output.didChange.subscribe((value) => {\n        const displayText = this.props.displayTextGivenValue(value);\n        this._inputElement.value = displayText || \"\";\n\n        this._rawInputValue.setValue(this._inputElement.value);\n        this._isEmpty.setValue(\n          StringUtil.stringIsEmpty(this._inputElement.value)\n        );\n      }, true)\n    );\n  }\n\n  private onOverride(text: string, setCaretPosition: boolean) {\n    this._previousDisplayText = text;\n    this._inputElement.value = text;\n\n    if (setCaretPosition) {\n      this._inputElement.setSelectionRange(\n        this._caretPosition,\n        this._caretPosition\n      );\n    }\n\n    this._rawInputValue.setValue(text);\n    this._isEmpty.setValue(StringUtil.stringIsEmpty(text));\n  }\n}\n","import { Vector2, Size2, Point2, Rotation } from \"@anderjason/geometry\";\nimport { Corners } from \"../Corners\";\n\nimport { matrixTransformGivenCorners } from \"./_internal/matrixTransformGivenCorners\";\n\ntype Vertex4 = [number, number, number, number];\n\nexport type Matrix3D = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n\nfunction vectorWithAppliedVectors(\n  input: Vector2,\n  a: Vector2,\n  b: Vector2\n): Vector2 {\n  const vectorA = a.withMultipliedScalar(input.x);\n  const vectorB = b.withMultipliedScalar(input.y);\n  return vectorA.withAddedVector(vectorB);\n}\n\nexport function matrix3dOfIdentity(): Matrix3D {\n  let matrix = [];\n  for (let i = 0; i < 16; i++) {\n    i % 5 == 0 ? matrix.push(1) : matrix.push(0);\n  }\n  return matrix as Matrix3D;\n}\n\nfunction matrix3dGivenNumbers(source: number[]): Matrix3D {\n  if (source == null) {\n    return undefined;\n  }\n\n  if (source && source.constructor === Array) {\n    let values = source\n      .filter((value) => typeof value === \"number\")\n      .filter((value) => !isNaN(value));\n\n    if (source.length === 6 && values.length === 6) {\n      let matrix = matrix3dOfIdentity();\n      matrix[0] = values[0];\n      matrix[1] = values[1];\n      matrix[4] = values[2];\n      matrix[5] = values[3];\n      matrix[12] = values[4];\n      matrix[13] = values[5];\n      return matrix;\n    } else if (source.length === 16 && values.length === 16) {\n      return source as Matrix3D;\n    }\n  }\n\n  throw new TypeError(\n    `Expected a number[] with length 6 or 16, but got '${source}'`\n  );\n}\n\nexport class Transform {\n  readonly matrix3d: Matrix3D;\n\n  static readonly identity = new Transform([\n    1,\n    0,\n    0,\n    0,\n\n    0,\n    1,\n    0,\n    0,\n\n    0,\n    0,\n    1,\n    0,\n\n    0,\n    0,\n    0,\n    1,\n  ]);\n\n  static givenCssMatrixTransform(source: string): Transform {\n    if (typeof source === \"string\") {\n      let match = source.match(/matrix(3d)?\\(([^)]+)\\)/);\n      if (match) {\n        let raw = match[2].split(\", \").map(parseFloat);\n        const matrix3d = matrix3dGivenNumbers(raw);\n\n        return new Transform(matrix3d);\n      }\n    }\n\n    throw new Error(\n      \"Could not create Transform from CSS matrix transform string\"\n    );\n  }\n\n  static givenMatrix3D(input: Matrix3D): Transform {\n    return new Transform(input);\n  }\n\n  static givenCornersAndSize(corners: Corners, size: Size2): Transform {\n    const matrix3d = matrix3dGivenNumbers(\n      matrixTransformGivenCorners(corners, size)\n    );\n    if (matrix3d == null) {\n      return undefined;\n    }\n\n    return new Transform(matrix3d);\n  }\n\n  static givenScale(scale: Size2): Transform {\n    return new Transform(\n      matrix3dGivenNumbers([scale.width, 0, 0, scale.height, 0, 0])\n    );\n  }\n\n  static givenPoints(\n    source1: Point2,\n    source2: Point2,\n    destination1: Point2,\n    destination2: Point2,\n    rotate: boolean\n  ) {\n    const vSource1 = Vector2.givenPoint(source1);\n    const vSource2 = Vector2.givenPoint(source2);\n    const vDest1 = Vector2.givenPoint(destination1);\n    const vDest2 = Vector2.givenPoint(destination2);\n\n    // Source vector.\n    const a = vSource2.withSubtractedVector(vSource1);\n    // Destination vector.\n    const b = vDest2.withSubtractedVector(vDest1);\n\n    let x: number;\n    let y: number;\n\n    if (rotate) {\n      const alen = a.toDotProduct(a);\n      const sig = a.toDotProduct(b);\n      const del = a.x * b.y - a.y * b.x;\n\n      x = sig / alen;\n      y = del / alen;\n    } else {\n      const alen = Math.sqrt(a.toDotProduct(a));\n      const blen = Math.sqrt(a.toDotProduct(b));\n      const scale = blen / alen;\n\n      x = scale;\n      y = 0;\n    }\n\n    const rotateScaleA = Vector2.givenXY(x, y);\n    const rotateScaleB = Vector2.givenXY(-y, x);\n\n    // Position of source1 if rotation is applied.\n    const vectorA = rotateScaleA.withMultipliedScalar(vSource1.x);\n    const vectorB = rotateScaleB.withMultipliedScalar(vSource1.y);\n    const rs0 = vectorA.withAddedVector(vectorB);\n\n    // Since d[0] = rs0 + t\n    const t = vDest1.withSubtractedVector(rs0);\n\n    const matrix: Matrix3D = [\n      rotateScaleA.x,\n      rotateScaleA.y,\n      0,\n      0,\n      rotateScaleB.x,\n      rotateScaleB.y,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      t.x,\n      t.y,\n      0,\n      0,\n    ];\n\n    return new Transform(matrix);\n  }\n\n  static isEqual(a: Transform, b: Transform): boolean {\n    if (a == null && b == null) {\n      return true;\n    }\n\n    if (a == null || b == null) {\n      return false;\n    }\n\n    return a.isEqual(b);\n  }\n\n  private constructor(matrix3d: Matrix3D) {\n    if (matrix3d == null) {\n      throw new Error(\"Matrix is required\");\n    }\n\n    this.matrix3d = matrix3d;\n  }\n\n  get is2d(): boolean {\n    return this.matrix3d[2] === 0 && this.matrix3d[3] === 0;\n  }\n\n  isEqual = (other: Transform): boolean => {\n    if (other == null) {\n      return false;\n    }\n\n    if (!(other instanceof Transform)) {\n      return false;\n    }\n\n    return this.matrix3d.every((number, idx) => {\n      return other.matrix3d[idx] === number;\n    });\n  };\n\n  toTranslation(): Point2 {\n    const e = this.matrix3d[12];\n    const f = this.matrix3d[13];\n\n    return Point2.givenXY(e, f);\n  }\n\n  toCssTranslation(): string {\n    const translation = this.toTranslation();\n    return `translate(${translation.x}px, ${translation.y}px)`;\n  }\n\n  toRotation(): Rotation {\n    const a = this.matrix3d[0];\n    const b = this.matrix3d[1];\n    const c = this.matrix3d[4];\n    const d = this.matrix3d[5];\n\n    if (a != 0 || b != 0) {\n      const r = Math.sqrt(a * a + b * b);\n      const radians = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n      return Rotation.givenRadians(radians);\n    } else if (c != 0 || d != 0) {\n      const s = Math.sqrt(c * c + d * d);\n      const radians =\n        Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n      return Rotation.givenRadians(radians);\n    } else {\n      return Rotation.givenDegrees(0);\n    }\n  }\n\n  toCssRotation(): string {\n    const rotation = this.toRotation();\n    return `rotate(${rotation.toDegrees()}deg)`;\n  }\n\n  toScale(): Size2 {\n    const a = this.matrix3d[0];\n    const b = this.matrix3d[1];\n    const c = this.matrix3d[4];\n    const d = this.matrix3d[5];\n\n    const delta = a * d - b * c;\n\n    if (a != 0 || b != 0) {\n      const r = Math.sqrt(a * a + b * b);\n      return Size2.givenWidthHeight(r, delta / r);\n    } else if (c != 0 || d != 0) {\n      const s = Math.sqrt(c * c + d * d);\n      return Size2.givenWidthHeight(delta / s, s);\n    } else {\n      // a = b = c = d = 0\n      return Size2.ofZero();\n    }\n  }\n\n  toCssScale(): string {\n    const scale = this.toScale();\n    return `scale(${scale.width}, ${scale.height})`;\n  }\n\n  toSkewX(): Rotation {\n    const a = this.matrix3d[0];\n    const b = this.matrix3d[1];\n    const c = this.matrix3d[4];\n    const d = this.matrix3d[5];\n\n    if (a != 0 || b != 0) {\n      const r = Math.sqrt(a * a + b * b);\n      const radians = Math.atan((a * c + b * d) / (r * r));\n      return Rotation.givenRadians(radians);\n    } else {\n      return Rotation.ofZero();\n    }\n  }\n\n  toSkewY(): Rotation {\n    const a = this.matrix3d[0];\n    const b = this.matrix3d[1];\n    const c = this.matrix3d[4];\n    const d = this.matrix3d[5];\n\n    if (a != 0 || b != 0) {\n      return Rotation.ofZero();\n    } else if (c != 0 || d != 0) {\n      const s = Math.sqrt(c * c + d * d);\n      const radians = Math.atan((a * c + b * d) / (s * s));\n      return Rotation.givenRadians(radians);\n    } else {\n      return Rotation.ofZero();\n    }\n  }\n\n  toCssSkew(): string {\n    const skewX = this.toSkewX();\n    const skewY = this.toSkewY();\n    return `skew(${skewX.toDegrees()}deg, ${skewY.toDegrees()}deg)`;\n  }\n\n  toCssMatrixTransform(): string {\n    return `matrix3d(${this.matrix3d.join(\", \")})`;\n  }\n\n  toCssCombinedTransform(): string {\n    const parts = [\n      this.toCssTranslation(),\n      this.toCssRotation(),\n      this.toCssScale(),\n      this.toCssSkew(),\n    ];\n\n    return parts.join(\" \");\n  }\n\n  toTranslateVector(): Vector2 {\n    const e = this.matrix3d[12];\n    const f = this.matrix3d[13];\n\n    return Vector2.givenXY(e, f);\n  }\n\n  toVectors(): [Vector2, Vector2] {\n    return [\n      Vector2.givenXY(this.matrix3d[0], this.matrix3d[1]),\n      Vector2.givenXY(this.matrix3d[4], this.matrix3d[5]),\n    ];\n  }\n\n  toTransformedPoint(input: Point2): Point2 {\n    const inVertex: Vertex4 = [input.x, input.y, 0, 1];\n    const outVertex: Vertex4 = [0, 0, 0, 0];\n\n    for (let col = 0; col < 4; ++col) {\n      let sum = 0;\n\n      for (let row = 0; row < 4; ++row) {\n        sum += this.matrix3d[row * 4 + col] * inVertex[row];\n      }\n\n      outVertex[col] = sum;\n    }\n\n    for (let i = 0; i < 4; ++i) {\n      outVertex[i] = outVertex[i] / outVertex[3];\n    }\n\n    return Point2.givenXY(outVertex[0], outVertex[1]);\n  }\n\n  withCascade(other: Transform): Transform {\n    const [otherA, otherB] = other.toVectors();\n    const [thisA, thisB] = this.toVectors();\n\n    const resultA = vectorWithAppliedVectors(otherA, thisA, thisB);\n    const resultB = vectorWithAppliedVectors(otherB, thisA, thisB);\n\n    const resultC = vectorWithAppliedVectors(\n      this.toTranslateVector(),\n      otherA,\n      otherB\n    );\n\n    const resultVector = other.toTranslateVector().withAddedVector(resultC);\n\n    const newMatrix: Matrix3D = [...this.matrix3d];\n    newMatrix[0] = resultA.x;\n    newMatrix[1] = resultA.y;\n    newMatrix[4] = resultB.x;\n    newMatrix[5] = resultB.y;\n    newMatrix[12] = resultVector.x;\n    newMatrix[13] = resultVector.y;\n\n    return new Transform(newMatrix);\n  }\n\n  withTranslation(point: Point2): Transform {\n    const newMatrix: Matrix3D = [...this.matrix3d];\n\n    newMatrix[12] = point.x;\n    newMatrix[13] = point.y;\n\n    return new Transform(newMatrix);\n  }\n}\n","import { Size2 } from \"@anderjason/geometry\";\nimport { Corners } from \"../../Corners\";\nimport { Matrix } from \"./Matrix\";\nimport { Vector } from \"./Vector\";\n\nexport function matrixTransformGivenCorners(\n  corners: Corners,\n  size: Size2\n): number[] {\n  const { width, height } = size;\n\n  const fromPts = [\n    {\n      x: 0,\n      y: 0,\n    },\n    {\n      x: 0,\n      y: height,\n    },\n    {\n      x: width,\n      y: 0,\n    },\n    {\n      x: width,\n      y: height,\n    },\n  ];\n\n  const toPts = [\n    {\n      x: corners.leftTop.x,\n      y: corners.leftTop.y,\n    },\n    {\n      x: corners.leftBottom.x,\n      y: corners.leftBottom.y,\n    },\n    {\n      x: corners.rightTop.x,\n      y: corners.rightTop.y,\n    },\n    {\n      x: corners.rightBottom.x,\n      y: corners.rightBottom.y,\n    },\n  ];\n\n  const E = Matrix.givenRows([\n    [\n      fromPts[0].x,\n      fromPts[0].y,\n      1,\n      0,\n      0,\n      0,\n      -fromPts[0].x * toPts[0].x,\n      -fromPts[0].y * toPts[0].x,\n    ],\n    [\n      0,\n      0,\n      0,\n      fromPts[0].x,\n      fromPts[0].y,\n      1,\n      -fromPts[0].x * toPts[0].y,\n      -fromPts[0].y * toPts[0].y,\n    ],\n    [\n      fromPts[1].x,\n      fromPts[1].y,\n      1,\n      0,\n      0,\n      0,\n      -fromPts[1].x * toPts[1].x,\n      -fromPts[1].y * toPts[1].x,\n    ],\n    [\n      0,\n      0,\n      0,\n      fromPts[1].x,\n      fromPts[1].y,\n      1,\n      -fromPts[1].x * toPts[1].y,\n      -fromPts[1].y * toPts[1].y,\n    ],\n    [\n      fromPts[2].x,\n      fromPts[2].y,\n      1,\n      0,\n      0,\n      0,\n      -fromPts[2].x * toPts[2].x,\n      -fromPts[2].y * toPts[2].x,\n    ],\n    [\n      0,\n      0,\n      0,\n      fromPts[2].x,\n      fromPts[2].y,\n      1,\n      -fromPts[2].x * toPts[2].y,\n      -fromPts[2].y * toPts[2].y,\n    ],\n    [\n      fromPts[3].x,\n      fromPts[3].y,\n      1,\n      0,\n      0,\n      0,\n      -fromPts[3].x * toPts[3].x,\n      -fromPts[3].y * toPts[3].x,\n    ],\n    [\n      0,\n      0,\n      0,\n      fromPts[3].x,\n      fromPts[3].y,\n      1,\n      -fromPts[3].x * toPts[3].y,\n      -fromPts[3].y * toPts[3].y,\n    ],\n  ]);\n\n  const inverseE = E.withInverse();\n\n  if (inverseE == null) {\n    return undefined;\n  }\n\n  const vector = new Vector([\n    toPts[0].x,\n    toPts[0].y,\n    toPts[1].x,\n    toPts[1].y,\n    toPts[2].x,\n    toPts[2].y,\n    toPts[3].x,\n    toPts[3].y,\n  ]);\n\n  const r = vector.withMultipliedMatrix(inverseE);\n\n  const transformMatrix = Matrix.givenRows([\n    [r.elements[0], r.elements[1], 0, r.elements[2]],\n    [r.elements[3], r.elements[4], 0, r.elements[5]],\n    [0, 0, 1, 0],\n    [r.elements[6], r.elements[7], 0, 1],\n  ]);\n\n  const result: number[] = [];\n\n  for (var i = 0; i <= 3; i++) {\n    for (var j = 0; j <= 3; j++) {\n      result.push(transformMatrix.toOptionalValueGivenRowAndColumn(j, i));\n    }\n  }\n\n  return result;\n}\n","import { Actor } from \"skytree\";\nimport { ElementStyle, IntersectionWatcher } from \"../../../src\";\nimport { Percent } from \"@anderjason/util\";\n\nexport interface ActiveBoxProps {\n  parentElement: HTMLElement;\n}\n\nexport class ActiveBox extends Actor<ActiveBoxProps> {\n  onActivate() {\n    const wrapper = this.addActor(\n      WrapperStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.props.parentElement,\n      })\n    );\n\n    const intersectionWatcher = this.addActor(\n      new IntersectionWatcher({\n        element: wrapper.element,\n        minimumVisiblePercent: Percent.givenFraction(3, 5),\n      })\n    );\n\n    this.cancelOnDeactivate(\n      intersectionWatcher.isElementVisible.didChange.subscribe(\n        (isElementVisible) => {\n          wrapper.setModifier(\"isVisible\", isElementVisible == true);\n        },\n        true\n      )\n    );\n  }\n}\n\nconst WrapperStyle = ElementStyle.givenDefinition({\n  css: `\n    width: 250px;\n    height: 250px;\n    margin: 25px;\n    background: rgba(255,255,255,0.1);\n    transition: 0.2s ease background;\n  `,\n  modifiers: {\n    isVisible: `\n      background: #0055FF;\n    `,\n  },\n});\n","import { Actor } from \"skytree\";\nimport { ElementStyle, ScrollArea } from \"../../../src\";\nimport { Color } from \"@anderjason/color\";\nimport { Observable } from \"@anderjason/observable\";\n\nexport interface ScrollAreaDemoProps {}\n\nexport class ScrollAreaDemo extends Actor<ScrollAreaDemoProps> {\n  readonly parentElement = Observable.ofEmpty<HTMLElement>();\n  readonly isVisible = Observable.ofEmpty<boolean>();\n\n  onActivate() {\n    const outer = this.addActor(\n      OuterStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.parentElement,\n      })\n    );\n\n    const scrollArea = this.addActor(\n      new ScrollArea({\n        parentElement: outer.element,\n        direction: \"both\",\n        scrollPositionColor: Color.givenHexString(\"#FFFFFF\"),\n      })\n    );\n\n    this.addActor(\n      WrapperStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: scrollArea.element,\n      })\n    );\n  }\n}\n\nconst OuterStyle = ElementStyle.givenDefinition({\n  css: `\n    position: absolute;\n    width: 300px;\n    height: 300px;\n    transform: translate(-50%, -50%);\n    left: 50%;\n    top: 50%;\n    color: white;\n  `,\n});\n\nconst WrapperStyle = ElementStyle.givenDefinition({\n  css: `\n    width: 600px;\n    height: 600px;\n    background: linear-gradient(to bottom right, red, blue);\n  `,\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExamplesHome = void 0;\nconst ExamplesHome_1 = require(\"./ExamplesHome\");\nObject.defineProperty(exports, \"ExamplesHome\", { enumerable: true, get: function () { return ExamplesHome_1.ExamplesHome; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExamplesHome = void 0;\nconst color_1 = require(\"@anderjason/color\");\nconst web_1 = require(\"@anderjason/web\");\nconst skytree_1 = require(\"skytree\");\nconst ExamplesSection_1 = require(\"./_internal/ExamplesSection\");\nconst ExamplesSidebar_1 = require(\"./_internal/ExamplesSidebar\");\nclass ExamplesHome extends skytree_1.Actor {\n    onActivate() {\n        const mainArea = this.addActor(WrapperStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: document.body,\n        }));\n        const sidebarArea = this.addActor(SidebarAreaStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: mainArea.element,\n        }));\n        const sidebarScroll = this.addActor(new web_1.ScrollArea({\n            parentElement: sidebarArea.element,\n            direction: \"vertical\",\n            scrollPositionColor: color_1.Color.givenHexString(\"#444444\"),\n            backgroundColor: color_1.Color.givenHexString(\"#fafafa\"),\n        }));\n        const contentArea = this.addActor(ContentAreaStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: mainArea.element,\n        }));\n        const contentScroll = this.addActor(new web_1.ScrollArea({\n            parentElement: contentArea.element,\n            direction: \"vertical\",\n            scrollPositionColor: color_1.Color.givenHexString(\"#DDDDDD\"),\n            backgroundColor: color_1.Color.givenHexString(\"#181818\"),\n        }));\n        const parentElement = contentScroll.element;\n        const scrollElement = contentScroll.element;\n        this.addActor(new ExamplesSidebar_1.ExamplesSidebar({\n            parentElement: sidebarScroll.element,\n            title: this.props.title,\n            definitions: this.props.definitions,\n        }));\n        this.addActor(new skytree_1.ArrayActivator({\n            input: this.props.definitions,\n            fn: (definition) => {\n                return new ExamplesSection_1.ExamplesSection({\n                    parentElement,\n                    scrollElement,\n                    title: definition.title,\n                    demoActor: definition.actor,\n                });\n            },\n        }));\n    }\n}\nexports.ExamplesHome = ExamplesHome;\nconst WrapperStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    background: #FFF;\n\n    @media screen and (max-width: 600px) {\n      display: block;\n    }\n  `,\n});\nconst SidebarAreaStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    width: 250px;\n    position: relative;\n    border-right: 1px solid rgba(0, 0, 0, 0.05);\n    flex-shrink: 0;\n\n    @media screen and (max-width: 600px) {\n      width: 100%;\n    }\n  `,\n});\nconst ContentAreaStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    flex-grow: 1;\n    position: relative;\n  `,\n});\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExamplesSection = void 0;\nconst skytree_1 = require(\"skytree\");\nconst web_1 = require(\"@anderjason/web\");\nconst util_1 = require(\"@anderjason/util\");\nclass ExamplesSection extends skytree_1.Actor {\n    onActivate() {\n        const wrapper = this.addActor(WrapperStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: this.props.parentElement,\n        }));\n        const description = this.addActor(DescriptionStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: wrapper.element,\n        }));\n        const code = this.addActor(CodeStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: wrapper.element,\n        }));\n        const anchor = document.createElement(\"a\");\n        anchor.id = util_1.StringUtil.stringWithCase(this.props.title, \"kebab-case\");\n        description.element.appendChild(anchor);\n        const titleElement = document.createElement(\"h2\");\n        titleElement.innerHTML = this.props.title;\n        description.element.appendChild(titleElement);\n        const demoArea = this.addActor(DemoAreaStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: description.element,\n        }));\n        const intersectionWatcher = this.addActor(new web_1.IntersectionWatcher({\n            element: demoArea.element,\n            scrollElement: this.props.scrollElement,\n            minimumVisiblePercent: util_1.Percent.givenFraction(4, 5),\n        }));\n        this.props.demoActor.parentElement.setValue(demoArea.element);\n        this.addActor(this.props.demoActor);\n        this.cancelOnDeactivate(intersectionWatcher.isElementVisible.didChange.subscribe((isVisible) => {\n            demoArea.setModifier(\"isVisible\", isVisible);\n            this.props.demoActor.isVisible.setValue(isVisible);\n        }, true));\n    }\n}\nexports.ExamplesSection = ExamplesSection;\nconst WrapperStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    min-height: 400px;\n    display: grid;\n    background: #FFF;\n    grid-template-columns: 1fr 1fr;\n    grid-template-areas:\n      \"description code\";\n\n    @media screen and (max-width: 600px) {\n      display: block;\n    }\n  `,\n});\nconst DescriptionStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    border-bottom: 1px solid rgba(180, 180, 180, 0.2);\n    background: #FFF;\n    padding: 80px 40px;\n    grid-area: description;\n\n    & > h2 {\n      color: #181818;\n      margin: 0 0 20px 0;\n      padding: 0;\n    }\n\n    @media screen and (max-width: 600px) {\n      padding: 30px 15px;\n\n      & > h2 {\n        font-size: 15px;\n      }\n    }\n  `,\n});\nconst CodeStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    border-bottom: 1px solid rgba(255,255,255,0.1);\n    background: #181818;\n    padding: 80px 40px;\n    grid-area: code;\n  `,\n});\nconst DemoAreaStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    width: 600px;\n    height: 500px;\n    background: #17161E;\n    border-radius: 12px;\n    position: relative;\n    overflow: hidden;\n\n    & > * {\n      border-radius: 12px;\n      opacity: 0.4;\n      transition: 0.3s ease opacity;\n    }\n\n    @media screen and (max-width: 600px) {\n      width: calc(100% + 30px);\n      border-radius: 0;\n      height: 300px;\n      margin-left: -15px;\n      margin-right: -15px;\n\n      & > * {\n        border-radius: 0;\n      }\n    }\n  `,\n    modifiers: {\n        isVisible: `\n      & > * {\n        opacity: 1;\n      }\n    `,\n    },\n});\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExamplesSidebar = void 0;\nconst skytree_1 = require(\"skytree\");\nconst web_1 = require(\"@anderjason/web\");\nconst util_1 = require(\"@anderjason/util\");\nclass ExamplesSidebar extends skytree_1.Actor {\n    onActivate() {\n        const wrapper = this.addActor(WrapperStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: this.props.parentElement,\n        }));\n        const title = this.addActor(TitleStyle.toManagedElement({\n            tagName: \"div\",\n            parentElement: wrapper.element,\n        }));\n        title.element.innerHTML = this.props.title;\n        this.addActor(new skytree_1.ArrayActivator({\n            input: this.props.definitions,\n            fn: (definition) => {\n                const result = LinkStyle.toManagedElement({\n                    tagName: \"a\",\n                    parentElement: wrapper.element,\n                    transitionIn: () => {\n                        result.element.href =\n                            \"#\" + util_1.StringUtil.stringWithCase(definition.title, \"kebab-case\");\n                        result.element.innerHTML = definition.title;\n                    },\n                });\n                return result;\n            },\n        }));\n    }\n}\nexports.ExamplesSidebar = ExamplesSidebar;\nconst WrapperStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    padding: 0 0 0 20px;\n\n    @media screen and (max-width: 600px) {\n      background: #FAFAFA;\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 250px;\n      height: 100vh;\n      z-index: 10;\n      display: none;  /* TODO */\n    }\n  `,\n});\nconst LinkStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    cursor: pointer;\n    display: block;\n    color: #000;\n    text-decoration: none;\n    font-size: 13px;\n    line-height: 19.5px;\n    margin-top: 5px;\n\n    &:hover {\n      color: #0055FF;\n    }\n  `,\n});\nconst TitleStyle = web_1.ElementStyle.givenDefinition({\n    css: `\n    font-weight: bold;\n    height: 80px;\n    padding: 20px 0;\n    box-sizing: border-box;\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    font-size: 20px;\n    line-height: 20px;\n    color: #181818;\n  `,\n});\n//# sourceMappingURL=index.js.map","import { Observable, Receipt } from \"@anderjason/observable\";\nimport { ElementStyle, UndoContext } from \"../../../src\";\nimport { Actor, MultiBinding } from \"skytree\";\nimport { Point2 } from \"@anderjason/geometry\";\n\nexport interface UndoDemoProps {}\n\nexport class UndoDemo extends Actor<UndoDemoProps> {\n  readonly parentElement = Observable.ofEmpty<HTMLElement>();\n  readonly isVisible = Observable.ofEmpty<boolean>();\n\n  onActivate() {\n    const wrapper = this.addActor(\n      WrapperStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.parentElement,\n      })\n    );\n\n    const indicator = this.addActor(\n      IndicatorStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: wrapper.element,\n      })\n    );\n\n    const buttonsArea = this.addActor(\n      ButtonAreaStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.parentElement,\n      })\n    );\n\n    const sidebar = this.addActor(\n      SidebarStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.parentElement,\n      })\n    );\n\n    const undoButton = this.addActor(\n      ButtonStyle.toManagedElement({\n        tagName: \"button\",\n        parentElement: buttonsArea.element,\n      })\n    );\n    undoButton.element.innerHTML = \"Undo\";\n\n    const redoButton = this.addActor(\n      ButtonStyle.toManagedElement({\n        tagName: \"button\",\n        parentElement: buttonsArea.element,\n      })\n    );\n    redoButton.element.innerHTML = \"Redo\";\n\n    const clearAndKeepButton = this.addActor(\n      ButtonStyle.toManagedElement({\n        tagName: \"button\",\n        parentElement: buttonsArea.element,\n      })\n    );\n    clearAndKeepButton.element.innerHTML = \"Clear and keep current\";\n\n    const clearAllButton = this.addActor(\n      ButtonStyle.toManagedElement({\n        tagName: \"button\",\n        parentElement: buttonsArea.element,\n      })\n    );\n    clearAllButton.element.innerHTML = \"Clear all\";\n\n    const undoContext = new UndoContext<Point2>(undefined, 10);\n\n    undoContext.currentIndex.didChange.subscribe(() => {\n      const steps = undoContext.steps.toValues();\n\n      sidebar.element.innerHTML = \"\";\n\n      const currentIndex = undoContext.currentIndex.value;\n      steps.forEach((step, idx) => {\n        const div = document.createElement(\"div\");\n        div.innerHTML = `${step.x},${step.y}`;\n        if (idx === currentIndex) {\n          div.style.fontWeight = \"bold\";\n          div.style.color = \"#FFF\";\n        }\n        sidebar.element.appendChild(div);\n      });\n\n      clearAllButton.setModifier(\"isDisabled\", steps.length === 0);\n      clearAndKeepButton.setModifier(\"isDisabled\", steps.length < 2);\n    }, true);\n\n    this.cancelOnDeactivate(\n      undoContext.canUndo.didChange.subscribe((canUndo) => {\n        undoButton.setModifier(\"isDisabled\", canUndo == false);\n      }, true)\n    );\n\n    this.cancelOnDeactivate(\n      undoContext.canRedo.didChange.subscribe((canRedo) => {\n        redoButton.setModifier(\"isDisabled\", canRedo == false);\n      }, true)\n    );\n\n    this.cancelOnDeactivate(\n      clearAndKeepButton.addManagedEventListener(\"click\", () => {\n        undoContext.clearSteps(\"keepCurrent\");\n      })\n    );\n\n    this.cancelOnDeactivate(\n      clearAllButton.addManagedEventListener(\"click\", () => {\n        undoContext.clearSteps(\"clearAll\");\n      })\n    );\n\n    this.cancelOnDeactivate(\n      undoButton.addManagedEventListener(\"click\", () => {\n        undoContext.undo();\n      })\n    );\n\n    this.cancelOnDeactivate(\n      redoButton.addManagedEventListener(\"click\", () => {\n        undoContext.redo();\n      })\n    );\n\n    this.cancelOnDeactivate(\n      undoContext.output.didChange.subscribe((point) => {\n        if (point == null) {\n          indicator.style.display = \"none\";\n          return;\n        }\n\n        indicator.style.display = \"block\";\n        indicator.style.transform = `translate(${point.x}px, ${point.y}px)`;\n      }, true)\n    );\n\n    const onClick = (e: MouseEvent) => {\n      const bounds = wrapper.element.getBoundingClientRect();\n\n      undoContext.pushStep(\n        Point2.givenXY(\n          Math.round(e.clientX - bounds.left),\n          Math.round(e.clientY - bounds.top)\n        )\n      );\n    };\n\n    wrapper.element.addEventListener(\"click\", onClick);\n\n    this.cancelOnDeactivate(\n      new Receipt(() => {\n        wrapper.element.removeEventListener(\"click\", onClick);\n      })\n    );\n  }\n}\n\nconst WrapperStyle = ElementStyle.givenDefinition({\n  css: `\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `,\n});\n\nconst IndicatorStyle = ElementStyle.givenDefinition({\n  css: `\n    position: absolute;\n    left: -10px;\n    top: -10px;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: blue;\n  `,\n});\n\nconst ButtonStyle = ElementStyle.givenDefinition({\n  css: `\n    appearance: none;\n    background: blue;\n    border: none;\n    color: #FFF;\n    border-radius: 6px;\n    padding: 10px 20px;\n    outline: none;\n    transition: 0.1s ease transform;\n    user-select: none;\n\n    &:active {\n      transform: scale(0.95);\n    }\n  `,\n  modifiers: {\n    isDisabled: `\n      opacity: 0.3;\n      pointer-events: none;\n    `,\n  },\n});\n\nconst ButtonAreaStyle = ElementStyle.givenDefinition({\n  css: `\n    display: grid;\n    position: absolute;\n    grid-template-columns: auto auto;\n    grid-gap: 0.5rem;\n    bottom: 20px;\n    left: 20px;\n  `,\n});\n\nconst SidebarStyle = ElementStyle.givenDefinition({\n  css: `\n    position: absolute;\n    right: 20px;\n    top: 20px;\n    bottom: 20px;\n    text-align: right;\n    font-family: monospace;\n    color: #888;\n    user-select: none;\n  `,\n});\n","import { Actor } from \"skytree\";\nimport { ElementStyle, KeyboardWatcher } from \"../../../src\";\nimport { Observable } from \"@anderjason/observable\";\n\nexport interface KeyboardWatcherDemoProps {}\n\nexport class KeyboardWatcherDemo extends Actor<KeyboardWatcherDemoProps> {\n  readonly parentElement = Observable.ofEmpty<HTMLElement>();\n  readonly isVisible = Observable.ofEmpty<boolean>();\n\n  onActivate() {\n    const label = this.addActor(\n      LabelStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.parentElement,\n      })\n    );\n\n    this.cancelOnDeactivate(\n      KeyboardWatcher.instance.keys.didChange.subscribe((keys) => {\n        if (keys == null || keys.length == 0) {\n          label.element.innerHTML = \"No keys pressed\";\n          return;\n        }\n\n        label.element.innerHTML = \"\";\n        keys.forEach((key) => {\n          const div = document.createElement(\"div\");\n          div.innerHTML = key;\n          label.element.appendChild(div);\n        });\n      }, true)\n    );\n  }\n}\n\nconst LabelStyle = ElementStyle.givenDefinition({\n  css: `\n    color: #FFF;\n    font-family: monospace;\n    font-size: 1.5rem;\n    padding: 40px;\n    user-select: none;\n  `,\n});\n","import { Observable } from \"@anderjason/observable\";\nimport { Duration } from \"@anderjason/time\";\nimport { ElementStyle, ElementSizeWatcher } from \"../../../src\";\nimport { Actor, ConditionalActivator, Timer } from \"skytree\";\n\nexport interface ElementSizeWatcherDemoProps {}\n\nexport class ElementSizeWatcherDemo extends Actor<ElementSizeWatcherDemoProps> {\n  readonly parentElement = Observable.ofEmpty<HTMLElement>();\n  readonly isVisible = Observable.ofEmpty<boolean>();\n\n  onActivate() {\n    const wrapper = this.addActor(\n      WrapperStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.parentElement,\n      })\n    );\n\n    const bounds = this.addActor(\n      BoundsStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: wrapper.element,\n        transitionIn: () => {\n          bounds.toggleModifier(\"isSmall\");\n        },\n      })\n    );\n\n    const boundsWatcher = this.addActor(\n      new ElementSizeWatcher({\n        element: bounds.element,\n      })\n    );\n\n    this.addActor(\n      new ConditionalActivator({\n        input: this.isVisible,\n        fn: (v) => v,\n        actor: new Timer({\n          duration: Duration.givenSeconds(1.5),\n          isRepeating: true,\n          fn: () => {\n            bounds.toggleModifier(\"isSmall\");\n          },\n        }),\n      })\n    );\n\n    this.cancelOnDeactivate(\n      boundsWatcher.output.didChange.subscribe((b) => {\n        if (b == null) {\n          return;\n        }\n\n        const { width, height } = b;\n        bounds.element.innerHTML = `${Math.round(width)}px ${Math.round(\n          height\n        )}px`;\n      }, true)\n    );\n  }\n}\n\nconst WrapperStyle = ElementStyle.givenDefinition({\n  css: `\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `,\n});\n\nconst BoundsStyle = ElementStyle.givenDefinition({\n  css: `\n    background: #0055FF;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    width: 240px;\n    height: 200px;\n    transition: 1s ease all;\n    border-radius: 8px;\n    font-family: monospace;\n    user-select: none;\n  `,\n  modifiers: {\n    isSmall: `\n      width: 350px;\n      height: 100px;\n    `,\n  },\n});\n","import { Observable } from \"@anderjason/observable\";\nimport { Duration } from \"@anderjason/time\";\nimport { ElementStyle } from \"../../../src\";\nimport { Actor, Timer } from \"skytree\";\n\nexport interface TransitionDemoProps {}\n\nexport class TransitionDemo extends Actor<TransitionDemoProps> {\n  readonly parentElement = Observable.ofEmpty<HTMLElement>();\n  readonly isVisible = Observable.ofEmpty<boolean>();\n\n  onActivate() {\n    const outer = this.addActor(\n      OuterStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: this.parentElement,\n      })\n    );\n\n    const wrapperParent = Observable.ofEmpty<HTMLElement>();\n\n    this.addActor(\n      new Timer({\n        duration: Duration.givenSeconds(2),\n        isRepeating: true,\n        fn: () => {\n          if (wrapperParent.value == null) {\n            wrapperParent.setValue(outer.element);\n          } else {\n            wrapperParent.setValue(undefined);\n          }\n        },\n      })\n    );\n\n    const wrapper = this.addActor(\n      WrapperStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: wrapperParent,\n      })\n    );\n\n    const circle = this.addActor(\n      CircleStyle.toManagedElement({\n        tagName: \"div\",\n        parentElement: wrapper.element,\n        transitionIn: () => {\n          circle.setModifier(\"isVisible\", true);\n        },\n        transitionOut: async () => {\n          circle.setModifier(\"isVisible\", false);\n          await Duration.givenSeconds(0.5).toDelay();\n        },\n      })\n    );\n  }\n}\n\nconst OuterStyle = ElementStyle.givenDefinition({\n  css: `\n    \n  `,\n});\n\nconst WrapperStyle = ElementStyle.givenDefinition({\n  css: `\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `,\n});\n\nconst CircleStyle = ElementStyle.givenDefinition({\n  css: `\n    border-radius: 50%;\n    background: white;\n    width: 80px;\n    height: 80px;\n    transform: scale(0.1);\n    transition: 0.5s ease transform;\n  `,\n  modifiers: {\n    isVisible: `\n      transform: scale(1);\n    `,\n  },\n});\n"],"sourceRoot":""}