!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=56)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEvent=t.Receipt=t.ReadOnlyObservableSet=t.ReadOnlyObservableDict=t.ReadOnlyObservableArray=t.ReadOnlyObservable=t.ObservableSet=t.ObservableDict=t.ObservableArray=t.Observable=void 0;const i=n(57);Object.defineProperty(t,"Observable",{enumerable:!0,get:function(){return i.Observable}});const r=n(119);Object.defineProperty(t,"ObservableArray",{enumerable:!0,get:function(){return r.ObservableArray}});const s=n(120);Object.defineProperty(t,"ObservableDict",{enumerable:!0,get:function(){return s.ObservableDict}});const o=n(121);Object.defineProperty(t,"ObservableSet",{enumerable:!0,get:function(){return o.ObservableSet}});const a=n(122);Object.defineProperty(t,"ReadOnlyObservable",{enumerable:!0,get:function(){return a.ReadOnlyObservable}});const l=n(123);Object.defineProperty(t,"ReadOnlyObservableArray",{enumerable:!0,get:function(){return l.ReadOnlyObservableArray}});const c=n(124);Object.defineProperty(t,"ReadOnlyObservableDict",{enumerable:!0,get:function(){return c.ReadOnlyObservableDict}});const u=n(125);Object.defineProperty(t,"ReadOnlyObservableSet",{enumerable:!0,get:function(){return u.ReadOnlyObservableSet}});const h=n(29);Object.defineProperty(t,"Receipt",{enumerable:!0,get:function(){return h.Receipt}});const d=n(7);Object.defineProperty(t,"TypedEvent",{enumerable:!0,get:function(){return d.TypedEvent}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=t.SequentialWorker=t.PathBinding=t.MultiBinding=t.ExclusiveActivator=t.DelayActivator=t.SourceTargetBinding=t.ConvertBinding=t.ConditionalActivator=t.ArrayActivator=t.Actor=void 0;const i=n(4);Object.defineProperty(t,"Actor",{enumerable:!0,get:function(){return i.Actor}});const r=n(156);Object.defineProperty(t,"ArrayActivator",{enumerable:!0,get:function(){return r.ArrayActivator}});const s=n(30);Object.defineProperty(t,"ConditionalActivator",{enumerable:!0,get:function(){return s.ConditionalActivator}});const o=n(157);Object.defineProperty(t,"ConvertBinding",{enumerable:!0,get:function(){return o.ConvertBinding}});const a=n(158);Object.defineProperty(t,"SourceTargetBinding",{enumerable:!0,get:function(){return a.SourceTargetBinding}});const l=n(159);Object.defineProperty(t,"DelayActivator",{enumerable:!0,get:function(){return l.DelayActivator}});const c=n(160);Object.defineProperty(t,"ExclusiveActivator",{enumerable:!0,get:function(){return c.ExclusiveActivator}});const u=n(161);Object.defineProperty(t,"MultiBinding",{enumerable:!0,get:function(){return u.MultiBinding}});const h=n(162);Object.defineProperty(t,"PathBinding",{enumerable:!0,get:function(){return h.PathBinding}});const d=n(163);Object.defineProperty(t,"SequentialWorker",{enumerable:!0,get:function(){return d.SequentialWorker}});const p=n(31);Object.defineProperty(t,"Timer",{enumerable:!0,get:function(){return p.Timer}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValuePath=t.StringUtil=t.SetUtil=t.PromiseUtil=t.Percent=t.ObjectUtil=t.NumberUtil=t.MapUtil=t.ArrayUtil=void 0;const i=n(25);Object.defineProperty(t,"ArrayUtil",{enumerable:!0,get:function(){return i.ArrayUtil}});const r=n(74);Object.defineProperty(t,"MapUtil",{enumerable:!0,get:function(){return r.MapUtil}});const s=n(77);Object.defineProperty(t,"NumberUtil",{enumerable:!0,get:function(){return s.NumberUtil}});const o=n(86);Object.defineProperty(t,"ObjectUtil",{enumerable:!0,get:function(){return o.ObjectUtil}});const a=n(94);Object.defineProperty(t,"Percent",{enumerable:!0,get:function(){return a.Percent}});const l=n(95);Object.defineProperty(t,"PromiseUtil",{enumerable:!0,get:function(){return l.PromiseUtil}});const c=n(100);Object.defineProperty(t,"SetUtil",{enumerable:!0,get:function(){return c.SetUtil}});const u=n(107);Object.defineProperty(t,"StringUtil",{enumerable:!0,get:function(){return u.StringUtil}});const h=n(118);Object.defineProperty(t,"ValuePath",{enumerable:!0,get:function(){return h.ValuePath}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=t.Size2=t.Rotation=t.Polygon2=t.Point2=t.Segment2=t.Line2=t.Box2=void 0;const i=n(164);Object.defineProperty(t,"Box2",{enumerable:!0,get:function(){return i.Box2}});const r=n(165);Object.defineProperty(t,"Line2",{enumerable:!0,get:function(){return r.Line2}});const s=n(9);Object.defineProperty(t,"Point2",{enumerable:!0,get:function(){return s.Point2}});const o=n(166);Object.defineProperty(t,"Polygon2",{enumerable:!0,get:function(){return o.Polygon2}});const a=n(32);Object.defineProperty(t,"Rotation",{enumerable:!0,get:function(){return a.Rotation}});const l=n(35);Object.defineProperty(t,"Segment2",{enumerable:!0,get:function(){return l.Segment2}});const c=n(33);Object.defineProperty(t,"Size2",{enumerable:!0,get:function(){return c.Size2}});const u=n(10);Object.defineProperty(t,"Vector2",{enumerable:!0,get:function(){return u.Vector2}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;const i=n(2),r=n(0);class s{constructor(e){this._receipts=r.ObservableSet.ofEmpty(),this.receipts=r.ReadOnlyObservableSet.givenObservableSet(this._receipts),this._parentObject=r.Observable.ofEmpty(),this.parentObject=r.ReadOnlyObservable.givenObservable(this._parentObject),this._childObjects=r.ObservableArray.ofEmpty(),this.childObjects=r.ReadOnlyObservableArray.givenObservableArray(this._childObjects),this._isActive=r.Observable.givenValue(!1),this.isActive=r.ReadOnlyObservable.givenObservable(this._isActive),this._props=e,this.actorId=i.StringUtil.stringOfRandomCharacters(8)}get props(){return this._props}get managedObjectId(){return this.actorId}activate(){return!1===this.isActive.value&&(this._thisReceipt=new r.Receipt(()=>{this.deactivate()}),s._activeSet.addValue(this),this._isActive.setValue(!0),this._childObjects.toValues().forEach(e=>{e.activate()}),this.onActivate()),this._thisReceipt}deactivate(){if(null==this._thisReceipt)return;s._activeSet.removeValue(this),this._isActive.setValue(!1),this._receipts.toArray().forEach(e=>{e.cancel()}),this._receipts.clear(),this._childObjects.toValues().forEach(e=>{e.deactivate()}),this._childObjects.clear();const e=this._thisReceipt;this._thisReceipt=void 0,null!=e&&e.cancel()}addActor(e){if(null!=e)return null!=e.parentObject.value&&e.parentObject.value.removeActor(e),this._childObjects.addValue(e),e._parentObject.setValue(this),!0===this.isActive.value&&e.activate(),e}cancelOnDeactivate(e){if(null!=e)return this._receipts.addValue(e),e}removeCancelOnDeactivate(e){null!=e&&this._receipts.removeValue(e)}removeActor(e){if(null!=e&&-1!==this._childObjects.toIndexOfValue(e)){try{e.deactivate()}catch(e){console.error(e)}this._childObjects.removeValue(e),e._parentObject.setValue(void 0)}}onActivate(){}}t.Actor=s,s._activeSet=r.ObservableSet.ofEmpty(),s.activeSet=r.ReadOnlyObservableSet.givenObservableSet(s._activeSet)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndoContext=t.Transform=t.TextInputBinding=t.StepDelayBinding=t.SequentialChoice=t.ScrollWatcher=t.ScrollArea=t.ScreenSize=t.Preload=t.Pointer=t.ObservableState=t.NetworkUtil=t.ManagedElement=t.ManagedCanvas=t.LocationUtil=t.KeyboardWatcher=t.KeyboardShortcut=t.IntersectionWatcher=t.FocusWatcher=t.EveryFrame=t.ElementStyle=t.ElementSizeWatcher=t.ElementMountWatcher=t.DynamicStyleElement=t.Corners=t.CheckboxBinding=t.CanvasUtil=void 0;const i=n(152);Object.defineProperty(t,"CanvasUtil",{enumerable:!0,get:function(){return i.CanvasUtil}});const r=n(155);Object.defineProperty(t,"CheckboxBinding",{enumerable:!0,get:function(){return r.CheckboxBinding}});const s=n(16);Object.defineProperty(t,"Corners",{enumerable:!0,get:function(){return s.Corners}});const o=n(36);Object.defineProperty(t,"DynamicStyleElement",{enumerable:!0,get:function(){return o.DynamicStyleElement}});const a=n(37);Object.defineProperty(t,"ElementMountWatcher",{enumerable:!0,get:function(){return a.ElementMountWatcher}});const l=n(173);Object.defineProperty(t,"ElementSizeWatcher",{enumerable:!0,get:function(){return l.ElementSizeWatcher}});const c=n(38);Object.defineProperty(t,"ElementStyle",{enumerable:!0,get:function(){return c.ElementStyle}});const u=n(178);Object.defineProperty(t,"EveryFrame",{enumerable:!0,get:function(){return u.EveryFrame}});const h=n(179);Object.defineProperty(t,"FocusWatcher",{enumerable:!0,get:function(){return h.FocusWatcher}});const d=n(180);Object.defineProperty(t,"IntersectionWatcher",{enumerable:!0,get:function(){return d.IntersectionWatcher}});const p=n(181);Object.defineProperty(t,"KeyboardShortcut",{enumerable:!0,get:function(){return p.KeyboardShortcut}});const v=n(40);Object.defineProperty(t,"KeyboardWatcher",{enumerable:!0,get:function(){return v.KeyboardWatcher}});const b=n(182);Object.defineProperty(t,"LocationUtil",{enumerable:!0,get:function(){return b.LocationUtil}});const f=n(185);Object.defineProperty(t,"ManagedCanvas",{enumerable:!0,get:function(){return f.ManagedCanvas}});const m=n(17);Object.defineProperty(t,"ManagedElement",{enumerable:!0,get:function(){return m.ManagedElement}});const g=n(227);Object.defineProperty(t,"NetworkUtil",{enumerable:!0,get:function(){return g.NetworkUtil}});const y=n(231);Object.defineProperty(t,"ObservableState",{enumerable:!0,get:function(){return y.ObservableState}});const _=n(233);Object.defineProperty(t,"Pointer",{enumerable:!0,get:function(){return _.Pointer}});const w=n(235);Object.defineProperty(t,"Preload",{enumerable:!0,get:function(){return w.Preload}});const O=n(237);Object.defineProperty(t,"ScreenSize",{enumerable:!0,get:function(){return O.ScreenSize}});const E=n(238);Object.defineProperty(t,"ScrollArea",{enumerable:!0,get:function(){return E.ScrollArea}});const x=n(239);Object.defineProperty(t,"ScrollWatcher",{enumerable:!0,get:function(){return x.ScrollWatcher}});const S=n(240);Object.defineProperty(t,"SequentialChoice",{enumerable:!0,get:function(){return S.SequentialChoice}});const P=n(241);Object.defineProperty(t,"StepDelayBinding",{enumerable:!0,get:function(){return P.StepDelayBinding}});const C=n(242);Object.defineProperty(t,"TextInputBinding",{enumerable:!0,get:function(){return C.TextInputBinding}});const M=n(243);Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return M.Transform}});const A=n(53);Object.defineProperty(t,"UndoContext",{enumerable:!0,get:function(){return A.UndoContext}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Throttle=t.Instant=t.Duration=t.Debounce=void 0;const i=n(212);Object.defineProperty(t,"Debounce",{enumerable:!0,get:function(){return i.Debounce}});const r=n(213);Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return r.Duration}});const s=n(214);Object.defineProperty(t,"Instant",{enumerable:!0,get:function(){return s.Instant}});const o=n(215);Object.defineProperty(t,"Throttle",{enumerable:!0,get:function(){return o.Throttle}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEvent=void 0;const i=n(2),r=n(29);t.TypedEvent=class{constructor(e){this._subscriptions=void 0,this._lastValue=e}subscribe(e,t=!1){return null==this._subscriptions&&(this._subscriptions=[]),this._subscriptions.push(e),t&&e(this._lastValue),new r.Receipt(()=>this.unsubscribe(e))}async emit(e){const t=this._lastValue;this._lastValue=e,null!=this._subscriptions&&await i.PromiseUtil.asyncSequenceGivenArrayAndCallback(this._subscriptions,async n=>{await n(e,t)})}unsubscribe(e){null!=this._subscriptions&&(this._subscriptions=i.ArrayUtil.arrayWithoutValue(this._subscriptions,e),0===this._subscriptions.length&&(this._subscriptions=void 0))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;const i=n(2),r=n(127),s=n(128),o=n(129),a=n(130),l=n(131),c=n(132),u=n(133),h=n(134),d=n(135),p=n(136),v=n(137),b=n(138),f=n(139),m=n(140),g=n(141),y=n(142);class _{constructor(e,t){this._labColor=e,this._alpha=t}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}static givenHslFloat(e,t=i.Percent.givenFraction(1,1)){return _.givenRgbFloat(c.rgbFloatGivenHsl(e),t)}static givenHexString(e){return _.givenRgbFloat(f.rgbFloatGivenHex(e))}static givenHclFloat(e,t=i.Percent.givenFraction(1,1)){return new _(o.labGivenHcl(e),t)}static givenRgbFloat(e,t=i.Percent.givenFraction(1,1)){const n=a.labGivenXyz(b.xyzGivenRgbFloat(e));return new _(n,t)}static givenRgb255(e,t,n,r){return _.givenRgbFloat({r:i.Percent.givenFraction(e,255),g:i.Percent.givenFraction(t,255),b:i.Percent.givenFraction(n,255)},r)}static givenColorNumber(e,t=1){let n;n=1===t?"":Math.round(255*i.NumberUtil.numberWithHardLimit(t,0,1)).toString(16).padStart(2,"0");const r=`#${e.toString(16).padStart(6,"0")}${n}`;return _.givenHexString(r)}isEqual(e){return null!=e&&(this._labColor.a===e._labColor.a&&this._labColor.b===e._labColor.b&&this._labColor.l===e._labColor.l)}toPortableString(){const e={l:this._labColor.l,a:this._labColor.a,b:this._labColor.b};return JSON.stringify(e)}withLightness(e){const{a:t,b:n}=this._labColor;return new _({l:100*e,a:t,b:n},this._alpha)}withRelativeLightness(e){const{l:t}=this._labColor;return this.withLightness(t/100+e)}withHue(e){const{s:t,l:n}=s.hslGivenRgbFloat(this.toRgbFloatColor());return new _(a.labGivenXyz(b.xyzGivenRgbFloat(c.rgbFloatGivenHsl({h:e,s:t,l:n}))),this._alpha)}withRelativeHue(e){const{h:t}=s.hslGivenRgbFloat(this.toRgbFloatColor());let n=t.toNumber(1)+e.toNumber(1);return n>1&&(n-=1),n<0&&(n+=1),this.withHue(i.Percent.givenFraction(n,1))}withSaturation(e){let{l:t,h:n}=l.hclGivenLab(this._labColor);return new _(o.labGivenHcl({h:n,c:e,l:t}),this._alpha)}withRelativeSaturation(e){let t=l.hclGivenLab(this._labColor).c.toNumber(1);return t=i.NumberUtil.numberWithHardLimit(t+e.toNumber(1),0,1),this.withSaturation(i.Percent.givenFraction(t,1))}withAlpha(e){return new _(this._labColor,e)}toDistanceGivenColor(e){return y.distanceGivenColors(this,e)}toString(){return this.toRgbString()}toHexString(){return null==this._hexString&&(this._hexString=m.hexGivenRgb(this.toRgbFloatColor(),this._alpha)),this._hexString}toLabColor(){return{l:this._labColor.l,a:this._labColor.a,b:this._labColor.b}}toRgbFloatColor(){return u.rgbFloatGivenXyz(v.xyzGivenLab(this._labColor))}toRgbString(){return p.rgbStringGivenRgbFloat(this.toRgbFloatColor(),this._alpha)}toHslColor(){return s.hslGivenRgbFloat(this.toRgbFloatColor())}toHslString(){return d.hslStringGivenHsl(this.toHslColor())}toHsbColor(){return r.hsbGivenRgbFloat(this.toRgbFloatColor())}toHsbString(){return h.hsbStringGivenHsb(this.toHsbColor())}toHclColor(){return l.hclGivenLab(this._labColor)}toHighContrastColor(){return g.highContrastColorGivenColor(this)}toColorNumber(){return parseInt(this.toHexString().slice(1,7),16)}}t.Color=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point2=void 0;const i=n(10);class r{constructor(e,t){this._x=e,this._y=t}static givenXY(e,t){return new r(e,t)}static ofZero(){return this._zero}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get x(){return this._x}get y(){return this._y}get isZero(){return 0===this._x&&0===this._y}isEqual(e){return null!=e&&(e instanceof r&&(e._x==this._x&&e._y==this._y))}toDistance(e){return this.toVector(e).toMagnitude()}toVector(e){return i.Vector2.givenXY(e.x-this.x,e.y-this.y)}withAddedVector(e){return new r(this.x+e.x,this.y+e.y)}withSubtractedVector(e){return new r(this.x-e.x,this.y-e.y)}withRotationAroundPoint(e,t){return r.givenXY(Math.cos(t.radians)*(this.x-e.x)-Math.sin(t.radians)*(this.y-e.y)+e.x,Math.sin(t.radians)*(this.x-e.x)+Math.cos(t.radians)*(this.y-e.y)+e.y)}}t.Point2=r,r._zero=new r(0,0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;const i=n(9),r=n(32);class s{constructor(e,t){this.isEqual=e=>null!=e&&(e instanceof s&&(this._x===e._x&&this._y===e._y)),this._x=e,this._y=t}static givenXY(e,t){return new s(e,t)}static givenPoint(e){return new s(e.x,e.y)}static givenPoints(e,t){return e.toVector(t)}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get x(){return this._x}get y(){return this._y}get isZero(){return 0===this._x&&0===this._y}withMultipliedScalar(e){return new s(this._x*e,this._y*e)}withDividedScalar(e){return new s(this._x/e,this._y/e)}withAddedVector(e){return new s(this._x+e._x,this._y+e._y)}withSubtractedVector(e){return new s(this._x-e._x,this._y-e._y)}withMultipliedVector(e){return new s(this._x*e._x,this._y*e._y)}withDividedVector(e){return new s(this._x/e._x,this._y/e._y)}toPoint(){return i.Point2.givenXY(this.x,this.y)}toDotProduct(e){return this._x*e._x+this._y*e._y}toMagnitude(){return Math.sqrt(this._x*this._x+this._y*this._y)}toAngle(e){const t=this.toDotProduct(e),n=this.toMagnitude()*e.toMagnitude();return r.Rotation.givenRadians(Math.acos(t/n))}toSignedAngle(e){let t=Math.atan2(e.y,e.x)-Math.atan2(this.y,this.x);return t>Math.PI?t-=2*Math.PI:t<-Math.PI&&(t+=2*Math.PI),r.Rotation.givenRadians(t)}withNormalizedMagnitude(){return this.withDividedScalar(this.toMagnitude())}withReversedDirection(){return new s(-this._x,-this._y)}withRotation(e,t){let n=e.radians;"clockwise"===t&&(n*=-1);const i=Math.cos(n),r=Math.sin(n),o=this.x,a=this.y;return new s(o*i-a*r,o*r+a*i)}withPerpendicularDirection(e){return"clockwise"===e?new s(this.y,-this.x):new s(-this.y,this.x)}withWeightedAverage(e,t){const n=t.toNumber(1),i=this.withMultipliedScalar(1-n),r=e.withMultipliedScalar(n);return i.withAddedVector(r)}}t.Vector2=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndoContext=t.Transform=t.TextInputBinding=t.StepDelayBinding=t.SequentialChoice=t.ScrollWatcher=t.ScrollArea=t.ScreenSize=t.Preload=t.Pointer=t.ObservableState=t.NetworkUtil=t.ManagedElement=t.LocationUtil=t.KeyboardWatcher=t.KeyboardShortcut=t.IntersectionWatcher=t.FocusWatcher=t.EveryFrame=t.ElementStyle=t.ElementBoundsWatcher=t.DynamicStyleElement=t.Corners=t.CheckboxBinding=t.CanvasUtil=void 0;const i=n(186);Object.defineProperty(t,"CanvasUtil",{enumerable:!0,get:function(){return i.CanvasUtil}});const r=n(189);Object.defineProperty(t,"CheckboxBinding",{enumerable:!0,get:function(){return r.CheckboxBinding}});const s=n(18);Object.defineProperty(t,"Corners",{enumerable:!0,get:function(){return s.Corners}});const o=n(44);Object.defineProperty(t,"DynamicStyleElement",{enumerable:!0,get:function(){return o.DynamicStyleElement}});const a=n(194);Object.defineProperty(t,"ElementBoundsWatcher",{enumerable:!0,get:function(){return a.ElementBoundsWatcher}});const l=n(20);Object.defineProperty(t,"ElementStyle",{enumerable:!0,get:function(){return l.ElementStyle}});const c=n(197);Object.defineProperty(t,"EveryFrame",{enumerable:!0,get:function(){return c.EveryFrame}});const u=n(198);Object.defineProperty(t,"FocusWatcher",{enumerable:!0,get:function(){return u.FocusWatcher}});const h=n(199);Object.defineProperty(t,"IntersectionWatcher",{enumerable:!0,get:function(){return h.IntersectionWatcher}});const d=n(200);Object.defineProperty(t,"KeyboardShortcut",{enumerable:!0,get:function(){return d.KeyboardShortcut}});const p=n(45);Object.defineProperty(t,"KeyboardWatcher",{enumerable:!0,get:function(){return p.KeyboardWatcher}});const v=n(201);Object.defineProperty(t,"LocationUtil",{enumerable:!0,get:function(){return v.LocationUtil}});const b=n(19);Object.defineProperty(t,"ManagedElement",{enumerable:!0,get:function(){return b.ManagedElement}});const f=n(204);Object.defineProperty(t,"NetworkUtil",{enumerable:!0,get:function(){return f.NetworkUtil}});const m=n(208);Object.defineProperty(t,"ObservableState",{enumerable:!0,get:function(){return m.ObservableState}});const g=n(210);Object.defineProperty(t,"Pointer",{enumerable:!0,get:function(){return g.Pointer}});const y=n(217);Object.defineProperty(t,"Preload",{enumerable:!0,get:function(){return y.Preload}});const _=n(219);Object.defineProperty(t,"ScreenSize",{enumerable:!0,get:function(){return _.ScreenSize}});const w=n(220);Object.defineProperty(t,"ScrollArea",{enumerable:!0,get:function(){return w.ScrollArea}});const O=n(221);Object.defineProperty(t,"ScrollWatcher",{enumerable:!0,get:function(){return O.ScrollWatcher}});const E=n(222);Object.defineProperty(t,"SequentialChoice",{enumerable:!0,get:function(){return E.SequentialChoice}});const x=n(223);Object.defineProperty(t,"StepDelayBinding",{enumerable:!0,get:function(){return x.StepDelayBinding}});const S=n(224);Object.defineProperty(t,"TextInputBinding",{enumerable:!0,get:function(){return S.TextInputBinding}});const P=n(225);Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return P.Transform}});const C=n(49);Object.defineProperty(t,"UndoContext",{enumerable:!0,get:function(){return C.UndoContext}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithHardLimit=void 0,t.numberWithHardLimit=function(e,t,n){return Math.min(Math.max(e,t),n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncSequenceGivenArrayAndCallback=void 0,t.asyncSequenceGivenArrayAndCallback=async function(e,t){if(null==e)return;const n=e.length;for(let i=0;i<n;i++)await t(e[i],i,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithNoCase=void 0;const i=/\s/,r=/(_|-|\.|:)/,s=/([a-z][A-Z]|[A-Z][a-z])/,o=/[\W_]+(.|$)/g,a=/(.)([A-Z]+)/g;t.stringWithNoCase=function(e){if(null==e)throw new Error("input is required");return i.test(e)?e.toLowerCase():r.test(e)?(function(e){return e.replace(o,(e,t)=>t?" "+t:"")}(e)||e).toLowerCase():s.test(e)?function(e){return e.replace(a,(function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")}))}(e).toLowerCase():e.toLowerCase()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=t.ColorGradient=t.Color=void 0;const i=n(8);Object.defineProperty(t,"Color",{enumerable:!0,get:function(){return i.Color}});const r=n(143);Object.defineProperty(t,"ColorGradient",{enumerable:!0,get:function(){return r.ColorGradient}});const s=n(150);Object.defineProperty(t,"Palette",{enumerable:!0,get:function(){return s.Palette}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Corners=void 0;const i=n(3),r=n(169),s=n(171);class o{constructor(e,t,n,i){this.leftTop=e,this.rightTop=t,this.rightBottom=n,this.leftBottom=i}static givenBox(e){return new o(e.toLeftTop(),e.toRightTop(),e.toRightBottom(),e.toLeftBottom())}static givenContainedPoints(e){return r.cornersGivenContainedPoints(e)}static givenPoints(e){if(null==e)throw new Error("Points is required");if(4!==e.length)throw new Error("Array must have 4 points");return new o(e[0],e[1],e[2],e[3])}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}isEqual(e){return null!=e&&(e instanceof o&&(this.leftTop.isEqual(e.leftTop)&&this.rightTop.isEqual(e.rightTop)&&this.rightBottom.isEqual(e.rightBottom)&&this.leftBottom.isEqual(e.leftBottom)))}isSizeEqual(e,t=10){if(null==e)throw new Error("other is required");const n=e.toSize(),i=this.toSize(),r=Math.abs(n.width-i.width),s=Math.abs(n.height-i.height);return r<t&&s<t}toSize(){if(null==this._size){const e=(this.leftTop.toDistance(this.rightTop)+this.leftBottom.toDistance(this.rightBottom))/2,t=(this.leftTop.toDistance(this.leftBottom)+this.rightTop.toDistance(this.rightBottom))/2;this._size=i.Size2.givenWidthHeight(e,t)}return this._size}toPoints(){return[this.leftTop,this.rightTop,this.rightBottom,this.leftBottom]}withTransform(e){if(null==e)throw new Error("transform is required");return new o(e.toTransformedPoint(this.leftTop),e.toTransformedPoint(this.rightTop),e.toTransformedPoint(this.rightBottom),e.toTransformedPoint(this.leftBottom))}withAlignment(e){return s.cornersWithAlignment(this,e)}}t.Corners=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManagedElement=void 0;const i=n(0),r=n(1),s=n(37);class o extends r.Actor{constructor(e){super({}),this.element=document.createElement(e.tagName),null!=this.props.innerHTML&&(this.element.innerHTML=this.props.innerHTML),this._transitionIn=e.transitionIn,this._transitionOut=e.transitionOut,null==e.classNames?this.classes=i.ObservableSet.ofEmpty():Array.isArray(e.classNames)?this.classes=i.ObservableSet.givenValues(e.classNames):this.classes=e.classNames,null==e.parentElement?this.parentElement=i.Observable.ofEmpty():i.Observable.isObservable(e.parentElement)?this.parentElement=e.parentElement:this.parentElement=i.Observable.givenValue(e.parentElement,i.Observable.isStrictEqual)}static givenDefinition(e){return new o(e)}get style(){return this.element.style}onActivate(){let e;this.element.className=this.classes.toArray().join(" "),this.cancelOnDeactivate(this.parentElement.didChange.subscribe(async e=>{this.element.parentElement!==e&&(null!=this.element.parentElement&&(null!=this._transitionOut&&await this._transitionOut(this),this.element.parentElement.removeChild(this.element)),null!=e&&e.appendChild(this.element))},!0)),null==this._transitionIn&&null==this._transitionOut||this.watchDomVisibility(),this.cancelOnDeactivate(new i.Receipt(async()=>{if(null!=this._transitionOut)try{await this._transitionOut(this)}catch(e){console.error(e)}null!=this.element.parentElement&&this.element.parentElement.removeChild(this.element),e.cancel()})),e=this.classes.didChangeSteps.subscribe(e=>{null!=e&&e.forEach(e=>{switch(e.type){case"add":this.element.classList.add(e.value);break;case"remove":this.element.classList.remove(e.value)}})})}addManagedEventListener(e,t,n){return this.element.addEventListener(e,t,n),this.cancelOnDeactivate(new i.Receipt(()=>{this.element.removeEventListener(e,t,n)}))}watchDomVisibility(){const e=this.addActor(new s.ElementMountWatcher({element:this.element}));this.cancelOnDeactivate(e.isElementMounted.didChange.subscribe(e=>{requestAnimationFrame(()=>{if(this.isActive.value)try{e?null!=this._transitionIn&&this._transitionIn(this):null!=this._transitionOut&&this._transitionOut(this).catch(e=>{console.warn(e)})}catch(e){console.warn(e)}})},!0))}}t.ManagedElement=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Corners=void 0;const i=n(3),r=n(190),s=n(192);class o{constructor(e,t,n,i){this.leftTop=e,this.rightTop=t,this.rightBottom=n,this.leftBottom=i}static givenBox(e){return new o(e.toLeftTop(),e.toRightTop(),e.toRightBottom(),e.toLeftBottom())}static givenContainedPoints(e){return r.cornersGivenContainedPoints(e)}static givenPoints(e){if(null==e)throw new Error("Points is required");if(4!==e.length)throw new Error("Array must have 4 points");return new o(e[0],e[1],e[2],e[3])}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}isEqual(e){return null!=e&&(e instanceof o&&(this.leftTop.isEqual(e.leftTop)&&this.rightTop.isEqual(e.rightTop)&&this.rightBottom.isEqual(e.rightBottom)&&this.leftBottom.isEqual(e.leftBottom)))}isSizeEqual(e,t=10){if(null==e)throw new Error("other is required");const n=e.toSize(),i=this.toSize(),r=Math.abs(n.width-i.width),s=Math.abs(n.height-i.height);return r<t&&s<t}toSize(){if(null==this._size){const e=(this.leftTop.toDistance(this.rightTop)+this.leftBottom.toDistance(this.rightBottom))/2,t=(this.leftTop.toDistance(this.leftBottom)+this.rightTop.toDistance(this.rightBottom))/2;this._size=i.Size2.givenWidthHeight(e,t)}return this._size}toPoints(){return[this.leftTop,this.rightTop,this.rightBottom,this.leftBottom]}withTransform(e){if(null==e)throw new Error("transform is required");return new o(e.toTransformedPoint(this.leftTop),e.toTransformedPoint(this.rightTop),e.toTransformedPoint(this.rightBottom),e.toTransformedPoint(this.leftBottom))}withAlignment(e){return s.cornersWithAlignment(this,e)}}t.Corners=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManagedElement=void 0;const i=n(1),r=n(0);class s extends i.Actor{constructor(e){super({}),this.element=document.createElement(e.tagName),null!=this.props.innerHTML&&(this.element.innerHTML=this.props.innerHTML),this._transitionIn=e.transitionIn,this._transitionOut=e.transitionOut,null==e.classNames?this.classes=r.ObservableSet.ofEmpty():Array.isArray(e.classNames)?this.classes=r.ObservableSet.givenValues(e.classNames):this.classes=e.classNames,null==e.parentElement?this.parentElement=r.Observable.ofEmpty():r.Observable.isObservable(e.parentElement)?this.parentElement=e.parentElement:this.parentElement=r.Observable.givenValue(e.parentElement,r.Observable.isStrictEqual)}static givenDefinition(e){return new s(e)}get style(){return this.element.style}onActivate(){let e;this.cancelOnDeactivate(this.parentElement.didChange.subscribe(e=>{this.element.parentElement!==e&&(null!=this.element.parentElement&&this.element.parentElement.removeChild(this.element),null!=e&&e.appendChild(this.element))},!0)),null!=this._transitionIn&&requestAnimationFrame(()=>{1==this.isActive.value&&this._transitionIn()});const t=()=>{null!=this.element.parentElement&&this.element.parentElement.removeChild(this.element),e.cancel()};this.cancelOnDeactivate(new r.Receipt(()=>{null==this._transitionOut?t():this._transitionOut().then(t).catch(e=>{console.error(e),t()})})),e=this.classes.didChangeSteps.subscribe(e=>{null!=e&&e.forEach(e=>{switch(e.type){case"add":this.element.classList.add(e.value);break;case"remove":this.element.classList.remove(e.value)}})})}addManagedEventListener(e,t,n){return this.element.addEventListener(e,t,n),this.cancelOnDeactivate(new r.Receipt(()=>{this.element.removeEventListener(e,t,n)}))}}t.ManagedElement=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementStyle=void 0;const i=n(195),r=n(44),s=n(2);class o{constructor(e){this.css=e.css,this._modifiers=e.modifiers;const t=s.StringUtil.stringOfRandomCharacters(6);if(this._className=null!=e.className?e.className:"es-"+t,o.allClassNames.has(this._className))throw new Error(`A style with class name '${this._className}' has already been created`);o.allClassNames.add(this._className),i.componentStyleToPreparedDomAction(this)}static givenDefinition(e){return new o(e)}toOptionalModifiers(){return this._modifiers}toModifierKeys(){return Object.keys(this._modifiers||{})}toCombinedClassName(e){return this.toClassNames(e).join(" ")}toClassNames(e){const t=[this._className];return null!=e&&(Array.isArray(e)?e.forEach(e=>{t.push(`${this._className}__${s.StringUtil.stringWithCase(e,"kebab-case")}`)}):t.push(`${this._className}__${s.StringUtil.stringWithCase(e,"kebab-case")}`)),t}toDomElement(e){const t=document.createElement(e);return t.className=this.toCombinedClassName(),t}toManagedElement(e){const t=new Map;return this.toModifierKeys().forEach(e=>{const n=this.toClassNames(e);t.set(e,n)}),r.DynamicStyleElement.givenDefinition({tagName:e.tagName,parentElement:e.parentElement,transitionIn:e.transitionIn,transitionOut:e.transitionOut,innerHTML:e.innerHTML,classNamesByModifierName:t,constantClassNames:this.toClassNames()})}}t.ElementStyle=o,o.allClassNames=new Set},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blobGivenUrl=void 0,t.blobGivenUrl=async function(e){const t=await fetch(e);return await t.blob()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUrlGivenBlob=void 0,t.dataUrlGivenBlob=async function(e){return new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>{t(i.result)},i.onerror=()=>{n(i.error)},i.readAsDataURL(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blobGivenUrl=void 0,t.blobGivenUrl=async function(e,t){const n=await fetch(e,t);return await n.blob()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUrlGivenBlob=void 0,t.dataUrlGivenBlob=async function(e){return new Promise((t,n)=>{const i=new FileReader;i.onloadend=()=>{t(i.result)},i.onerror=()=>{n(i.error)},i.readAsDataURL(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayUtil=void 0;const i=n(58),r=n(59),s=n(60),o=n(61),a=n(62),l=n(63),c=n(64),u=n(65),h=n(66),d=n(67),p=n(68),v=n(69),b=n(70),f=n(71),m=n(72),g=n(73);class y{}t.ArrayUtil=y,y.arrayIsEmptyOrNull=i.arrayIsEmptyOrNull,y.arrayWithEqualSizeGroups=r.arrayWithEqualSizeGroups,y.arrayWithLeftShift=s.arrayWithLeftShift,y.arrayWithOrderFromValue=o.arrayWithOrderFromValue,y.arrayWithoutDuplicateValues=a.arrayWithoutDuplicateValues,y.arrayWithoutValue=l.arrayWithoutValue,y.arrayWithPageSubset=c.arrayWithPageSubset,y.arrayWithReversedOrder=u.arrayWithReversedOrder,y.arrayWithRightShift=h.arrayWithRightShift,y.arrayWithValue=d.arrayWithValue,y.numberArrayGivenRange=p.numberArrayGivenRange,y.optionalIndexOfFirstMatchGivenArray=v.optionalIndexOfFirstMatchGivenArray,y.optionalLastValueGivenArray=b.optionalLastValueGivenArray,y.optionalNthValueGivenArray=f.optionalNthValueGivenArray,y.optionalRandomValueGivenArray=m.optionalRandomValueGivenArray,y.valueGivenArray=g.valueGivenArray},function(e,t,n){"use strict";function i(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){const t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectWithDeepMerge=void 0;const r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(e,t={}){const n=t.isMergeableObject||i;return!1!==t.clone&&n(e)?a((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function o(e,t,n={}){return e.concat(t).map(e=>s(e,n))}function a(e,t,n={}){n.arrayMerge=n.arrayMerge||o,n.isMergeableObject=n.isMergeableObject||i;const r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n={}){const r={},o=n.isMergeableObject||i;return o(e)&&Object.keys(e).forEach(t=>{r[t]=s(e[t],n)}),Object.keys(t).forEach(i=>{o(t[i])&&e[i]?r[i]=a(e[i],t[i],n):r[i]=s(t[i],n)}),r}(e,t,n):s(t,n)}t.objectWithDeepMerge=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithCamelCase=void 0;const i=n(28);t.stringWithCamelCase=function(e){if(null==e)throw new Error("input is required");return i.stringWithSpaceCase(e).replace(/\s(\w)/g,(e,t)=>t.toUpperCase())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithSpaceCase=void 0;const i=n(14);t.stringWithSpaceCase=function(e){if(null==e)throw new Error("input is required");return i.stringWithNoCase(e).replace(/[\W_]+(.|$)/g,(e,t)=>t?" "+t:"").trim()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Receipt=void 0;class i{constructor(e){i._all.add(this),this._cancelFunction=e}get isCancelled(){return null==this._cancelFunction}cancel(){if(null==this._cancelFunction)return;i._all.delete(this);const e=this._cancelFunction;this._cancelFunction=void 0,e()}}t.Receipt=i,i._all=new Set},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionalActivator=void 0;const i=n(0),r=n(4);class s extends r.Actor{constructor(){super(...arguments),this._output=i.Observable.ofEmpty(),this.output=i.ReadOnlyObservable.givenObservable(this._output)}onActivate(){const e=i.Observable.ofEmpty(i.Observable.isStrictEqual);this.cancelOnDeactivate(this.props.input.didChange.subscribe(t=>{e.setValue(this.props.fn(t))},!0)),this.cancelOnDeactivate(e.didChange.subscribe(e=>{if(null!=this._output.value&&(this.removeActor(this._output.value),this._output.setValue(void 0)),1==e){let e;e="function"==typeof this.props.actor?this.props.actor():this.props.actor,this._output.setValue(this.addActor(e))}},!0))}}t.ConditionalActivator=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;const i=n(4),r=n(0);class s extends i.Actor{onActivate(){1==this.props.isRepeating?(this._timeout=setInterval(()=>{try{this.props.fn()}catch(e){console.warn(e)}},this.props.duration.toMilliseconds()),this.cancelOnDeactivate(new r.Receipt(()=>{null!=this._timeout&&(clearInterval(this._timeout),this._timeout=void 0)}))):(this._timeout=setTimeout(()=>{try{this.props.fn()}catch(e){console.warn(e)}},this.props.duration.toMilliseconds()),this.cancelOnDeactivate(new r.Receipt(()=>{null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0)})))}}t.Timer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rotation=void 0;class i{constructor(e){this.radians=e}static ofZero(){return this._zero}static givenRadians(e){return new i(e)}static givenDegrees(e){return new i(e*(Math.PI/180))}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get isZero(){return 0===this.radians}isEqual(e){return null!=e&&(e instanceof i&&e.radians===this.radians)}toDegrees(){return 180*this.radians/Math.PI}}t.Rotation=i,i._zero=new i(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Size2=void 0;class i{constructor(e,t){this._width=e,this._height=t}static givenWidthHeight(e,t){return new i(e,t)}static ofZero(){return new i(0,0)}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get width(){return this._width}get height(){return this._height}get isZero(){return 0===this._width||0===this._height}toHalf(){return null==this._half&&(this._half=i.givenWidthHeight(this._width/2,this._height/2)),this._half}isEqual(e){return null!=e&&(e instanceof i&&(e._width==this._width&&e._height==this._height))}toScale(e,t){if(null==e)throw new Error("availableSize is required");if(e.isZero||this.isZero)return 0;const n=e.width/this._width,i=e.height/this._height,r=Math.min(n,i);return r<1&&"expand"===t||r>1&&"shrink"===t?1:r}toScaledSize(e,t){const n=this.toScale(e,t);return{size:i.givenWidthHeight(this._width*n,this._height*n),scale:n}}withAddedSize(e){return i.givenWidthHeight(this._width+e.width,this._height+e.height)}withSubtractedSize(e){return i.givenWidthHeight(this._width-e.width,this._height-e.height)}}t.Size2=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionalLineIntersectionGivenPoints=void 0;const i=n(3);t.optionalLineIntersectionGivenPoints=function(e,t,n,r,s){let o,a,l,c,u,h,d,p,v;if(o=(r.y-n.y)*(t.x-e.x)-(r.x-n.x)*(t.y-e.y),0!=o&&(a=e.y-n.y,l=e.x-n.x,c=(r.x-n.x)*a-(r.y-n.y)*l,u=(t.x-e.x)*a-(t.y-e.y)*l,a=c/o,l=u/o,h=e.x+a*(t.x-e.x),d=e.y+a*(t.y-e.y),a>0&&a<1&&(p=!0),l>0&&l<1&&(v=!0),("touch"!==s||!1!==p&&!1!==v)&&!("extendOther"===s&&!1===p||"extendThis"===s&&!1===v)))return i.Point2.givenXY(h,d)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Segment2=void 0;const i=n(9),r=n(10),s=n(2),o=n(34),a=n(168),l=s.Percent.givenFraction(1,2);class c{constructor(e,t){this._start=e,this._end=t}static givenXYPair(e,t,n,r){return new c(i.Point2.givenXY(e,t),i.Point2.givenXY(n,r))}static givenPoints(e,t){return new c(e,t)}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get startPoint(){return this._start}get endPoint(){return this._end}get startX(){return this._start.x}get endX(){return this._end.x}get startY(){return this._start.y}get endY(){return this._end.y}isEqual(e){return null!=e&&(e instanceof c&&(e._start.isEqual(this._start)&&e._end.isEqual(this._end)))}toLength(){return this._start.toDistance(this._end)}toNearestPoint(e,t){const n=r.Vector2.givenXY(e.x,e.y);if(t){const e=r.Vector2.givenXY(this._start.x,this._start.y),t=r.Vector2.givenPoints(this._start,this._end).withNormalizedMagnitude(),i=n.withSubtractedVector(e).toDotProduct(t);return e.withAddedVector(t.withMultipliedScalar(i)).toPoint()}{let e=r.Vector2.givenPoints(this._start,this._end);const t=e.toMagnitude();e=e.withNormalizedMagnitude();const i=r.Vector2.givenPoint(this._start);let o=n.withSubtractedVector(i).toDotProduct(e);return o=s.NumberUtil.numberWithHardLimit(o,0,t),i.withAddedVector(e.withMultipliedScalar(o)).toPoint()}}toMidpoint(){return this.toIntermediatePoint(l)}toIntermediatePoint(e){const t=e.toNumber(1),n=this.startPoint.x+(this.endPoint.x-this.startPoint.x)*t,r=this.startPoint.y+(this.endPoint.y-this.startPoint.y)*t;return i.Point2.givenXY(n,r)}toOptionalIntersectionGivenLine(e){return e.toOptionalIntersectionGivenSegment(this)}toOptionalIntersectionGivenSegment(e){const t=this.startPoint,n=this.endPoint,i=e.startPoint,r=e.endPoint;return o.optionalLineIntersectionGivenPoints(t,n,i,r,"touch")}toPointGivenDistance(e,t){switch(t){case"start":return 0===e?this.startPoint:this.startPoint.withAddedVector(r.Vector2.givenPoints(this.startPoint,this.endPoint).withNormalizedMagnitude().withMultipliedScalar(e));case"end":return 0===e?this.endPoint:this.endPoint.withAddedVector(r.Vector2.givenPoints(this.endPoint,this.startPoint).withNormalizedMagnitude().withMultipliedScalar(e));default:throw new Error("Unsupported fromPoint")}}withAddedVector(e){return new c(this._start.withAddedVector(e),this._end.withAddedVector(e))}withSubtractedVector(e){return new c(this._start.withSubtractedVector(e),this._end.withSubtractedVector(e))}withClippingBox(e){return a.segmentWithClippingBox(this,e)}}t.Segment2=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicStyleElement=void 0;const i=n(1),r=n(0),s=n(17);class o extends i.Actor{constructor(e){super({}),this._modifiers=new Set,null==e.parentElement?this.parentElement=r.Observable.ofEmpty():r.Observable.isObservable(e.parentElement)?this.parentElement=e.parentElement:this.parentElement=r.Observable.givenValue(e.parentElement),this.tagName=e.tagName,this._innerHTML=e.innerHTML,this._transitionIn=e.transitionIn,this._transitionOut=e.transitionOut,this._classNamesByModifierName=e.classNamesByModifierName||new Map,this._constantClassNames=e.constantClassNames||[]}static givenDefinition(e){return new o(e)}get element(){const e=this.managedElement;if(null!=e)return e.element}get style(){return this.element.style}get managedElement(){return this._managedElement}onActivate(){this._managedElement=this.addActor(s.ManagedElement.givenDefinition({tagName:this.tagName,parentElement:this.parentElement,classNames:Array.from(this.activeClassNames()),innerHTML:this._innerHTML,transitionIn:()=>{null!=this._transitionIn&&this._transitionIn(this)},transitionOut:async()=>{null!=this._transitionOut&&await this._transitionOut(this)}})),this.updateClassNames()}addManagedEventListener(e,t,n){return this.managedElement.addManagedEventListener(e,t,n)}toggleModifier(e){this.setModifier(e,!this._modifiers.has(e))}setModifier(e,t){if(t){if(this._modifiers.has(e))return;this._modifiers.add(e);const t=this._classNamesByModifierName.get(e);null!=t&&t.forEach(e=>{this.managedElement.classes.addValue(e)})}else{if(!this._modifiers.has(e))return;this._modifiers.delete(e),this.updateClassNames()}}toModifiers(){return Array.from(this._modifiers)}activeClassNames(){const e=new Set;return this._modifiers.forEach(t=>{const n=this._classNamesByModifierName.get(t);null!=n&&n.forEach(t=>{e.add(t)})}),this._constantClassNames.forEach(t=>{e.add(t)}),e}updateClassNames(){const e=this.activeClassNames();this._managedElement.classes.toArray().forEach(t=>{e.has(t)||this._managedElement.classes.removeValue(t)}),e.forEach(e=>{this._managedElement.classes.addValue(e)})}}t.DynamicStyleElement=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementMountWatcher=void 0;const i=n(0),r=n(1);class s extends r.Actor{constructor(){super(...arguments),this._isElementMounted=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.isElementMounted=i.ReadOnlyObservable.givenObservable(this._isElementMounted)}static watchAllOnce(){if(1==s._isWatching)return;s._isWatching=!0;new MutationObserver((e,t)=>{for(let e of this.watcherByElement.values()){const t=null!=e.props.element.offsetParent;e._isElementMounted.setValue(t)}}).observe(document.body,{childList:!0,subtree:!0})}onActivate(){s.watcherByElement.set(this.props.element,this),s.watchAllOnce(),this._isElementMounted.setValue(null!=this.props.element.offsetParent),this.cancelOnDeactivate(new i.Receipt(()=>{s.watcherByElement.delete(this.props.element)}))}}t.ElementMountWatcher=s,s.watcherByElement=new Map,s._isWatching=!1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementStyle=void 0;const i=n(176),r=n(36),s=n(2);class o{constructor(e){this.css=e.css,this._modifiers=e.modifiers;const t=s.StringUtil.stringOfRandomCharacters(6);if(this._className=null!=e.className?e.className:"es-"+t,o.allClassNames.has(this._className))throw new Error(`A style with class name '${this._className}' has already been created`);o.allClassNames.add(this._className),i.componentStyleToPreparedDomAction(this)}static givenDefinition(e){return new o(e)}toOptionalModifiers(){return this._modifiers}toModifierKeys(){return Object.keys(this._modifiers||{})}toCombinedClassName(e){return this.toClassNames(e).join(" ")}toClassNames(e){const t=[this._className];return null!=e&&(Array.isArray(e)?e.forEach(e=>{t.push(`${this._className}__${s.StringUtil.stringWithCase(e,"kebab-case")}`)}):t.push(`${this._className}__${s.StringUtil.stringWithCase(e,"kebab-case")}`)),t}toDomElement(e){const t=document.createElement(e);return t.className=this.toCombinedClassName(),t}toManagedElement(e){const t=new Map;return this.toModifierKeys().forEach(e=>{const n=this.toClassNames(e);t.set(e,n)}),r.DynamicStyleElement.givenDefinition({tagName:e.tagName,parentElement:e.parentElement,transitionIn:e.transitionIn,transitionOut:e.transitionOut,innerHTML:e.innerHTML,classNamesByModifierName:t,constantClassNames:this.toClassNames()})}}t.ElementStyle=o,o.allClassNames=new Set},function(e,t,n){"use strict";n.r(t),n.d(t,"CHARSET",(function(){return d})),n.d(t,"COMMENT",(function(){return o})),n.d(t,"COUNTER_STYLE",(function(){return y})),n.d(t,"DECLARATION",(function(){return l})),n.d(t,"DOCUMENT",(function(){return b})),n.d(t,"FONT_FACE",(function(){return g})),n.d(t,"FONT_FEATURE_VALUES",(function(){return _})),n.d(t,"IMPORT",(function(){return h})),n.d(t,"KEYFRAMES",(function(){return m})),n.d(t,"MEDIA",(function(){return u})),n.d(t,"MOZ",(function(){return r})),n.d(t,"MS",(function(){return i})),n.d(t,"NAMESPACE",(function(){return f})),n.d(t,"PAGE",(function(){return c})),n.d(t,"RULESET",(function(){return a})),n.d(t,"SUPPORTS",(function(){return v})),n.d(t,"VIEWPORT",(function(){return p})),n.d(t,"WEBKIT",(function(){return s})),n.d(t,"abs",(function(){return w})),n.d(t,"alloc",(function(){return K})),n.d(t,"append",(function(){return k})),n.d(t,"caret",(function(){return z})),n.d(t,"char",(function(){return B})),n.d(t,"character",(function(){return W})),n.d(t,"characters",(function(){return L})),n.d(t,"charat",(function(){return M})),n.d(t,"column",(function(){return I})),n.d(t,"combine",(function(){return D})),n.d(t,"comment",(function(){return oe})),n.d(t,"commenter",(function(){return te})),n.d(t,"compile",(function(){return ie})),n.d(t,"copy",(function(){return N})),n.d(t,"dealloc",(function(){return X})),n.d(t,"declaration",(function(){return ae})),n.d(t,"delimit",(function(){return Y})),n.d(t,"delimiter",(function(){return ee})),n.d(t,"from",(function(){return O})),n.d(t,"hash",(function(){return E})),n.d(t,"identifier",(function(){return ne})),n.d(t,"indexof",(function(){return C})),n.d(t,"length",(function(){return R})),n.d(t,"line",(function(){return T})),n.d(t,"match",(function(){return S})),n.d(t,"middleware",(function(){return he})),n.d(t,"namespace",(function(){return ve})),n.d(t,"next",(function(){return q})),n.d(t,"node",(function(){return U})),n.d(t,"parse",(function(){return re})),n.d(t,"peek",(function(){return F})),n.d(t,"position",(function(){return G})),n.d(t,"prefix",(function(){return le})),n.d(t,"prefixer",(function(){return pe})),n.d(t,"replace",(function(){return P})),n.d(t,"ruleset",(function(){return se})),n.d(t,"rulesheet",(function(){return de})),n.d(t,"serialize",(function(){return ce})),n.d(t,"sizeof",(function(){return j})),n.d(t,"slice",(function(){return H})),n.d(t,"stringify",(function(){return ue})),n.d(t,"strlen",(function(){return V})),n.d(t,"substr",(function(){return A})),n.d(t,"token",(function(){return $})),n.d(t,"tokenize",(function(){return Q})),n.d(t,"tokenizer",(function(){return J})),n.d(t,"trim",(function(){return x})),n.d(t,"whitespace",(function(){return Z}));var i="-ms-",r="-moz-",s="-webkit-",o="comm",a="rule",l="decl",c="@page",u="@media",h="@import",d="@charset",p="@viewport",v="@supports",b="@document",f="@namespace",m="@keyframes",g="@font-face",y="@counter-style",_="@font-feature-values",w=Math.abs,O=String.fromCharCode;function E(e,t){return(((t<<2^M(e,0))<<2^M(e,1))<<2^M(e,2))<<2^M(e,3)}function x(e){return e.trim()}function S(e,t){return(e=t.exec(e))?e[0]:e}function P(e,t,n){return e.replace(t,n)}function C(e,t){return e.indexOf(t)}function M(e,t){return 0|e.charCodeAt(t)}function A(e,t,n){return e.slice(t,n)}function V(e){return e.length}function j(e){return e.length}function k(e,t){return t.push(e),e}function D(e,t){return e.map(t).join("")}var T=1,I=1,R=0,G=0,W=0,L="";function U(e,t,n,i,r,s,o){return{value:e,root:t,parent:n,type:i,props:r,children:s,line:T,column:I,length:o,return:""}}function N(e,t,n){return U(e,t.root,t.parent,n,t.props,t.children,0)}function B(){return W}function q(){return W=G<R?M(L,G++):0,I++,10===W&&(I=1,T++),W}function F(){return M(L,G)}function z(){return G}function H(e,t){return A(L,e,t)}function $(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function K(e){return T=I=1,R=V(L=e),G=0,[]}function X(e){return L="",e}function Y(e){return x(H(G-1,ee(91===e?e+2:40===e?e+1:e)))}function Q(e){return X(J(K(e)))}function Z(e){for(;(W=F())&&W<33;)q();return $(e)>2||$(W)>3?"":" "}function J(e){for(;q();)switch($(W)){case 0:k(ne(G-1),e);break;case 2:k(Y(W),e);break;default:k(O(W),e)}return e}function ee(e){for(;q();)switch(W){case e:return G;case 34:case 39:return ee(34===e||39===e?e:W);case 40:41===e&&ee(e);break;case 92:q()}return G}function te(e,t){for(;q()&&e+W!==57&&(e+W!==84||47!==F()););return"/*"+H(t,G-1)+"*"+O(47===e?e:q())}function ne(e){for(;!$(F());)q();return H(e,G)}function ie(e){return X(re("",null,null,null,[""],e=K(e),0,[0],e))}function re(e,t,n,i,r,s,o,a,l){for(var c=0,u=0,h=o,d=0,p=0,v=0,b=1,f=1,m=1,g=0,y="",_=r,w=s,E=i,x=y;f;)switch(v=g,g=q()){case 34:case 39:case 91:case 40:x+=Y(g);break;case 9:case 10:case 13:case 32:x+=Z(v);break;case 47:switch(F()){case 42:case 47:k(oe(te(q(),z()),t,n),l);break;default:x+="/"}break;case 123*b:a[c++]=V(x)*m;case 125*b:case 59:case 0:switch(g){case 0:case 125:f=0;case 59+u:p>0&&k(p>32?ae(x+";",i,n,h-1):ae(P(x," ","")+";",i,n,h-2),l);break;case 59:x+=";";default:if(k(E=se(x,t,n,c,u,r,a,y,_=[],w=[],h),s),123===g)if(0===u)re(x,t,E,E,_,s,h,a,w);else switch(d){case 100:case 109:case 115:re(e,E,E,i&&k(se(e,E,E,0,0,r,a,y,r,_=[],h),w),r,w,h,a,i?_:w);break;default:re(x,E,E,E,[""],w,h,a,w)}}c=u=p=0,b=m=1,y=x="",h=o;break;case 58:h=1+V(x),p=v;default:switch(x+=O(g),g*b){case 38:m=u>0?1:(x+="\f",-1);break;case 44:a[c++]=(V(x)-1)*m,m=1;break;case 64:45===F()&&(x+=Y(q())),d=F(),u=V(y=x+=ne(z())),g++;break;case 45:45===v&&2==V(x)&&(b=0)}}return s}function se(e,t,n,i,r,s,o,l,c,u,h){for(var d=r-1,p=0===r?s:[""],v=j(p),b=0,f=0,m=0;b<i;++b)for(var g=0,y=A(e,d+1,d=w(f=o[b])),_=e;g<v;++g)(_=x(f>0?p[g]+" "+y:P(y,/&\f/g,p[g])))&&(c[m++]=_);return U(e,t,n,0===r?a:l,c,u,h)}function oe(e,t,n){return U(e,t,n,o,O(B()),A(e,2,-2),0)}function ae(e,t,n,i){return U(e,t,n,l,A(e,0,i),A(e,i+1,-1),i)}function le(e,t){switch(E(e,t)){case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return s+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return s+e+r+e+i+e+e;case 6828:case 4268:return s+e+i+e+e;case 6165:return s+e+i+"flex-"+e+e;case 5187:return s+e+P(e,/(\w+).+(:[^]+)/,s+"box-$1$2"+i+"flex-$1$2")+e;case 5443:return s+e+i+"flex-item-"+P(e,/flex-|-self/,"")+e;case 4675:return s+e+i+"flex-line-pack"+P(e,/align-content|flex-|-self/,"")+e;case 5548:return s+e+i+P(e,"shrink","negative")+e;case 5292:return s+e+i+P(e,"basis","preferred-size")+e;case 6060:return s+"box-"+P(e,"-grow","")+s+e+i+P(e,"grow","positive")+e;case 4554:return s+P(e,/([^-])(transform)/g,"$1"+s+"$2")+e;case 6187:return P(P(P(e,/(zoom-|grab)/,s+"$1"),/(image-set)/,s+"$1"),e,"")+e;case 5495:case 3959:return P(e,/(image-set\([^]*)/,s+"$1$`$1");case 4968:return P(P(e,/(.+:)(flex-)?(.*)/,s+"box-pack:$3"+i+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+s+e+e;case 4095:case 3583:case 4068:case 2532:return P(e,/(.+)-inline(.+)/,s+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(V(e)-1-t>6)switch(M(e,t+1)){case 109:return P(e,/(.+:)(.+)-([^]+)/,"$1"+s+"$2-$3$1"+r+"$2-$3")+e;case 102:return P(e,/(.+:)(.+)-([^]+)/,"$1"+s+"$2-$3$1"+r+"$3")+e;case 115:return le(P(e,"stretch","fill-available"),t)+e}break;case 4949:if(115!==M(e,t+1))break;case 6444:switch(M(e,V(e)-3-(~C(e,"!important")&&10))){case 107:case 111:return P(e,e,s+e)+e;case 101:return P(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+s+(45===M(e,14)?"inline-":"")+"box$3$1"+s+"$2$3$1"+i+"$2box$3")+e}break;case 5936:switch(M(e,t+11)){case 114:return s+e+i+P(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return s+e+i+P(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return s+e+i+P(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return s+e+i+e+e}return e}function ce(e,t){for(var n="",i=j(e),r=0;r<i;r++)n+=t(e[r],r,e,t)||"";return n}function ue(e,t,n,i){switch(e.type){case h:case l:return e.return=e.return||e.value;case o:return"";case a:e.value=e.props.join(",")}return V(n=ce(e.children,i))?e.return=e.value+"{"+n+"}":""}function he(e){var t=j(e);return function(n,i,r,s){for(var o="",a=0;a<t;a++)o+=e[a](n,i,r,s)||"";return o}}function de(e){return function(t){t.root||(t=t.return)&&e(t)}}function pe(e,t,n,o){if(!e.return)switch(e.type){case l:e.return=le(e.value,e.length);break;case m:return ce([N(P(e.value,"@","@"+s),e,"")],o);case a:if(e.length)return D(e.props,(function(t){switch(S(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ce([N(P(t,/:(read-\w+)/,":"+r+"$1"),e,"")],o);case"::placeholder":return ce([N(P(t,/:(plac\w+)/,":"+s+"input-$1"),e,""),N(P(t,/:(plac\w+)/,":"+r+"$1"),e,""),N(P(t,/:(plac\w+)/,i+"input-$1"),e,"")],o)}return""}))}}function ve(e){switch(e.type){case a:e.props=e.props.map((function(t){return D(Q(t),(function(t,n,i){switch(M(t,0)){case 12:return A(t,1,V(t));case 0:case 40:case 43:case 62:case 126:return t;case 58:"global"===i[n+1]&&(i[n+1]="",i[n+2]="\f"+A(i[n+2],n=1,-1));case 32:return 1===n?"":t;default:switch(n){case 0:return e=t,j(i)>1?"":t;case n=j(i)-1:case 2:return 2===n?t+e+e:t+e;default:return t}}}))}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardWatcher=void 0;const i=n(1),r=n(0);class s extends i.Actor{constructor(){super(),this._keys=r.ObservableSet.ofEmpty(),this.keys=r.ReadOnlyObservableSet.givenObservableSet(this._keys),this.onKeyDown=e=>{if(1==e.repeat)return;let t=e.key;1===t.length&&(t=t.toLowerCase()),this._keys.addValue(t)},this.onKeyUp=e=>{let t=e.key;1===t.length&&(t=t.toLowerCase()),this._keys.removeValue(t)}}static get instance(){return null==s._instance&&(s._instance=new s,s._instance.activate()),this._instance}onActivate(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.cancelOnDeactivate(new r.Receipt(()=>{window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}))}}t.KeyboardWatcher=s,s.controlKey="Control",s.altKey="Alt",s.shiftKey="Shift"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectGivenQueryString=void 0;const i=n(2);t.objectGivenQueryString=function(e){const t={};if(i.StringUtil.stringIsEmpty(e))return t;const n=e.trim().replace(/^[?#&]/,"");return 0==n.length||n.split("&").forEach(e=>{const n=e.replace(/\+/g," ").split("="),i=decodeURIComponent(n[0]);let r=decodeURIComponent(n[1]);t[i]=r}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectOfCurrentQueryString=void 0;const i=n(41);t.objectOfCurrentQueryString=function(){return i.objectGivenQueryString(window.location.search)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryStringGivenObject=void 0,t.queryStringGivenObject=function(e){if(null==e)return"";const t=[];return Object.keys(e).forEach(n=>{let i=e[n];null!=i&&(i=encodeURIComponent(i),t.push(`${n}=${i}`))}),0===t.length?"":"?"+t.join("&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicStyleElement=void 0;const i=n(1),r=n(0),s=n(19);class o extends i.Actor{constructor(e){super({}),this._modifiers=new Set,null==e.parentElement?this.parentElement=r.Observable.ofEmpty():r.Observable.isObservable(e.parentElement)?this.parentElement=e.parentElement:this.parentElement=r.Observable.givenValue(e.parentElement),this.tagName=e.tagName,this._innerHTML=e.innerHTML,this._transitionIn=e.transitionIn,this._transitionOut=e.transitionOut,this._classNamesByModifierName=e.classNamesByModifierName||new Map,this._constantClassNames=e.constantClassNames||[]}static givenDefinition(e){return new o(e)}get element(){const e=this.managedElement;if(null!=e)return e.element}get style(){return this.element.style}get managedElement(){return this._managedElement}onActivate(){this._managedElement=this.addActor(s.ManagedElement.givenDefinition({tagName:this.tagName,parentElement:this.parentElement,innerHTML:this._innerHTML,transitionIn:this._transitionIn,transitionOut:this._transitionOut})),this.updateClassNames()}addManagedEventListener(e,t,n){return this.managedElement.addManagedEventListener(e,t,n)}addModifier(e){if(this._modifiers.has(e))return;this._modifiers.add(e);const t=this._classNamesByModifierName.get(e);null!=t&&t.forEach(e=>{this.managedElement.classes.addValue(e)})}removeModifier(e){this._modifiers.has(e)&&(this._modifiers.delete(e),this.updateClassNames())}toggleModifier(e){this._modifiers.has(e)?this.removeModifier(e):this.addModifier(e)}setModifier(e,t){t?this.addModifier(e):this.removeModifier(e)}toModifiers(){return Array.from(this._modifiers)}activeClassNames(){const e=new Set;return this._modifiers.forEach(t=>{const n=this._classNamesByModifierName.get(t);null!=n&&n.forEach(t=>{e.add(t)})}),this._constantClassNames.forEach(t=>{e.add(t)}),e}updateClassNames(){const e=this.activeClassNames();this._managedElement.classes.toArray().forEach(t=>{e.has(t)||this._managedElement.classes.removeValue(t)}),e.forEach(e=>{this._managedElement.classes.addValue(e)})}}t.DynamicStyleElement=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardWatcher=void 0;const i=n(1),r=n(0);class s extends i.Actor{constructor(){super(),this._keys=r.ObservableSet.ofEmpty(),this.keys=r.ReadOnlyObservableSet.givenObservableSet(this._keys),this.onKeyDown=e=>{if(1==e.repeat)return;let t=e.key;1===t.length&&(t=t.toLowerCase()),this._keys.addValue(t)},this.onKeyUp=e=>{let t=e.key;1===t.length&&(t=t.toLowerCase()),this._keys.removeValue(t)}}static get instance(){return null==s._instance&&(s._instance=new s,s._instance.activate()),this._instance}onActivate(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.cancelOnDeactivate(new r.Receipt(()=>{window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}))}}t.KeyboardWatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectGivenQueryString=void 0;const i=n(2);t.objectGivenQueryString=function(e){const t={};if(i.StringUtil.stringIsEmpty(e))return t;const n=e.trim().replace(/^[?#&]/,"");return 0==n.length||n.split("&").forEach(e=>{const n=e.replace(/\+/g," ").split("="),i=decodeURIComponent(n[0]);let r=decodeURIComponent(n[1]);t[i]=r}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectOfCurrentQueryString=void 0;const i=n(46);t.objectOfCurrentQueryString=function(){return i.objectGivenQueryString(window.location.search)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.queryStringGivenObject=void 0,t.queryStringGivenObject=function(e){if(null==e)return"";const t=[];return Object.keys(e).forEach(n=>{let i=e[n];null!=i&&(i=encodeURIComponent(i),t.push(`${n}=${i}`))}),0===t.length?"":"?"+t.join("&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndoContext=void 0;const i=n(0),r=n(2);t.UndoContext=class{constructor(e,t){this._currentStep=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.currentStep=i.ReadOnlyObservable.givenObservable(this._currentStep),this._undoStack=[],this._redoStack=[],this._canUndo=i.Observable.givenValue(!1,i.Observable.isStrictEqual),this.canUndo=i.ReadOnlyObservable.givenObservable(this._canUndo),this._canRedo=i.Observable.givenValue(!1,i.Observable.isStrictEqual),this.canRedo=i.ReadOnlyObservable.givenObservable(this._canRedo),this._limit=t,this.addStep(e)}addStep(e){r.ObjectUtil.objectIsDeepEqual(e,this._currentStep.value)||(this._undoStack.length>this._limit-1&&(this._undoStack=this._undoStack.slice(this._undoStack.length-this._limit+1)),this._redoStack=[],this._undoStack=[...this._undoStack,e],this._canUndo.setValue(this._undoStack.length>1),this._canRedo.setValue(this._redoStack.length>0),this._currentStep.setValue(e))}undo(){if(0===this._undoStack.length)return!1;const e=this._undoStack.pop();return this._redoStack.push(e),this._currentStep.setValue(r.ArrayUtil.optionalLastValueGivenArray(this._undoStack)),this._canUndo.setValue(this._undoStack.length>1),this._canRedo.setValue(this._redoStack.length>0),!0}redo(){if(0===this._redoStack.length)return!1;const e=this._redoStack.pop();this._undoStack.push(e),this._currentStep.setValue(e),this._canUndo.setValue(this._undoStack.length>1),this._canRedo.setValue(this._redoStack.length>0)}clearSteps(){this._undoStack=[this._currentStep.value],this._redoStack=[],this._canUndo.setValue(this._undoStack.length>1),this._canRedo.setValue(this._redoStack.length>0)}}},function(e,t,n){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function s(e,n){function i(){var e=s;r(e)&&e.a.parentNode&&n(e.g)}var s=e;t(e.b,i),t(e.c,i),r(e)}function o(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var a=null,l=null,c=null,u=null;function h(){return null===u&&(u=!!document.fonts),u}function d(){if(null===c){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}c=""!==e.style.font}return c}function p(e,t){return[e.style,e.weight,d()?e.stretch:"","100px",t].join(" ")}o.prototype.load=function(e,t){var r=this,o=e||"BESbswy",c=0,u=t||3e3,d=(new Date).getTime();return new Promise((function(e,t){if(h()&&!function(){if(null===l)if(h()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);l=!!e&&603>parseInt(e[1],10)}else l=!1;return l}()){var v=new Promise((function(e,t){!function n(){(new Date).getTime()-d>=u?t(Error(u+"ms timeout exceeded")):document.fonts.load(p(r,'"'+r.family+'"'),o).then((function(t){1<=t.length?e():setTimeout(n,25)}),t)}()})),b=new Promise((function(e,t){c=setTimeout((function(){t(Error(u+"ms timeout exceeded"))}),u)}));Promise.race([b,v]).then((function(){clearTimeout(c),e(r)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function l(){var t;(t=-1!=f&&-1!=m||-1!=f&&-1!=g||-1!=m&&-1!=g)&&((t=f!=m&&f!=g&&m!=g)||(null===a&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),a=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=a&&(f==y&&m==y&&g==y||f==_&&m==_&&g==_||f==w&&m==w&&g==w)),t=!t),t&&(O.parentNode&&O.parentNode.removeChild(O),clearTimeout(c),e(r))}var h=new n(o),v=new n(o),b=new n(o),f=-1,m=-1,g=-1,y=-1,_=-1,w=-1,O=document.createElement("div");O.dir="ltr",i(h,p(r,"sans-serif")),i(v,p(r,"serif")),i(b,p(r,"monospace")),O.appendChild(h.a),O.appendChild(v.a),O.appendChild(b.a),document.body.appendChild(O),y=h.a.offsetWidth,_=v.a.offsetWidth,w=b.a.offsetWidth,function e(){if((new Date).getTime()-d>=u)O.parentNode&&O.parentNode.removeChild(O),t(Error(u+"ms timeout exceeded"));else{var n=document.hidden;!0!==n&&void 0!==n||(f=h.a.offsetWidth,m=v.a.offsetWidth,g=b.a.offsetWidth,l()),c=setTimeout(e,50)}}(),s(h,(function(e){f=e,l()})),i(h,p(r,'"'+r.family+'",sans-serif')),s(v,(function(e){m=e,l()})),i(v,p(r,'"'+r.family+'",serif')),s(b,(function(e){g=e,l()})),i(b,p(r,'"'+r.family+'",monospace'))}))}))},e.exports=o}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix=void 0;const i=n(52);class r{constructor(e){this.rows=e}static ofIdentity(e){const t=[];for(let n=0;n<e;n++){t[n]=[];for(let i=0;i<e;i++)t[n][i]=n===i?1:0}return new r(t)}static givenRows(e){const t=[];for(let n=0;n<e.length;n++){t[n]=[];for(let i=0;i<e[n].length;i++)t[n][i]=e[n][i]}return new r(t)}static givenRow(e){const t=[];for(let n=0;n<e.length;n++)t.push([e[n]]);return new r(t)}isSquare(){const e=0===this.rows.length?0:this.rows[0].length;return this.rows.length===e}isSingular(){return this.isSquare()&&0===this.toDeterminant()}toDeterminant(){if(0===this.rows.length)return 1;if(!this.isSquare())return null;const e=this.withRightTriangular();let t=e.rows[0][0];for(let n=1;n<e.rows.length;n++)t*=e.rows[n][n];return t}withClone(){return r.givenRows(this.rows)}withRightTriangular(){if(0===this.rows.length)return new r([]);let e,t=this.withClone();for(let i=0;i<this.rows.length;i++){if(0===t.rows[i][i])for(let n=i+1;n<this.rows.length;n++)if(0!==t.rows[n][i]){e=[];for(let r=0;r<this.rows[0].length;r++)e.push(t.rows[i][r]+t.rows[n][r]);t.rows[i]=e;break}if(0!==t.rows[i][i])for(let r=i+1;r<this.rows.length;r++){var n=t.rows[r][i]/t.rows[i][i];e=[];for(let s=0;s<this.rows[0].length;s++)e.push(s<=i?0:t.rows[r][s]-t.rows[i][s]*n);t.rows[r]=e}}return t}toOptionalValueGivenRowAndColumn(e,t){if(!(e<0||e>=this.rows.length||t<0||t>=this.rows[0].length))return this.rows[e][t]}withMap(e){if(0===this.rows.length)return new r([]);let t=[];for(let n=0;n<this.rows.length;n++){t[n]=[];for(let i=0;i<this.rows[0].length;i++)t[n][i]=e(this.rows[n][i],n,i)}return r.givenRows(t)}withMultipliedMatrix(e){if(0===this.rows.length)throw new Error("Cannot multiply because there are no rows in this matrix");if(this.rows[0].length!==e.rows.length)throw new Error("Cannot multiply the specified matrices");const t=e.rows;let n,i,s,o=this.rows.length,a=t[0].length,l=this.rows[0].length,c=[];for(;o--;)for(n=a,c[o]=[];n--;){for(i=l,s=0;i--;)s+=this.rows[o][i]*t[i][n];c[o][n]=s}return r.givenRows(c)}toColumnVector(e){if(0===this.rows.length)return null;if(e>=this.rows[0].length)return null;let t=[];for(let n=0;n<this.rows.length;n++)t.push(this.rows[n][e]);return new i.Vector(t)}withAugumentedMatrix(e){if(0===this.rows.length)return this.withClone();if(this.rows.length!==e.rows.length)return null;const t=this.withClone(),n=t.rows[0].length;for(let i=0;i<this.rows.length;i++)for(let r=0;r<e.rows[0].length;r++)t.rows[i][n+r]=e.rows[i][r];return t}withInverse(){if(0===this.rows.length)return null;if(!this.isSquare()||this.isSingular())return null;const e=this.rows.length;let t,n=e;const i=this.withAugumentedMatrix(r.ofIdentity(e)).withRightTriangular(),s=i.rows[0].length;let o,a,l,c,u=[];for(;n--;){for(a=[],u[n]=[],l=i.rows[n][n],o=0;o<s;o++)c=i.rows[n][o]/l,a.push(c),o>=e&&u[n].push(c);for(i.rows[n]=a,t=n;t--;){for(a=[],o=0;o<s;o++)a.push(i.rows[t][o]-i.rows[n][o]*i.rows[t][n]);i.rows[t]=a}}return r.givenRows(u)}}t.Matrix=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;const i=n(51);t.Vector=class{constructor(e){this.elements=Array.from(e)}withMultipliedMatrix(e){const t=i.Matrix.givenRow(this.elements);return e.withMultipliedMatrix(t).toColumnVector(0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndoContext=void 0;const i=n(0),r=n(2);t.UndoContext=class{constructor(e,t){this._output=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.output=i.ReadOnlyObservable.givenObservable(this._output),this._currentIndex=i.Observable.ofEmpty(),this.currentIndex=i.ReadOnlyObservable.givenObservable(this._currentIndex),this._steps=i.ObservableArray.ofEmpty(),this.steps=i.ReadOnlyObservableArray.givenObservableArray(this._steps),this._canUndo=i.Observable.givenValue(!1,i.Observable.isStrictEqual),this.canUndo=i.ReadOnlyObservable.givenObservable(this._canUndo),this._canRedo=i.Observable.givenValue(!1,i.Observable.isStrictEqual),this.canRedo=i.ReadOnlyObservable.givenObservable(this._canRedo),this._limit=t,this.pushStep(e)}pushStep(e){r.ObjectUtil.objectIsDeepEqual(e,this._output.value)||(this._steps.removeAllWhere((e,t)=>t>this._currentIndex.value),null!=this._limit&&this.steps.count===this._limit&&this._steps.removeValueAtIndex(0),this._steps.addValue(e),this.setCurrentIndex(this._steps.count-1))}replaceStep(e){null!=this._currentIndex.value&&(r.ObjectUtil.objectIsDeepEqual(e,this._output.value)||this._steps.replaceValueAtIndex(this._currentIndex.value,e))}undo(){return null!=this._currentIndex.value&&0!==this._currentIndex.value&&(this.setCurrentIndex(this.currentIndex.value-1),!0)}redo(){return null!=this._currentIndex.value&&this._currentIndex.value!==this._steps.count-1&&(this.setCurrentIndex(this.currentIndex.value+1),!0)}clearSteps(e){const t=this._output.value;null!=t&&"keepCurrent"==e?(this._steps.sync([t]),this.setCurrentIndex(0)):(this._steps.clear(),this.setCurrentIndex(void 0))}setCurrentIndex(e){this._currentIndex.setValue(e),this._output.setValue(null!=e?this._steps.toOptionalValueGivenIndex(e):void 0),this._canUndo.setValue(null!=e&&e>0),this._canRedo.setValue(null!=e&&e<this._steps.count-1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix=void 0;const i=n(55);class r{constructor(e){this.rows=e}static ofIdentity(e){const t=[];for(let n=0;n<e;n++){t[n]=[];for(let i=0;i<e;i++)t[n][i]=n===i?1:0}return new r(t)}static givenRows(e){const t=[];for(let n=0;n<e.length;n++){t[n]=[];for(let i=0;i<e[n].length;i++)t[n][i]=e[n][i]}return new r(t)}static givenRow(e){const t=[];for(let n=0;n<e.length;n++)t.push([e[n]]);return new r(t)}isSquare(){const e=0===this.rows.length?0:this.rows[0].length;return this.rows.length===e}isSingular(){return this.isSquare()&&0===this.toDeterminant()}toDeterminant(){if(0===this.rows.length)return 1;if(!this.isSquare())return null;const e=this.withRightTriangular();let t=e.rows[0][0];for(let n=1;n<e.rows.length;n++)t*=e.rows[n][n];return t}withClone(){return r.givenRows(this.rows)}withRightTriangular(){if(0===this.rows.length)return new r([]);let e,t=this.withClone();for(let i=0;i<this.rows.length;i++){if(0===t.rows[i][i])for(let n=i+1;n<this.rows.length;n++)if(0!==t.rows[n][i]){e=[];for(let r=0;r<this.rows[0].length;r++)e.push(t.rows[i][r]+t.rows[n][r]);t.rows[i]=e;break}if(0!==t.rows[i][i])for(let r=i+1;r<this.rows.length;r++){var n=t.rows[r][i]/t.rows[i][i];e=[];for(let s=0;s<this.rows[0].length;s++)e.push(s<=i?0:t.rows[r][s]-t.rows[i][s]*n);t.rows[r]=e}}return t}toOptionalValueGivenRowAndColumn(e,t){if(!(e<0||e>=this.rows.length||t<0||t>=this.rows[0].length))return this.rows[e][t]}withMap(e){if(0===this.rows.length)return new r([]);let t=[];for(let n=0;n<this.rows.length;n++){t[n]=[];for(let i=0;i<this.rows[0].length;i++)t[n][i]=e(this.rows[n][i],n,i)}return r.givenRows(t)}withMultipliedMatrix(e){if(0===this.rows.length)throw new Error("Cannot multiply because there are no rows in this matrix");if(this.rows[0].length!==e.rows.length)throw new Error("Cannot multiply the specified matrices");const t=e.rows;let n,i,s,o=this.rows.length,a=t[0].length,l=this.rows[0].length,c=[];for(;o--;)for(n=a,c[o]=[];n--;){for(i=l,s=0;i--;)s+=this.rows[o][i]*t[i][n];c[o][n]=s}return r.givenRows(c)}toColumnVector(e){if(0===this.rows.length)return null;if(e>=this.rows[0].length)return null;let t=[];for(let n=0;n<this.rows.length;n++)t.push(this.rows[n][e]);return new i.Vector(t)}withAugumentedMatrix(e){if(0===this.rows.length)return this.withClone();if(this.rows.length!==e.rows.length)return null;const t=this.withClone(),n=t.rows[0].length;for(let i=0;i<this.rows.length;i++)for(let r=0;r<e.rows[0].length;r++)t.rows[i][n+r]=e.rows[i][r];return t}withInverse(){if(0===this.rows.length)return null;if(!this.isSquare()||this.isSingular())return null;const e=this.rows.length;let t,n=e;const i=this.withAugumentedMatrix(r.ofIdentity(e)).withRightTriangular(),s=i.rows[0].length;let o,a,l,c,u=[];for(;n--;){for(a=[],u[n]=[],l=i.rows[n][n],o=0;o<s;o++)c=i.rows[n][o]/l,a.push(c),o>=e&&u[n].push(c);for(i.rows[n]=a,t=n;t--;){for(a=[],o=0;o<s;o++)a.push(i.rows[t][o]-i.rows[n][o]*i.rows[t][n]);i.rows[t]=a}}return r.givenRows(u)}}t.Matrix=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector=void 0;const i=n(54);t.Vector=class{constructor(e){this.elements=Array.from(e)}withMultipliedMatrix(e){const t=i.Matrix.givenRow(this.elements);return e.withMultipliedMatrix(t).toColumnVector(0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(126),s=n(246),o=n(247),a=n(251),l=n(252),c=n(253),u=n(254),h=i.ObservableArray.givenValues([{title:"Transition",actor:new u.TransitionDemo({})},{title:"Element size watcher",actor:new c.ElementSizeWatcherDemo({})},{title:"Intersection watcher",actor:new r.IntersectionWatcherDemo({})},{title:"Scroll area",actor:new s.ScrollAreaDemo({})},{title:"Undo",actor:new a.UndoDemo({})},{title:"Keyboard watcher",actor:new l.KeyboardWatcherDemo({})}]);new o.ExamplesHome({title:"@anderjason/web",definitions:h}).activate()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;const i=n(7);class r{constructor(e,t){this.didChange=new i.TypedEvent,this._isObservable=!0,this.discardFilter=t,null!=e&&this.setValue(e)}static isStrictEqual(e,t){return e===t}static isObservable(e){return null!=e&&("object"==typeof e&&!0===e._isObservable)}static givenValue(e,t){return new r(e,t)}static ofEmpty(e){return new r(void 0,e)}get value(){return this._value}setValue(e){let t=!1;if(null!=this.discardFilter)try{t=this.discardFilter(e,this._value)}catch(e){console.warn(e)}t||(this._value=e,this.didChange.emit(e))}}t.Observable=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayIsEmptyOrNull=void 0,t.arrayIsEmptyOrNull=function(e){if(null==e)return!0;if(!Array.isArray(e))throw new Error("input must be an array");return 0===e.length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithEqualSizeGroups=void 0,t.arrayWithEqualSizeGroups=function(e,t){if(null==e)throw new Error("input is required");if(null==t)throw new Error("groupSize is required");if(t<1)throw new Error("groupSize must be greater than 0");const n=[],i=e.length;let r=0;for(;r<i;)n.push(e.slice(r,r+=t));return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithLeftShift=void 0,t.arrayWithLeftShift=function(e){let t=[...e];return t.length>0&&t.push(t.shift()),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithOrderFromValue=void 0,t.arrayWithOrderFromValue=function(e,t,n){const i=[...e];return"descending"===n?i.sort((e,n)=>{const i=t(e),r=t(n);return i<r?1:i>r?-1:0}):i.sort((e,n)=>{const i=t(e),r=t(n);return i<r?-1:i>r?1:0}),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithoutDuplicateValues=void 0,t.arrayWithoutDuplicateValues=function(e){const t=new Set,n=[];return e.forEach(e=>{t.has(e)||(t.add(e),n.push(e))}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithoutValue=void 0,t.arrayWithoutValue=function(e,t){if(null==e)throw new Error("input is required");return null==t?[...e]:e.filter(e=>e!==t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithPageSubset=void 0,t.arrayWithPageSubset=function(e,t,n){const i=t,r=i+n;return e.slice(i,r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithReversedOrder=void 0,t.arrayWithReversedOrder=function(e){if(null==e)throw new Error("Input is required");return[...e].reverse()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithRightShift=void 0,t.arrayWithRightShift=function(e){let t=[...e];return t.length>0&&t.unshift(t.pop()),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayWithValue=void 0,t.arrayWithValue=function(e,t,n){const i=[...e];return(-1===i.indexOf(t)||n)&&i.push(t),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberArrayGivenRange=void 0,t.numberArrayGivenRange=function(e,t){const n=[];if(t===e)return[e];if(e<t)for(let i=e;i<t+1;i++)n.push(i);else for(let i=t;i>e-1;i--)n.push(i);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionalIndexOfFirstMatchGivenArray=void 0,t.optionalIndexOfFirstMatchGivenArray=function(e,t){if(null!=e&&0!==e.length){if(!Array.isArray(e))throw new Error("Expected an array");for(let n=0;n<e.length;n++){if(t(e[n]))return n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionalLastValueGivenArray=void 0,t.optionalLastValueGivenArray=function(e){if(null!=e&&Array.isArray(e)&&0!==e.length)return e[e.length-1]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionalNthValueGivenArray=void 0,t.optionalNthValueGivenArray=function(e,t){if(null!=e&&Array.isArray(e))return t<e.length?e[t]:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionalRandomValueGivenArray=void 0,t.optionalRandomValueGivenArray=function(e){if(null!=e&&Array.isArray(e)&&0!==e.length)return e[Math.floor(Math.random()*e.length)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.valueGivenArray=void 0,t.valueGivenArray=function(e){if(null==e)throw new Error("array is required");if(!Array.isArray(e))throw new Error("Input must be an array");if(0===e.length)throw new Error("At least one item is required");return e[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapUtil=void 0;const i=n(75),r=n(76);class s{}t.MapUtil=s,s.unionGivenMaps=i.unionGivenMaps,s.differenceGivenMaps=r.differenceGivenMaps},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unionGivenMaps=void 0,t.unionGivenMaps=function(e){const t=new Map;for(let n of e)for(let e of n){const[n,i]=e;t.set(n,i)}return t}},function(e,t,n){"use strict";function i(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.differenceGivenMaps=void 0,t.differenceGivenMaps=function(e,t,n=i){const r=[],s=[],o=[],a=new Set;for(const t of e.keys())a.add(t);for(const e of t.keys())a.add(e);return a.forEach(i=>{const a=e.get(i),l=t.get(i);null==a&&null==l||(null==l?o.push({key:i,oldValue:a}):null==a?r.push({key:i,newValue:l}):n(a,l)||s.push({key:i,oldValue:a,newValue:l}))}),{addedItems:r,changedItems:s,removedItems:o,isEqual:0===r.length&&0===s.length&&0===o.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberUtil=void 0;const i=n(78),r=n(79),s=n(80),o=n(81),a=n(82),l=n(83),c=n(12),u=n(84),h=n(85);class d{}t.NumberUtil=d,d.floatGivenFloatLike=i.floatGivenFloatLike,d.integerGivenIntegerLike=r.integerGivenIntegerLike,d.numberWithDecimalPlaceLimit=a.numberWithDecimalPlaceLimit,d.numberWithEasing=l.numberWithEasing,d.numberWithHardLimit=c.numberWithHardLimit,d.numberWithRangeMap=u.numberWithRangeMap,d.numberWithCycle=o.numberWithCycle,d.randomNumberGivenRange=h.randomNumberGivenRange,d.numberLikeIsIntegerLike=s.numberLikeIsIntegerLike},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.floatGivenFloatLike=void 0,t.floatGivenFloatLike=function(e){if(null==e)throw new Error("input is required");if("number"==typeof e)return e;const t=parseFloat(e);if(isNaN(t))throw new Error("input must be float-like");return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.integerGivenIntegerLike=void 0,t.integerGivenIntegerLike=function(e){if(null!=e)return"number"==typeof e?e:parseInt(e,10)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberLikeIsIntegerLike=void 0,t.numberLikeIsIntegerLike=function(e){return"number"==typeof e?Number.isInteger(e):Number.isInteger(parseFloat(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithCycle=void 0,t.numberWithCycle=function(e,t){let n=e%t/t;return n<.5?2*n:(n-=.5,1-2*n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithDecimalPlaceLimit=void 0,t.numberWithDecimalPlaceLimit=function(e,t=1){return parseFloat(e.toFixed(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithEasing=void 0;const i=n(12),r=Math.pow,s=Math.sqrt,o=Math.sin,a=Math.cos,l=Math.PI,c=1.70158,u=1.525*c,h=2*l/3,d=2*l/4.5;function p(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}t.numberWithEasing=function(e,t){const n=i.numberWithHardLimit(e,0,1);switch(t){case"linear":return n;case"inQuad":return n*n;case"outQuad":return 1-(1-n)*(1-n);case"inOutQuad":return n<.5?2*n*n:1-r(-2*n+2,2)/2;case"inCubic":return n*n*n;case"outCubic":return 1-r(1-n,3);case"inOutCubic":return n<.5?4*n*n*n:1-r(-2*n+2,3)/2;case"inQuart":return n*n*n*n;case"outQuart":return 1-r(1-n,4);case"inOutQuart":return n<.5?8*n*n*n*n:1-r(-2*n+2,4)/2;case"inQuint":return n*n*n*n*n;case"outQuint":return 1-r(1-n,5);case"inOutQuint":return n<.5?16*n*n*n*n*n:1-r(-2*n+2,5)/2;case"inSine":return 1-a(n*l/2);case"outSine":return o(n*l/2);case"inOutSine":return-(a(l*n)-1)/2;case"inExpo":return 0===n?0:r(2,10*n-10);case"outExpo":return 1===n?1:1-r(2,-10*n);case"inOutExpo":return 0===n?0:1===n?1:n<.5?r(2,20*n-10)/2:(2-r(2,-20*n+10))/2;case"inCirc":return 1-s(1-r(n,2));case"outCirc":return s(1-r(n-1,2));case"inOutCirc":return n<.5?(1-s(1-r(2*n,2)))/2:(s(1-r(-2*n+2,2))+1)/2;case"inBack":return 2.70158*n*n*n-c*n*n;case"outBack":return 1+2.70158*r(n-1,3)+c*r(n-1,2);case"inOutBack":return n<.5?r(2*n,2)*(7.189819*n-u)/2:(r(2*n-2,2)*((u+1)*(2*n-2)+u)+2)/2;case"inElastic":return 0===n?0:1===n?1:-r(2,10*n-10)*o((10*n-10.75)*h);case"outElastic":return 0===n?0:1===n?1:r(2,-10*n)*o((10*n-.75)*h)+1;case"inOutElastic":return 0===n?0:1===n?1:n<.5?-r(2,20*n-10)*o((20*n-11.125)*d)/2:r(2,-20*n+10)*o((20*n-11.125)*d)/2+1;case"inBounce":return 1-p(1-n);case"outBounce":return p(n);case"inOutBounce":return n<.5?(1-p(1-2*n))/2:(1+p(2*n-1))/2;default:throw new Error("Unsupported easing type")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberWithRangeMap=void 0;const i=n(12);t.numberWithRangeMap=function(e,t,n,r,s){const o=(e-t)*(s-r)/(n-t)+r;return i.numberWithHardLimit(o,Math.min(r,s),Math.max(r,s))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomNumberGivenRange=void 0,t.randomNumberGivenRange=function(e,t){return e+Math.random()*(t-e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectUtil=void 0;const i=n(87),r=n(88),s=n(89),o=n(26),a=n(90),l=n(91),c=n(92),u=n(93);class h{}t.ObjectUtil=h,h.objectIsDeepEqual=i.objectIsDeepEqual,h.objectIsEmpty=r.objectIsEmpty,h.objectIsShallowEqual=s.objectIsShallowEqual,h.objectWithDeepMerge=o.objectWithDeepMerge,h.objectWithoutBlankValues=a.objectWithoutBlankValues,h.objectWithValueAtPath=l.objectWithValueAtPath,h.unionGivenObjects=c.unionGivenObjects,h.optionalValueAtPathGivenObject=u.optionalValueAtPathGivenObject},function(e,t,n){"use strict";function i(e,t){return e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?e===t:function(e,t){let n,a,l,c;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(r(e))return!!r(t)&&(e=Array.prototype.slice.call(e),t=Array.prototype.slice.call(t),i(e,t));if(o(e)){if(!o(t))return!1;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}try{l=Object.keys(e),c=Object.keys(t)}catch(e){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),n=l.length-1;n>=0;n--)if(l[n]!=c[n])return!1;for(n=l.length-1;n>=0;n--)if(a=l[n],!i(e[a],t[a]))return!1;return typeof e==typeof t}(e,t))}function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function s(e){return null==e}function o(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}Object.defineProperty(t,"__esModule",{value:!0}),t.objectIsDeepEqual=void 0,t.objectIsDeepEqual=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectIsEmpty=void 0,t.objectIsEmpty=function(e){if(null==e)return!0;if("object"!=typeof e)throw new Error("input must be an object");return 0===Object.keys(e).length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectIsShallowEqual=void 0,t.objectIsShallowEqual=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;for(const n in e)if(!(n in t)||e[n]!==t[n])return!1;for(const n in t)if(!(n in e)||e[n]!==t[n])return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectWithoutBlankValues=void 0,t.objectWithoutBlankValues=function(e){const t={};return Object.keys(e).forEach(n=>{const i=e[n];null!=i&&(t[n]=i)}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectWithValueAtPath=void 0,t.objectWithValueAtPath=function(e,t,n){if(null==t)throw new Error("Value path is required");let i,r=0;i=Array.isArray(t)?t:t.toParts();let s,o=i.length;if(0===o)return n;s=Array.isArray(e)?[...e]:Object.assign({},e);let a=s;for(;null!=a&&r<o-1;){let e=i[r];Array.isArray(a[e])?a[e]=[...a[e]]:a[e]=Object.assign({},a[e]),a=a[e],r+=1}return null!=a&&(a[i[r]]=n),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unionGivenObjects=void 0;const i=n(26);t.unionGivenObjects=function(e){return e.reduce((e,t)=>i.objectWithDeepMerge(e,t),{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.optionalValueAtPathGivenObject=void 0,t.optionalValueAtPathGivenObject=function(e,t){if(null==t)throw new Error("Value path is required");if(null==e)return;let n,i=0;n=Array.isArray(t)?t:t.toParts();let r=n.length;if(0===r)return e;for(;null!=e&&i<r;)e=e[n[i++]];return i&&i==r?e:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Percent=void 0;class i{constructor(e){this._value=e}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}static givenString(e){if(null==e)throw new Error("Value is required");return e.includes("%")?i.givenFraction(parseFloat(e),100):i.givenFraction(parseFloat(e),1)}static givenFraction(e,t){if(0==t)throw new Error("Denominator must not be 0");return new i(e/t)}static ofZero(){return this._zero}static ofHalf(){return this._half}static ofFull(){return this._full}get isZero(){return 0===this._value}get isFull(){return 1===this._value}isEqual(e){return null!=e&&(e instanceof i&&this._value===e._value)}toString(e){return this.toNumber(100).toFixed(e)+"%"}toNumber(e){return this._value*e}withInverse(){return this.isZero||this.isFull?this:i.givenFraction(1,this.toNumber(1))}}t.Percent=i,i._zero=new i(0),i._half=new i(.5),i._full=new i(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseUtil=void 0;const i=n(96),r=n(13),s=n(97),o=n(98),a=n(99);class l{}t.PromiseUtil=l,l.asyncDelayOfForever=i.asyncDelayOfForever,l.asyncSequenceGivenArrayAndCallback=r.asyncSequenceGivenArrayAndCallback,l.asyncSequenceGivenCountAndCallback=s.asyncSequenceGivenCountAndCallback,l.asyncValueGivenArrayAndFilter=o.asyncValueGivenArrayAndFilter,l.asyncValuesGivenArrayAndConverter=a.asyncValuesGivenArrayAndConverter},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncDelayOfForever=void 0,t.asyncDelayOfForever=function(){return new Promise(()=>{setInterval(Function.prototype,6e5)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncSequenceGivenCountAndCallback=void 0,t.asyncSequenceGivenCountAndCallback=async function(e,t){if(!(e<1))for(let n=0;n<e;n++)await t(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncValueGivenArrayAndFilter=void 0;const i=n(13);t.asyncValueGivenArrayAndFilter=async function(e,t){let n=void 0;return await i.asyncSequenceGivenArrayAndCallback(e,e=>t(e).then(t=>{1==t&&null==n&&(n=e)})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncValuesGivenArrayAndConverter=void 0;const i=n(13);t.asyncValuesGivenArrayAndConverter=function(e,t){const n=[];return i.asyncSequenceGivenArrayAndCallback(e,(e,i)=>t(e,i).then(e=>{n.push(e)})).then(()=>n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetUtil=void 0;const i=n(101),r=n(102),s=n(103),o=n(104),a=n(105),l=n(106);class c{}t.SetUtil=c,c.setIsEqual=i.setIsEqual,c.intersectionGivenSets=r.intersectionGivenSets,c.differenceGivenSets=a.differenceGivenSets,c.unionGivenSets=l.unionGivenSets,c.setWithItem=s.setWithItem,c.setWithoutItem=o.setWithoutItem},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setIsEqual=void 0,t.setIsEqual=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.size!==t.size)return!1;let n=!0;return e.forEach(e=>{t.has(e)||(n=!1)}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectionGivenSets=void 0;const i=n(25);t.intersectionGivenSets=function(e){if(null==e)throw new Error("Sets are required");if(0===e.length)return new Set;if(1===e.length)return new Set(e[0]);const t=new Set,n=i.ArrayUtil.arrayWithOrderFromValue(e,e=>e.size,"ascending")[0],r=i.ArrayUtil.arrayWithoutValue(e,n);return n.forEach(e=>{r.every(t=>t.has(e))&&t.add(e)}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setWithItem=void 0,t.setWithItem=function(e,t){let n=new Set(e);return n.add(t),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setWithoutItem=void 0,t.setWithoutItem=function(e,t,n){let i=new Set(e);if(null==n)i.delete(t);else{Array.from(i).forEach(e=>{n(t,e)&&i.delete(e)})}return i}},function(e,t,n){"use strict";function i(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0}),t.differenceGivenSets=void 0,t.differenceGivenSets=function(e,t,n=i){const r=[];let s=!0;const o=new Set(t);return e.forEach(e=>{null!=e&&(o.delete(e),t.has(e)||(r.push(e),s=!1))}),{addedItems:Array.from(o),removedItems:r,isEqual:s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unionGivenSets=void 0,t.unionGivenSets=function(e){if(!Array.isArray(e))throw new Error("First argument should be an array");const t=new Set;return e.forEach(e=>{e.forEach(e=>{t.add(e)})}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=void 0;const i=n(108),r=n(109),s=n(110),o=n(116),a=n(117);class l{}t.StringUtil=l,l.stringIsEmpty=r.stringIsEmpty,l.stringOfRandomCharacters=i.stringOfRandomCharacters,l.stringWithCase=s.stringWithCase,l.stringWithEachMatchReplaced=o.stringWithEachMatchReplaced,l.stringWithReplacedTokens=a.stringWithReplacedTokens},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringOfRandomCharacters=void 0;t.stringOfRandomCharacters=function(e,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"){const n=[],i=t.length;for(let r=0;r<e;r++)n.push(t.charAt(Math.floor(Math.random()*i)));return n.join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringIsEmpty=void 0,t.stringIsEmpty=function(e){return null==e||0===e.length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithCase=void 0;const i=n(27),r=n(111),s=n(112),o=n(113),a=n(114),l=n(115),c=n(28);t.stringWithCase=function(e,t){switch(t){case"camelCase":return i.stringWithCamelCase(e);case"Initial CaPiTaL":return r.stringWithInitialCapital(e);case"Only initial capital":return o.stringWithOnlyInitialCapital(e);case"kebab-case":return s.stringWithKebabCase(e);case"PascalCase":return a.stringWithPascalCase(e);case"snake_case":return l.stringWithSnakeCase(e);case"space case":return c.stringWithSpaceCase(e);default:throw new Error("Unsupported string case")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithInitialCapital=void 0,t.stringWithInitialCapital=function(e){if(null==e)throw new Error("input is required");return 0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithKebabCase=void 0;const i=n(14);t.stringWithKebabCase=function(e){if(null==e)throw new Error("input is required");return i.stringWithNoCase(e).replace(/[\W_]+(.|$)/g,(e,t)=>t?"-"+t:"").trim()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithOnlyInitialCapital=void 0,t.stringWithOnlyInitialCapital=function(e){if(null==e)throw new Error("input is required");return 0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithPascalCase=void 0;const i=n(27);t.stringWithPascalCase=function(e){if(null==e)throw new Error("input is required");const t=i.stringWithCamelCase(e);return t.charAt(0).toUpperCase()+t.slice(1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithSnakeCase=void 0;const i=n(14);t.stringWithSnakeCase=function(e){if(null==e)throw new Error("input is required");return i.stringWithNoCase(e).replace(/[\W_]+(.|$)/g,(e,t)=>t?"_"+t:"").trim()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithEachMatchReplaced=void 0,t.stringWithEachMatchReplaced=async function(e,t,n){let i=e,r=i.match(t);for(;null!=r;){const e=await n(r),s=r.index;null!=s&&(i=i.slice(0,s)+e+i.slice(s+r[0].length)),r=i.match(t)}return i}},function(e,t,n){"use strict";
/**
 * @author Jason Anderson <jason@gearsandwires.com>
 * @copyright 2016-2019 Gears & Wires
 * @license See vendor/wireframe/LICENSE file
 */Object.defineProperty(t,"__esModule",{value:!0}),t.stringWithReplacedTokens=void 0,t.stringWithReplacedTokens=function(e,t,n){let i=e;if(Object.keys(t).forEach(e=>{const n=t[e],r=new RegExp(`{{\\s?${e}\\s?}}`,"g");i=i.replace(r,n)}),1==/{{\s?\w+\s?}}/g.test(i))switch(n){case"error":throw new Error("Template has unmatched tokens");case"remove":i=i.replace(/\s*{{\s?\w+\s?}}(\s?)\s*/g,"$1")}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValuePath=void 0;class i{constructor(e){this._pathParts=e}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}static givenParts(e=[]){if(null==e)return new i([]);if(e.some(e=>null==e))throw new Error("Path cannot contain null or undefined parts");if(e.some(e=>String(e).includes(".")))throw new Error("Path parts cannot contain a period character");return new i(e)}static givenString(e=""){return new i(null==e?[]:e.split("."))}static ofEmpty(){return new i([])}get isEmpty(){return 0===this._pathParts.length}get length(){return this._pathParts.length}isEqual(e){return null!=e&&(e instanceof i&&this.toString()===e.toString())}isAncestorOf(e){if(null==e)return!1;const t=this.toString(),n=e.toString();return n.startsWith(t)&&n.length>t.length}isEqualOrAncestorOf(e){if(null==e)return!1;const t=this.toString();return e.toString().startsWith(t)}isDescendantOf(e){return null!=e&&e.isAncestorOf(this)}isEqualOrDescendantOf(e){if(null==e)return!1;const t=this.toString(),n=e.toString();return t.startsWith(n)}toParts(){return this._pathParts}toString(){return this._pathParts.join(".")}toRelativePath(e){if(null==e)throw new Error("Descendant is required");if(!e.isDescendantOf(this))throw new Error("Specified path is not a descendant of this VCC path");return new i(e.toParts().slice(this.toParts().length))}withRelativeParts(e=[]){if(null==e)throw new Error("Path parts are required");return new i([...this._pathParts,...e])}withRelativeString(e){if(null==e)throw new Error("Path string is required");const t=e.split(".");return new i([...this._pathParts,...t])}}t.ValuePath=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableArray=void 0;const i=n(2),r=n(7);class s{constructor(e){this.didChange=new r.TypedEvent,this.didChangeSteps=new r.TypedEvent,this._isObservableArray=!0,this.replaceValueAtIndex=(e,t)=>{if(e<0)throw new Error("Index cannot be negative");const n=this._array[e];if(n===t&&null!=n)return;const i=[];null!=n&&i.push({type:"remove",value:n,oldIndex:e}),this._array.splice(e,1,t),i.push({type:"add",value:t,newIndex:e}),this.didChange.emit([...this._array]),this.didChangeSteps.emit(i)},this._internalMove=(e,t)=>{for(;e<0;)e+=this._array.length;for(;t<0;)t+=this._array.length;if(t>=this._array.length)for(var n=t-this._array.length+1;n--;)this._array.push(void 0);this._array.splice(t,0,this._array.splice(e,1)[0])},this._array=[],this.sync(e)}static ofEmpty(){return new s([])}static givenValues(e){return new s([...e])}static isObservableArray(e){return null!=e&&("object"==typeof e&&!0===e._isObservableArray)}get count(){return this._array.length}forEach(e){this._array.forEach(e)}map(e){return this._array.map(e)}addValue(e,t){const n=null!=t?t:this._array.length,i=this._array.slice(n).map((e,t)=>({type:"move",value:e,oldIndex:n+t,newIndex:n+t+1}));this._array.splice(n,0,e),i.push({type:"add",value:e,newIndex:n}),this.didChange.emit([...this._array]),this.didChangeSteps.emit(i)}moveValueAtIndex(e,t){if(e===t)return;for(;e<0;)e+=this._array.length;for(;t<0;)t+=this._array.length;const n=this._array[e],i=[],r=Math.min(e,t),s=Math.max(e,t);let o;o=e<t?-1:1;for(let a=r;a<=s;a++)a===e?i.push({type:"move",value:n,oldIndex:e,newIndex:t}):null!=this._array[a]&&i.push({type:"move",value:this._array[a],oldIndex:a,newIndex:a+o});this._internalMove(e,t),this.didChange.emit([...this._array]),this.didChangeSteps.emit(i)}sync(e){if(null==e||0===e.length)return void this.clear();let t=[],n=[],r=[];e.forEach((e,i)=>{this._array[i]!==e&&(null!=this._array[i]&&n.push({type:"remove",oldIndex:i,value:this._array[i]}),t.push({type:"add",newIndex:i,value:e}))});for(let t=e.length;t<this._array.length;t++)n.push({type:"remove",oldIndex:t,value:this._array[t]});Array.from(n).forEach(e=>{if(null==e.value)return;const s=t.find(t=>t.value===e.value);null!=s&&(n=i.ArrayUtil.arrayWithoutValue(n,e),t=i.ArrayUtil.arrayWithoutValue(t,s),r.push({type:"move",oldIndex:e.oldIndex,newIndex:s.newIndex,value:e.value}))});const s=[...n,...r,...t];this._array=[...e],this.didChange.emit(this.toValues()),this.didChangeSteps.emit(s)}removeValue(e){this.removeAllWhere(t=>t===e)}removeValueAtIndex(e){this.removeAllWhere((t,n)=>n===e)}removeAllWhere(e){if(null==e)throw new Error("Filter is required");const t=[];let n=0;this._array.forEach((i,r)=>{e(i,r)?(t.push({type:"remove",value:this._array[r],oldIndex:r}),n+=1):n>0&&t.push({type:"move",value:this._array[r],oldIndex:r,newIndex:r-n})});i.ArrayUtil.arrayWithReversedOrder(t).forEach(e=>{"remove"===e.type&&this._array.splice(e.oldIndex,1)}),this.didChange.emit([...this._array]),this.didChangeSteps.emit(t)}clear(){const e=this._array.map((e,t)=>({type:"remove",value:e,oldIndex:t}));this._array=[],this.didChange.emit([...this._array]),this.didChangeSteps.emit(e)}hasValue(e,t){return-1!==this._array.indexOf(e,t)}toOptionalValueGivenIndex(e){return this._array[e]}toIndexOfValue(e,t){return this._array.indexOf(e,t)}toValues(){return Array.from(this._array)}}t.ObservableArray=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableDict=t.dictGivenObject=void 0;const i=n(7);t.dictGivenObject=function(e){if(null==e)throw new Error("Object is required");const t={};return Object.keys(e).forEach(n=>{t[String(n)]=e[n]}),t};class r{constructor(e){this.didChange=new i.TypedEvent,this.didChangeSteps=new i.TypedEvent,this._isObservableDict=!0,this._map=new Map,Object.keys(e).forEach(t=>{this._map.set(t,e[t])})}static ofEmpty(){return new r({})}static givenValues(e){return new r(e)}static isObservableDict(e){return null!=e&&("object"==typeof e&&!0===e._isObservableDict)}get count(){return this._map.size}setValue(e,t){const n=[];if(this._map.has(e)){const i=this._map.get(e);if(i===t)return;n.push({type:"update",key:e,oldValue:i,newValue:t})}else n.push({type:"add",key:e,newValue:t});this._map.set(e,t),this.didChange.emit(this.toValues()),this.didChangeSteps.emit(n)}removeKey(e){if(!this._map.has(e))return;const t=[{type:"remove",key:e,oldValue:this._map.get(e)}];this._map.delete(e),this.didChange.emit(this.toValues()),this.didChangeSteps.emit(t)}clear(){const e=[];for(let[t,n]of this._map)e.push({type:"remove",key:t,oldValue:n});this._map.clear(),this.didChange.emit({}),this.didChangeSteps.emit(e)}sync(e){if(null==e)return void this.clear();const t=[];Object.keys(e).forEach(n=>{this._map.has(n)?t.push({type:"update",key:n,oldValue:this._map.get(n),newValue:e[n]}):t.push({type:"add",key:n,newValue:e[n]}),this._map.set(n,e[n])});const n=new Set(Object.keys(e));for(let e of this._map.keys())n.has(e)||(t.push({type:"remove",key:e,oldValue:this._map.get(e)}),this._map.delete(e));this.didChange.emit(this.toValues()),this.didChangeSteps.emit(t)}hasKey(e){return this._map.has(e)}toOptionalValueGivenKey(e){return this._map.get(e)}toKeys(){return new Set(this._map.keys())}toValues(){const e={};for(let[t,n]of this._map)e[t]=n;return e}}t.ObservableDict=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableSet=void 0;const i=n(7),r=n(2);class s{constructor(e){this.didChange=new i.TypedEvent,this.didChangeSteps=new i.TypedEvent,this._isObservableSet=!0,this._set=e}static ofEmpty(){return new s(new Set)}static givenValues(e){return new s(new Set(e))}static isObservableSet(e){return null!=e&&("object"==typeof e&&!0===e._isObservableSet)}get count(){return this._set.size}addValue(e){return!this._set.has(e)&&(this._set.add(e),this.didChange.emit(Array.from(this._set)),this.didChangeSteps.emit([{type:"add",value:e}]),!0)}removeValue(e){return!!this._set.has(e)&&(this._set.delete(e),this.didChange.emit(Array.from(this._set)),this.didChangeSteps.emit([{type:"remove",value:e}]),!0)}removeAllWhere(e){if(null==e)throw new Error("Filter is required");const t=[];Array.from(this._set).forEach(n=>{e(n)&&(this._set.delete(n),t.push({type:"remove",value:n}))}),this.didChange.emit(Array.from(this._set)),this.didChangeSteps.emit(t)}sync(e){if(null==e)return void this.clear();const t=new Set(e),n=[],i=r.SetUtil.differenceGivenSets(this._set,t);i.addedItems.forEach(e=>{n.push({type:"add",value:e})}),i.removedItems.forEach(e=>{n.push({type:"remove",value:e})}),this._set=t,this.didChange.emit(Array.from(this._set)),this.didChangeSteps.emit(n)}clear(){const e=this.toSet();this._set.clear();const t=[];e.forEach(e=>{t.push({type:"remove",value:e})}),this.didChange.emit(Array.from(this._set)),this.didChangeSteps.emit(t)}hasValue(e){return this._set.has(e)}toSet(){return new Set(this._set)}toArray(){return Array.from(this._set)}}t.ObservableSet=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadOnlyObservable=void 0;class i{constructor(e){this._isObservable=!0,this._observable=e}static givenObservable(e){return new i(e)}get value(){return this._observable.value}get didChange(){return this._observable.didChange}}t.ReadOnlyObservable=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadOnlyObservableArray=void 0;class i{constructor(e){this._isObservableArray=!0,this._observableArray=e}static givenObservableArray(e){return new i(e)}get count(){return this._observableArray.count}get didChange(){return this._observableArray.didChange}get didChangeSteps(){return this._observableArray.didChangeSteps}hasValue(e){return this._observableArray.hasValue(e)}toOptionalValueGivenIndex(e){return this._observableArray.toOptionalValueGivenIndex(e)}toIndexOfValue(e,t){return this._observableArray.toIndexOfValue(e,t)}toValues(){return this._observableArray.toValues()}}t.ReadOnlyObservableArray=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadOnlyObservableDict=void 0;class i{constructor(e){this._isObservableDict=!0,this._observableDict=e}static givenObservableDict(e){return new i(e)}get count(){return this._observableDict.count}get didChange(){return this._observableDict.didChange}get didChangeSteps(){return this._observableDict.didChangeSteps}hasKey(e){return this._observableDict.hasKey(e)}toOptionalValueGivenKey(e){return this._observableDict.toOptionalValueGivenKey(e)}toKeys(){return this._observableDict.toKeys()}toValues(){return this._observableDict.toValues()}}t.ReadOnlyObservableDict=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadOnlyObservableSet=void 0;class i{constructor(e){this._isObservableSet=!0,this._observableSet=e}static givenObservableSet(e){return new i(e)}get count(){return this._observableSet.count}hasValue(e){return this._observableSet.hasValue(e)}toSet(){return this._observableSet.toSet()}toArray(){return this._observableSet.toArray()}get didChange(){return this._observableSet.didChange}get didChangeSteps(){return this._observableSet.didChangeSteps}}t.ReadOnlyObservableSet=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionWatcherDemo=void 0;const i=n(15),r=n(0),s=n(5),o=n(1),a=n(245);class l extends o.Actor{constructor(){super(...arguments),this.parentElement=r.Observable.ofEmpty(),this.isVisible=r.Observable.ofEmpty()}onActivate(){const e=this.addActor(new s.ScrollArea({parentElement:this.parentElement,direction:"vertical",scrollPositionColor:i.Color.givenHexString("#FFFFFF")})),t=r.ObservableArray.givenValues([1,2,3,4,5,6]);this.addActor(new o.ArrayActivator({input:t,fn:()=>new a.ActiveBox({parentElement:e.element})}))}}t.IntersectionWatcherDemo=l;s.ElementStyle.givenDefinition({css:"\n    background: #333;\n    position: absolute;\n    width: 300px;\n    height: 300px;\n    transform: translate(-50%, -50%);\n    left: 50%;\n    top: 50%;\n    color: white;\n    overflow-y: scroll;\n  "})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hsbGivenRgbFloat=void 0;const i=n(2);t.hsbGivenRgbFloat=function(e){const t=e.r.toNumber(1),n=e.g.toNumber(1),r=e.b.toNumber(1),s=Math.max(t,n,r),o=Math.min(t,n,r),a=s-o;let l=0;return 0!=a&&(l=t==s?(n-r)/a:n==s?2+(r-t)/a:4+(t-n)/a,l*=60,l<0&&(l+=360)),{h:i.Percent.givenFraction(l,360),s:i.Percent.givenFraction(0==s?0:(s-o)/s,1),b:i.Percent.givenFraction(s,1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hslGivenRgbFloat=void 0;const i=n(2);t.hslGivenRgbFloat=function(e){const t=e.r.toNumber(1),n=e.g.toNumber(1),r=e.b.toNumber(1);let s,o,a,l=Math.min(t,n,r),c=Math.max(t,n,r),u=c-l,h=0,d=0,p=(c+l)/2;return 0==u?(h=0,d=0):(d=p<.5?u/(c+l):u/(2-c-l),s=((c-t)/6+u/2)/u,o=((c-n)/6+u/2)/u,a=((c-r)/6+u/2)/u,t==c?h=a-o:n==c?h=1/3+s-a:r==c&&(h=2/3+o-s),h<0&&(h+=1),h>1&&(h-=1)),{h:i.Percent.givenFraction(h,1),s:i.Percent.givenFraction(d,1),l:i.Percent.givenFraction(p,1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labGivenHcl=void 0;const i=Math.PI/180;t.labGivenHcl=function(e){let t=e.h.toNumber(359),n=e.c.toNumber(140),r=e.l.toNumber(100);return t*=i,{l:r,a:Math.cos(t)*n,b:Math.sin(t)*n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.labGivenXyz=void 0,t.labGivenXyz=function(e){let t=e.x/95.047,n=e.y/100,i=e.z/108.883;return t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,{l:116*n-16,a:500*(t-n),b:200*(n-i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hclGivenLab=void 0;const i=n(2),r=180/Math.PI;t.hclGivenLab=function(e){const{l:t,a:n,b:s}=e,o=Math.sqrt(n*n+s*s);let a=(Math.atan2(s,n)*r+360)%360;return 0===Math.round(1e4*o)&&(a=Number.NaN),{h:i.Percent.givenFraction(a,360),c:i.Percent.givenFraction(o,140),l:i.Percent.givenFraction(t,100)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbFloatGivenHsl=void 0;const i=n(2);function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}t.rgbFloatGivenHsl=function(e){const t=e.h.toNumber(1),n=e.s.toNumber(1),s=e.l.toNumber(1);if(0==n)return{r:e.l,g:e.l,b:e.l};let o,a;return a=s<.5?s*(1+n):s+n-n*s,o=2*s-a,{r:i.Percent.givenFraction(r(o,a,t+1/3),1),g:i.Percent.givenFraction(r(o,a,t),1),b:i.Percent.givenFraction(r(o,a,t-1/3),1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbFloatGivenXyz=void 0;const i=n(2);t.rgbFloatGivenXyz=function(e){const t=e.x/100,n=e.y/100,r=e.z/100;let s=3.2406*t+-1.5372*n+-.4986*r,o=-.9689*t+1.8758*n+.0415*r,a=.0557*t+-.204*n+1.057*r;return s>.0031308?s=1.055*Math.pow(s,1/2.4)-.055:s*=12.92,o>.0031308?o=1.055*Math.pow(o,1/2.4)-.055:o*=12.92,a>.0031308?a=1.055*Math.pow(a,1/2.4)-.055:a*=12.92,{r:i.Percent.givenFraction(i.NumberUtil.numberWithHardLimit(s,0,1),1),g:i.Percent.givenFraction(i.NumberUtil.numberWithHardLimit(o,0,1),1),b:i.Percent.givenFraction(i.NumberUtil.numberWithHardLimit(a,0,1),1)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hsbStringGivenHsb=void 0,t.hsbStringGivenHsb=function(e){return`hsb(${Math.round(e.h.toNumber(359))}, ${Math.round(e.s.toNumber(100))}%, ${Math.round(e.b.toNumber(100))}%)`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hslStringGivenHsl=void 0,t.hslStringGivenHsl=function(e){return`hsl(${Math.round(e.h.toNumber(359))}, ${Math.round(e.s.toNumber(100))}%, ${Math.round(e.l.toNumber(100))}%)`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbStringGivenRgbFloat=void 0,t.rgbStringGivenRgbFloat=function(e,t){const n=Math.round(e.r.toNumber(255)),i=Math.round(e.g.toNumber(255)),r=Math.round(e.b.toNumber(255)),s=t.toNumber(1);return 1===s?`rgb(${n}, ${i}, ${r})`:`rgba(${n}, ${i}, ${r}, ${s})`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xyzGivenLab=void 0,t.xyzGivenLab=function(e){let t=(e.l+16)/116,n=e.a/500+t,i=t-e.b/200;return t=Math.pow(t,3)>.008856?Math.pow(t,3):(t-16/116)/7.787,n=Math.pow(n,3)>.008856?Math.pow(n,3):(n-16/116)/7.787,i=Math.pow(i,3)>.008856?Math.pow(i,3):(i-16/116)/7.787,{x:95.047*n,y:100*t,z:108.883*i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.xyzGivenRgbFloat=void 0,t.xyzGivenRgbFloat=function(e){let t=e.r.toNumber(1),n=e.g.toNumber(1),i=e.b.toNumber(1);return t>.04045?t=Math.pow((t+.055)/1.055,2.4):t/=12.92,n>.04045?n=Math.pow((n+.055)/1.055,2.4):n/=12.92,i>.04045?i=Math.pow((i+.055)/1.055,2.4):i/=12.92,t*=100,n*=100,i*=100,{x:.4124*t+.3576*n+.1805*i,y:.2126*t+.7152*n+.0722*i,z:.0193*t+.1192*n+.9505*i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbFloatGivenHex=void 0;const i=n(2),r=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;t.rgbFloatGivenHex=function(e){if(!e.match(r))throw new Error("Unrecognized hex color: "+e);if(4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length){const t=e.split("");e=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}const t=parseInt(e,16),n=t>>16,s=t>>8&255,o=255&t;return{r:i.Percent.givenFraction(n,255),g:i.Percent.givenFraction(s,255),b:i.Percent.givenFraction(o,255)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexGivenRgb=void 0,t.hexGivenRgb=function(e,t){const n=Math.round(e.r.toNumber(255)).toString(16).padStart(2,"0"),i=Math.round(e.g.toNumber(255)).toString(16).padStart(2,"0"),r=Math.round(e.b.toNumber(255)).toString(16).padStart(2,"0");return 1===t.toNumber(1)?`#${n}${i}${r}`:`#${n}${i}${r}${Math.round(t.toNumber(255)).toString(16).padStart(2,"0")}`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highContrastColorGivenColor=void 0;const i=n(8),r=n(2);t.highContrastColorGivenColor=function(e){let t;return t=e.toHclColor().l.toNumber(1)>.5?r.Percent.ofZero():r.Percent.givenFraction(1,1),i.Color.givenRgbFloat({r:t,g:t,b:t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distanceGivenColors=void 0,t.distanceGivenColors=function(e,t){const n=e.toLabColor(),i=t.toLabColor();return Math.abs(n.l-i.l)+Math.abs(n.a-i.a)+Math.abs(n.b-i.b)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorGradient=void 0;const i=n(144),r=n(146),s=n(148),o=n(149);class a{constructor(e){this._steps=e}static givenSteps(e){if(e.length<2)throw new Error("At least 2 steps are required");return new a(e)}toSteps(){return this._steps}toLinearGradientString(e){return`linear-gradient(${e}, ${this._steps.map(e=>e.toString()).join(",")})`}toHclInterpolatedColor(e){return i.hclInterpolatedColorOfColors(this._steps,e)}toRgbInterpolatedColor(e){return r.rgbInterpolatedColorOfColors(this._steps,e)}withHclStepCount(e){return new a(s.hclStepsOfColorGradient(this,e))}withRgbStepCount(e){return new a(o.rgbStepsOfColorGradient(this,e))}}t.ColorGradient=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hclInterpolatedColorOfColors=void 0;const i=n(145),r=n(2);t.hclInterpolatedColorOfColors=function(e,t){const n=1/(e.length-1);if(t.isFull)return r.ArrayUtil.optionalLastValueGivenArray(e);const s=Math.floor(t.toNumber(1)*(e.length-1)),o=Math.ceil(t.toNumber(1)*(e.length-1)),a=e[s],l=e[o],c=r.Percent.givenFraction((t.toNumber(1)-s*n)/n,1);return i.hclInterpolatedColorOfTwoColors(a,l,c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hclInterpolatedColorOfTwoColors=void 0;const i=n(8),r=n(2);t.hclInterpolatedColorOfTwoColors=function(e,t,n){if(null==e)throw new Error("Color 1 is required");if(null==t)throw new Error("Color 2 is required");if(n.isZero)return e;if(n.isFull)return t;const s=e.toHclColor(),o=t.toHclColor(),a=s.h.toNumber(1),l=s.c.toNumber(1),c=s.l.toNumber(1),u=o.h.toNumber(1),h=o.c.toNumber(1),d=o.l.toNumber(1);let p;return p=u>a&&u-a>.5?u-(a+1):u<a&&a-u>.5?u+1-a:u-a,i.Color.givenHclFloat({h:r.Percent.givenFraction(a+n.toNumber(1)*p,1),c:r.Percent.givenFraction(l+n.toNumber(1)*(h-l),1),l:r.Percent.givenFraction(c+n.toNumber(1)*(d-c),1)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbInterpolatedColorOfColors=void 0;const i=n(2),r=n(147);t.rgbInterpolatedColorOfColors=function(e,t){const n=1/(e.length-1);if(t.isFull)return i.ArrayUtil.optionalLastValueGivenArray(e);const s=Math.floor(t.toNumber(1)*(e.length-1)),o=Math.ceil(t.toNumber(1)*(e.length-1)),a=e[s],l=e[o],c=i.Percent.givenFraction((t.toNumber(1)-s*n)/n,1);return r.rgbInterpolatedColorOfTwoColors(a,l,c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbInterpolatedColorOfTwoColors=void 0;const i=n(8),r=n(2);t.rgbInterpolatedColorOfTwoColors=function(e,t,n){if(null==e)throw new Error("Color 1 is required");if(null==t)throw new Error("Color 2 is required");if(n.isZero)return e;if(n.isFull)return t;const s=e.toRgbFloatColor(),o=t.toRgbFloatColor(),a=s.r.toNumber(1),l=s.g.toNumber(1),c=s.b.toNumber(1),u=o.r.toNumber(1),h=o.g.toNumber(1),d=o.b.toNumber(1);return i.Color.givenRgbFloat({r:r.Percent.givenFraction(a+n.toNumber(1)*(u-a),1),g:r.Percent.givenFraction(l+n.toNumber(1)*(h-l),1),b:r.Percent.givenFraction(c+n.toNumber(1)*(d-c),1)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hclStepsOfColorGradient=void 0;const i=n(2);t.hclStepsOfColorGradient=function(e,t){if(t<2)throw new Error("At least two total steps are required");return i.ArrayUtil.numberArrayGivenRange(0,t-1).map(n=>e.toHclInterpolatedColor(i.Percent.givenFraction(n,t-1)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rgbStepsOfColorGradient=void 0;const i=n(2);t.rgbStepsOfColorGradient=function(e,t){if(t<2)throw new Error("At least two total steps are required");return i.ArrayUtil.numberArrayGivenRange(0,t-1).map(n=>e.toRgbInterpolatedColor(i.Percent.givenFraction(n,t-1)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Palette=void 0;const i=n(2),r=n(151);class s{constructor(e){this._colors=e}static givenColors(e){return new s(e)}static givenCanvasImageSource(e,t){const n=r.colorsGivenCanvasImageSource(e,t);return new s(n)}get colors(){return[...this._colors]}isEqual(e){return e.colors.length===this.colors.length&&this.colors.every((t,n)=>{const i=e.colors[n];return t.isEqual(i)})}toNearestIndexGivenColor(e){const t=this._colors.map((t,n)=>({idx:n,distance:t.toDistanceGivenColor(e)}));return i.ArrayUtil.arrayWithOrderFromValue(t,e=>e.distance,"ascending")[0].idx}toNearestColorGivenColor(e){return this.toOptionalColorGivenIndex(this.toNearestIndexGivenColor(e))}toOptionalColorGivenIndex(e){return this._colors[e]}toIndexGivenColor(e){const t=this._colors.findIndex(t=>t.isEqual(e));if(-1==t)throw new Error("Color not found in toIndexGivenColor");return t}}t.Palette=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorsGivenCanvasImageSource=void 0;const i=n(2),r=n(8);t.colorsGivenCanvasImageSource=function(e,t){const n=document.createElement("canvas");n.width=50,n.height=50;const s=n.getContext("2d");s.drawImage(e,0,0,n.width,n.height);const o=new Map,a=(e,t)=>{const[n,i,a,l]=s.getImageData(e,t,1,1).data;if(255===l){const e=r.Color.givenRgb255(n,i,a).toHexString();o.has(e)?o.set(e,o.get(e)+1):o.set(e,1)}};if(n.width*n.height<=t)for(let e=0;e<n.width;e++)for(let t=0;t<n.height;t++)a(e,t);else{const e=8*t;for(let t=0;t<e;t++){a(Math.floor(Math.random()*n.width),Math.floor(Math.random()*n.height))}}let l=[];for(const[e,t]of o)l.push({hexColor:e,frequency:t});l=i.ArrayUtil.arrayWithOrderFromValue(l,e=>e.frequency,"descending");const c=[];let u=[...l];for(;u.length>1;){const e=r.Color.givenHexString(u[0].hexColor),t=new Set,n=u.filter(n=>{const i=r.Color.givenHexString(n.hexColor),s=e.toDistanceGivenColor(i)<10;return s&&t.add(n.hexColor),s});c.push(n),u=u.filter(e=>!t.has(e.hexColor))}u.length>0&&c.push([u[0]]),l=c.map(e=>e[0]),l=l.slice(0,t);let h=l.map(e=>r.Color.givenHexString(e.hexColor));const d=h[0];return h=i.ArrayUtil.arrayWithOrderFromValue(h,e=>d.toDistanceGivenColor(e),"ascending"),h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasUtil=void 0;const i=n(153),r=n(154);class s{}t.CanvasUtil=s,s.blobGivenCanvas=i.blobGivenCanvas,s.canvasGivenBlob=r.canvasGivenBlob},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blobGivenCanvas=void 0,t.blobGivenCanvas=async function(e,t){return new Promise((n,i)=>{e.toBlob(e=>{null!=e?n(e):i(new Error("Unknown error rendering canvas to blob"))},t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canvasGivenBlob=void 0,t.canvasGivenBlob=async function(e,t){return new Promise((n,i)=>{const r=new FileReader;r.onerror=()=>{i(r.error)},r.onloadend=e=>{const r=new Image;r.addEventListener("error",e=>{i(e.error)}),r.addEventListener("load",()=>{const e=document.createElement("canvas");let i=r.width,s=r.height;if(null!=t){const e=t.width/r.width,n=t.height/r.height,o=Math.min(e,n,1);i=Math.round(r.width*o),s=Math.round(r.height*o)}e.width=i,e.height=s;const o=e.getContext("2d");o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.clearRect(0,0,e.width,e.height),o.drawImage(r,0,0,e.width,e.height),n(e)}),r.src=e.target.result},r.readAsDataURL(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxBinding=void 0;const i=n(1),r=n(0),s=()=>!1;class o extends i.Actor{constructor(e){if(super(e),null==e.inputElement)throw new Error("Input element is required");const t=e.inputElement.nodeName.toLowerCase();if("input"!==t)throw new Error(`Expected an input element, but got '${t}'`);if(this.inputElement=e.inputElement,"checkbox"!==this.inputElement.type)throw new Error('Expected an input with type "checkbox"');this.output=r.Observable.givenValue(e.initialValue||!1,r.Observable.isStrictEqual)}onActivate(){this._previousValue=this.inputElement.checked,this.inputElement.addEventListener("input",e=>{const t=this.inputElement.checked;(this.props.shouldPreventChange||s)(t)?this.inputElement.checked=this._previousValue:(this.output.setValue(t),this._previousValue=t)}),this.cancelOnDeactivate(this.output.didChange.subscribe(e=>{this.inputElement.checked=e},!0))}}t.CheckboxBinding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayActivator=void 0;const i=n(0),r=n(4);class s extends r.Actor{constructor(e){super(e),this._output=i.ObservableArray.ofEmpty(),this.output=i.ReadOnlyObservableArray.givenObservableArray(this._output),this._previousInput=[],i.ObservableArray.isObservableArray(e.input)?this._observableInput=e.input:this._observableInput=i.ObservableArray.givenValues(e.input)}onActivate(){this.cancelOnDeactivate(this._observableInput.didChange.subscribe(e=>{if(null!=e){for(let t=0;t<e.length;t++)if(this._previousInput[t]!==e[t]){const n=e[t],i=this._output.toOptionalValueGivenIndex(t),r=this.props.fn(n,t,i);i!==r&&(null!=i&&this.removeActor(i),null!=r&&this.addActor(r)),this._output.replaceValueAtIndex(t,r)}if(this._previousInput.length>e.length){for(let t=e.length;t<this._previousInput.length;t++){const e=this._output.toOptionalValueGivenIndex(t);null!=e&&this.removeActor(e)}this._output.removeAllWhere((t,n)=>n>=e.length)}this._previousInput=e}},!0)),this.cancelOnDeactivate(new i.Receipt(()=>{this._output.clear()}))}}t.ArrayActivator=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertBinding=void 0;const i=n(4),r=n(0);class s extends i.Actor{constructor(e){super(e),this._output=e.output||r.Observable.ofEmpty(r.Observable.isStrictEqual),this.output=r.ReadOnlyObservable.givenObservable(this._output)}onActivate(){let e=0;this.cancelOnDeactivate(this.props.input.didChange.subscribe(async t=>{e+=1,e>1e4&&(e=0);let n=e;const i=await this.props.fn(t);n===e&&this._output.setValue(i)},!0))}}t.ConvertBinding=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceTargetBinding=void 0;const i=n(4),r=n(0);class s extends i.Actor{constructor(){super(...arguments),this._source=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.source=r.ReadOnlyObservable.givenObservable(this._source),this._target=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.target=r.ReadOnlyObservable.givenObservable(this._target)}onActivate(){null==this._source.value&&this.setSource(this.props.source),null==this._target.value&&this.setTarget(this.props.target),this.cancelOnDeactivate(this.source.didChange.subscribe(e=>{null!=this._sourceValueReceipt&&(this.removeCancelOnDeactivate(this._sourceValueReceipt),this._sourceValueReceipt.cancel(),this._sourceValueReceipt=void 0),null!=e&&(this._sourceValueReceipt=this.cancelOnDeactivate(e.didChange.subscribe(()=>{this.updateTarget()},!0))),this.updateTarget()},!0)),this.cancelOnDeactivate(this.target.didChange.subscribe(()=>{this.updateTarget()})),this.cancelOnDeactivate(new r.Receipt(()=>{null!=this._sourceValueReceipt&&(this.removeCancelOnDeactivate(this._sourceValueReceipt),this._sourceValueReceipt.cancel(),this._sourceValueReceipt=void 0)}))}setSource(e){r.Observable.isObservable(e)?this._source.setValue(e):this._source.setValue(r.Observable.givenValue(e))}setTarget(e){this._target.setValue(e)}updateTarget(){const e=this.source.value,t=this.target.value;null!=e&&null!=t&&t.setValue(e.value)}}t.SourceTargetBinding=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DelayActivator=void 0;const i=n(0),r=n(30),s=n(4),o=n(31);class a extends s.Actor{onActivate(){const e=i.Observable.givenValue(!1);null!=this.props.activateAfter?this.addActor(new o.Timer({duration:this.props.activateAfter,isRepeating:!1,fn:()=>{e.setValue(!0)}})):e.setValue(!0),null!=this.props.deactivateAfter&&this.addActor(new r.ConditionalActivator({input:e,fn:e=>e,actor:new o.Timer({duration:this.props.deactivateAfter,isRepeating:!1,fn:()=>{e.setValue(!1)}})})),this.addActor(new r.ConditionalActivator({input:e,fn:e=>e,actor:this.props.actor}))}}t.DelayActivator=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExclusiveActivator=void 0;const i=n(0),r=n(4);class s extends r.Actor{constructor(){super(...arguments),this._output=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.output=i.ReadOnlyObservable.givenObservable(this._output)}onActivate(){null!=this.props.input&&null!=this.props.fn&&this.cancelOnDeactivate(this.props.input.didChange.subscribe((e,t)=>{const n=this.props.fn(e,t,this._output.value);n!==this._lastObject&&(null!=this._lastObject&&(this.removeActor(this._lastObject),this._lastObject=void 0),null!=n&&(this._lastObject=n,this.addActor(n)),this._output.setValue(this._lastObject))},!0)),this.cancelOnDeactivate(new i.Receipt(()=>{this._output.setValue(void 0)}))}}t.ExclusiveActivator=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiBinding=void 0;const i=n(0),r=n(4);class s extends r.Actor{constructor(){super(...arguments),this.didInvalidate=new i.TypedEvent,this._willInvalidateLater=!1,this._invalidatedSetByGroup=new Map}static givenGroups(e){return new s({groups:e})}static givenOneGroup(e){return new s({groups:[e]})}static givenAnyChange(e){const t=e.map(e=>[e]);return new s({groups:t})}onActivate(){this.props.groups.forEach(e=>{const t=new Set;this._invalidatedSetByGroup.set(e,t),e.forEach(e=>{this.cancelOnDeactivate(e.didChange.subscribe(()=>{t.add(e),this.onChange()}))})})}isAnyGroupInvalidated(){return this.props.groups.some(e=>this._invalidatedSetByGroup.get(e).size===e.length)}onChange(){this.isAnyGroupInvalidated()?this.invalidateNow():this._willInvalidateLater||(this._willInvalidateLater=!0,setTimeout(()=>{1==this._willInvalidateLater&&this.invalidateNow()},0))}invalidateNow(){this.didInvalidate.emit(),this._willInvalidateLater=!1;for(let[e,t]of this._invalidatedSetByGroup)t.clear()}}t.MultiBinding=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathBinding=void 0;const i=n(0),r=n(2),s=n(4);class o extends s.Actor{constructor(e){super(e),i.Observable.isObservable(e.output)?this._output=e.output:this._output=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.output=i.ReadOnlyObservable.givenObservable(this._output)}static refreshAllHavingInput(e){const t=this.bindingGroupsByInput.get(e);if(null==t)return;r.ArrayUtil.arrayWithOrderFromValue(Array.from(t.bindings),e=>e.props.path.toParts().length,"ascending").forEach(e=>{e.refresh()})}onActivate(){let e=o.bindingGroupsByInput.get(this.props.input);null==e&&(e={bindings:new Set,inputReceipt:this.props.input.didChange.subscribe(()=>{o.refreshAllHavingInput(this.props.input)})},o.bindingGroupsByInput.set(this.props.input,e)),e.bindings.add(this),this.refresh(),this.cancelOnDeactivate(new i.Receipt(()=>{e.bindings.delete(this),0===e.bindings.size&&(e.inputReceipt.cancel(),o.bindingGroupsByInput.delete(this.props.input))}))}refresh(){this._output.setValue(r.ObjectUtil.optionalValueAtPathGivenObject(this.props.input.value,this.props.path))}}t.PathBinding=o,o.bindingGroupsByInput=new Map},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequentialWorker=void 0;const i=n(0),r=n(2),s=n(4);class o extends s.Actor{constructor(){super(...arguments),this._jobs=[],this._callbackByJob=new Map,this._isBusy=!1}onActivate(){this.startNextJob()}addWork(e,t,n=5){const s=i.Observable.givenValue("queued"),o={receipt:this.cancelOnDeactivate(new i.Receipt(()=>{if("queued"===o.state.value&&o.state.setValue("cancelled"),this._jobs=r.ArrayUtil.arrayWithoutValue(this._jobs,o),this._callbackByJob.delete(o),null!=t)try{t()}catch(e){console.error(e)}})),priority:n,state:s};return this._jobs.push(o),this._callbackByJob.set(o,e),setTimeout(()=>{this.startNextJob()},1),o}startNextJob(){if(this._isBusy)return;if(!1===this.isActive.value)return;const e=r.ArrayUtil.arrayWithOrderFromValue(this._jobs,e=>e.priority,"descending")[0];null!=e&&(this._jobs=this._jobs.filter(t=>t!==e),this._isBusy=!0,this.runJob(e).then(()=>{this._isBusy=!1,this.startNextJob()}))}async runJob(e){if(null==e)return;if("queued"!==e.state.value)return;e.state.setValue("running");const t=this._callbackByJob.get(e);this._callbackByJob.delete(e);try{await t()}catch(e){console.error(e)}e.state.setValue("finished")}}t.SequentialWorker=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Box2=void 0;const i=n(9),r=n(33);class s{constructor(e,t){this._center=e,this._size=t}static givenDomRect(e){return s.givenTopLeftSize(i.Point2.givenXY(e.left,e.top),r.Size2.givenWidthHeight(e.width,e.height))}static givenCenterSize(e,t){return new s(e,t)}static givenOppositeCorners(e,t){const n=Math.min(e.x,t.x),s=Math.min(e.y,t.y),o=Math.max(e.x,t.x),a=Math.max(e.y,t.y),l=r.Size2.givenWidthHeight(o-n,a-s),c=i.Point2.givenXY(n+l.width/2,s+l.height/2);return this.givenCenterSize(c,l)}static givenTopLeftSize(e,t){const n=i.Point2.givenXY(e.x+t.width/2,e.y+t.height/2);return this.givenCenterSize(n,t)}static givenContainedPoints(e){const t=e.map(e=>e.x),n=e.map(e=>e.y),r=Math.min(...t),o=Math.min(...n),a=Math.max(...t),l=Math.max(...n);return s.givenOppositeCorners(i.Point2.givenXY(r,o),i.Point2.givenXY(a,l))}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get center(){return this._center}get size(){return this._size}isPointInside(e){return e.x>=this.toLeft()&&e.x<=this.toRight()&&e.y>=this.toTop()&&e.y<=this.toBottom()}isEqual(e){return null!=e&&(e instanceof s&&(e._center.isEqual(this._center)&&e._size.isEqual(this._size)))}toTop(){return this._center.y-this._size.height/2}toLeft(){return this._center.x-this._size.width/2}toRight(){return this._center.x+this._size.width/2}toBottom(){return this._center.y+this._size.height/2}toLeftTop(){return i.Point2.givenXY(this.toLeft(),this.toTop())}toCenterTop(){return i.Point2.givenXY(this._center.x,this.toTop())}toRightTop(){return i.Point2.givenXY(this.toRight(),this.toTop())}toLeftCenter(){return i.Point2.givenXY(this.toLeft(),this._center.y)}toRightCenter(){return i.Point2.givenXY(this.toRight(),this._center.y)}toLeftBottom(){return i.Point2.givenXY(this.toLeft(),this.toBottom())}toCenterBottom(){return i.Point2.givenXY(this._center.x,this.toBottom())}toRightBottom(){return i.Point2.givenXY(this.toRight(),this.toBottom())}toScaledBox(e,t,n){const{size:r,scale:o}=this._size.toScaledSize(e._size,t);let a,l;switch(n){case"leftTop":case"leftCenter":case"leftBottom":a=e.toLeft()+r.toHalf().width;break;case"centerTop":case"center":case"centerBottom":a=e._center.x;break;case"rightTop":case"rightCenter":case"rightBottom":a=e.toRight()-r.toHalf().width}switch(n){case"leftTop":case"centerTop":case"rightTop":l=e.toTop()+r.toHalf().height;break;case"leftCenter":case"center":case"rightCenter":l=e._center.y;break;case"leftBottom":case"centerBottom":case"rightBottom":l=e.toBottom()-r.toHalf().height}return{box:s.givenCenterSize(i.Point2.givenXY(a,l),r),scale:o}}withAddedSize(e,t){const n=this._size.withAddedSize(e);let r,o;switch(t){case"leftTop":case"leftCenter":case"leftBottom":r=this.toLeft()+n.toHalf().width;break;case"centerTop":case"center":case"centerBottom":r=this._center.x;break;case"rightTop":case"rightCenter":case"rightBottom":r=this.toRight()-n.toHalf().width}switch(t){case"leftTop":case"centerTop":case"rightTop":o=this.toTop()+n.toHalf().height;break;case"leftCenter":case"center":case"rightCenter":o=this._center.y;break;case"leftBottom":case"centerBottom":case"rightBottom":o=this.toBottom()-n.toHalf().height}return s.givenCenterSize(i.Point2.givenXY(r,o),n)}}t.Box2=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Line2=void 0;const i=n(10),r=n(34);class s{constructor(e,t){this._vector=e.withNormalizedMagnitude(),this._point=t}static givenVectorAndPoint(e,t){return new s(e,t)}static givenPoints(e,t){const n=e.toVector(t);return new s(n,e)}static givenSegment(e){return s.givenPoints(e.startPoint,e.endPoint)}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get vector(){return this._vector}get point(){return this._point}isEqual(e){return null!=e&&(e instanceof s&&(e.vector.isEqual(this.vector)&&e.point.isEqual(this.point)))}toNearestTouchingPoint(e){const t=i.Vector2.givenXY(e.x,e.y),n=i.Vector2.givenXY(this._point.x,this._point.y),r=t.withSubtractedVector(n).toDotProduct(this._vector);return n.withAddedVector(this._vector.withMultipliedScalar(r)).toPoint()}toOptionalIntersectionGivenSegment(e){const t=this.point,n=this.point.withAddedVector(this.vector),i=e.startPoint,s=e.endPoint;return r.optionalLineIntersectionGivenPoints(t,n,i,s,"extendThis")}toOptionalIntersectionGivenLine(e){const t=this.point,n=this.point.withAddedVector(this.vector),i=e.point,s=e.point.withAddedVector(e.vector);return r.optionalLineIntersectionGivenPoints(t,n,i,s,"extendBoth")}withIntercept(e){return new s(this._vector,e)}withVector(e){return new s(e,this._point)}}t.Line2=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Polygon2=void 0;const i=n(3),r=n(10),s=n(167);class o{constructor(e){this.points=e}static ofEmpty(){return new o([])}static givenPoints(e){return new o(e)}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get isClockwise(){if(null==this.points||this.points.length<3)return;const e=this.points;return r.Vector2.givenPoints(e[0],e[1]).withRotation(i.Rotation.givenDegrees(90),"clockwise").toDotProduct(r.Vector2.givenPoints(e[1],e[2]))>=0}isEqual(e){return null!=e&&(e instanceof o&&(this.points.length===e.points.length&&this.points.every((t,n)=>t.isEqual(e.points[n]))))}withExpansion(e){const t=[],n=this.isClockwise?"counterclockwise":"clockwise",s=this.points,a=i.Rotation.givenDegrees(90);return this.points.forEach((o,l)=>{const c=s[l>0?l-1:s.length-1],u=s[l<s.length-1?l+1:0],h=r.Vector2.givenPoints(c,o),d=r.Vector2.givenPoints(o,u),p=h.withRotation(a,n).withNormalizedMagnitude().withMultipliedScalar(e),v=d.withRotation(a,n).withNormalizedMagnitude().withMultipliedScalar(e),b=c.withAddedVector(p),f=o.withAddedVector(p),m=o.withAddedVector(v),g=u.withAddedVector(v),y=i.Segment2.givenPoints(b,f),_=i.Segment2.givenPoints(m,g),w=y.toOptionalIntersectionGivenSegment(_);if(null==w)throw new Error("Could not find line intersection");t.push(w)}),o.givenPoints(t)}toSvgPathString(e=0){return s.svgPathStringGivenPolygon(this,e)}toBounds(){const e=this.points.map(e=>e.x),t=this.points.map(e=>e.y),n=Math.min(...e),r=Math.min(...t),s=Math.max(...e),o=Math.max(...t),a=i.Point2.givenXY(n,r),l=i.Point2.givenXY(s,o);return i.Box2.givenOppositeCorners(a,l)}}t.Polygon2=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.svgPathStringGivenPolygon=void 0;const i=n(2);t.svgPathStringGivenPolygon=function(e,t){let n=e.points;const r=[];n=n.slice();for(let e=0;e<n.length;e++){const s=e+1>n.length-1?(e+1)%n.length:e+1,o=e+2>n.length-1?(e+2)%n.length:e+2,a=n[e],l=n[s],c=n[o];let u=t;const h=Math.sqrt(Math.pow(a.x-l.x,2)+Math.pow(a.y-l.y,2)),d=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2)),p=Math.min(h,d),v=30;p<v&&(u=i.NumberUtil.numberWithRangeMap(p,0,v,0,t));const b=(h-u)/h,f=[((1-b)*a.x+b*l.x).toFixed(1),((1-b)*a.y+b*l.y).toFixed(1)],m=u/d,g=[((1-m)*l.x+m*c.x).toFixed(1),((1-m)*l.y+m*c.y).toFixed(1)];e===n.length-1&&r.unshift("M"+g.join(",")),r.push("L"+f.join(",")),r.push("Q"+l.x+","+l.y+","+g.join(","))}return r.push("Z"),r.join(" ")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.segmentWithClippingBox=void 0;const i=n(35),r=n(9),s=[0,1,2,2,4,0,4,4,8,1,0,2,8,1,8,0],o=[4,3,0,3,1,4,0,3,2,2,4,2,1,1,0,4],a=[4,0,1,1,2,4,2,2,3,0,4,1,3,0,3,4];function l(e,t){const n=e.x*t.y-e.y*t.x;return r.Point2.givenXY((e.y*t.z-e.z*t.y)/n,(e.z*t.x-e.x*t.z)/n)}class c{constructor(e,t,n){this.x=e,this.y=t,this.z=n}}class u{constructor(e,t){e.x<t.x?(this.x_min=e.x,this.x_max=t.x):(this.x_min=t.x,this.x_max=e.x),e.y<t.y?(this.y_min=e.y,this.y_max=t.y):(this.y_min=t.y,this.y_max=e.y),this.x=[new c(this.x_min,this.y_min,1),new c(this.x_max,this.y_min,1),new c(this.x_max,this.y_max,1),new c(this.x_min,this.y_max,1)],this.e=[new c(0,1,-this.y_min),new c(1,0,-this.x_max),new c(0,1,-this.y_max),new c(1,0,-this.x_min)]}code(e){let t=0;return e.x<this.x_min?t=8:e.x>this.x_max&&(t=2),e.y<this.y_min?t|=1:e.y>this.y_max&&(t|=4),t}clipLine(e){const t=e.startPoint,n=e.endPoint,r=this.code(t),u=this.code(n);if(0==(r|u))return e;if(0!=(r&u))return;const h=(p=n,new c((d=t).y-p.y,p.x-d.x,d.x*p.y-d.y*p.x));var d,p;let v=0;for(let e=0;e<4;e+=1)b=h,f=this.x[e],b.x*f.x+b.y*f.y+b.z*f.z<=0&&(v|=1<<e);var b,f;if(0===v||15===v)return;const m=o[v],g=a[v];if(0!==r&&0!==u){const e=l(h,this.e[m]),t=l(h,this.e[g]);return i.Segment2.givenPoints(e,t)}if(0===r){let e=null;return e=l(h,0==(u&s[v])?this.e[m]:this.e[g]),i.Segment2.givenPoints(t,e)}if(0===u){let e=null;return e=l(h,0==(r&s[v])?this.e[m]:this.e[g]),i.Segment2.givenPoints(e,n)}}}t.segmentWithClippingBox=function(e,t){const n=t.toLeftTop(),i=t.toRightBottom();return new u(n,i).clipLine(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cornersGivenContainedPoints=void 0;const i=n(16),r=n(170),s=n(2),o=n(3);function a(e){const t=e[0].x-e[1].x,n=e[0].y-e[1].y,i=e[1].x-e[2].x,r=e[1].y-e[2].y;return Math.sqrt(t*t+n*n)*Math.sqrt(i*i+r*r)}function l(e,t){let n=0,i=e[n];for(let r=1;r<e.length-1;r++){let s=e[r],o=!1;switch(t){case"rightTop":o=s.x>i.x||s.x==i.x&&s.y>i.y;break;case"leftTop":o=s.y>i.y||s.y==i.y&&s.x<i.x;break;case"leftBottom":o=s.x<i.x||s.x==i.x&&s.y<i.y;break;case"rightBottom":o=s.y<i.y||s.y==i.y&&s.x>i.x}o&&(n=r,i=s)}return n}function c(e,t,n,i){const r=e.getDeltaAngleNextPoint(),s=t.getDeltaAngleNextPoint(),o=n.getDeltaAngleNextPoint(),a=i.getDeltaAngleNextPoint();return r<=s&&r<=o&&r<=a?r:s<=o&&s<=a?s:o<=a?o:a}t.cornersGivenContainedPoints=function(e){let t=function(e){const t=[],n=(new r.GrahamScan).getConvexHull(e),i=new u(n,l(n,"rightTop"),90),s=new u(n,l(n,"leftTop"),180),o=new u(n,l(n,"leftBottom"),270),a=new u(n,l(n,"rightBottom"),0);for(;a.currentAngle<90;){const e=[a.getIntersection(i),i.getIntersection(s),s.getIntersection(o),o.getIntersection(a)];t.push(e);const n=c(i,s,o,a);i.rotateBy(n),s.rotateBy(n),o.rotateBy(n),a.rotateBy(n)}return t}(e).map(e=>({rectangle:e,area:a(e)}));t=s.ArrayUtil.arrayWithOrderFromValue(t,e=>e.area,"ascending");let n=0;t=t.filter(e=>{const t=e.area-n>2e3;return n=e.area,t});const o=t[0].rectangle;return i.Corners.givenPoints([o[0],o[3],o[2],o[1]])};class u{constructor(e,t,n){this.convexHull=e,this.pointIndex=t,this.currentAngle=n}getAngleNextPoint(){const e=this.convexHull[this.pointIndex],t=this.convexHull[(this.pointIndex+1)%this.convexHull.length],n=t.x-e.x,i=t.y-e.y,r=180*Math.atan2(i,n)/Math.PI;return r<0?360+r:r}getConstant(){const e=this.convexHull[this.pointIndex];return e.y-this.getSlope()*e.x}getDeltaAngleNextPoint(){let e=this.getAngleNextPoint();return e===this.currentAngle?90:(e<0?e=360+e-this.currentAngle:e-=this.currentAngle,e<0?360:e)}getIntersection(e){let t,n;return t=this.isVertical()?this.convexHull[this.pointIndex].x:this.isHorizontal()?e.convexHull[e.pointIndex].x:(e.getConstant()-this.getConstant())/(this.getSlope()-e.getSlope()),n=this.isVertical()?e.getConstant():this.isHorizontal()?this.getConstant():this.getSlope()*t+this.getConstant(),o.Point2.givenXY(Math.round(t),Math.round(n))}getSlope(){return Math.tan(o.Rotation.givenDegrees(this.currentAngle).radians)}isHorizontal(){return Math.abs(this.currentAngle)<u.SIGMA||Math.abs(this.currentAngle-180)<u.SIGMA}isVertical(){return Math.abs(this.currentAngle-90)<u.SIGMA||Math.abs(this.currentAngle-270)<u.SIGMA}rotateBy(e){this.getDeltaAngleNextPoint()==e&&this.pointIndex++,this.currentAngle=(this.currentAngle+e)%360}}u.SIGMA=1e-11},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GrahamScan=void 0;const i=n(2);t.GrahamScan=class{areAllCollinear(e){if(e.length<2)return!0;const t=e[0],n=e[1];for(let i=2;i<e.length;i++){const r=e[i];if("collinear"!==this.getTurn(t,n,r))return!1}return!0}getConvexHull(e){const t=this.getSortedPointSet(e);if(t.length<3)throw new Error("can only create a convex hull of 3 or more unique points");if(this.areAllCollinear(t))throw new Error("cannot create a convex hull from collinear points");const n=[];n.push(t[0]),n.push(t[1]);for(let e=2;e<t.length;e++){const r=t[e],s=n.pop(),o=i.ArrayUtil.optionalLastValueGivenArray(n);switch(this.getTurn(o,s,r)){case"counterclockwise":n.push(s),n.push(r);break;case"clockwise":e--;break;case"collinear":n.push(r)}}return n.push(t[0]),n}getLowestPoint(e){let t=e[0];for(let n=1;n<e.length;n++){let i=e[n];(i.y<t.y||i.y==t.y&&i.x<t.x)&&(t=i)}return t}getSortedPointSet(e){let t=this.getLowestPoint(e);const n=[...e];return n.sort((e,n)=>{if(e.isEqual(n))return 0;let i=Math.atan2(e.y-t.y,e.x-t.x),r=Math.atan2(n.y-t.y,n.x-t.x);if(i<r)return-1;if(i>r)return 1;return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))<Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))?-1:1}),n}getTurn(e,t,n){let i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x);return i>0?"counterclockwise":i<0?"clockwise":"collinear"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cornersWithAlignment=void 0;const i=n(2),r=n(16),s=n(172);t.cornersWithAlignment=function(e,t){const n=e.toPoints(),o=i.ArrayUtil.arrayWithLeftShift(n),a=i.ArrayUtil.arrayWithLeftShift(o),l=i.ArrayUtil.arrayWithLeftShift(a),c=i.ArrayUtil.arrayWithReversedOrder(n),u=i.ArrayUtil.arrayWithLeftShift(c),h=i.ArrayUtil.arrayWithLeftShift(u),d=i.ArrayUtil.arrayWithLeftShift(h),p=t.toPoints(),v=[n,o,a,l,c,u,h,d].map(e=>({candidateArray:e,totalDistance:s.totalDistanceGivenPointArrays(e,p)})),b=i.ArrayUtil.arrayWithOrderFromValue(v,e=>e.totalDistance,"ascending")[0].candidateArray;return r.Corners.givenPoints(b)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.totalDistanceGivenPointArrays=void 0,t.totalDistanceGivenPointArrays=function(e,t){if(null==e||null==t)throw new Error("Two arrays are required");if(e.length!==t.length)throw new Error("Both arrays must be the same length");let n=0;return e.forEach((e,i)=>{n+=e.toDistance(t[i])}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementSizeWatcher=void 0;const i=n(1),r=n(0),s=n(3),o=n(174);class a extends i.Actor{onActivate(){const e=new o.default(e=>{const t=e[0];if(null==t)return;const n=t.contentRect;this.props.output.setValue(s.Size2.givenWidthHeight(n.width,n.height))});e.observe(this.props.element);const t=this.props.element.getBoundingClientRect();this.props.output.setValue(s.Size2.givenWidthHeight(t.width,t.height)),this.cancelOnDeactivate(new r.Receipt(()=>{e.disconnect(),this.props.output.setValue(void 0)}))}}class l extends i.Actor{constructor(e){super(e),r.Observable.isObservable(e.element)?this._element=e.element:this._element=r.Observable.givenValue(e.element),this._output=e.output||r.Observable.ofEmpty(s.Size2.isEqual),this.output=r.ReadOnlyObservable.givenObservable(this._output)}onActivate(){this.cancelOnDeactivate(this._element.didChange.subscribe(e=>{null!=this._activeWatcher&&(this.removeActor(this._activeWatcher),this._activeWatcher=void 0),null!=e&&(this._activeWatcher=this.addActor(new a({element:e,output:this._output})))},!0))}}t.ElementSizeWatcher=l},function(e,t,n){"use strict";n.r(t),function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),s="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var o=["top","right","bottom","left","width","height","size","weight"],a="undefined"!=typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function o(){n&&(n=!1,e()),i&&l()}function a(){s(o)}function l(){var e=Date.now();if(n){if(e-r<2)return;i=!0}else n=!0,i=!1,setTimeout(a,t);r=e}return l}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),a?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;o.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},u=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},h=m(0,0,0,0);function d(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}function v(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return h;var i=u(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var r=i[n],s=e["padding-"+r];t[r]=d(s)}return t}(i),s=r.left+r.right,o=r.top+r.bottom,a=d(i.width),l=d(i.height);if("border-box"===i.boxSizing&&(Math.round(a+s)!==t&&(a-=p(i,"left","right")+s),Math.round(l+o)!==n&&(l-=p(i,"top","bottom")+o)),!function(e){return e===u(e).document.documentElement}(e)){var c=Math.round(a+s)-t,v=Math.round(l+o)-n;1!==Math.abs(c)&&(a-=c),1!==Math.abs(v)&&(l-=v)}return m(r.left,r.top,a,l)}var b="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof u(e).SVGGraphicsElement}:function(e){return e instanceof u(e).SVGElement&&"function"==typeof e.getBBox};function f(e){return i?b(e)?function(e){var t=e.getBBox();return m(0,0,t.width,t.height)}(e):v(e):h}function m(e,t,n,i){return{x:e,y:t,width:n,height:i}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=f(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),y=function(e,t){var n,i,r,s,o,a,l,u=(i=(n=t).x,r=n.y,s=n.width,o=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),c(l,{x:i,y:r,width:s,height:o,top:r,right:i+s,bottom:o+r,left:i}),l);c(this,{target:e,contentRect:u})},_=function(){function e(e,t,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof u(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new y(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new n,O=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),i=new _(t,n,this);w.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){O.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var E=void 0!==r.ResizeObserver?r.ResizeObserver:O;t.default=E}.call(this,n(175))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.componentStyleToPreparedDomAction=void 0;const i=n(177);t.componentStyleToPreparedDomAction=function(e){i.defineCssClass(e.toClassNames(),e.css);const t=e.toOptionalModifiers();null!=t&&Object.keys(t).forEach(n=>{const r=t[n],s=e.toClassNames(n);i.defineCssClass(s,r)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineCssClass=void 0;const i=n(39);let r;"undefined"!=typeof document&&(r=document.createElement("style"),r.type="text/css",document.head.appendChild(r)),t.defineCssClass=function(e,t){if("undefined"==typeof document)return;const n=e.map(e=>"."+e).join(""),s=i.serialize(i.compile(`${n}{${t}}`),i.stringify);null!=r&&r.appendChild(document.createTextNode(s))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EveryFrame=void 0;const i=n(1);class r extends i.Actor{constructor(){super(...arguments),this.frameNumber=0}onActivate(){const e=()=>{!1!==this.isActive.value&&(this.frameNumber+=1,this.props.callback(this.frameNumber),requestAnimationFrame(e))};requestAnimationFrame(e)}}t.EveryFrame=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FocusWatcher=void 0;const i=n(0),r=n(1);class s extends r.Actor{constructor(e){super(e),this._output=e.output||i.Observable.ofEmpty(i.Observable.isStrictEqual),this.output=i.ReadOnlyObservable.givenObservable(this._output)}onActivate(){const e=()=>{this._output.setValue(!0)},t=()=>{this._output.setValue(!1)};this.props.element.addEventListener("focus",e),this.props.element.addEventListener("blur",t),this.cancelOnDeactivate(new i.Receipt(()=>{this.props.element.removeEventListener("focus",e),this.props.element.removeEventListener("blur",t)})),this._output.setValue(this.props.element===document.activeElement)}}t.FocusWatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionWatcher=void 0;const i=n(0),r=n(1);class s extends r.Actor{onActivate(){const e=this.props.minimumVisiblePercent.toNumber(1),t=new IntersectionObserver(e=>{const t=e[0];null!=t&&this.props.isElementVisible.setValue(1==t.isIntersecting)},{root:this.props.scrollElement||this.props.element.parentElement,rootMargin:this.props.rootMargin,threshold:e});t.observe(this.props.element),this.cancelOnDeactivate(new i.Receipt(()=>{t.disconnect(),this.props.isElementVisible.setValue(void 0)}))}}class o extends r.Actor{constructor(e){super(e),i.Observable.isObservable(e.element)?this._element=e.element:this._element=i.Observable.givenValue(e.element),this._isElementVisible=e.isElementVisible||i.Observable.ofEmpty(i.Observable.isStrictEqual),this.isElementVisible=i.ReadOnlyObservable.givenObservable(this._isElementVisible)}onActivate(){this.cancelOnDeactivate(this._element.didChange.subscribe(e=>{null!=this._activeWatcher&&(this.removeActor(this._activeWatcher),this._activeWatcher=void 0),null!=e&&(this._activeWatcher=this.addActor(new s({element:e,minimumVisiblePercent:this.props.minimumVisiblePercent,isElementVisible:this._isElementVisible,rootMargin:this.props.rootMargin,scrollElement:this.props.scrollElement})))},!0))}}t.IntersectionWatcher=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardShortcut=void 0;const i=n(0),r=n(1),s=n(40);class o extends r.Actor{constructor(){super(...arguments),this._isPressed=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.isPressed=i.ReadOnlyObservable.givenObservable(this._isPressed)}static getShortcutsArray(e){const t=e.join(",");let n=o.shortcutsByKeyCombination.get(t);return null==n&&(n=i.ObservableArray.ofEmpty(),o.shortcutsByKeyCombination.set(t,n)),n}static givenKey(e,t){const n=[e];return o.givenKeyCombination(n,t)}static givenKeyCombination(e,t){return new o({keyCombinations:[e],onPress:t})}static givenAnyKeyCombination(e,t){return new o({keyCombinations:e,onPress:t})}onActivate(){const e=this.props.keyCombinations.map(e=>e.map(e=>1===e.length?e.toLowerCase():e));e.forEach(e=>{o.getShortcutsArray(e).addValue(this)}),this.cancelOnDeactivate(new i.Receipt(()=>{e.forEach(e=>{o.getShortcutsArray(e).removeValue(this)})})),this.cancelOnDeactivate(s.KeyboardWatcher.instance.keys.didChange.subscribe(()=>{const t=e.find(e=>e.every(e=>s.KeyboardWatcher.instance.keys.hasValue(e)));if(null==t)return void this._isPressed.setValue(!1);const n=o.getShortcutsArray(t);n.toOptionalValueGivenIndex(n.count-1)==this?this._isPressed.setValue(null!=t):this._isPressed.setValue(!1)},!0)),this.cancelOnDeactivate(this._isPressed.didChange.subscribe(e=>{e&&this.props.onPress()},!0))}}t.KeyboardShortcut=o,o.shortcutsByKeyCombination=new Map},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationUtil=void 0;const i=n(183),r=n(41),s=n(42),o=n(43),a=n(184);class l{}t.LocationUtil=l,l.currentHostIsLocal=i.currentHostIsLocal,l.objectGivenQueryString=r.objectGivenQueryString,l.objectOfCurrentQueryString=s.objectOfCurrentQueryString,l.queryStringGivenObject=o.queryStringGivenObject,l.updateCurrentQueryString=a.updateCurrentQueryString},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.currentHostIsLocal=void 0,t.currentHostIsLocal=function(){const{hostname:e}=window.location;return"localhost"===e||e.startsWith("192.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCurrentQueryString=void 0;const i=n(42),r=n(43);t.updateCurrentQueryString=function(e){if(null==e||0===Object.keys(e).length)return;const t=i.objectOfCurrentQueryString(),n=Object.assign(Object.assign({},t),e),s=r.queryStringGivenObject(n);window.history.replaceState(null,"",`${window.location.pathname}${s}`)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManagedCanvas=void 0;const i=n(3),r=n(1),s=n(11);class o extends r.Actor{get context(){return this._context}get element(){return this._canvas.element}onActivate(){this._canvas=this.addActor(s.ManagedElement.givenDefinition({tagName:"canvas",parentElement:this.props.parentElement})),this._context=this._canvas.element.getContext("2d");const e=window.devicePixelRatio||1;this.cancelOnDeactivate(this.props.size.didChange.subscribe(t=>{if(null==t)return;if(null==this.props.parentElement.value)return;const n=i.Size2.givenWidthHeight(t.width*e,t.height*e);this._canvas.element.width=n.width,this._canvas.element.height=n.height,this._canvas.style.width=t.width+"px",this._canvas.style.height=t.height+"px"},!0))}}t.ManagedCanvas=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasUtil=void 0;const i=n(187),r=n(188);class s{}t.CanvasUtil=s,s.blobGivenCanvas=i.blobGivenCanvas,s.canvasGivenBlob=r.canvasGivenBlob},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blobGivenCanvas=void 0,t.blobGivenCanvas=async function(e,t){return new Promise((n,i)=>{e.toBlob(e=>{null!=e?n(e):i(new Error("Unknown error rendering canvas to blob"))},t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canvasGivenBlob=void 0,t.canvasGivenBlob=async function(e,t){return new Promise((n,i)=>{const r=new FileReader;r.onerror=()=>{i(r.error)},r.onloadend=e=>{const r=new Image;r.addEventListener("error",e=>{i(e.error)}),r.addEventListener("load",()=>{const e=document.createElement("canvas");let i=r.width,s=r.height;if(null!=t){const e=t.width/r.width,n=t.height/r.height,o=Math.min(e,n,1);i=Math.round(r.width*o),s=Math.round(r.height*o)}e.width=i,e.height=s;const o=e.getContext("2d");o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.clearRect(0,0,e.width,e.height),o.drawImage(r,0,0,e.width,e.height),n(e)}),r.src=e.target.result},r.readAsDataURL(e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxBinding=void 0;const i=n(1),r=n(0),s=()=>!1;class o extends i.Actor{constructor(e){if(super(e),null==e.inputElement)throw new Error("Input element is required");const t=e.inputElement.nodeName.toLowerCase();if("input"!==t)throw new Error(`Expected an input element, but got '${t}'`);if(this.inputElement=e.inputElement,"checkbox"!==this.inputElement.type)throw new Error('Expected an input with type "checkbox"');this.isChecked=r.Observable.givenValue(e.initialValue||!1,r.Observable.isStrictEqual)}onActivate(){this._previousValue=this.inputElement.checked,this.inputElement.addEventListener("input",e=>{const t=this.inputElement.checked;(this.props.shouldPreventChange||s)(t)?this.inputElement.checked=this._previousValue:(this.isChecked.setValue(t),this._previousValue=t)}),this.cancelOnDeactivate(this.isChecked.didChange.subscribe(e=>{this.inputElement.checked=e},!0))}}t.CheckboxBinding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cornersGivenContainedPoints=void 0;const i=n(18),r=n(191),s=n(2),o=n(3);function a(e){const t=e[0].x-e[1].x,n=e[0].y-e[1].y,i=e[1].x-e[2].x,r=e[1].y-e[2].y;return Math.sqrt(t*t+n*n)*Math.sqrt(i*i+r*r)}function l(e,t){let n=0,i=e[n];for(let r=1;r<e.length-1;r++){let s=e[r],o=!1;switch(t){case"rightTop":o=s.x>i.x||s.x==i.x&&s.y>i.y;break;case"leftTop":o=s.y>i.y||s.y==i.y&&s.x<i.x;break;case"leftBottom":o=s.x<i.x||s.x==i.x&&s.y<i.y;break;case"rightBottom":o=s.y<i.y||s.y==i.y&&s.x>i.x}o&&(n=r,i=s)}return n}function c(e,t,n,i){const r=e.getDeltaAngleNextPoint(),s=t.getDeltaAngleNextPoint(),o=n.getDeltaAngleNextPoint(),a=i.getDeltaAngleNextPoint();return r<=s&&r<=o&&r<=a?r:s<=o&&s<=a?s:o<=a?o:a}t.cornersGivenContainedPoints=function(e){let t=function(e){const t=[],n=(new r.GrahamScan).getConvexHull(e),i=new u(n,l(n,"rightTop"),90),s=new u(n,l(n,"leftTop"),180),o=new u(n,l(n,"leftBottom"),270),a=new u(n,l(n,"rightBottom"),0);for(;a.currentAngle<90;){const e=[a.getIntersection(i),i.getIntersection(s),s.getIntersection(o),o.getIntersection(a)];t.push(e);const n=c(i,s,o,a);i.rotateBy(n),s.rotateBy(n),o.rotateBy(n),a.rotateBy(n)}return t}(e).map(e=>({rectangle:e,area:a(e)}));t=s.ArrayUtil.arrayWithOrderFromValue(t,e=>e.area,"ascending");let n=0;t=t.filter(e=>{const t=e.area-n>2e3;return n=e.area,t});const o=t[0].rectangle;return i.Corners.givenPoints([o[0],o[3],o[2],o[1]])};class u{constructor(e,t,n){this.convexHull=e,this.pointIndex=t,this.currentAngle=n}getAngleNextPoint(){const e=this.convexHull[this.pointIndex],t=this.convexHull[(this.pointIndex+1)%this.convexHull.length],n=t.x-e.x,i=t.y-e.y,r=180*Math.atan2(i,n)/Math.PI;return r<0?360+r:r}getConstant(){const e=this.convexHull[this.pointIndex];return e.y-this.getSlope()*e.x}getDeltaAngleNextPoint(){let e=this.getAngleNextPoint();return e===this.currentAngle?90:(e<0?e=360+e-this.currentAngle:e-=this.currentAngle,e<0?360:e)}getIntersection(e){let t,n;return t=this.isVertical()?this.convexHull[this.pointIndex].x:this.isHorizontal()?e.convexHull[e.pointIndex].x:(e.getConstant()-this.getConstant())/(this.getSlope()-e.getSlope()),n=this.isVertical()?e.getConstant():this.isHorizontal()?this.getConstant():this.getSlope()*t+this.getConstant(),o.Point2.givenXY(Math.round(t),Math.round(n))}getSlope(){return Math.tan(o.Rotation.givenDegrees(this.currentAngle).radians)}isHorizontal(){return Math.abs(this.currentAngle)<u.SIGMA||Math.abs(this.currentAngle-180)<u.SIGMA}isVertical(){return Math.abs(this.currentAngle-90)<u.SIGMA||Math.abs(this.currentAngle-270)<u.SIGMA}rotateBy(e){this.getDeltaAngleNextPoint()==e&&this.pointIndex++,this.currentAngle=(this.currentAngle+e)%360}}u.SIGMA=1e-11},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GrahamScan=void 0;const i=n(2);t.GrahamScan=class{areAllCollinear(e){if(e.length<2)return!0;const t=e[0],n=e[1];for(let i=2;i<e.length;i++){const r=e[i];if("collinear"!==this.getTurn(t,n,r))return!1}return!0}getConvexHull(e){const t=this.getSortedPointSet(e);if(t.length<3)throw new Error("can only create a convex hull of 3 or more unique points");if(this.areAllCollinear(t))throw new Error("cannot create a convex hull from collinear points");const n=[];n.push(t[0]),n.push(t[1]);for(let e=2;e<t.length;e++){const r=t[e],s=n.pop(),o=i.ArrayUtil.optionalLastValueGivenArray(n);switch(this.getTurn(o,s,r)){case"counterclockwise":n.push(s),n.push(r);break;case"clockwise":e--;break;case"collinear":n.push(r)}}return n.push(t[0]),n}getLowestPoint(e){let t=e[0];for(let n=1;n<e.length;n++){let i=e[n];(i.y<t.y||i.y==t.y&&i.x<t.x)&&(t=i)}return t}getSortedPointSet(e){let t=this.getLowestPoint(e);const n=[...e];return n.sort((e,n)=>{if(e.isEqual(n))return 0;let i=Math.atan2(e.y-t.y,e.x-t.x),r=Math.atan2(n.y-t.y,n.x-t.x);if(i<r)return-1;if(i>r)return 1;return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))<Math.sqrt((t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y))?-1:1}),n}getTurn(e,t,n){let i=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x);return i>0?"counterclockwise":i<0?"clockwise":"collinear"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cornersWithAlignment=void 0;const i=n(2),r=n(18),s=n(193);t.cornersWithAlignment=function(e,t){const n=e.toPoints(),o=i.ArrayUtil.arrayWithLeftShift(n),a=i.ArrayUtil.arrayWithLeftShift(o),l=i.ArrayUtil.arrayWithLeftShift(a),c=i.ArrayUtil.arrayWithReversedOrder(n),u=i.ArrayUtil.arrayWithLeftShift(c),h=i.ArrayUtil.arrayWithLeftShift(u),d=i.ArrayUtil.arrayWithLeftShift(h),p=t.toPoints(),v=[n,o,a,l,c,u,h,d].map(e=>({candidateArray:e,totalDistance:s.totalDistanceGivenPointArrays(e,p)})),b=i.ArrayUtil.arrayWithOrderFromValue(v,e=>e.totalDistance,"ascending")[0].candidateArray;return r.Corners.givenPoints(b)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.totalDistanceGivenPointArrays=void 0,t.totalDistanceGivenPointArrays=function(e,t){if(null==e||null==t)throw new Error("Two arrays are required");if(e.length!==t.length)throw new Error("Both arrays must be the same length");let n=0;return e.forEach((e,i)=>{n+=e.toDistance(t[i])}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementBoundsWatcher=void 0;const i=n(1),r=n(0),s=n(3);class o extends i.Actor{onActivate(){const e=new ResizeObserver(e=>{const t=e[0];if(null==t)return;const n=t.contentRect,i=s.Box2.givenDomRect(n);this.props.output.setValue(i)});e.observe(this.props.element),this.props.output.setValue(s.Box2.givenDomRect(this.props.element.getBoundingClientRect())),this.cancelOnDeactivate(new r.Receipt(()=>{e.disconnect(),this.props.output.setValue(void 0)}))}}class a extends i.Actor{constructor(e){super(e),r.Observable.isObservable(e.element)?this._element=e.element:this._element=r.Observable.givenValue(e.element),this._output=e.output||r.Observable.ofEmpty(s.Box2.isEqual),this.output=r.ReadOnlyObservable.givenObservable(this._output)}onActivate(){this.cancelOnDeactivate(this._element.didChange.subscribe(e=>{null!=this._activeWatcher&&(this.removeActor(this._activeWatcher),this._activeWatcher=void 0),null!=e&&(this._activeWatcher=this.addActor(new o({element:e,output:this._output})))},!0))}}t.ElementBoundsWatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.componentStyleToPreparedDomAction=void 0;const i=n(196);t.componentStyleToPreparedDomAction=function(e){i.defineCssClass(e.toClassNames(),e.css);const t=e.toOptionalModifiers();null!=t&&Object.keys(t).forEach(n=>{const r=t[n],s=e.toClassNames(n);i.defineCssClass(s,r)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineCssClass=void 0;const i=n(39);let r;"undefined"!=typeof document&&(r=document.createElement("style"),r.type="text/css",document.head.appendChild(r)),t.defineCssClass=function(e,t){if("undefined"==typeof document)return;const n=e.map(e=>"."+e).join(""),s=i.serialize(i.compile(`${n}{${t}}`),i.stringify);null!=r&&r.appendChild(document.createTextNode(s))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EveryFrame=void 0;const i=n(1);class r extends i.Actor{constructor(){super(...arguments),this.frameNumber=0}onActivate(){const e=()=>{!1!==this.isActive.value&&(this.frameNumber+=1,this.props.callback(this.frameNumber),requestAnimationFrame(e))};requestAnimationFrame(e)}}t.EveryFrame=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FocusWatcher=void 0;const i=n(0),r=n(1);class s extends r.Actor{constructor(e){super(e),this._output=e.output||i.Observable.ofEmpty(i.Observable.isStrictEqual),this.output=i.ReadOnlyObservable.givenObservable(this._output)}onActivate(){const e=()=>{this._output.setValue(!0)},t=()=>{this._output.setValue(!1)};this.props.element.addEventListener("focus",e),this.props.element.addEventListener("blur",t),this.cancelOnDeactivate(new i.Receipt(()=>{this.props.element.removeEventListener("focus",e),this.props.element.removeEventListener("blur",t)})),this._output.setValue(this.props.element===document.activeElement)}}t.FocusWatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionWatcher=void 0;const i=n(0),r=n(1);class s extends r.Actor{onActivate(){const e=this.props.minimumVisiblePercent.toNumber(1),t=new IntersectionObserver(e=>{const t=e[0];null!=t&&this.props.isElementVisible.setValue(1==t.isIntersecting)},{root:this.props.scrollElement||this.props.element.parentElement,rootMargin:this.props.rootMargin,threshold:e});t.observe(this.props.element),this.cancelOnDeactivate(new i.Receipt(()=>{t.disconnect(),this.props.isElementVisible.setValue(void 0)}))}}class o extends r.Actor{constructor(e){super(e),i.Observable.isObservable(e.element)?this._element=e.element:this._element=i.Observable.givenValue(e.element),this._isElementVisible=e.isElementVisible||i.Observable.ofEmpty(i.Observable.isStrictEqual),this.isElementVisible=i.ReadOnlyObservable.givenObservable(this._isElementVisible)}onActivate(){this.cancelOnDeactivate(this._element.didChange.subscribe(e=>{null!=this._activeWatcher&&(this.removeActor(this._activeWatcher),this._activeWatcher=void 0),null!=e&&(this._activeWatcher=this.addActor(new s({element:e,minimumVisiblePercent:this.props.minimumVisiblePercent,isElementVisible:this._isElementVisible,rootMargin:this.props.rootMargin,scrollElement:this.props.scrollElement})))},!0))}}t.IntersectionWatcher=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardShortcut=void 0;const i=n(0),r=n(1),s=n(45);class o extends r.Actor{constructor(){super(...arguments),this._isPressed=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.isPressed=i.ReadOnlyObservable.givenObservable(this._isPressed)}static getShortcutsArray(e){const t=e.join(",");let n=o.shortcutsByKeyCombination.get(t);return null==n&&(n=i.ObservableArray.ofEmpty(),o.shortcutsByKeyCombination.set(t,n)),n}static givenKey(e,t){const n=[e];return o.givenKeyCombination(n,t)}static givenKeyCombination(e,t){return new o({keyCombinations:[e],onPress:t})}static givenAnyKeyCombination(e,t){return new o({keyCombinations:e,onPress:t})}onActivate(){const e=this.props.keyCombinations.map(e=>e.map(e=>1===e.length?e.toLowerCase():e));e.forEach(e=>{o.getShortcutsArray(e).addValue(this)}),this.cancelOnDeactivate(new i.Receipt(()=>{e.forEach(e=>{o.getShortcutsArray(e).removeValue(this)})})),this.cancelOnDeactivate(s.KeyboardWatcher.instance.keys.didChange.subscribe(()=>{const t=e.find(e=>e.every(e=>s.KeyboardWatcher.instance.keys.hasValue(e)));if(null==t)return void this._isPressed.setValue(!1);const n=o.getShortcutsArray(t);n.toOptionalValueGivenIndex(n.count-1)==this?this._isPressed.setValue(null!=t):this._isPressed.setValue(!1)},!0)),this.cancelOnDeactivate(this._isPressed.didChange.subscribe(e=>{e&&this.props.onPress()},!0))}}t.KeyboardShortcut=o,o.shortcutsByKeyCombination=new Map},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationUtil=void 0;const i=n(202),r=n(46),s=n(47),o=n(48),a=n(203);class l{}t.LocationUtil=l,l.currentHostIsLocal=i.currentHostIsLocal,l.objectGivenQueryString=r.objectGivenQueryString,l.objectOfCurrentQueryString=s.objectOfCurrentQueryString,l.queryStringGivenObject=o.queryStringGivenObject,l.updateCurrentQueryString=a.updateCurrentQueryString},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.currentHostIsLocal=void 0,t.currentHostIsLocal=function(){const{hostname:e}=window.location;return"localhost"===e||e.startsWith("192.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCurrentQueryString=void 0;const i=n(47),r=n(48);t.updateCurrentQueryString=function(e){if(null==e||0===Object.keys(e).length)return;const t=i.objectOfCurrentQueryString(),n=Object.assign(Object.assign({},t),e),s=r.queryStringGivenObject(n);window.history.replaceState(null,"",`${window.location.pathname}${s}`)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkUtil=void 0;const i=n(205),r=n(21),s=n(206),o=n(207),a=n(22);class l{}t.NetworkUtil=l,l.blobGivenUrl=r.blobGivenUrl,l.dataUrlGivenUrl=i.dataUrlGivenUrl,l.dataUrlGivenBlob=a.dataUrlGivenBlob,l.imageBitmapGivenUrl=s.imageBitmapGivenUrl,l.scriptGivenUrl=o.scriptGivenUrl},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUrlGivenUrl=void 0;const i=n(21),r=n(22);t.dataUrlGivenUrl=async function(e){const t=await i.blobGivenUrl(e);return await r.dataUrlGivenBlob(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageBitmapGivenUrl=void 0,t.imageBitmapGivenUrl=function(e){return new Promise((t,n)=>{const i=document.createElement("img");i.onload=()=>{t(i)},i.onerror=()=>{n(new Error("Could not load image"))},i.crossOrigin="anonymous",i.src=e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scriptGivenUrl=void 0,t.scriptGivenUrl=function(e){return new Promise((t,n)=>{const i=document.createElement("script");i.type="text/javascript",i.onload=()=>{t()},i.onerror=()=>{n()},i.src=e,document.head.appendChild(i)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableState=void 0;const i=n(0),r=n(2),s=n(49),o=n(1),a=n(209);function l(e){return"object"==typeof e?r.ObjectUtil.objectWithDeepMerge({},e):Array.isArray(e)?r.ObjectUtil.objectWithDeepMerge([],e):e}class c extends o.Actor{constructor(){super(...arguments),this._state=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.state=i.ReadOnlyObservable.givenObservable(this._state),this._pathBindings=new Set}onActivate(){this._undoContext=new s.UndoContext(l(this.props.initialState||{}),10),this.cancelOnDeactivate(this._undoContext.currentStep.didChange.subscribe(e=>{this._state.setValue(l(e))},!0))}get undoContext(){return this._undoContext}subscribe(e,t,n=!1){const r=this.addActor(new o.PathBinding({input:this._state,path:e}));this._pathBindings.add(r);const s=this.cancelOnDeactivate(r.output.didChange.subscribe(e=>{t(e)},n));return new i.Receipt(()=>{this._pathBindings.delete(r),s.cancel(),this.removeCancelOnDeactivate(s),this.removeActor(r)})}toBinding(e){return new a.ObservableStateBinding(Object.assign({observableState:this},e))}toOptionalValueGivenPath(e){return l(r.ObjectUtil.optionalValueAtPathGivenObject(this._state.value,e))}update(e,t){const n=r.ObjectUtil.objectWithValueAtPath(this._state.value,e,l(t));this._state.setValue(n)}}t.ObservableState=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableStateBinding=void 0;const i=n(0),r=n(1);class s extends r.Actor{constructor(e){super(e),null!=e.output?this.output=e.output:this.output=i.Observable.ofEmpty(i.Observable.isStrictEqual)}onActivate(){let e=!1;this.cancelOnDeactivate(this.props.observableState.subscribe(this.props.valuePath,t=>{e=!0;let n=t;null!=this.props.outputValueGivenPartialState&&(n=this.props.outputValueGivenPartialState(n)),this.output.setValue(n),e=!1},!0)),this.cancelOnDeactivate(this.output.didChange.subscribe(t=>{if(1==e)return;let n=t;null!=this.props.partialStateGivenOutputValue&&(n=this.props.outputValueGivenPartialState(n)),this.props.observableState.update(this.props.valuePath,n)}))}}t.ObservableStateBinding=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=void 0;const i=n(3),r=n(0),s=n(1),o=n(211),a=n(216);class l extends s.Actor{constructor(){super(),this.points=r.Observable.givenValue({}),this.didClick=new r.TypedEvent,this.didSingleClick=new r.TypedEvent,this.didDoubleClick=new r.TypedEvent,this.didStart=new r.TypedEvent,this.didEnd=new r.TypedEvent,this._hoveredElement=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.hoveredElement=r.ReadOnlyObservable.givenObservable(this._hoveredElement),this._referenceCountByTarget=new Map,this.onKeyDown=e=>{e.repeat||e.altKey&&"t"===e.key&&(this._keyboardTouchActive=!0,this.startTouch("first",this._screenSpaceKeyboardTouchPoint))},this.onKeyUp=e=>{e.repeat||this._keyboardTouchActive&&"t"===e.key&&(this._keyboardTouchActive=!1,this.endTouch("first",this._screenSpaceKeyboardTouchPoint))},this.onPointerDown=e=>{if(0!==e.button)return;const t=i.Point2.givenXY(e.clientX,e.clientY),n=e.isPrimary&&!this._keyboardTouchActive?"first":"second",r=this.startTouch(n,t);"first"===n&&this._pendingClick.pressButton(t),r&&(e.preventDefault(),e.stopPropagation())},this.onPointerMove=e=>{const t=i.Point2.givenXY(e.clientX,e.clientY);this._screenSpaceKeyboardTouchPoint=t;const n=e.isPrimary&&!this._keyboardTouchActive?"first":"second";this.moveTouch(n,t),"first"===n&&this._pendingClick.movePointer(t)},this.onPointerUp=e=>{if(0!==e.button)return;const t=i.Point2.givenXY(e.clientX,e.clientY),n=e.isPrimary&&!this._keyboardTouchActive?"first":"second",r=this.endTouch(n,t);"first"===n&&this._pendingClick.releaseButton(t),r&&(e.preventDefault(),e.stopPropagation())},this.onPointerEnter=e=>{0===e.buttons&&(this._pendingClick.reset(),null!=this._screenSpacePoint1&&this.endTouch("first",this._screenSpacePoint1),null!=this._screenSpacePoint2&&this.endTouch("second",this._screenSpacePoint2))},this.updateTouchPosition=(e,t)=>{"first"===e?this._screenSpacePoint1=t:"second"===e&&(this._screenSpacePoint2=t),this.notifyPointsChanged()}}static get instance(){return null==l._instance&&(l._instance=new l,l._instance.activate()),this._instance}onActivate(){"localhost"!==window.location.hostname&&"192.168.1.100"!==window.location.hostname||this.addActor(new a.TouchVisualizer({touchSupport:this})),this.cancelOnDeactivate(new r.Receipt(()=>{this._referenceCountByTarget.clear()})),this._pendingClick=this.addActor(new o.PendingClick),this.cancelOnDeactivate(this._pendingClick.didClick.subscribe(e=>{this.onClick(e)})),this.cancelOnDeactivate(this._pendingClick.didSingleClick.subscribe(e=>{this.onSingleClick(e)})),this.cancelOnDeactivate(this._pendingClick.didDoubleClick.subscribe(e=>{this.onDoubleClick(e)})),"undefined"!=typeof document&&(document.body.addEventListener("keydown",this.onKeyDown),document.body.addEventListener("keyup",this.onKeyUp),document.body.addEventListener("pointerdown",this.onPointerDown),document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointerenter",this.onPointerEnter),this.cancelOnDeactivate(new r.Receipt(()=>{document.body.removeEventListener("keydown",this.onKeyDown),document.body.removeEventListener("keyup",this.onKeyUp),document.body.removeEventListener("pointerdown",this.onPointerDown),document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointerenter",this.onPointerEnter)})))}resetPendingClick(){this._pendingClick.reset()}addTarget(e){const t=this._referenceCountByTarget.get(e)||0;return this._referenceCountByTarget.set(e,t+1),new r.Receipt(()=>{if(!this._referenceCountByTarget.has(e))return;const t=this._referenceCountByTarget.get(e)-1;t<1?this._referenceCountByTarget.delete(e):this._referenceCountByTarget.set(e,t)})}startTouch(e,t){const n=this.optionalTargetElementGivenScreenPoint(t);this._screenSpaceKeyboardTouchPoint=t,this.updateTouchPosition(e,t);const i={screenPoint:t,target:n,namedTouchPoint:e,isHandled:!1};return this.didStart.emit(i),i.isHandled}moveTouch(e,t){"first"===e&&null==this._screenSpacePoint1||"second"===e&&null==this._screenSpacePoint2||(this._screenSpaceKeyboardTouchPoint=t,this.updateTouchPosition(e,t))}endTouch(e,t){const n=this.optionalTargetElementGivenScreenPoint(t);"first"===e?(this._screenSpacePoint1=void 0,this._screenSpacePoint2=void 0):this._screenSpacePoint2=void 0,this.notifyPointsChanged();const i={screenPoint:t,target:n,namedTouchPoint:e,isHandled:!1};return this.didEnd.emit(i),i.isHandled}onClick(e){const t=this.optionalTargetElementGivenScreenPoint(e);this.didClick.emit({screenPoint:e,target:t,namedTouchPoint:"first",isHandled:!1})}onSingleClick(e){const t=this.optionalTargetElementGivenScreenPoint(e);this.didSingleClick.emit({screenPoint:e,target:t,namedTouchPoint:"first",isHandled:!1})}onDoubleClick(e){const t=this.optionalTargetElementGivenScreenPoint(e);this.didDoubleClick.emit({screenPoint:e,target:t,namedTouchPoint:"first",isHandled:!1})}optionalTargetElementGivenScreenPoint(e){if(null==e)return;const t=document.elementsFromPoint(e.x,e.y).find(e=>this._referenceCountByTarget.has(e));return null!=t?t:void 0}notifyPointsChanged(){this.points.setValue({first:this._screenSpacePoint1,second:this._screenSpacePoint2})}}t.Pointer=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingClick=void 0;const i=n(1),r=n(0),s=n(6);function o(e,t,n=4){if(null==e||null==t)return!1;return e.toDistance(t)<n}class a extends i.Actor{constructor(){super(),this.didClick=new r.TypedEvent,this.didSingleClick=new r.TypedEvent,this.didDoubleClick=new r.TypedEvent,this._evaluateLongPressLater=new s.Debounce({duration:s.Duration.givenSeconds(.5),fn:async()=>{this.evaluateLongPress()}})}onActivate(){this.cancelOnDeactivate(new r.Receipt(()=>{this._evaluateLongPressLater.clear()}))}pressButton(e){if(0!=this.isActive.value)switch(o(e,this._targetPoint)||this.reset(),this._state){case"idle":this._targetPoint=e,this._state="down",this._evaluateLongPressLater.invoke();break;case"click":this._state="down2"}}movePointer(e){o(e,this._targetPoint)||this.reset()}releaseButton(e){if(0!=this.isActive.value)switch(o(e,this._targetPoint)||this.reset(),this._state){case"down":this._state="click",this.notifyClick();break;case"down2":this.notifyDoubleClick()}}evaluateLongPress(){switch(this._state){case"down":this.notifyClick(),requestAnimationFrame(()=>{this.notifyDoubleClick()});break;case"down2":this.notifyDoubleClick();break;case"click":this.notifySingleClick();break;default:this.reset()}}reset(){this._targetPoint=void 0,this._state="idle",this._evaluateLongPressLater.clear()}notifyClick(){const e=this._targetPoint;this.didClick.emit(e)}notifySingleClick(){const e=this._targetPoint;this.reset(),this.didSingleClick.emit(e)}notifyDoubleClick(){const e=this._targetPoint;this.reset(),this.didDoubleClick.emit(e)}}t.PendingClick=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debounce=void 0;t.Debounce=class{constructor(e){this._timeout=null,this.props=e}invoke(e){this._lastArgs=e,null!=this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this.invokeNow()},this.props.duration.toMilliseconds())}clear(){this._lastArgs=void 0,null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}invokeNow(){const e=this._lastArgs;this.clear(),this.props.fn(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Duration=void 0;class i{constructor(e){this._milliseconds=e}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}static givenMilliseconds(e){return new i(e)}static givenSeconds(e){return i.givenMilliseconds(1e3*e)}static givenMinutes(e){return i.givenSeconds(60*e)}static givenHours(e){return i.givenMinutes(60*e)}static givenDays(e){return i.givenHours(24*e)}static givenInstantRange(e,t){return new i(t.toEpochMilliseconds()-e.toEpochMilliseconds())}static ofMinimum(){return new i(0)}get isMinimum(){return 0===this._milliseconds}isEqual(e){return null!=e&&(e instanceof i&&this._milliseconds===e._milliseconds)}toMilliseconds(){return this._milliseconds}toSeconds(){return this._milliseconds/1e3}toMinutes(){return this.toSeconds()/60}toHours(){return this.toMinutes()/60}toDays(){return this.toHours()/24}toDelay(){return new Promise(e=>setTimeout(e,this._milliseconds))}withAddedMilliseconds(e){return new i(this._milliseconds+e)}withAddedSeconds(e){return i.givenSeconds(this.toSeconds()+e)}withAddedMinutes(e){return i.givenMinutes(this.toMinutes()+e)}withAddedHours(e){return i.givenHours(this.toHours()+e)}withAddedDays(e){return i.givenDays(this.toDays()+e)}}t.Duration=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Instant=void 0;class i{constructor(e){this._epochMilliseconds=e}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}static ofNow(){return new i((new Date).getTime())}static givenEpochMilliseconds(e){return new i("string"==typeof e?parseInt(e):e)}isEqual(e){return null!=e&&(e instanceof i&&this._epochMilliseconds===e._epochMilliseconds)}toEpochMilliseconds(){return this._epochMilliseconds}toNativeDate(){return new Date(this._epochMilliseconds)}toString(){return this.toEpochMilliseconds().toString()}withAddedDuration(e){return new i(this._epochMilliseconds+e.toMilliseconds())}}t.Instant=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Throttle=void 0;t.Throttle=class{constructor(e){this._timeout=null,this._isBlocked=!1,this.props=e}invoke(e){this._isBlocked||(this._isBlocked=!0,this._timeout=setTimeout(()=>{this.clear()},this.props.duration.toMilliseconds()),this.props.fn(e))}clear(){this._isBlocked=!1,null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TouchVisualizer=void 0;const i=n(1),r=n(20);class s extends i.Actor{onActivate(){const e=this.addActor(o.toManagedElement({tagName:"div",parentElement:document.body}));e.element.id="TouchVisualizer";const t=this.addActor(a.toManagedElement({tagName:"div",parentElement:e.element}));t.style.backgroundColor="red";const n=this.addActor(a.toManagedElement({tagName:"div",parentElement:e.element}));n.style.backgroundColor="blue",this.cancelOnDeactivate(this.props.touchSupport.points.didChange.subscribe(e=>{null!=e.first?(t.style.transform=`translate(${e.first.x}px, ${e.first.y}px)`,t.addModifier("isVisible")):t.removeModifier("isVisible"),null!=e.second?(n.style.transform=`translate(${e.second.x}px, ${e.second.y}px)`,n.addModifier("isVisible")):n.removeModifier("isVisible")}))}}t.TouchVisualizer=s;const o=r.ElementStyle.givenDefinition({css:"\n    bottom: 0;\n    left: 0;\n    pointer-events: none;\n    position: absolute;\n    right: 0;\n    top: 0;\n    user-select: none;\n    z-index: 1000;\n  "}),a=r.ElementStyle.givenDefinition({css:"\n    background: rgba(255,255,255,0.9);\n    border-radius: 50%;\n    box-shadow: 0 0 0 5px rgba(255,255,255,.35);\n    display: none;\n    height: 35px;\n    left: -17.5px;\n    position: absolute;\n    top: -17.5px;\n    width: 35px;\n  ",modifiers:{isVisible:"\n      display: block;\n    "}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Preload=void 0;const i=n(0),r=n(50),s=n(1),o=n(21),a=n(22),l=n(218);class c extends s.Actor{constructor(){super(...arguments),this.didLoadVideo=new i.TypedEvent,this.didLoadImage=new i.TypedEvent,this.didLoadFont=new i.TypedEvent,this._isReady=i.Observable.givenValue(!0,i.Observable.isStrictEqual),this.isReady=i.ReadOnlyObservable.givenObservable(this._isReady),this._videoMetadataByUrl=new Map,this._imageDataUrlByUrl=new Map,this._loadedFontSet=new Set,this._loadingVideoSet=new Set,this._loadingFontSet=new Set,this._loadingImageSet=new Set,this._requestedFontSet=new Set}static get instance(){return null==this._instance&&(this._instance=new c,this._instance.activate()),this._instance}onActivate(){this._sequentialWorker=this.addActor(new s.SequentialWorker({}))}addImage(e,t=5){this._imageDataUrlByUrl.has(e)||(this._imageDataUrlByUrl.set(e,i.Observable.ofEmpty(i.Observable.isStrictEqual)),this._loadingImageSet.add(e),this._isReady.setValue(!1),this._sequentialWorker.addWork(async()=>{await this.loadImage(e)},void 0,t))}addFont(e,t=5){this._requestedFontSet.has(e)||(this._isReady.setValue(!1),this._requestedFontSet.add(e),this.loadGoogleFont(e))}addVideo(e,t=5){this._videoMetadataByUrl.has(e)||(this._videoMetadataByUrl.set(e,i.Observable.ofEmpty(i.Observable.isStrictEqual)),this._loadingVideoSet.add(e),this._isReady.setValue(!1),this._sequentialWorker.addWork(async()=>{await this.loadVideo(e)},void 0,t))}toPreloadedImageUrl(e){return this._imageDataUrlByUrl.has(e)||this.addImage(e),this._imageDataUrlByUrl.get(e)}toVideoMetadataGivenUrl(e){return this._videoMetadataByUrl.has(e)||this.addVideo(e),this._videoMetadataByUrl.get(e)}ensureImageLoaded(e){return this._imageDataUrlByUrl.has(e)||this.addImage(e),new Promise(t=>{const n=this.toPreloadedImageUrl(e).didChange.subscribe(e=>{null!=e&&setTimeout(()=>{n.cancel(),t()},1)},!0)})}ensureFontLoaded(e){return this._loadedFontSet.has(e)?Promise.resolve():this._loadingFontSet.has(e)?new Promise(t=>{const n=this.didLoadFont.subscribe(i=>{i===e&&(n.cancel(),t())})}):Promise.reject(new Error("This font style has not been defined. Call defineCustom() first."))}ensureVideoLoaded(e){return this._videoMetadataByUrl.has(e)||this.addVideo(e),new Promise(t=>{const n=this.toVideoMetadataGivenUrl(e).didChange.subscribe(e=>{null!=e&&setTimeout(()=>{n.cancel(),t()},1)},!0)})}ensureAllLoaded(){return!0===this._isReady.value?Promise.resolve():new Promise(e=>{const t=this.isReady.didChange.subscribe(n=>{!0===n&&(t.cancel(),e())})})}async loadImage(e){const t=await o.blobGivenUrl(e),n=await a.dataUrlGivenBlob(t);this._imageDataUrlByUrl.get(e).setValue(n),this._loadingImageSet.delete(e),this.didLoadImage.emit(e),this.checkReady()}async loadVideo(e){const t=await l.videoMetadataGivenUrl(e);this._videoMetadataByUrl.get(e).setValue(t),this._loadingVideoSet.delete(e),this.didLoadVideo.emit(e),this.checkReady()}loadGoogleFont(e){if(null==e)return;if(this._loadingFontSet.has(e)||this._loadedFontSet.has(e))return;this._loadingFontSet.add(e);const t=document.createElement("link");t.href=e.url,t.rel="stylesheet",t.type="text/css",document.head.appendChild(t);new r(e.fontFamily,{weight:e.weight,style:e.style}).load().then(()=>{this._loadingFontSet.delete(e),this._loadedFontSet.add(e),this.didLoadFont.emit(e),this.checkReady()})}checkReady(){this._isReady.setValue(0===this._loadingFontSet.size&&0===this._loadingImageSet.size&&0===this._loadingVideoSet.size)}}t.Preload=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoMetadataGivenUrl=void 0;const i=n(3);t.videoMetadataGivenUrl=function(e){return new Promise((t,n)=>{const r=document.createElement("video");r.addEventListener("loadedmetadata",()=>{t({url:e,contentSize:i.Size2.givenWidthHeight(r.videoWidth,r.videoHeight)})},!1),r.addEventListener("error",()=>{n(new Error("Could not load image"))}),r.src=e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenSize=void 0;const i=n(0),r=n(6),s=n(3),o=n(1);class a extends o.Actor{constructor(){super(),this._availableSize=i.Observable.ofEmpty(s.Size2.isEqual),this.availableSize=i.ReadOnlyObservable.givenObservable(this._availableSize),this._scrollbarSize=i.Observable.ofEmpty(s.Size2.isEqual),this.scrollbarSize=i.ReadOnlyObservable.givenObservable(this._scrollbarSize),this.isPollingEnabled=i.Observable.givenValue(!0,i.Observable.isStrictEqual),this._measureScrollbarLater=new r.Debounce({fn:async()=>{this.measureScrollbar()},duration:r.Duration.givenMilliseconds(250)}),window.addEventListener("resize",()=>{this.recalculateSize()}),this.recalculateSize(),this._availableSize.value.isZero&&requestAnimationFrame(()=>{this.recalculateSize()}),this.addActor(new o.ConditionalActivator({input:this.isPollingEnabled,fn:e=>e,actor:new o.Timer({fn:()=>{this.recalculateSize()},isRepeating:!0,duration:r.Duration.givenSeconds(.25)})}))}static get instance(){return null==this._instance&&(this._instance=new a,this._instance.activate()),this._instance}measureScrollbar(){const e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const n=e.offsetWidth-t.offsetWidth,i=e.offsetHeight-t.offsetHeight;this._scrollbarSize.setValue(s.Size2.givenWidthHeight(n,i)),document.body.removeChild(e)}recalculateSize(){this._availableSize.setValue(s.Size2.givenWidthHeight(Math.min(window.outerWidth,window.innerWidth),Math.min(window.innerHeight,window.outerHeight))),this._measureScrollbarLater.invoke()}}t.ScreenSize=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollArea=t.styleGivenHexColor=void 0;const i=n(3),r=n(0),s=n(2),o=n(19),a=n(20),l=n(1),c=new Map;function u(e){const t=e.toHexString();if(!c.has(t)){const n=e.withAlpha(s.Percent.givenFraction(.2,1)).toHexString(),i=a.ElementStyle.givenDefinition({css:`\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n        transition: 0.2s ease color;\n        color: ${n};\n\n        &:hover {\n          color: ${t};\n        }\n\n        &::-webkit-scrollbar {\n          width: 22px;\n          height: 22px;\n          border-radius: 13px;\n          background-clip: padding-box;\n        }\n    \n        &::-webkit-scrollbar-corner {\n          background: transparent;\n        }\n\n        &::-webkit-scrollbar-thumb {\n          border-radius: 13px;\n          background-clip: padding-box;\n          border: 8px solid transparent;\n          box-shadow: inset 0 0 0 10px;\n        }\n      `});c.set(t,i)}return c.get(t)}t.styleGivenHexColor=u;class h extends l.Actor{constructor(e){switch(super(e),this._scrollbarSize=r.Observable.ofEmpty(),this.scrollbarSize=r.ReadOnlyObservable.givenObservable(this._scrollbarSize),e.direction){case"none":this._scrollbarSize.setValue(i.Size2.ofZero());break;case"horizontal":this._scrollbarSize.setValue(i.Size2.givenWidthHeight(0,22));break;case"vertical":this._scrollbarSize.setValue(i.Size2.givenWidthHeight(22,0));break;case"both":this._scrollbarSize.setValue(i.Size2.givenWidthHeight(22,22))}}get element(){return this._wrapper.element}onActivate(){let e;this._wrapper=this.addActor(o.ManagedElement.givenDefinition({tagName:"div",parentElement:this.props.parentElement})),null!=this.props.backgroundColor&&(this._wrapper.style.backgroundColor=this.props.backgroundColor.toHexString()),e=r.Observable.isObservable(this.props.scrollPositionColor)?this.props.scrollPositionColor:r.Observable.givenValue(this.props.scrollPositionColor),this.cancelOnDeactivate(e.didChange.subscribe(e=>{const t=u(e);null!=t&&(this._wrapper.element.className=t.toCombinedClassName())},!0));const t=e=>{switch(e){case"none":this._wrapper.style.overflowX="hidden",this._wrapper.style.overflowY="hidden";break;case"vertical":this._wrapper.style.overflowX="hidden",this._wrapper.style.overflowY="scroll";break;case"horizontal":this._wrapper.style.overflowX="scroll",this._wrapper.style.overflowY="hidden";break;case"both":this._wrapper.style.overflowX="scroll",this._wrapper.style.overflowY="scroll";break;default:throw new Error("Unsupported direction")}};r.Observable.isObservable(this.props.direction)?this.cancelOnDeactivate(this.props.direction.didChange.subscribe(e=>{t(e)},!0)):t(this.props.direction)}}t.ScrollArea=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollWatcher=void 0;const i=n(1),r=n(0),s=n(3);class o extends i.Actor{onActivate(){const e=()=>{this.props.position.setValue(s.Point2.givenXY(this.props.element.scrollLeft,this.props.element.scrollTop))};this.props.element.addEventListener("scroll",e),e(),this.cancelOnDeactivate(new r.Receipt(()=>{this.props.element.removeEventListener("scroll",e),this.props.position.setValue(void 0)}))}}class a extends i.Actor{constructor(e){super(e),this._position=r.Observable.ofEmpty(s.Point2.isEqual),this.position=r.ReadOnlyObservable.givenObservable(this._position),r.Observable.isObservable(e.element)?this._element=e.element:this._element=r.Observable.givenValue(e.element)}onActivate(){this.cancelOnDeactivate(this._element.didChange.subscribe(e=>{null!=this._activeWatcher&&(this.removeActor(this._activeWatcher),this._activeWatcher=void 0),null!=e&&(this._activeWatcher=this.addActor(new o({element:e,position:this._position})))},!0))}}t.ScrollWatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequentialChoice=void 0;const i=n(0);t.SequentialChoice=class{constructor(e){if(this._nextOption=i.Observable.ofEmpty(),this.nextOption=i.ReadOnlyObservable.givenObservable(this._nextOption),this._previousOption=i.Observable.ofEmpty(),this.previousOption=i.ReadOnlyObservable.givenObservable(this._previousOption),this.setCurrentIndex=e=>{const t=this.props.options.length;if(null!=this.props.options&&0!==t||(this._currentIdx=void 0),this.currentOption.setValue(this.props.options[e%t]),t>1)if(this._nextOption.setValue(this.props.options[(e+1)%t]),e<1){const n=t-Math.abs(e-1)%t;this._previousOption.setValue(this.props.options[n])}else this._previousOption.setValue(this.props.options[(e-1)%t]);this._currentIdx=e},this.selectNextOption=()=>{this.setCurrentIndex(this._currentIdx+1)},this.selectPreviousOption=()=>{0===this._currentIdx?this.setCurrentIndex(this.props.options.length-1):this.setCurrentIndex(this._currentIdx-1)},this.props=e,this.currentOption=e.output||i.Observable.ofEmpty(i.Observable.isStrictEqual),e.options.length>0){if(null!=this.currentOption.value){const t=e.options.indexOf(this.currentOption.value);-1!==t?this.setCurrentIndex(t):this.currentOption.setValue(void 0)}null==this.currentOption.value&&this.setCurrentIndex(0)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepDelayBinding=void 0;const i=n(0),r=n(1);class s extends r.Actor{constructor(e){super(e),null!=e.output?this._output=e.output:this._output=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.output=i.ReadOnlyObservable.givenObservable(this._output)}onActivate(){const e=[];this.cancelOnDeactivate(this.props.input.didChange.subscribe(t=>{e.push(t),e.length>this.props.stepsBehind&&this._output.setValue(e.shift())},!0))}}t.StepDelayBinding=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextInputBinding=void 0;const i=n(1),r=n(0),s=n(2);class o extends i.Actor{constructor(e){if(super(e),this._displayText=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.displayText=r.ReadOnlyObservable.givenObservable(this._displayText),this._isEmpty=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.isEmpty=r.ReadOnlyObservable.givenObservable(this._isEmpty),this._rawInputValue=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.rawInputText=r.ReadOnlyObservable.givenObservable(this._rawInputValue),null==e.inputElement)throw new Error("Input is required");const t=e.inputElement.nodeName.toLowerCase();if("input"!==t&&"textarea"!==t)throw new Error(`Expected an input or textarea element, but got '${t}'`);this._inputElement=e.inputElement,this.value=this.props.value||r.Observable.ofEmpty(r.Observable.isStrictEqual)}onActivate(){this._previousDisplayText=this._inputElement.value,this._caretPosition=this._inputElement.selectionStart,this._inputElement.addEventListener("keydown",e=>{this._caretPosition=this._inputElement.selectionStart,this._previousDisplayText=this._inputElement.value,this._rawInputValue.setValue(this._inputElement.value),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(this._inputElement.value))}),this._inputElement.addEventListener("input",e=>{const t=this._inputElement.value;let n,i=this.props.valueGivenDisplayText(t);if(null!=this.props.overrideDisplayText){if(n=this.props.overrideDisplayText({displayText:t,value:i,previousDisplayText:this._previousDisplayText,previousValue:this.value.value}),null==n)return void this.onOverride(this._previousDisplayText,!0);this.onOverride(n,!1),i=this.props.valueGivenDisplayText(n)}this.value.setValue(i),null!=n&&requestAnimationFrame(()=>{this._inputElement.value=n,this._rawInputValue.setValue(this._inputElement.value),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(this._inputElement.value))})}),this.cancelOnDeactivate(this.value.didChange.subscribe(e=>{const t=this.props.displayTextGivenValue(e);this._inputElement.value=t||"",this._rawInputValue.setValue(this._inputElement.value),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(this._inputElement.value))},!0))}onOverride(e,t){this._previousDisplayText=e,this._inputElement.value=e,t&&this._inputElement.setSelectionRange(this._caretPosition,this._caretPosition),this._rawInputValue.setValue(e),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(e))}}t.TextInputBinding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transform=t.matrix3dOfIdentity=void 0;const i=n(3),r=n(226);function s(e,t,n){const i=t.withMultipliedScalar(e.x),r=n.withMultipliedScalar(e.y);return i.withAddedVector(r)}function o(){let e=[];for(let t=0;t<16;t++)t%5==0?e.push(1):e.push(0);return e}function a(e){if(null!=e){if(e&&e.constructor===Array){let t=e.filter(e=>"number"==typeof e).filter(e=>!isNaN(e));if(6===e.length&&6===t.length){let e=o();return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}if(16===e.length&&16===t.length)return e}throw new TypeError(`Expected a number[] with length 6 or 16, but got '${e}'`)}}t.matrix3dOfIdentity=o;class l{constructor(e){if(this.isEqual=e=>null!=e&&(e instanceof l&&this.matrix3d.every((t,n)=>e.matrix3d[n]===t)),null==e)throw new Error("Matrix is required");this.matrix3d=e}static givenCssMatrixTransform(e){if("string"==typeof e){let t=e.match(/matrix(3d)?\(([^)]+)\)/);if(t){const e=a(t[2].split(", ").map(parseFloat));return new l(e)}}throw new Error("Could not create Transform from CSS matrix transform string")}static givenMatrix3D(e){return new l(e)}static givenCornersAndSize(e,t){const n=a(r.matrixTransformGivenCorners(e,t));if(null!=n)return new l(n)}static givenScale(e){return new l(a([e.width,0,0,e.height,0,0]))}static givenPoints(e,t,n,r,s){const o=i.Vector2.givenPoint(e),a=i.Vector2.givenPoint(t),c=i.Vector2.givenPoint(n),u=i.Vector2.givenPoint(r),h=a.withSubtractedVector(o),d=u.withSubtractedVector(c);let p,v;if(s){const e=h.toDotProduct(h);p=h.toDotProduct(d)/e,v=(h.x*d.y-h.y*d.x)/e}else{const e=Math.sqrt(h.toDotProduct(h));p=Math.sqrt(h.toDotProduct(d))/e,v=0}const b=i.Vector2.givenXY(p,v),f=i.Vector2.givenXY(-v,p),m=b.withMultipliedScalar(o.x),g=f.withMultipliedScalar(o.y),y=m.withAddedVector(g),_=c.withSubtractedVector(y),w=[b.x,b.y,0,0,f.x,f.y,0,0,0,0,0,0,_.x,_.y,0,0];return new l(w)}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get is2d(){return 0===this.matrix3d[2]&&0===this.matrix3d[3]}toTranslation(){const e=this.matrix3d[12],t=this.matrix3d[13];return i.Point2.givenXY(e,t)}toCssTranslation(){const e=this.toTranslation();return`translate(${e.x}px, ${e.y}px)`}toRotation(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5];if(0!=e||0!=t){const n=Math.sqrt(e*e+t*t),r=t>0?Math.acos(e/n):-Math.acos(e/n);return i.Rotation.givenRadians(r)}if(0!=n||0!=r){const e=Math.sqrt(n*n+r*r),t=Math.PI/2-(r>0?Math.acos(-n/e):-Math.acos(n/e));return i.Rotation.givenRadians(t)}return i.Rotation.givenDegrees(0)}toCssRotation(){return`rotate(${this.toRotation().toDegrees()}deg)`}toScale(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5],s=e*r-t*n;if(0!=e||0!=t){const n=Math.sqrt(e*e+t*t);return i.Size2.givenWidthHeight(n,s/n)}if(0!=n||0!=r){const e=Math.sqrt(n*n+r*r);return i.Size2.givenWidthHeight(s/e,e)}return i.Size2.ofZero()}toCssScale(){const e=this.toScale();return`scale(${e.width}, ${e.height})`}toSkewX(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5];if(0!=e||0!=t){const s=Math.sqrt(e*e+t*t),o=Math.atan((e*n+t*r)/(s*s));return i.Rotation.givenRadians(o)}return i.Rotation.ofZero()}toSkewY(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5];if(0!=e||0!=t)return i.Rotation.ofZero();if(0!=n||0!=r){const s=Math.sqrt(n*n+r*r),o=Math.atan((e*n+t*r)/(s*s));return i.Rotation.givenRadians(o)}return i.Rotation.ofZero()}toCssSkew(){const e=this.toSkewX(),t=this.toSkewY();return`skew(${e.toDegrees()}deg, ${t.toDegrees()}deg)`}toCssMatrixTransform(){return`matrix3d(${this.matrix3d.join(", ")})`}toCssCombinedTransform(){return[this.toCssTranslation(),this.toCssRotation(),this.toCssScale(),this.toCssSkew()].join(" ")}toTranslateVector(){const e=this.matrix3d[12],t=this.matrix3d[13];return i.Vector2.givenXY(e,t)}toVectors(){return[i.Vector2.givenXY(this.matrix3d[0],this.matrix3d[1]),i.Vector2.givenXY(this.matrix3d[4],this.matrix3d[5])]}toTransformedPoint(e){const t=[e.x,e.y,0,1],n=[0,0,0,0];for(let e=0;e<4;++e){let i=0;for(let n=0;n<4;++n)i+=this.matrix3d[4*n+e]*t[n];n[e]=i}for(let e=0;e<4;++e)n[e]=n[e]/n[3];return i.Point2.givenXY(n[0],n[1])}withCascade(e){const[t,n]=e.toVectors(),[i,r]=this.toVectors(),o=s(t,i,r),a=s(n,i,r),c=s(this.toTranslateVector(),t,n),u=e.toTranslateVector().withAddedVector(c),h=[...this.matrix3d];return h[0]=o.x,h[1]=o.y,h[4]=a.x,h[5]=a.y,h[12]=u.x,h[13]=u.y,new l(h)}withTranslation(e){const t=[...this.matrix3d];return t[12]=e.x,t[13]=e.y,new l(t)}}t.Transform=l,l.identity=new l([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matrixTransformGivenCorners=void 0;const i=n(51),r=n(52);t.matrixTransformGivenCorners=function(e,t){const{width:n,height:s}=t,o=[{x:0,y:0},{x:0,y:s},{x:n,y:0},{x:n,y:s}],a=[{x:e.leftTop.x,y:e.leftTop.y},{x:e.leftBottom.x,y:e.leftBottom.y},{x:e.rightTop.x,y:e.rightTop.y},{x:e.rightBottom.x,y:e.rightBottom.y}],l=i.Matrix.givenRows([[o[0].x,o[0].y,1,0,0,0,-o[0].x*a[0].x,-o[0].y*a[0].x],[0,0,0,o[0].x,o[0].y,1,-o[0].x*a[0].y,-o[0].y*a[0].y],[o[1].x,o[1].y,1,0,0,0,-o[1].x*a[1].x,-o[1].y*a[1].x],[0,0,0,o[1].x,o[1].y,1,-o[1].x*a[1].y,-o[1].y*a[1].y],[o[2].x,o[2].y,1,0,0,0,-o[2].x*a[2].x,-o[2].y*a[2].x],[0,0,0,o[2].x,o[2].y,1,-o[2].x*a[2].y,-o[2].y*a[2].y],[o[3].x,o[3].y,1,0,0,0,-o[3].x*a[3].x,-o[3].y*a[3].x],[0,0,0,o[3].x,o[3].y,1,-o[3].x*a[3].y,-o[3].y*a[3].y]]).withInverse();if(null==l)return;const c=new r.Vector([a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).withMultipliedMatrix(l),u=i.Matrix.givenRows([[c.elements[0],c.elements[1],0,c.elements[2]],[c.elements[3],c.elements[4],0,c.elements[5]],[0,0,1,0],[c.elements[6],c.elements[7],0,1]]),h=[];for(var d=0;d<=3;d++)for(var p=0;p<=3;p++)h.push(u.toOptionalValueGivenRowAndColumn(p,d));return h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkUtil=void 0;const i=n(228),r=n(23),s=n(229),o=n(230),a=n(24);class l{}t.NetworkUtil=l,l.blobGivenUrl=r.blobGivenUrl,l.dataUrlGivenUrl=i.dataUrlGivenUrl,l.dataUrlGivenBlob=a.dataUrlGivenBlob,l.imageBitmapGivenUrl=s.imageBitmapGivenUrl,l.scriptGivenUrl=o.scriptGivenUrl},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUrlGivenUrl=void 0;const i=n(23),r=n(24);t.dataUrlGivenUrl=async function(e){const t=await i.blobGivenUrl(e);return await r.dataUrlGivenBlob(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageBitmapGivenUrl=void 0,t.imageBitmapGivenUrl=function(e){return new Promise((t,n)=>{const i=document.createElement("img");i.onload=()=>{t(i)},i.onerror=()=>{n(new Error("Could not load image"))},i.crossOrigin="anonymous",i.src=e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scriptGivenUrl=void 0,t.scriptGivenUrl=function(e){return new Promise((t,n)=>{const i=document.createElement("script");i.type="text/javascript",i.onload=()=>{t()},i.onerror=()=>{n()},i.src=e,document.head.appendChild(i)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableState=void 0;const i=n(0),r=n(2),s=n(53),o=n(1),a=n(232);function l(e){return"object"==typeof e?r.ObjectUtil.objectWithDeepMerge({},e):Array.isArray(e)?r.ObjectUtil.objectWithDeepMerge([],e):e}class c extends o.Actor{constructor(){super(...arguments),this._state=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.state=i.ReadOnlyObservable.givenObservable(this._state),this._pathBindings=new Set}onActivate(){this._undoContext=new s.UndoContext(l(this.props.initialState||{}),10),this.cancelOnDeactivate(this._undoContext.output.didChange.subscribe(e=>{this._state.setValue(l(e))},!0))}get undoContext(){return this._undoContext}pushCurrentState(){null!=this.state.value&&this._undoContext.pushStep(this.state.value)}subscribe(e,t,n=!1){const r=this.addActor(new o.PathBinding({input:this._state,path:e}));this._pathBindings.add(r);const s=this.cancelOnDeactivate(r.output.didChange.subscribe(e=>{t(e)},n));return new i.Receipt(()=>{this._pathBindings.delete(r),s.cancel(),this.removeCancelOnDeactivate(s),this.removeActor(r)})}toBinding(e){return new a.ObservableStateBinding(Object.assign({observableState:this},e))}toOptionalValueGivenPath(e){return l(r.ObjectUtil.optionalValueAtPathGivenObject(this._state.value,e))}update(e,t){const n=r.ObjectUtil.optionalValueAtPathGivenObject(this._state.value,e);if(r.ObjectUtil.objectIsDeepEqual(n,t))return!1;const i=r.ObjectUtil.objectWithValueAtPath(this._state.value,e,l(t));return this._state.setValue(i),!0}}t.ObservableState=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableStateBinding=void 0;const i=n(0),r=n(1);class s extends r.Actor{constructor(e){super(e),null!=e.output?this.output=e.output:this.output=i.Observable.ofEmpty(i.Observable.isStrictEqual)}onActivate(){let e=!1;this.cancelOnDeactivate(this.props.observableState.subscribe(this.props.valuePath,t=>{e=!0;let n=t;null!=this.props.outputValueGivenPartialState&&(n=this.props.outputValueGivenPartialState(n)),this.output.setValue(n),e=!1},!0)),this.cancelOnDeactivate(this.output.didChange.subscribe(t=>{if(1==e)return;let n=t;null!=this.props.partialStateGivenOutputValue&&(n=this.props.outputValueGivenPartialState(n)),this.props.observableState.update(this.props.valuePath,n)}))}}t.ObservableStateBinding=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pointer=void 0;const i=n(3),r=n(0),s=n(1),o=n(234);class a extends s.Actor{constructor(){super(),this.points=r.Observable.givenValue({}),this.didClick=new r.TypedEvent,this.didSingleClick=new r.TypedEvent,this.didDoubleClick=new r.TypedEvent,this.didStart=new r.TypedEvent,this.didEnd=new r.TypedEvent,this._hoveredElement=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.hoveredElement=r.ReadOnlyObservable.givenObservable(this._hoveredElement),this._referenceCountByTarget=new Map,this.onKeyDown=e=>{e.repeat||e.altKey&&"t"===e.key&&(this._keyboardTouchActive=!0,this.startTouch("first",this._screenSpaceKeyboardTouchPoint))},this.onKeyUp=e=>{e.repeat||this._keyboardTouchActive&&"t"===e.key&&(this._keyboardTouchActive=!1,this.endTouch("first",this._screenSpaceKeyboardTouchPoint))},this.onPointerDown=e=>{if(0!==e.button)return;const t=i.Point2.givenXY(e.clientX,e.clientY),n=e.isPrimary&&!this._keyboardTouchActive?"first":"second",r=this.startTouch(n,t);"first"===n&&this._pendingClick.pressButton(t),r&&(e.preventDefault(),e.stopPropagation())},this.onPointerMove=e=>{const t=i.Point2.givenXY(e.clientX,e.clientY);this._screenSpaceKeyboardTouchPoint=t;const n=e.isPrimary&&!this._keyboardTouchActive?"first":"second";this.moveTouch(n,t),"first"===n&&this._pendingClick.movePointer(t)},this.onPointerUp=e=>{if(0!==e.button)return;const t=i.Point2.givenXY(e.clientX,e.clientY),n=e.isPrimary&&!this._keyboardTouchActive?"first":"second",r=this.endTouch(n,t);"first"===n&&this._pendingClick.releaseButton(t),r&&(e.preventDefault(),e.stopPropagation())},this.onPointerEnter=e=>{0===e.buttons&&(this._pendingClick.reset(),null!=this._screenSpacePoint1&&this.endTouch("first",this._screenSpacePoint1),null!=this._screenSpacePoint2&&this.endTouch("second",this._screenSpacePoint2))},this.updateTouchPosition=(e,t)=>{"first"===e?this._screenSpacePoint1=t:"second"===e&&(this._screenSpacePoint2=t),this.notifyPointsChanged()}}static get instance(){return null==a._instance&&(a._instance=new a,a._instance.activate()),this._instance}onActivate(){this.cancelOnDeactivate(new r.Receipt(()=>{this._referenceCountByTarget.clear()})),this._pendingClick=this.addActor(new o.PendingClick),this.cancelOnDeactivate(this._pendingClick.didClick.subscribe(e=>{this.onClick(e)})),this.cancelOnDeactivate(this._pendingClick.didSingleClick.subscribe(e=>{this.onSingleClick(e)})),this.cancelOnDeactivate(this._pendingClick.didDoubleClick.subscribe(e=>{this.onDoubleClick(e)})),"undefined"!=typeof document&&(document.body.addEventListener("keydown",this.onKeyDown),document.body.addEventListener("keyup",this.onKeyUp),document.body.addEventListener("pointerdown",this.onPointerDown),document.body.addEventListener("pointermove",this.onPointerMove),document.body.addEventListener("pointerup",this.onPointerUp),document.body.addEventListener("pointerenter",this.onPointerEnter),this.cancelOnDeactivate(new r.Receipt(()=>{document.body.removeEventListener("keydown",this.onKeyDown),document.body.removeEventListener("keyup",this.onKeyUp),document.body.removeEventListener("pointerdown",this.onPointerDown),document.body.removeEventListener("pointermove",this.onPointerMove),document.body.removeEventListener("pointerup",this.onPointerUp),document.body.removeEventListener("pointerenter",this.onPointerEnter)})))}resetPendingClick(){this._pendingClick.reset()}addTarget(e){const t=this._referenceCountByTarget.get(e)||0;return this._referenceCountByTarget.set(e,t+1),new r.Receipt(()=>{if(!this._referenceCountByTarget.has(e))return;const t=this._referenceCountByTarget.get(e)-1;t<1?this._referenceCountByTarget.delete(e):this._referenceCountByTarget.set(e,t)})}startTouch(e,t){const n=this.optionalTargetElementGivenScreenPoint(t);this._screenSpaceKeyboardTouchPoint=t,this.updateTouchPosition(e,t);const i={screenPoint:t,target:n,namedTouchPoint:e,isHandled:!1};return this.didStart.emit(i),i.isHandled}moveTouch(e,t){"first"===e&&null==this._screenSpacePoint1||"second"===e&&null==this._screenSpacePoint2||(this._screenSpaceKeyboardTouchPoint=t,this.updateTouchPosition(e,t))}endTouch(e,t){const n=this.optionalTargetElementGivenScreenPoint(t);"first"===e?(this._screenSpacePoint1=void 0,this._screenSpacePoint2=void 0):this._screenSpacePoint2=void 0,this.notifyPointsChanged();const i={screenPoint:t,target:n,namedTouchPoint:e,isHandled:!1};return this.didEnd.emit(i),i.isHandled}onClick(e){const t=this.optionalTargetElementGivenScreenPoint(e);this.didClick.emit({screenPoint:e,target:t,namedTouchPoint:"first",isHandled:!1})}onSingleClick(e){const t=this.optionalTargetElementGivenScreenPoint(e);this.didSingleClick.emit({screenPoint:e,target:t,namedTouchPoint:"first",isHandled:!1})}onDoubleClick(e){const t=this.optionalTargetElementGivenScreenPoint(e);this.didDoubleClick.emit({screenPoint:e,target:t,namedTouchPoint:"first",isHandled:!1})}optionalTargetElementGivenScreenPoint(e){if(null==e)return;const t=document.elementsFromPoint(e.x,e.y).find(e=>this._referenceCountByTarget.has(e));return null!=t?t:void 0}notifyPointsChanged(){this.points.setValue({first:this._screenSpacePoint1,second:this._screenSpacePoint2})}}t.Pointer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingClick=void 0;const i=n(1),r=n(0),s=n(6);function o(e,t,n=4){if(null==e||null==t)return!1;return e.toDistance(t)<n}class a extends i.Actor{constructor(){super(),this.didClick=new r.TypedEvent,this.didSingleClick=new r.TypedEvent,this.didDoubleClick=new r.TypedEvent,this._evaluateLongPressLater=new s.Debounce({duration:s.Duration.givenSeconds(.5),fn:async()=>{this.evaluateLongPress()}})}onActivate(){this.cancelOnDeactivate(new r.Receipt(()=>{this._evaluateLongPressLater.clear()}))}pressButton(e){if(0!=this.isActive.value)switch(o(e,this._targetPoint)||this.reset(),this._state){case"idle":this._targetPoint=e,this._state="down",this._evaluateLongPressLater.invoke();break;case"click":this._state="down2"}}movePointer(e){o(e,this._targetPoint)||this.reset()}releaseButton(e){if(0!=this.isActive.value)switch(o(e,this._targetPoint)||this.reset(),this._state){case"down":this._state="click",this.notifyClick();break;case"down2":this.notifyDoubleClick()}}evaluateLongPress(){switch(this._state){case"down":this.notifyClick(),requestAnimationFrame(()=>{this.notifyDoubleClick()});break;case"down2":this.notifyDoubleClick();break;case"click":this.notifySingleClick();break;default:this.reset()}}reset(){this._targetPoint=void 0,this._state="idle",this._evaluateLongPressLater.clear()}notifyClick(){const e=this._targetPoint;this.didClick.emit(e)}notifySingleClick(){const e=this._targetPoint;this.reset(),this.didSingleClick.emit(e)}notifyDoubleClick(){const e=this._targetPoint;this.reset(),this.didDoubleClick.emit(e)}}t.PendingClick=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Preload=void 0;const i=n(0),r=n(50),s=n(1),o=n(23),a=n(24),l=n(236);class c extends s.Actor{constructor(){super(...arguments),this.didLoadVideo=new i.TypedEvent,this.didLoadImage=new i.TypedEvent,this.didLoadFont=new i.TypedEvent,this._isReady=i.Observable.givenValue(!0,i.Observable.isStrictEqual),this.isReady=i.ReadOnlyObservable.givenObservable(this._isReady),this._videoMetadataByUrl=new Map,this._imageDataUrlByUrl=new Map,this._loadedFontSet=new Set,this._loadingVideoSet=new Set,this._loadingFontSet=new Set,this._loadingImageSet=new Set,this._requestedFontSet=new Set}static get instance(){return null==this._instance&&(this._instance=new c,this._instance.activate()),this._instance}onActivate(){this._sequentialWorker=this.addActor(new s.SequentialWorker({}))}addImage(e,t=5,n){this._imageDataUrlByUrl.has(e)||(this._imageDataUrlByUrl.set(e,i.Observable.ofEmpty(i.Observable.isStrictEqual)),this._loadingImageSet.add(e),this._isReady.setValue(!1),this._sequentialWorker.addWork(async()=>{await this.loadImage(e,n)},void 0,t))}addFont(e,t=5){this._requestedFontSet.has(e)||(this._isReady.setValue(!1),this._requestedFontSet.add(e),this.loadGoogleFont(e))}addVideo(e,t=5){this._videoMetadataByUrl.has(e)||(this._videoMetadataByUrl.set(e,i.Observable.ofEmpty(i.Observable.isStrictEqual)),this._loadingVideoSet.add(e),this._isReady.setValue(!1),this._sequentialWorker.addWork(async()=>{await this.loadVideo(e)},void 0,t))}toPreloadedImageUrl(e){return this._imageDataUrlByUrl.has(e)||this.addImage(e),this._imageDataUrlByUrl.get(e)}toVideoMetadataGivenUrl(e){return this._videoMetadataByUrl.has(e)||this.addVideo(e),this._videoMetadataByUrl.get(e)}ensureImageLoaded(e){return this._imageDataUrlByUrl.has(e)||this.addImage(e),new Promise(t=>{const n=this.toPreloadedImageUrl(e).didChange.subscribe(e=>{null!=e&&setTimeout(()=>{n.cancel(),t()},1)},!0)})}ensureFontLoaded(e){return this._loadedFontSet.has(e)?Promise.resolve():this._loadingFontSet.has(e)?new Promise(t=>{const n=this.didLoadFont.subscribe(i=>{i===e&&(n.cancel(),t())})}):Promise.reject(new Error("This font style has not been defined. Call defineCustom() first."))}ensureVideoLoaded(e){return this._videoMetadataByUrl.has(e)||this.addVideo(e),new Promise(t=>{const n=this.toVideoMetadataGivenUrl(e).didChange.subscribe(e=>{null!=e&&setTimeout(()=>{n.cancel(),t()},1)},!0)})}ensureAllLoaded(){return!0===this._isReady.value?Promise.resolve():new Promise(e=>{const t=this.isReady.didChange.subscribe(n=>{!0===n&&(t.cancel(),e())})})}async loadImage(e,t){let n;t&&(n={credentials:"include"});const i=await o.blobGivenUrl(e,n),r=await a.dataUrlGivenBlob(i);this._imageDataUrlByUrl.get(e).setValue(r),this._loadingImageSet.delete(e),this.didLoadImage.emit(e),this.checkReady()}async loadVideo(e){const t=await l.videoMetadataGivenUrl(e);this._videoMetadataByUrl.get(e).setValue(t),this._loadingVideoSet.delete(e),this.didLoadVideo.emit(e),this.checkReady()}loadGoogleFont(e){if(null==e)return;if(this._loadingFontSet.has(e)||this._loadedFontSet.has(e))return;this._loadingFontSet.add(e);const t=document.createElement("link");t.href=e.url,t.rel="stylesheet",t.type="text/css",document.head.appendChild(t);new r(e.fontFamily,{weight:e.weight,style:e.style}).load().then(()=>{this._loadingFontSet.delete(e),this._loadedFontSet.add(e),this.didLoadFont.emit(e),this.checkReady()})}checkReady(){this._isReady.setValue(0===this._loadingFontSet.size&&0===this._loadingImageSet.size&&0===this._loadingVideoSet.size)}}t.Preload=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoMetadataGivenUrl=void 0;const i=n(3);t.videoMetadataGivenUrl=function(e){return new Promise((t,n)=>{const r=document.createElement("video");r.addEventListener("loadedmetadata",()=>{t({url:e,contentSize:i.Size2.givenWidthHeight(r.videoWidth,r.videoHeight)})},!1),r.addEventListener("error",()=>{n(new Error("Could not load image"))}),r.src=e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenSize=void 0;const i=n(0),r=n(6),s=n(3),o=n(1);class a extends o.Actor{constructor(){super(),this._availableSize=i.Observable.ofEmpty(s.Size2.isEqual),this.availableSize=i.ReadOnlyObservable.givenObservable(this._availableSize),this._scrollbarSize=i.Observable.ofEmpty(s.Size2.isEqual),this.scrollbarSize=i.ReadOnlyObservable.givenObservable(this._scrollbarSize),this.isPollingEnabled=i.Observable.givenValue(!0,i.Observable.isStrictEqual),this._measureScrollbarLater=new r.Debounce({fn:async()=>{this.measureScrollbar()},duration:r.Duration.givenMilliseconds(250)}),window.addEventListener("resize",()=>{this.recalculateSize()}),this.recalculateSize(),this._availableSize.value.isZero&&requestAnimationFrame(()=>{this.recalculateSize()}),this.addActor(new o.ConditionalActivator({input:this.isPollingEnabled,fn:e=>e,actor:new o.Timer({fn:()=>{this.recalculateSize()},isRepeating:!0,duration:r.Duration.givenSeconds(.25)})}))}static get instance(){return null==this._instance&&(this._instance=new a,this._instance.activate()),this._instance}measureScrollbar(){const e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.overflow="scroll",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const n=e.offsetWidth-t.offsetWidth,i=e.offsetHeight-t.offsetHeight;this._scrollbarSize.setValue(s.Size2.givenWidthHeight(n,i)),document.body.removeChild(e)}recalculateSize(){this._availableSize.setValue(s.Size2.givenWidthHeight(Math.min(window.outerWidth,window.innerWidth),Math.min(window.innerHeight,window.outerHeight))),this._measureScrollbarLater.invoke()}}t.ScreenSize=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollArea=t.styleGivenHexColor=void 0;const i=n(3),r=n(0),s=n(2),o=n(17),a=n(38),l=n(1),c=new Map;function u(e){const t=e.toHexString();if(!c.has(t)){const n=e.withAlpha(s.Percent.givenFraction(.2,1)).toHexString(),i=a.ElementStyle.givenDefinition({css:`\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        overflow: hidden;\n        transition: 0.2s ease color;\n        color: ${n};\n\n        &:hover {\n          color: ${t};\n        }\n\n        &::-webkit-scrollbar {\n          width: 22px;\n          height: 22px;\n          border-radius: 13px;\n          background-clip: padding-box;\n        }\n    \n        &::-webkit-scrollbar-corner {\n          background: transparent;\n        }\n\n        &::-webkit-scrollbar-thumb {\n          border-radius: 13px;\n          background-clip: padding-box;\n          border: 8px solid transparent;\n          box-shadow: inset 0 0 0 10px;\n        }\n      `});c.set(t,i)}return c.get(t)}t.styleGivenHexColor=u;class h extends l.Actor{constructor(e){switch(super(e),this._scrollbarSize=r.Observable.ofEmpty(),this.scrollbarSize=r.ReadOnlyObservable.givenObservable(this._scrollbarSize),e.direction){case"none":this._scrollbarSize.setValue(i.Size2.ofZero());break;case"horizontal":this._scrollbarSize.setValue(i.Size2.givenWidthHeight(0,22));break;case"vertical":this._scrollbarSize.setValue(i.Size2.givenWidthHeight(22,0));break;case"both":this._scrollbarSize.setValue(i.Size2.givenWidthHeight(22,22))}}get element(){return this._wrapper.element}onActivate(){let e;this._wrapper=this.addActor(o.ManagedElement.givenDefinition({tagName:"div",parentElement:this.props.parentElement})),null!=this.props.backgroundColor&&(this._wrapper.style.backgroundColor=this.props.backgroundColor.toHexString()),e=r.Observable.isObservable(this.props.scrollPositionColor)?this.props.scrollPositionColor:r.Observable.givenValue(this.props.scrollPositionColor),this.cancelOnDeactivate(e.didChange.subscribe(e=>{const t=u(e);null!=t&&(this._wrapper.element.className=t.toCombinedClassName())},!0));const t=e=>{switch(e){case"none":this._wrapper.style.overflowX="hidden",this._wrapper.style.overflowY="hidden";break;case"vertical":this._wrapper.style.overflowX="hidden",this._wrapper.style.overflowY="scroll";break;case"horizontal":this._wrapper.style.overflowX="scroll",this._wrapper.style.overflowY="hidden";break;case"both":this._wrapper.style.overflowX="scroll",this._wrapper.style.overflowY="scroll";break;default:throw new Error("Unsupported direction")}};r.Observable.isObservable(this.props.direction)?this.cancelOnDeactivate(this.props.direction.didChange.subscribe(e=>{t(e)},!0)):t(this.props.direction)}}t.ScrollArea=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollWatcher=void 0;const i=n(1),r=n(0),s=n(3);class o extends i.Actor{onActivate(){const e=()=>{this.props.position.setValue(s.Point2.givenXY(this.props.element.scrollLeft,this.props.element.scrollTop))};this.props.element.addEventListener("scroll",e),e(),this.cancelOnDeactivate(new r.Receipt(()=>{this.props.element.removeEventListener("scroll",e),this.props.position.setValue(void 0)}))}}class a extends i.Actor{constructor(e){super(e),this._position=r.Observable.ofEmpty(s.Point2.isEqual),this.position=r.ReadOnlyObservable.givenObservable(this._position),r.Observable.isObservable(e.element)?this._element=e.element:this._element=r.Observable.givenValue(e.element)}onActivate(){this.cancelOnDeactivate(this._element.didChange.subscribe(e=>{null!=this._activeWatcher&&(this.removeActor(this._activeWatcher),this._activeWatcher=void 0),null!=e&&(this._activeWatcher=this.addActor(new o({element:e,position:this._position})))},!0))}}t.ScrollWatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequentialChoice=void 0;const i=n(0);t.SequentialChoice=class{constructor(e){if(this._nextOption=i.Observable.ofEmpty(),this.nextOption=i.ReadOnlyObservable.givenObservable(this._nextOption),this._previousOption=i.Observable.ofEmpty(),this.previousOption=i.ReadOnlyObservable.givenObservable(this._previousOption),this.setCurrentIndex=e=>{const t=this.props.options.length;if(null!=this.props.options&&0!==t||(this._currentIdx=void 0),this.currentOption.setValue(this.props.options[e%t]),t>1)if(this._nextOption.setValue(this.props.options[(e+1)%t]),e<1){const n=t-Math.abs(e-1)%t;this._previousOption.setValue(this.props.options[n])}else this._previousOption.setValue(this.props.options[(e-1)%t]);this._currentIdx=e},this.selectNextOption=()=>{this.setCurrentIndex(this._currentIdx+1)},this.selectPreviousOption=()=>{0===this._currentIdx?this.setCurrentIndex(this.props.options.length-1):this.setCurrentIndex(this._currentIdx-1)},this.props=e,this.currentOption=e.output||i.Observable.ofEmpty(i.Observable.isStrictEqual),e.options.length>0){if(null!=this.currentOption.value){const t=e.options.indexOf(this.currentOption.value);-1!==t?this.setCurrentIndex(t):this.currentOption.setValue(void 0)}null==this.currentOption.value&&this.setCurrentIndex(0)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StepDelayBinding=void 0;const i=n(0),r=n(1);class s extends r.Actor{constructor(e){super(e),null!=e.output?this._output=e.output:this._output=i.Observable.ofEmpty(i.Observable.isStrictEqual),this.output=i.ReadOnlyObservable.givenObservable(this._output)}onActivate(){const e=[];this.cancelOnDeactivate(this.props.input.didChange.subscribe(t=>{e.push(t),e.length>this.props.stepsBehind&&this._output.setValue(e.shift())},!0))}}t.StepDelayBinding=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextInputBinding=void 0;const i=n(1),r=n(0),s=n(2);class o extends i.Actor{constructor(e){if(super(e),this._displayText=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.displayText=r.ReadOnlyObservable.givenObservable(this._displayText),this._isEmpty=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.isEmpty=r.ReadOnlyObservable.givenObservable(this._isEmpty),this._rawInputValue=r.Observable.ofEmpty(r.Observable.isStrictEqual),this.rawInputText=r.ReadOnlyObservable.givenObservable(this._rawInputValue),null==e.inputElement)throw new Error("Input is required");const t=e.inputElement.nodeName.toLowerCase();if("input"!==t&&"textarea"!==t)throw new Error(`Expected an input or textarea element, but got '${t}'`);this._inputElement=e.inputElement,this.output=this.props.value||r.Observable.ofEmpty(r.Observable.isStrictEqual)}onActivate(){this._previousDisplayText=this._inputElement.value,this._caretPosition=this._inputElement.selectionStart,this._inputElement.addEventListener("keydown",e=>{this._caretPosition=this._inputElement.selectionStart,this._previousDisplayText=this._inputElement.value,this._rawInputValue.setValue(this._inputElement.value),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(this._inputElement.value))}),this._inputElement.addEventListener("input",e=>{const t=this._inputElement.value;let n,i=this.props.valueGivenDisplayText(t);if(null!=this.props.overrideDisplayText){if(n=this.props.overrideDisplayText({displayText:t,value:i,previousDisplayText:this._previousDisplayText,previousValue:this.output.value}),null==n)return void this.onOverride(this._previousDisplayText,!0);this.onOverride(n,!1),i=this.props.valueGivenDisplayText(n)}this.output.setValue(i),null!=n&&requestAnimationFrame(()=>{this._inputElement.value=n,this._rawInputValue.setValue(this._inputElement.value),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(this._inputElement.value))})}),this.cancelOnDeactivate(this.output.didChange.subscribe(e=>{const t=this.props.displayTextGivenValue(e);this._inputElement.value=t||"",this._rawInputValue.setValue(this._inputElement.value),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(this._inputElement.value))},!0))}onOverride(e,t){this._previousDisplayText=e,this._inputElement.value=e,t&&this._inputElement.setSelectionRange(this._caretPosition,this._caretPosition),this._rawInputValue.setValue(e),this._isEmpty.setValue(s.StringUtil.stringIsEmpty(e))}}t.TextInputBinding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transform=t.matrix3dOfIdentity=void 0;const i=n(3),r=n(244);function s(e,t,n){const i=t.withMultipliedScalar(e.x),r=n.withMultipliedScalar(e.y);return i.withAddedVector(r)}function o(){let e=[];for(let t=0;t<16;t++)t%5==0?e.push(1):e.push(0);return e}function a(e){if(null!=e){if(e&&e.constructor===Array){let t=e.filter(e=>"number"==typeof e).filter(e=>!isNaN(e));if(6===e.length&&6===t.length){let e=o();return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}if(16===e.length&&16===t.length)return e}throw new TypeError(`Expected a number[] with length 6 or 16, but got '${e}'`)}}t.matrix3dOfIdentity=o;class l{constructor(e){if(this.isEqual=e=>null!=e&&(e instanceof l&&this.matrix3d.every((t,n)=>e.matrix3d[n]===t)),null==e)throw new Error("Matrix is required");this.matrix3d=e}static givenCssMatrixTransform(e){if("string"==typeof e){let t=e.match(/matrix(3d)?\(([^)]+)\)/);if(t){const e=a(t[2].split(", ").map(parseFloat));return new l(e)}}throw new Error("Could not create Transform from CSS matrix transform string")}static givenMatrix3D(e){return new l(e)}static givenCornersAndSize(e,t){const n=a(r.matrixTransformGivenCorners(e,t));if(null!=n)return new l(n)}static givenScale(e){return new l(a([e.width,0,0,e.height,0,0]))}static givenPoints(e,t,n,r,s){const o=i.Vector2.givenPoint(e),a=i.Vector2.givenPoint(t),c=i.Vector2.givenPoint(n),u=i.Vector2.givenPoint(r),h=a.withSubtractedVector(o),d=u.withSubtractedVector(c);let p,v;if(s){const e=h.toDotProduct(h);p=h.toDotProduct(d)/e,v=(h.x*d.y-h.y*d.x)/e}else{const e=Math.sqrt(h.toDotProduct(h));p=Math.sqrt(h.toDotProduct(d))/e,v=0}const b=i.Vector2.givenXY(p,v),f=i.Vector2.givenXY(-v,p),m=b.withMultipliedScalar(o.x),g=f.withMultipliedScalar(o.y),y=m.withAddedVector(g),_=c.withSubtractedVector(y),w=[b.x,b.y,0,0,f.x,f.y,0,0,0,0,0,0,_.x,_.y,0,0];return new l(w)}static isEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.isEqual(t)}get is2d(){return 0===this.matrix3d[2]&&0===this.matrix3d[3]}toTranslation(){const e=this.matrix3d[12],t=this.matrix3d[13];return i.Point2.givenXY(e,t)}toCssTranslation(){const e=this.toTranslation();return`translate(${e.x}px, ${e.y}px)`}toRotation(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5];if(0!=e||0!=t){const n=Math.sqrt(e*e+t*t),r=t>0?Math.acos(e/n):-Math.acos(e/n);return i.Rotation.givenRadians(r)}if(0!=n||0!=r){const e=Math.sqrt(n*n+r*r),t=Math.PI/2-(r>0?Math.acos(-n/e):-Math.acos(n/e));return i.Rotation.givenRadians(t)}return i.Rotation.givenDegrees(0)}toCssRotation(){return`rotate(${this.toRotation().toDegrees()}deg)`}toScale(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5],s=e*r-t*n;if(0!=e||0!=t){const n=Math.sqrt(e*e+t*t);return i.Size2.givenWidthHeight(n,s/n)}if(0!=n||0!=r){const e=Math.sqrt(n*n+r*r);return i.Size2.givenWidthHeight(s/e,e)}return i.Size2.ofZero()}toCssScale(){const e=this.toScale();return`scale(${e.width}, ${e.height})`}toSkewX(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5];if(0!=e||0!=t){const s=Math.sqrt(e*e+t*t),o=Math.atan((e*n+t*r)/(s*s));return i.Rotation.givenRadians(o)}return i.Rotation.ofZero()}toSkewY(){const e=this.matrix3d[0],t=this.matrix3d[1],n=this.matrix3d[4],r=this.matrix3d[5];if(0!=e||0!=t)return i.Rotation.ofZero();if(0!=n||0!=r){const s=Math.sqrt(n*n+r*r),o=Math.atan((e*n+t*r)/(s*s));return i.Rotation.givenRadians(o)}return i.Rotation.ofZero()}toCssSkew(){const e=this.toSkewX(),t=this.toSkewY();return`skew(${e.toDegrees()}deg, ${t.toDegrees()}deg)`}toCssMatrixTransform(){return`matrix3d(${this.matrix3d.join(", ")})`}toCssCombinedTransform(){return[this.toCssTranslation(),this.toCssRotation(),this.toCssScale(),this.toCssSkew()].join(" ")}toTranslateVector(){const e=this.matrix3d[12],t=this.matrix3d[13];return i.Vector2.givenXY(e,t)}toVectors(){return[i.Vector2.givenXY(this.matrix3d[0],this.matrix3d[1]),i.Vector2.givenXY(this.matrix3d[4],this.matrix3d[5])]}toTransformedPoint(e){const t=[e.x,e.y,0,1],n=[0,0,0,0];for(let e=0;e<4;++e){let i=0;for(let n=0;n<4;++n)i+=this.matrix3d[4*n+e]*t[n];n[e]=i}for(let e=0;e<4;++e)n[e]=n[e]/n[3];return i.Point2.givenXY(n[0],n[1])}withCascade(e){const[t,n]=e.toVectors(),[i,r]=this.toVectors(),o=s(t,i,r),a=s(n,i,r),c=s(this.toTranslateVector(),t,n),u=e.toTranslateVector().withAddedVector(c),h=[...this.matrix3d];return h[0]=o.x,h[1]=o.y,h[4]=a.x,h[5]=a.y,h[12]=u.x,h[13]=u.y,new l(h)}withTranslation(e){const t=[...this.matrix3d];return t[12]=e.x,t[13]=e.y,new l(t)}}t.Transform=l,l.identity=new l([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matrixTransformGivenCorners=void 0;const i=n(54),r=n(55);t.matrixTransformGivenCorners=function(e,t){const{width:n,height:s}=t,o=[{x:0,y:0},{x:0,y:s},{x:n,y:0},{x:n,y:s}],a=[{x:e.leftTop.x,y:e.leftTop.y},{x:e.leftBottom.x,y:e.leftBottom.y},{x:e.rightTop.x,y:e.rightTop.y},{x:e.rightBottom.x,y:e.rightBottom.y}],l=i.Matrix.givenRows([[o[0].x,o[0].y,1,0,0,0,-o[0].x*a[0].x,-o[0].y*a[0].x],[0,0,0,o[0].x,o[0].y,1,-o[0].x*a[0].y,-o[0].y*a[0].y],[o[1].x,o[1].y,1,0,0,0,-o[1].x*a[1].x,-o[1].y*a[1].x],[0,0,0,o[1].x,o[1].y,1,-o[1].x*a[1].y,-o[1].y*a[1].y],[o[2].x,o[2].y,1,0,0,0,-o[2].x*a[2].x,-o[2].y*a[2].x],[0,0,0,o[2].x,o[2].y,1,-o[2].x*a[2].y,-o[2].y*a[2].y],[o[3].x,o[3].y,1,0,0,0,-o[3].x*a[3].x,-o[3].y*a[3].x],[0,0,0,o[3].x,o[3].y,1,-o[3].x*a[3].y,-o[3].y*a[3].y]]).withInverse();if(null==l)return;const c=new r.Vector([a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y]).withMultipliedMatrix(l),u=i.Matrix.givenRows([[c.elements[0],c.elements[1],0,c.elements[2]],[c.elements[3],c.elements[4],0,c.elements[5]],[0,0,1,0],[c.elements[6],c.elements[7],0,1]]),h=[];for(var d=0;d<=3;d++)for(var p=0;p<=3;p++)h.push(u.toOptionalValueGivenRowAndColumn(p,d));return h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveBox=void 0;const i=n(1),r=n(5),s=n(2);class o extends i.Actor{onActivate(){const e=this.addActor(a.toManagedElement({tagName:"div",parentElement:this.props.parentElement})),t=this.addActor(new r.IntersectionWatcher({element:e.element,minimumVisiblePercent:s.Percent.givenFraction(3,5)}));this.cancelOnDeactivate(t.isElementVisible.didChange.subscribe(t=>{e.setModifier("isVisible",1==t)},!0))}}t.ActiveBox=o;const a=r.ElementStyle.givenDefinition({css:"\n    width: 250px;\n    height: 250px;\n    margin: 25px;\n    background: rgba(255,255,255,0.1);\n    transition: 0.2s ease background;\n  ",modifiers:{isVisible:"\n      background: #0055FF;\n    "}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollAreaDemo=void 0;const i=n(1),r=n(5),s=n(15),o=n(0);class a extends i.Actor{constructor(){super(...arguments),this.parentElement=o.Observable.ofEmpty(),this.isVisible=o.Observable.ofEmpty()}onActivate(){const e=this.addActor(l.toManagedElement({tagName:"div",parentElement:this.parentElement})),t=this.addActor(new r.ScrollArea({parentElement:e.element,direction:"both",scrollPositionColor:s.Color.givenHexString("#FFFFFF")}));this.addActor(c.toManagedElement({tagName:"div",parentElement:t.element}))}}t.ScrollAreaDemo=a;const l=r.ElementStyle.givenDefinition({css:"\n    position: absolute;\n    width: 300px;\n    height: 300px;\n    transform: translate(-50%, -50%);\n    left: 50%;\n    top: 50%;\n    color: white;\n  "}),c=r.ElementStyle.givenDefinition({css:"\n    width: 600px;\n    height: 600px;\n    background: linear-gradient(to bottom right, red, blue);\n  "})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExamplesHome=void 0;const i=n(248);Object.defineProperty(t,"ExamplesHome",{enumerable:!0,get:function(){return i.ExamplesHome}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExamplesHome=void 0;const i=n(15),r=n(11),s=n(1),o=n(249),a=n(250);class l extends s.Actor{onActivate(){const e=this.addActor(c.toManagedElement({tagName:"div",parentElement:document.body})),t=this.addActor(u.toManagedElement({tagName:"div",parentElement:e.element})),n=this.addActor(new r.ScrollArea({parentElement:t.element,direction:"vertical",scrollPositionColor:i.Color.givenHexString("#444444"),backgroundColor:i.Color.givenHexString("#fafafa")})),l=this.addActor(h.toManagedElement({tagName:"div",parentElement:e.element})),d=this.addActor(new r.ScrollArea({parentElement:l.element,direction:"vertical",scrollPositionColor:i.Color.givenHexString("#DDDDDD"),backgroundColor:i.Color.givenHexString("#181818")})),p=d.element,v=d.element;this.addActor(new a.ExamplesSidebar({parentElement:n.element,title:this.props.title,definitions:this.props.definitions})),this.addActor(new s.ArrayActivator({input:this.props.definitions,fn:e=>new o.ExamplesSection({parentElement:p,scrollElement:v,title:e.title,demoActor:e.actor})}))}}t.ExamplesHome=l;const c=r.ElementStyle.givenDefinition({css:"\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    display: flex;\n    background: #FFF;\n\n    @media screen and (max-width: 600px) {\n      display: block;\n    }\n  "}),u=r.ElementStyle.givenDefinition({css:"\n    width: 250px;\n    position: relative;\n    border-right: 1px solid rgba(0, 0, 0, 0.05);\n    flex-shrink: 0;\n\n    @media screen and (max-width: 600px) {\n      width: 100%;\n    }\n  "}),h=r.ElementStyle.givenDefinition({css:"\n    flex-grow: 1;\n    position: relative;\n  "})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExamplesSection=void 0;const i=n(1),r=n(11),s=n(2);class o extends i.Actor{onActivate(){const e=this.addActor(a.toManagedElement({tagName:"div",parentElement:this.props.parentElement})),t=this.addActor(l.toManagedElement({tagName:"div",parentElement:e.element})),n=(this.addActor(c.toManagedElement({tagName:"div",parentElement:e.element})),document.createElement("a"));n.id=s.StringUtil.stringWithCase(this.props.title,"kebab-case"),t.element.appendChild(n);const i=document.createElement("h2");i.innerHTML=this.props.title,t.element.appendChild(i);const o=this.addActor(u.toManagedElement({tagName:"div",parentElement:t.element})),h=this.addActor(new r.IntersectionWatcher({element:o.element,scrollElement:this.props.scrollElement,minimumVisiblePercent:s.Percent.givenFraction(4,5)}));this.props.demoActor.parentElement.setValue(o.element),this.addActor(this.props.demoActor),this.cancelOnDeactivate(h.isElementVisible.didChange.subscribe(e=>{o.setModifier("isVisible",e),this.props.demoActor.isVisible.setValue(e)},!0))}}t.ExamplesSection=o;const a=r.ElementStyle.givenDefinition({css:'\n    min-height: 400px;\n    display: grid;\n    background: #FFF;\n    grid-template-columns: 1fr 1fr;\n    grid-template-areas:\n      "description code";\n\n    @media screen and (max-width: 600px) {\n      display: block;\n    }\n  '}),l=r.ElementStyle.givenDefinition({css:"\n    border-bottom: 1px solid rgba(180, 180, 180, 0.2);\n    background: #FFF;\n    padding: 80px 40px;\n    grid-area: description;\n\n    & > h2 {\n      color: #181818;\n      margin: 0 0 20px 0;\n      padding: 0;\n    }\n\n    @media screen and (max-width: 600px) {\n      padding: 30px 15px;\n\n      & > h2 {\n        font-size: 15px;\n      }\n    }\n  "}),c=r.ElementStyle.givenDefinition({css:"\n    border-bottom: 1px solid rgba(255,255,255,0.1);\n    background: #181818;\n    padding: 80px 40px;\n    grid-area: code;\n  "}),u=r.ElementStyle.givenDefinition({css:"\n    width: 600px;\n    height: 500px;\n    background: #17161E;\n    border-radius: 12px;\n    position: relative;\n    overflow: hidden;\n\n    & > * {\n      border-radius: 12px;\n      opacity: 0.4;\n      transition: 0.3s ease opacity;\n    }\n\n    @media screen and (max-width: 600px) {\n      width: calc(100% + 30px);\n      border-radius: 0;\n      height: 300px;\n      margin-left: -15px;\n      margin-right: -15px;\n\n      & > * {\n        border-radius: 0;\n      }\n    }\n  ",modifiers:{isVisible:"\n      & > * {\n        opacity: 1;\n      }\n    "}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExamplesSidebar=void 0;const i=n(1),r=n(11),s=n(2);class o extends i.Actor{onActivate(){const e=this.addActor(a.toManagedElement({tagName:"div",parentElement:this.props.parentElement}));this.addActor(c.toManagedElement({tagName:"div",parentElement:e.element})).element.innerHTML=this.props.title,this.addActor(new i.ArrayActivator({input:this.props.definitions,fn:t=>{const n=l.toManagedElement({tagName:"a",parentElement:e.element,transitionIn:()=>{n.element.href="#"+s.StringUtil.stringWithCase(t.title,"kebab-case"),n.element.innerHTML=t.title}});return n}}))}}t.ExamplesSidebar=o;const a=r.ElementStyle.givenDefinition({css:"\n    padding: 0 0 0 20px;\n\n    @media screen and (max-width: 600px) {\n      background: #FAFAFA;\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 250px;\n      height: 100vh;\n      z-index: 10;\n      display: none;  /* TODO */\n    }\n  "}),l=r.ElementStyle.givenDefinition({css:"\n    cursor: pointer;\n    display: block;\n    color: #000;\n    text-decoration: none;\n    font-size: 13px;\n    line-height: 19.5px;\n    margin-top: 5px;\n\n    &:hover {\n      color: #0055FF;\n    }\n  "}),c=r.ElementStyle.givenDefinition({css:"\n    font-weight: bold;\n    height: 80px;\n    padding: 20px 0;\n    box-sizing: border-box;\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    font-size: 20px;\n    line-height: 20px;\n    color: #181818;\n  "})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndoDemo=void 0;const i=n(0),r=n(5),s=n(1),o=n(3);class a extends s.Actor{constructor(){super(...arguments),this.parentElement=i.Observable.ofEmpty(),this.isVisible=i.Observable.ofEmpty()}onActivate(){const e=this.addActor(l.toManagedElement({tagName:"div",parentElement:this.parentElement})),t=this.addActor(c.toManagedElement({tagName:"div",parentElement:e.element})),n=this.addActor(h.toManagedElement({tagName:"div",parentElement:this.parentElement})),s=this.addActor(d.toManagedElement({tagName:"div",parentElement:this.parentElement})),a=this.addActor(u.toManagedElement({tagName:"button",parentElement:n.element}));a.element.innerHTML="Undo";const p=this.addActor(u.toManagedElement({tagName:"button",parentElement:n.element}));p.element.innerHTML="Redo";const v=this.addActor(u.toManagedElement({tagName:"button",parentElement:n.element}));v.element.innerHTML="Clear and keep current";const b=this.addActor(u.toManagedElement({tagName:"button",parentElement:n.element}));b.element.innerHTML="Clear all";const f=new r.UndoContext(void 0,10);f.currentIndex.didChange.subscribe(()=>{const e=f.steps.toValues();s.element.innerHTML="";const t=f.currentIndex.value;e.forEach((e,n)=>{const i=document.createElement("div");i.innerHTML=`${e.x},${e.y}`,n===t&&(i.style.fontWeight="bold",i.style.color="#FFF"),s.element.appendChild(i)}),b.setModifier("isDisabled",0===e.length),v.setModifier("isDisabled",e.length<2)},!0),this.cancelOnDeactivate(f.canUndo.didChange.subscribe(e=>{a.setModifier("isDisabled",0==e)},!0)),this.cancelOnDeactivate(f.canRedo.didChange.subscribe(e=>{p.setModifier("isDisabled",0==e)},!0)),this.cancelOnDeactivate(v.addManagedEventListener("click",()=>{f.clearSteps("keepCurrent")})),this.cancelOnDeactivate(b.addManagedEventListener("click",()=>{f.clearSteps("clearAll")})),this.cancelOnDeactivate(a.addManagedEventListener("click",()=>{f.undo()})),this.cancelOnDeactivate(p.addManagedEventListener("click",()=>{f.redo()})),this.cancelOnDeactivate(f.output.didChange.subscribe(e=>{null!=e?(t.style.display="block",t.style.transform=`translate(${e.x}px, ${e.y}px)`):t.style.display="none"},!0));const m=t=>{const n=e.element.getBoundingClientRect();f.pushStep(o.Point2.givenXY(Math.round(t.clientX-n.left),Math.round(t.clientY-n.top)))};e.element.addEventListener("click",m),this.cancelOnDeactivate(new i.Receipt(()=>{e.element.removeEventListener("click",m)}))}}t.UndoDemo=a;const l=r.ElementStyle.givenDefinition({css:"\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  "}),c=r.ElementStyle.givenDefinition({css:"\n    position: absolute;\n    left: -10px;\n    top: -10px;\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    background: blue;\n  "}),u=r.ElementStyle.givenDefinition({css:"\n    appearance: none;\n    background: blue;\n    border: none;\n    color: #FFF;\n    border-radius: 6px;\n    padding: 10px 20px;\n    outline: none;\n    transition: 0.1s ease transform;\n    user-select: none;\n\n    &:active {\n      transform: scale(0.95);\n    }\n  ",modifiers:{isDisabled:"\n      opacity: 0.3;\n      pointer-events: none;\n    "}}),h=r.ElementStyle.givenDefinition({css:"\n    display: grid;\n    position: absolute;\n    grid-template-columns: auto auto;\n    grid-gap: 0.5rem;\n    bottom: 20px;\n    left: 20px;\n  "}),d=r.ElementStyle.givenDefinition({css:"\n    position: absolute;\n    right: 20px;\n    top: 20px;\n    bottom: 20px;\n    text-align: right;\n    font-family: monospace;\n    color: #888;\n    user-select: none;\n  "})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardWatcherDemo=void 0;const i=n(1),r=n(5),s=n(0);class o extends i.Actor{constructor(){super(...arguments),this.parentElement=s.Observable.ofEmpty(),this.isVisible=s.Observable.ofEmpty()}onActivate(){const e=this.addActor(a.toManagedElement({tagName:"div",parentElement:this.parentElement}));this.cancelOnDeactivate(r.KeyboardWatcher.instance.keys.didChange.subscribe(t=>{null!=t&&0!=t.length?(e.element.innerHTML="",t.forEach(t=>{const n=document.createElement("div");n.innerHTML=t,e.element.appendChild(n)})):e.element.innerHTML="No keys pressed"},!0))}}t.KeyboardWatcherDemo=o;const a=r.ElementStyle.givenDefinition({css:"\n    color: #FFF;\n    font-family: monospace;\n    font-size: 1.5rem;\n    padding: 40px;\n    user-select: none;\n  "})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementSizeWatcherDemo=void 0;const i=n(0),r=n(6),s=n(5),o=n(1);class a extends o.Actor{constructor(){super(...arguments),this.parentElement=i.Observable.ofEmpty(),this.isVisible=i.Observable.ofEmpty()}onActivate(){const e=this.addActor(l.toManagedElement({tagName:"div",parentElement:this.parentElement})),t=this.addActor(c.toManagedElement({tagName:"div",parentElement:e.element,transitionIn:()=>{t.toggleModifier("isSmall")}})),n=this.addActor(new s.ElementSizeWatcher({element:t.element}));this.addActor(new o.ConditionalActivator({input:this.isVisible,fn:e=>e,actor:new o.Timer({duration:r.Duration.givenSeconds(1.5),isRepeating:!0,fn:()=>{t.toggleModifier("isSmall")}})})),this.cancelOnDeactivate(n.output.didChange.subscribe(e=>{if(null==e)return;const{width:n,height:i}=e;t.element.innerHTML=`${Math.round(n)}px ${Math.round(i)}px`},!0))}}t.ElementSizeWatcherDemo=a;const l=s.ElementStyle.givenDefinition({css:"\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  "}),c=s.ElementStyle.givenDefinition({css:"\n    background: #0055FF;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: white;\n    width: 240px;\n    height: 200px;\n    transition: 1s ease all;\n    border-radius: 8px;\n    font-family: monospace;\n    user-select: none;\n  ",modifiers:{isSmall:"\n      width: 350px;\n      height: 100px;\n    "}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionDemo=void 0;const i=n(0),r=n(6),s=n(5),o=n(1);class a extends o.Actor{constructor(){super(...arguments),this.parentElement=i.Observable.ofEmpty(),this.isVisible=i.Observable.ofEmpty()}onActivate(){const e=this.addActor(l.toManagedElement({tagName:"div",parentElement:this.parentElement})),t=i.Observable.ofEmpty();this.addActor(new o.Timer({duration:r.Duration.givenSeconds(2),isRepeating:!0,fn:()=>{null==t.value?t.setValue(e.element):t.setValue(void 0)}}));const n=this.addActor(c.toManagedElement({tagName:"div",parentElement:t})),s=this.addActor(u.toManagedElement({tagName:"div",parentElement:n.element,transitionIn:()=>{s.setModifier("isVisible",!0)},transitionOut:async()=>{s.setModifier("isVisible",!1),await r.Duration.givenSeconds(.5).toDelay()}}))}}t.TransitionDemo=a;const l=s.ElementStyle.givenDefinition({css:"\n    \n  "}),c=s.ElementStyle.givenDefinition({css:"\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  "}),u=s.ElementStyle.givenDefinition({css:"\n    border-radius: 50%;\n    background: white;\n    width: 80px;\n    height: 80px;\n    transform: scale(0.1);\n    transition: 0.5s ease transform;\n  ",modifiers:{isVisible:"\n      transform: scale(1);\n    "}})}]);
//# sourceMappingURL=main.js.map